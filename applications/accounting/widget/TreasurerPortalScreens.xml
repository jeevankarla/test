<?xml version="1.0" encoding="UTF-8"?>
<screens xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="http://ofbiz.apache.org/dtds/widget-screen.xsd">
        
   <!--   <screen name="CommonTreasurerPortalDecorator">
        <section>
            <actions>
                <set field="headerItem" value="FindFinAccount"/>
            </actions>
            <widgets>
                <decorator-screen name="main-decorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                        <section>
                            <condition>
                                <not><if-service-permission service-name="acctgFinAcctPermissionCheck" main-action="VIEW"/></not>
                            </condition>
                            <widgets>
                                <label style="h3" text="${uiLabelMap.AccountingViewPermissionError}"/>
                            </widgets>
                        </section>
                        <decorator-section-include name="body"/>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen> -->
    <screen name="ListNewBankAccounts">
        <section>
            <actions>
                <property-map resource="AccountingUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="hasFinEditPermission" from-field="permResult.hasPermission"/> 
            </actions>
            <widgets>
                    <include-screen name="FindFinAccountPortal"/>
            </widgets>
        </section>
    </screen>
     <screen name="FindFinAccountPortal">
        <section>
            <actions>
                <set field="titleProperty" value="PageTitleFindFinAccount"/>
                  <set field="tabButtonItem" value="FindFinAccountAlt"/>
                 <set field="tabButtonItem2" value="FindFinAccountAlt"/>
                <set field="viewIndex" from-field="parameters.VIEW_INDEX" type="Integer" default-value="0"/>
                <set field="viewSize" from-field="parameters.VIEW_SIZE" type="Integer" default-value="20"/>
               <!--  <set field="displayAdvancedSearch" from-field="parameters.displayAdvancedSearch"/> -->
                <set field="parameters.ownerPartyId" value="Company"/>
                <set field="parameters.finAccountTypeId" value="BANK_ACCOUNT"/>
                <set field="parameters.statusId" value="FNACT_ACTIVE"/>
                <set field="noConditionFind" value="Y"/>
                <!-- <field name="noConditionFind"><hidden value="Y"/> -->
                <set field="screenFlag" value="BANKACCOUNT" /> 
                <service service-name="acctgFinAcctPermissionCheck" result-map="permResult">
                    <field-map field-name="mainAction" value="FINACCOUNT_EDIT"/>
                </service>
                <set field="hasFinEditPermission" from-field="permResult.hasPermission"/>
            </actions>
             <widgets>
                    <include-menu name="CompanyFinAccountTabBar" location="component://accounting/widget/AccountingMenus.xml"/>
                    	<section>
							<widgets>
								<!-- <container style="button-bar">
									<link target="CreateNewFineorPenalty" text="Create New" style="buttontext create">				
									</link>
								</container> -->
								<!-- <screenlet title="Find Fines and Penalties">				
									<include-form name="FindFinesAndPenalties" location="component://byproducts/widget/TransporterForms.xml" />
								</screenlet> -->
								<screenlet title="Bank Accounts List">				
									 <include-form name="ListFinAccountsAlt" location="component://accounting/widget/TreasurerPortalForms.xml"/>
								</screenlet>
							</widgets>      
                    	</section>
               </widgets>
        </section>
    </screen>
    <screen name="FindNonBankAccount">
        <section>
            <actions>
                <set field="titleProperty" value="Non Financial Accounts"/>
                  <set field="tabButtonItem" value="FindNonBankAccount"/>
                 <set field="tabButtonItem2" value="FindNonBankAccount"/>
                <set field="viewIndex" from-field="parameters.VIEW_INDEX" type="Integer" default-value="0"/>
                <set field="viewSize" from-field="parameters.VIEW_SIZE" type="Integer" default-value="20"/>
               <!--  <set field="displayAdvancedSearch" from-field="parameters.displayAdvancedSearch"/> -->
                <set field="parameters.ownerPartyId" value="Company"/>
               <!--  <set field="parameters.finAccountTypeId" value="BANK_ACCOUNT"/> -->
                <set field="noConditionFind" value="Y"/>
                <set field="screenFlag" value="NON_BANKACCOUNT" /> 
                <set field="parameters.screenFlag" value="NON_BANKACCOUNT" /> 
                <service service-name="acctgFinAcctPermissionCheck" result-map="permResult">
                    <field-map field-name="mainAction" value="FINACCOUNT_EDIT"/>
                </service>
                <set field="hasFinEditPermission" from-field="permResult.hasPermission"/>
                 <script location="component://accounting/webapp/accounting/WEB-INF/actions/EditFinaccount.groovy"/>
            </actions>
            <widgets>
              <decorator-screen name="CommonTreasurerPortalDecorator" location="component://accounting/widget/CommonScreens.xml"> 
                    <decorator-section name="body">
                    <include-menu name="CompanyFinAccountTabBar" location="component://accounting/widget/AccountingMenus.xml"/>
                    	<section>
							<widgets>
								<!-- <container style="button-bar">
									<link target="CreateNewFineorPenalty" text="Create New" style="buttontext create">				
									</link>
								</container> -->
								<!-- <screenlet title="Find Fines and Penalties">				
									<include-form name="FindFinesAndPenalties" location="component://byproducts/widget/TransporterForms.xml" />
								</screenlet> -->
								<screenlet title="Non Bank Accounts List">				
									 <include-form name="ListNonBankAccounts" location="component://accounting/widget/TreasurerPortalForms.xml"/>
								</screenlet>
							</widgets>      
                    	</section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>  
    <screen name="FindFinAccountAlt">
        <section>
            <actions>
                <set field="titleProperty" value="PageTitleFindFinAccount"/>
                  <set field="tabButtonItem" value="FindFinAccountAlt"/>
                 <set field="tabButtonItem2" value="FindFinAccountAlt"/>
                <set field="viewIndex" from-field="parameters.VIEW_INDEX" type="Integer" default-value="0"/>
                <set field="viewSize" from-field="parameters.VIEW_SIZE" type="Integer" default-value="20"/>
               <!--  <set field="displayAdvancedSearch" from-field="parameters.displayAdvancedSearch"/> -->
                <set field="parameters.ownerPartyId" value="Company"/>
                <set field="parameters.finAccountTypeId" value="BANK_ACCOUNT"/>
                <set field="noConditionFind" value="Y"/>
                <!-- <field name="noConditionFind"><hidden value="Y"/> -->
                <set field="screenFlag" value="BANKACCOUNT" /> 
                <service service-name="acctgFinAcctPermissionCheck" result-map="permResult">
                    <field-map field-name="mainAction" value="FINACCOUNT_EDIT"/>
                </service>
                 <script location="component://accounting/webapp/accounting/WEB-INF/actions/EditFinaccount.groovy"/>
                <set field="hasFinEditPermission" from-field="permResult.hasPermission"/>
            </actions>
            <widgets>
                    <decorator-screen name="CommonTreasurerPortalDecorator" location="component://accounting/widget/CommonScreens.xml"> 
                    <decorator-section name="body">
                    <include-menu name="CompanyFinAccountTabBar" location="component://accounting/widget/AccountingMenus.xml"/>
                    	<section>
							<widgets>
								<!-- <container style="button-bar">
									<link target="CreateNewFineorPenalty" text="Create New" style="buttontext create">				
									</link>
								</container> -->
								<!-- <screenlet title="Find Fines and Penalties">				
									<include-form name="FindFinesAndPenalties" location="component://byproducts/widget/TransporterForms.xml" />
								</screenlet> -->
								<screenlet title="Bank Accounts List">				
								 <include-form name="ListFinAccountsAlt" location="component://accounting/widget/TreasurerPortalForms.xml"/> 
								</screenlet>
							</widgets>      
                    	</section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>  
    <screen name="EditFinAccountAlt">
        <section>
            <actions>
                <set field="titleProperty" value="PageTitleEditFinAccount"/>
              <!--   <set field="tabButtonItem" value="${parameters.tabButtonItem}" value="${tabButtonItem}" /> -->
                	<set field="tabButtonItem"  value="${parameters.tabButtonItem}" default-value="${context.tabButtonItem}"/>
                 <set field="tabButtonItem2" value="EditFinAccountAlt"/>
                
                <set field="finAccountId" from-field="parameters.finAccountId"/>
                <property-to-field field="defaultCurrencyUomId" resource="general" property="currency.uom.id.default" default="INR"/>
                <service service-name="acctgFinAcctPermissionCheck" result-map="permResult">
                    <field-map field-name="mainAction" value="FINACCOUNT_EDIT"/>
                </service>
                <set field="hasFinEditPermission" from-field="permResult.hasPermission"/> 
                <entity-one entity-name="FinAccount" value-field="finAccount"/>
            <script location="component://accounting/webapp/accounting/WEB-INF/actions/EditFinaccount.groovy"/>
            </actions>
            <widgets>
              <decorator-screen name="CommonTreasurerPortalDecorator" location="component://accounting/widget/CommonScreens.xml">
             <!--    <decorator-screen name="CommonFinAccountDecorator" location="${parameters.finAccountDecoratorLocation}"> -->
                    <decorator-section name="body">
                      <include-menu name="CompanyFinAccountTabBar" location="component://accounting/widget/AccountingMenus.xml"/>
                        <section>
                            <condition>
                            	<if-service-permission service-name="acctgFinAcctPermissionCheck" main-action="FINACCOUNT_EDIT"/>
                                <not><if-empty field="finAccountId" /></not>
                            </condition>
                            <widgets>
                               <!--  <container style="button-bar">
                                    <link target="EditFinAccount" text="${uiLabelMap.AccountingCreateNewFinAccount}" style="buttontext create"/>
                                </container> -->
                                <label style="h1" text="${uiLabelMap.AccountingEditBank}" ></label>
                                <screenlet id="EditFinAccountPanel" collapsible="true">
                                    <include-form name="EditBankAccount" location="component://accounting/widget/TreasurerPortalForms.xml"/>
                                </screenlet>
                            </widgets>
                            <fail-widgets>
                                <label style="h1" text="${uiLabelMap.AccountingCreateNewFinAccount}"></label>
                                <screenlet id="CreateFinAccountPanel" collapsible="true">
                                    <include-form name="EditFinAccount" location="component://accounting/widget/FinAccountForms.xml"/>
                                </screenlet>
                            </fail-widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>  
     <screen name="FindFinAccountTransAlt">
        <section>
            <actions>
                <set field="titleProperty" value="PageTitleFindFinAccountTrans"/>
                <!--   <set field="tabButtonItem" value="FindFinAccountAlt"/> -->
                 <script location="component://accounting/webapp/accounting/WEB-INF/actions/EditFinaccount.groovy"/>
                  	<set field="tabButtonItem"  value="${parameters.tabButtonItem}" default-value="${context.tabButtonItem}"/>
                <set field="tabButtonItem2" value="FinAccountTrans"/>
                <service service-name="getFinAccountTransListAndTotals" result-map="finAccountTransListAndTotals" auto-field-map="true"/>
                <set field="finAccountTransList" type="List" from-field="finAccountTransListAndTotals.finAccountTransList"/>
                <set field="searchedNumberOfRecords" type="Integer" from-field="finAccountTransListAndTotals.searchedNumberOfRecords"/>
                <set field="grandTotal" type="BigDecimal" from-field="finAccountTransListAndTotals.grandTotal"/>
                <set field="createdGrandTotal" type="BigDecimal" from-field="finAccountTransListAndTotals.createdGrandTotal"/>
                <set field="totalCreatedTransactions" type="Long" from-field="finAccountTransListAndTotals.totalCreatedTransactions"/>
                <set field="approvedGrandTotal" type="BigDecimal" from-field="finAccountTransListAndTotals.approvedGrandTotal"/>
                <set field="totalApprovedTransactions" type="Long" from-field="finAccountTransListAndTotals.totalApprovedTransactions"/>
                <set field="createdApprovedGrandTotal" type="BigDecimal" from-field="finAccountTransListAndTotals.createdApprovedGrandTotal"/>
                <set field="totalCreatedApprovedTransactions" type="Long" from-field="finAccountTransListAndTotals.totalCreatedApprovedTransactions"/>
                <set field="finAccountId" from-field="parameters.finAccountId"/>
                <entity-one entity-name="FinAccount" value-field="finAccount"/>
                <set field="glReconciliationId" from-field="parameters.glReconciliationId"/>
                <set field="finAccountTransId" from-field="parameters.finAccountTransId"/>
                <service service-name="acctgFinAcctPermissionCheck" result-map="permResult">
                    <field-map field-name="mainAction" value="FINACCOUNTTX_EDIT"/>
                </service>
                <set field="hasFinTxEditPermission" from-field="permResult.hasPermission"/> 
            </actions>
            <widgets>
               <!--   <decorator-screen name="CashierCommonDecorator" location="component://accounting/widget/CommonScreens.xml"> -->
                    <decorator-screen name="CommonTreasurerPortalDecorator" location="component://accounting/widget/CommonScreens.xml">
             <!--    <decorator-screen name="CommonFinAccountDecorator" location="${parameters.finAccountDecoratorLocation}"> -->
                    <decorator-section name="body">
                        <include-menu name="CompanyFinAccountTabBar" location="component://accounting/widget/AccountingMenus.xml"/>
                    	<!-- <section>
                    		<condition>
                    			<if-compare operator="equals" value="true" field="hasFinTxEditPermission"/>
                    		</condition>
                    		<widgets>
                        		<link target="EditFinAccountTrans" text="${uiLabelMap.AccountingFinAccountTransationsAdjustment}" style="buttontext">
                           			<parameter param-name="finAccountId" from-field="finAccountId"/>
                           			<parameter param-name="finAccountTransTypeId" value="ADJUSTMENT"/>
                           			<parameter param-name="entryType" value="Adjustment"/>                           			
                        		</link>
                        		<link target="EditFinAccountTrans" text="${uiLabelMap.AccountingFinAccountTransationsPayment}" style="buttontext">
                           			<parameter param-name="finAccountId" from-field="finAccountId"/>
                           			<parameter param-name="entryType" value="Payment"/>                           			
                        		</link>
                        		<link target="EditFinAccountTrans" text="${uiLabelMap.AccountingFinAccountTransationsContra}" style="buttontext">
                           			<parameter param-name="finAccountId" from-field="finAccountId"/>                           			
                           			<parameter param-name="entryType" value="Contra"/>
                           		</link>                        
                        	</widgets>
                        	</section> -->
                        <section>
                            <condition>
                            	<if-service-permission service-name="acctgFinAcctPermissionCheck"  main-action="FINACCOUNTREC_EDIT"> </if-service-permission>
                                <if-compare field="finAccount.finAccountTypeId" operator="equals" value="BANK_ACCOUNT" type="String"></if-compare>
                            </condition>
                            <widgets>
                                <link target="FinancialAccountReconciliation" text="${uiLabelMap.FinAccountReconciliation}" style="buttontext">
                                    <parameter param-name="finAccountId" from-field="finAccountId"/>
                                    <parameter param-name="statusId" value="FINACT_TRNS_CREATED"/>
                                </link>
                            </widgets>
                        </section>
                        <decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
                            <decorator-section name="search-options">
                                <include-form name="FindFinAccountTransactionsAlt" location="component://accounting/widget/TreasurerPortalForms.xml"/>
                            </decorator-section> 
                            <decorator-section name="search-results">
                                <platform-specific>
                                    <html><html-template location="component://accounting/webapp/accounting/finaccounttrans/FinAccountTrans.ftl"/></html>
                                </platform-specific>
                            </decorator-section>
                        </decorator-screen>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
      <screen name="PaymentsDepositWithdraw">
        <section>
            <actions>
                <set field="titleProperty" value="AccountingDepositOrWithdrawPaymentsBANK"/>
                 <script location="component://accounting/webapp/accounting/WEB-INF/actions/EditFinaccount.groovy"/>
                 <set field="tabButtonItem"  value="${parameters.tabButtonItem}" default-value="${context.tabButtonItem}"/>
                <set field="tabButtonItem2" value="depositWithdraw"/>
                <set field="finAccountId" from-field="parameters.finAccountId"/>
                <set field="paymentMethodTypeId" from-field="parameters.paymentMethodTypeId"/>
                <set field="cardType" from-field="parameters.cardType"/>
                <set field="fromDate" type="Timestamp" from-field="parameters.fromDate"/>
                <set field="thruDate" type="Timestamp" from-field="parameters.thruDate"/>
                <set field="partyIdFrom" from-field="parameters.partyIdFrom"/>
                <set field="organizationPartyId" from-field="parameters.organizationPartyId"/>
                 <set field="issuingAuthority" from-field="parameters.issuingAuthority"/>
                 <set field="screenFlag" value="BankersDepositOrWithdraw"/>
                <service service-name="acctgFinAcctPermissionCheck" result-map="permResult">
                    <field-map field-name="mainAction" value="FINACCOUNTDW_EDIT"/>
                </service>
                <set field="hasFinDwEditPermission" from-field="permResult.hasPermission"/> 
                <entity-one entity-name="FinAccount" value-field="finAccount"/>
                <script location="component://accounting/webapp/accounting/WEB-INF/actions/payment/DepositWithdrawPayments.groovy"/>
            </actions>
            <widgets>
              <!--   <decorator-screen name="CommonFinAccountDecorator" location="${parameters.finAccountDecoratorLocation}"> -->
                 <decorator-screen name="CommonTreasurerPortalDecorator" location="component://accounting/widget/CommonScreens.xml">
                    <decorator-section name="body">
                     <include-menu name="CompanyFinAccountTabBar" location="component://accounting/widget/AccountingMenus.xml"/>
                    	<section>
                    		<condition>
                    			<if-service-permission service-name="acctgFinAcctPermissionCheck" main-action="FINACCOUNTDW_EDIT"/>
                    			</condition>
                    		<widgets>
                    			<container style="button-bar">
                                   <!--  <link target="NewDepositPayment" text="${uiLabelMap.AccountingCreateNewDepositPayment}" style="buttontext">
                                        <parameter param-name="finAccountId"/>
                                    </link>
                                    <link target="NewWithdrawalPayment" text="${uiLabelMap.AccountingCreateNewWithdrawalPayment}" style="buttontext">
                                        <parameter param-name="finAccountId"/>
                                    </link> -->
                                </container>
                               </widgets>
                    		</section>
                        <section>
                            <widgets>
                             <decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
                                    <decorator-section name="search-options">
                                        <include-form name="PaymentsDepositWithdraw" location="component://accounting/widget/TreasurerPortalForms.xml"/>
                                    </decorator-section> 
                                    <decorator-section name="search-results">
                                        <platform-specific>
                                            <html><html-template location="component://accounting/webapp/accounting/payment/depositWithdrawPayments.ftl"/></html>
                                        </platform-specific>
                                    </decorator-section>
                                </decorator-screen>  
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
       <screen name="BankContraEntry">
        <section>
            <actions>
                <set field="titleProperty" value="PageTitleEditFinAccountTrans"/>
               <!--   <script location="component://accounting/webapp/accounting/WEB-INF/actions/EditFinaccount.groovy"/>
                <set field="tabButtonItem"  value="${parameters.tabButtonItem}" default-value="${context.tabButtonItem}"/> -->
                <set field="tabButtonItem" value="ContraEntry"/>
                
                <set field="finAccountId" from-field="parameters.finAccountId"/>
                <set field="finAccountTransTypeId" from-field="parameters.finAccountTransTypeId"/>
                <set field="entryType" from-field="parameters.entryType"/>
                <entity-one entity-name="FinAccount" value-field="finAccount"/>
                <set field="layoutSettings.javaScripts[]" value="/accounting/images/paymentTransaction.js" global="true"/>
                <set field="finAccountTransId" from-field="parameters.finAccountTransId"/>
            </actions>
            <widgets>
              <decorator-screen name="CommonTreasurerPortalDecorator" location="component://accounting/widget/CommonScreens.xml">
                <!-- <decorator-screen name="CommonFinAccountDecorator" location="${parameters.finAccountDecoratorLocation}"> -->
                    <decorator-section name="body">
                       <include-menu name="CompanyFinAccountTabBar" location="component://accounting/widget/AccountingMenus.xml"/>
                        <label style="h1" text="${uiLabelMap.AccountingEditFinAccountTransactionFor}"/>
                        <screenlet id="FinAccountTransPanel" collapsible="true">
                            <include-form name="BankContraEntry" location="component://accounting/widget/TreasurerPortalForms.xml"/>
                        </screenlet>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
    <screen name="FinancialAccountingTransBANK">
		<section>
			<actions>
				<entity-one value-field="Name" entity-name="PartyGroup">
					<field-map field-name="partyId" value="${parameters.organizationPartyId}"/>
					<select-field field-name="groupName"/>
				</entity-one>
				<set field="titleProperty" value="FinancialAccountingTrans" />
				<set field="labelTitleProperty" value="Financial Accounting Trans" />
			    <set field="tabButtonItem" value="BankBook" />
				<set field="tabButtonItem2" value="FinancialAccountingTrans" />
				<set field="organizationPartyId" from-field="parameters.organizationPartyId" />
				<set field="parameters.screenFlag" value="TreasurerPortal" />
				<service service-name="basicGeneralLedgerPermissionCheck"
					result-map="permResult">
					<field-map field-name="mainAction" value="REPORTS" />
				</service>
				<set field="hasReportsEditPermission" from-field="permResult.hasPermission" />
				<set field="formTargetRequest"    value="FinancialAccountingTransCASH" />
			</actions>
			<widgets>
				<section>
					<condition>
						<if-compare operator="equals" value="true"
							field="hasReportsEditPermission" />
					</condition>
					<widgets>
					 <decorator-screen name="CommonTreasurerPortalDecorator" location="component://accounting/widget/CommonScreens.xml">
						<!--   <decorator-screen name="CashierCommonDecorator" location="component://accounting/widget/CommonScreens.xml"> -->
							<decorator-section name="body">
							<include-screen name="FinancialAccountingTransInner" location="component://accounting/widget/ReportFinancialSummaryScreens.xml"/>
							</decorator-section>
						</decorator-screen>
					</widgets>
					<fail-widgets>
						<decorator-screen name="main-decorator"
							location="${parameters.mainDecoratorLocation}">
							<decorator-section name="body">
								<label style="h3" text="${uiLabelMap.AccountingReportError}"></label>
							</decorator-section>
						</decorator-screen>
					</fail-widgets>
				</section>
			</widgets>
		</section>
	</screen>
    
    <!-- ==================================== Incoming Advances  ===================================   -->
    <screen name="IncomingAdvancesReceived">
        <section>
            <actions>
                <set field="titleProperty" value="Incoming Advance Receipts"/>
                <set field="tabButtonItem" value="IncomingAdvances"/>
                <set field="tabButtonItem4" value="IncomingAdvancesReceived"/>
                <set field="viewSize" from-field="parameters.VIEW_SIZE" type="Integer" default-value="1000"/>
                <service service-name="acctgInvoicePermissionCheck" result-map="permResult">
                    <field-map field-name="mainAction" value="PAYMENT_EDIT"/>
                </service>
                <set field="hasPaymentEditPermission" from-field="permResult.hasPermission"/>
                <service service-name="performFind" result-map="result">
	                <field-map field-name="inputFields" from-field="parameters"/>
	                <field-map field-name="entityName" value="PaymentAndTypeAndCreditCard"/>
	                <field-map field-name="orderBy" value="effectiveDate DESC"/>
	                <field-map field-name="viewIndex" from-field="viewIndex"/>
	                <field-map field-name="viewSize" from-field="viewSize"/>
	            </service>
	            <set field="payments" from-field="result.listIt"/>
            </actions>
            <widgets>
                <decorator-screen name="CommonTreasurerPortalDecorator" location="component://accounting/widget/CommonScreens.xml">
                    <decorator-section name="body">
                    	<include-menu name="IncomingAdvancesTabBar" location="component://accounting/widget/AccountingMenus.xml"/>
                        <section>
                            <widgets>
                                <decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
                                    <decorator-section name="menu-bar">
                                    	<section>
                                    		<condition>
                                    		<if-compare operator="equals" value="true" field="hasPaymentEditPermission"/>
                                    		</condition>
                                    		<widgets>
                                             <container style="button-bar">
                                            <link target="NewIncomingAdvanceReceived" text="${uiLabelMap.CommonCreateNew}" style="buttontext create"/>
                                        </container>
                                        </widgets>
                                    </section>
                                    </decorator-section>
                                    <decorator-section name="search-options">
                                        <include-form name="FindIncomingAdvancesReceived" location="component://accounting/widget/TreasurerPortalForms.xml"/>
                                    </decorator-section>
                                    <decorator-section name="search-results">
                                    	<platform-specific>
                                           	<html><html-template location="component://accounting/webapp/accounting/payment/ListSearchPayments.ftl"/></html>
                                       	</platform-specific>
                                        <!-- <include-form name="ListPayments"  location="component://accounting/widget/PaymentForms.xml"/> -->
                                    </decorator-section>
                                </decorator-screen>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="NewIncomingAdvanceReceived">
       <section>
            <actions>
                <set field="titleProperty" value="New Advance Receipt"/>
                <set field="tabButtonItem" value="IncomingAdvances"/>
                <set field="tabButtonItem4" value="IncomingAdvancesReceived"/>
                <service service-name="acctgInvoicePermissionCheck" result-map="permResult">
                    <field-map field-name="mainAction" value="PAYMENT_EDIT"/>
                </service>
               	<set field="layoutSettings.javaScripts[]" value="/accounting/images/paymentMethodType.js" global="true"/>
                <set field="hasPaymentEditPermission" from-field="permResult.hasPermission"/>
            </actions>
            <widgets>
                <decorator-screen name="CommonTreasurerPortalDecorator" location="component://accounting/widget/CommonScreens.xml">
                    <decorator-section name="body">
                    	<include-menu name="IncomingAdvancesTabBar" location="component://accounting/widget/AccountingMenus.xml"/>
                        <section>
                        	<condition>
                        		<if-compare operator="equals" value="true" field="hasPaymentEditPermission"/>
                        	</condition>
                            <widgets>
                                <screenlet title="New Incoming Deposit">
                                    <include-form name="NewIncomingAdvanceReceipt" location="component://accounting/widget/TreasurerPortalForms.xml"/>
                                </screenlet>
                            </widgets>
                            <fail-widgets>
                            	<label style="h3" text="${uiLabelMap.newPaymentScreenError}"/>
                            </fail-widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
    
    <screen name="IncomingAdvancesRefund">
        <section>
            <actions>
                <set field="titleProperty" value="Incoming Advance Receipts"/>
                <set field="tabButtonItem" value="IncomingAdvances"/>
                <set field="tabButtonItem4" value="IncomingAdvancesRefund"/>
                <set field="viewSize" from-field="parameters.VIEW_SIZE" type="Integer" default-value="1000"/>
                <service service-name="acctgInvoicePermissionCheck" result-map="permResult">
                    <field-map field-name="mainAction" value="PAYMENT_EDIT"/>
                </service>
                <set field="hasPaymentEditPermission" from-field="permResult.hasPermission"/>
                <service service-name="performFind" result-map="result">
	                <field-map field-name="inputFields" from-field="parameters"/>
	                <field-map field-name="entityName" value="PaymentAndTypeAndCreditCard"/>
	                <field-map field-name="orderBy" value="effectiveDate DESC"/>
	                <field-map field-name="viewIndex" from-field="viewIndex"/>
	                <field-map field-name="viewSize" from-field="viewSize"/>
	            </service>
	            <set field="payments" from-field="result.listIt"/>
            </actions>
            <widgets>
                <decorator-screen name="CommonTreasurerPortalDecorator" location="component://accounting/widget/CommonScreens.xml">
                    <decorator-section name="body">
                    	<include-menu name="IncomingAdvancesTabBar" location="component://accounting/widget/AccountingMenus.xml"/>
                        <section>
                            <widgets>
                                <decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
                                    <decorator-section name="menu-bar">
                                    	<section>
                                    		<condition>
                                    		<if-compare operator="equals" value="true" field="hasPaymentEditPermission"/>
                                    		</condition>
                                    		<widgets>
                                             <container style="button-bar">
                                            <link target="NewIncomingAdvancesRefund" text="${uiLabelMap.CommonCreateNew}" style="buttontext create"/>
                                        </container>
                                        </widgets>
                                    </section>
                                    </decorator-section>
                                    <decorator-section name="search-options">
                                        <include-form name="FindIncomingAdvancesRefund" location="component://accounting/widget/TreasurerPortalForms.xml"/>
                                    </decorator-section>
                                    <decorator-section name="search-results">
                                    	<platform-specific>
                                           	<html><html-template location="component://accounting/webapp/accounting/payment/ListSearchPayments.ftl"/></html>
                                       	</platform-specific>
                                        <!-- <include-form name="ListPayments"  location="component://accounting/widget/PaymentForms.xml"/> -->
                                    </decorator-section>
                                </decorator-screen>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="NewIncomingAdvancesRefund">
       <section>
            <actions>
                <set field="titleProperty" value="New Advance Refund"/>
                <set field="tabButtonItem" value="IncomingAdvances"/>
                <set field="tabButtonItem4" value="IncomingAdvancesRefund"/>
                <service service-name="acctgInvoicePermissionCheck" result-map="permResult">
                    <field-map field-name="mainAction" value="PAYMENT_EDIT"/>
                </service>
                <set field="layoutSettings.javaScripts[]" value="/accounting/images/paymentMethodType.js" global="true"/>
                <set field="hasPaymentEditPermission" from-field="permResult.hasPermission"/>
            </actions>
            <widgets>
                <decorator-screen name="CommonTreasurerPortalDecorator" location="component://accounting/widget/CommonScreens.xml">
                    <decorator-section name="body">
                    	<include-menu name="IncomingAdvancesTabBar" location="component://accounting/widget/AccountingMenus.xml"/>
                        <section>
                        	<condition>
                        		<if-compare operator="equals" value="true" field="hasPaymentEditPermission"/>
                        	</condition>
                            <widgets>
                                <screenlet title="New Incoming Advance">
                                    <include-form name="NewIncomingAdvancesRefund" location="component://accounting/widget/TreasurerPortalForms.xml"/>
                                </screenlet>
                            </widgets>
                            <fail-widgets>
                            	<label style="h3" text="${uiLabelMap.newPaymentScreenError}"/>
                            </fail-widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
    <!-- ==================================== Outgoing Advances  ===================================   -->
    
    <screen name="OutgoingAdvancesRefund">
        <section>
            <actions>
                <set field="titleProperty" value="Outgoing Advance Refund"/>
                <set field="tabButtonItem" value="OutgoingAdvances"/>
                <set field="tabButtonItem4" value="OutgoingAdvancesRefund"/>
                <set field="viewSize" from-field="parameters.VIEW_SIZE" type="Integer" default-value="1000"/>
                <service service-name="acctgInvoicePermissionCheck" result-map="permResult">
                    <field-map field-name="mainAction" value="PAYMENT_EDIT"/>
                </service>
                <set field="hasPaymentEditPermission" from-field="permResult.hasPermission"/>
                <service service-name="performFind" result-map="result">
	                <field-map field-name="inputFields" from-field="parameters"/>
	                <field-map field-name="entityName" value="PaymentAndTypeAndCreditCard"/>
	                <field-map field-name="orderBy" value="effectiveDate DESC"/>
	                <field-map field-name="viewIndex" from-field="viewIndex"/>
	                <field-map field-name="viewSize" from-field="viewSize"/>
	            </service>
	            <set field="payments" from-field="result.listIt"/>
            </actions>
            <widgets>
                <decorator-screen name="CommonTreasurerPortalDecorator" location="component://accounting/widget/CommonScreens.xml">
                    <decorator-section name="body">
                    	<include-menu name="OutgoingAdvancesTabBar" location="component://accounting/widget/AccountingMenus.xml"/>
                        <section>
                            <widgets>
                                <decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
                                    <decorator-section name="menu-bar">
                                    	<section>
                                    		<condition>
                                    		<if-compare operator="equals" value="true" field="hasPaymentEditPermission"/>
                                    		</condition>
                                    		<widgets>
                                             <container style="button-bar">
                                            <link target="NewOutgoingAdvancesRefund" text="${uiLabelMap.CommonCreateNew}" style="buttontext create"/>
                                        </container>
                                        </widgets>
                                    </section>
                                    </decorator-section>
                                    <decorator-section name="search-options">
                                        <include-form name="FindOutgoingAdvancesRefund" location="component://accounting/widget/TreasurerPortalForms.xml"/>
                                    </decorator-section>
                                    <decorator-section name="search-results">
                                    	<platform-specific>
                                           	<html><html-template location="component://accounting/webapp/accounting/payment/ListSearchPayments.ftl"/></html>
                                       	</platform-specific>
                                        <!-- <include-form name="ListPayments"  location="component://accounting/widget/PaymentForms.xml"/> -->
                                    </decorator-section>
                                </decorator-screen>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="NewOutgoingAdvancesRefund">
       <section>
            <actions>
                <set field="titleProperty" value="New Advance Refund"/>
                <set field="tabButtonItem" value="OutgoingAdvances"/>
                <set field="tabButtonItem4" value="OutgoingAdvancesRefund"/>
                <service service-name="acctgInvoicePermissionCheck" result-map="permResult">
                    <field-map field-name="mainAction" value="PAYMENT_EDIT"/>
                </service>
               	<set field="layoutSettings.javaScripts[]" value="/accounting/images/paymentMethod.js" global="true"/>
                <set field="hasPaymentEditPermission" from-field="permResult.hasPermission"/>
            </actions>
            <widgets>
                <decorator-screen name="CommonTreasurerPortalDecorator" location="component://accounting/widget/CommonScreens.xml">
                    <decorator-section name="body">
                    	<include-menu name="OutgoingAdvancesTabBar" location="component://accounting/widget/AccountingMenus.xml"/>
                        <section>
                        	<condition>
                        		<if-compare operator="equals" value="true" field="hasPaymentEditPermission"/>
                        	</condition>
                            <widgets>
                                <screenlet title="New Incoming Deposit">
                                    <include-form name="NewOutgoingAdvanceRefund" location="component://accounting/widget/TreasurerPortalForms.xml"/>
                                </screenlet>
                            </widgets>
                            <fail-widgets>
                            	<label style="h3" text="${uiLabelMap.newPaymentScreenError}"/>
                            </fail-widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
    
    <screen name="OutgoingAdvancesPaid">
        <section>
            <actions>
                <set field="titleProperty" value="Incoming Advance Receipts"/>
                <set field="tabButtonItem" value="OutgoingAdvances"/>
                <set field="tabButtonItem4" value="OutgoingAdvancesPaid"/>
                <set field="viewSize" from-field="parameters.VIEW_SIZE" type="Integer" default-value="1000"/>
                <service service-name="acctgInvoicePermissionCheck" result-map="permResult">
                    <field-map field-name="mainAction" value="PAYMENT_EDIT"/>
                </service>
                <set field="hasPaymentEditPermission" from-field="permResult.hasPermission"/>
                <service service-name="performFind" result-map="result">
	                <field-map field-name="inputFields" from-field="parameters"/>
	                <field-map field-name="entityName" value="PaymentAndTypeAndCreditCard"/>
	                <field-map field-name="orderBy" value="effectiveDate DESC"/>
	                <field-map field-name="viewIndex" from-field="viewIndex"/>
	                <field-map field-name="viewSize" from-field="viewSize"/>
	            </service>
	            <set field="payments" from-field="result.listIt"/>
            </actions>
            <widgets>
                <decorator-screen name="CommonTreasurerPortalDecorator" location="component://accounting/widget/CommonScreens.xml">
                    <decorator-section name="body">
                    	<include-menu name="OutgoingAdvancesTabBar" location="component://accounting/widget/AccountingMenus.xml"/>
                        <section>
                            <widgets>
                                <decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
                                    <decorator-section name="menu-bar">
                                    	<section>
                                    		<condition>
                                    		<if-compare operator="equals" value="true" field="hasPaymentEditPermission"/>
                                    		</condition>
                                    		<widgets>
                                             <container style="button-bar">
                                            <link target="NewOutgoingAdvancePaid" text="${uiLabelMap.CommonCreateNew}" style="buttontext create"/>
                                        </container>
                                        </widgets>
                                    </section>
                                    </decorator-section>
                                    <decorator-section name="search-options">
                                        <include-form name="FindOutgoingAdvancesPaid" location="component://accounting/widget/TreasurerPortalForms.xml"/>
                                    </decorator-section>
                                    <decorator-section name="search-results">
                                    	<platform-specific>
                                           	<html><html-template location="component://accounting/webapp/accounting/payment/ListSearchPayments.ftl"/></html>
                                       	</platform-specific>
                                        <!-- <include-form name="ListPayments"  location="component://accounting/widget/PaymentForms.xml"/> -->
                                    </decorator-section>
                                </decorator-screen>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="NewOutgoingAdvancePaid">
       <section>
            <actions>
                <set field="titleProperty" value="New Advance Refund"/>
                <set field="tabButtonItem" value="OutgoingAdvances"/>
                <set field="tabButtonItem4" value="OutgoingAdvancesPaid"/>
                <service service-name="acctgInvoicePermissionCheck" result-map="permResult">
                    <field-map field-name="mainAction" value="PAYMENT_EDIT"/>
                </service>
                <set field="layoutSettings.javaScripts[]" value="/accounting/images/paymentMethod.js" global="true"/>
                <set field="hasPaymentEditPermission" from-field="permResult.hasPermission"/>
            </actions>
            <widgets>
                <decorator-screen name="CommonTreasurerPortalDecorator" location="component://accounting/widget/CommonScreens.xml">
                    <decorator-section name="body">
                    	<include-menu name="OutgoingAdvancesTabBar" location="component://accounting/widget/AccountingMenus.xml"/>
                        <section>
                        	<condition>
                        		<if-compare operator="equals" value="true" field="hasPaymentEditPermission"/>
                        	</condition>
                            <widgets>
                                <screenlet title="New Incoming Advance">
                                    <include-form name="NewOutgoingAdvancesPaid" location="component://accounting/widget/TreasurerPortalForms.xml"/>
                                </screenlet>
                            </widgets>
                            <fail-widgets>
                            	<label style="h3" text="${uiLabelMap.newPaymentScreenError}"/>
                            </fail-widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
    <screen name="PaymentOverview">
        <section>
            <actions>
                <set field="titleProperty" value="PageTitlePaymentOverview"/>
                <set field="tabButtonItem" value="PaymentOverview"/>
                <set field="labelTitleProperty" value="PageTitlePaymentOverview"/>
                <property-map resource="PartyUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="paymentId" from-field="parameters.paymentId"/>
                <entity-one entity-name="Payment" value-field="payment"/>
                <set field="finAccountTransId" from-field="payment.finAccountTransId"/>
                <entity-one entity-name="FinAccountTrans" value-field="finAccountTrans"/>
                <set field="appliedAmount" value="${bsh:org.ofbiz.accounting.payment.PaymentWorker.getPaymentApplied(payment).toString()}"/>
                <set field="notAppliedAmount" value="${bsh:org.ofbiz.accounting.payment.PaymentWorker.getPaymentNotApplied(payment).toString()}"/>
                <entity-condition entity-name="AcctgTransAndEntries" list="AcctgTransAndEntries">
                    <condition-expr field-name="paymentId" from-field="paymentId"/>
                    <order-by field-name="acctgTransId"/>
                    <order-by field-name="acctgTransEntrySeqId"/>
                </entity-condition>
                <service service-name="acctgInvoicePermissionCheck" result-map="permResult">
                    <field-map field-name="mainAction" value="PAYMENT_EDIT"/>
                </service>
               <set field="hasPaymentEditPermission" from-field="permResult.hasPermission"/>
               <service service-name="acctgInvoicePermissionCheck" result-map="permResult">
                    <field-map field-name="mainAction" value="PAYMENTAPP_EDIT"/>
                </service>
               <set field="hasPaymentAppEditPermission" from-field="permResult.hasPermission"/>
                <service service-name="acctgInvoicePermissionCheck" result-map="permResult">
                    <field-map field-name="mainAction" value="PAYMENTSTATUS_CANCEL"/>
                </service>
               <set field="hasPaymentStatusCancelPermission" from-field="permResult.hasPermission"/>
            </actions>
            <widgets>
                <decorator-screen name="CommonTreasurerPaymentPortalDecorator" location="component://accounting/widget/CommonScreens.xml">
                    <decorator-section name="body">
                        <section>
                            <condition>
                                <if-compare field="payment.statusId" operator="equals"  value="PMNT_NOT_PAID"/>
                            </condition>
                            <widgets>
                                  <platform-specific>
                                <html><html-template location="component://accounting/webapp/accounting/payment/setPaymentStatus.ftl"/></html>
                            </platform-specific>
                                <container style="lefthalf">
                                    <screenlet title="${uiLabelMap.AccountingPaymentHeader}">
                                        <link target="editPayment" text="ad${uiLabelMap.CommonUpdate}" style="buttontext">
                                            <parameter param-name="paymentId"/>
                                        </link>
                                        <include-form name="paymentHeader" location="component://accounting/widget/PaymentForms.xml"/>
                                    </screenlet>
                                </container>
                                <container style="righthalf">
                                    <screenlet title="${uiLabelMap.AccountingPaymentsApplied} ${appliedAmount?currency(${payment.currencyUomId})} ${uiLabelMap.AccountingOpenPayments} ${notAppliedAmount?currency(${payment.currencyUomId})}">
                                        <link target="editPaymentApplications" text="${uiLabelMap.CommonUpdate}" style="buttontext">
                                            <parameter param-name="paymentId"/>
                                        </link>
                                        <include-form name="paymentApplications" location="component://accounting/widget/PaymentForms.xml"/>
                                    </screenlet>
                                    <section>
                                        <condition>
                                            <not><if-empty field="finAccountTransId"/></not>
                                        </condition>
                                        <widgets>
                                            <screenlet title="${uiLabelMap.AccountingFinAccountTransaction}">
                                                <include-form name="FinAccountTransAssociatedWithPayment" location="component://accounting/widget/PaymentForms.xml"/>
                                            </screenlet>
                                        </widgets>
                                    </section>
                                </container>
                                <container style="clear"/>
                                <screenlet title="${uiLabelMap.AccountingTransactions}" navigation-form-name="AcctgTransAndEntries">
                                    <include-form name="AcctgTransAndEntries" location="component://accounting/widget/PaymentForms.xml"/>
                                </screenlet>
                            </widgets>
                            <fail-widgets>
                                <container style="lefthalf">
                                    <screenlet title="${uiLabelMap.AccountingPaymentHeader}">
                                        <include-form name="paymentHeader" location="component://accounting/widget/PaymentForms.xml"/>
                                    </screenlet>
                                </container>
                                <container style="righthalf">
                                    <screenlet title="${uiLabelMap.AccountingPaymentsApplied} ${appliedAmount?currency(${payment.currencyUomId})} ${uiLabelMap.AccountingOpenPayments} ${notAppliedAmount?currency(${payment.currencyUomId})}">
                                        <include-form name="paymentApplications" location="component://accounting/widget/PaymentForms.xml"/>
                                    </screenlet>
                                        <section>
                                            <condition>
                                                <not><if-empty field="finAccountTransId"/></not>
                                            </condition>
                                            <widgets>
                                                <screenlet title="${uiLabelMap.AccountingFinAccountTransaction}">
                                                    <include-form name="FinAccountTransAssociatedWithPayment" location="component://accounting/widget/PaymentForms.xml"/>
                                                </screenlet>
                                            </widgets>
                                        </section>
                                </container>
                                <container style="clear"/>
                                <screenlet title="${uiLabelMap.AccountingTransactions}" navigation-form-name="AcctgTransAndEntries">
                                    <include-form name="AcctgTransAndEntries" location="component://accounting/widget/PaymentForms.xml"/>
                                </screenlet>
                            </fail-widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <!-- ==================================== Incoming Deposits  ===================================   -->
    <screen name="IncomingDepositsReceived">
        <section>
            <actions>
                <set field="titleProperty" value="Incoming Deposits Receipts"/>
                <set field="tabButtonItem" value="IncomingDeposits"/>
                <set field="tabButtonItem4" value="IncomingDepositsReceived"/>
                <set field="viewSize" from-field="parameters.VIEW_SIZE" type="Integer" default-value="1000"/>
                <service service-name="acctgInvoicePermissionCheck" result-map="permResult">
                    <field-map field-name="mainAction" value="PAYMENT_EDIT"/>
                </service>
                <set field="hasPaymentEditPermission" from-field="permResult.hasPermission"/>
                <service service-name="performFind" result-map="result">
	                <field-map field-name="inputFields" from-field="parameters"/>
	                <field-map field-name="entityName" value="PaymentAndTypeAndCreditCard"/>
	                <field-map field-name="orderBy" value="effectiveDate DESC"/>
	                <field-map field-name="viewIndex" from-field="viewIndex"/>
	                <field-map field-name="viewSize" from-field="viewSize"/>
	            </service>
	            <set field="payments" from-field="result.listIt"/>
            </actions>
            <widgets>
                <decorator-screen name="CommonTreasurerPortalDecorator" location="component://accounting/widget/CommonScreens.xml">
                    <decorator-section name="body">
                    	<include-menu name="IncomingDepositsTabBar" location="component://accounting/widget/AccountingMenus.xml"/>
                        <section>
                            <widgets>
                                <decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
                                    <decorator-section name="menu-bar">
                                    	<section>
                                    		<condition>
                                    		<if-compare operator="equals" value="true" field="hasPaymentEditPermission"/>
                                    		</condition>
                                    		<widgets>
                                             <container style="button-bar">
                                            <link target="NewIncomingDepositsReceived" text="${uiLabelMap.CommonCreateNew}" style="buttontext create"/>
                                        </container>
                                        </widgets>
                                    </section>
                                    </decorator-section>
                                    <decorator-section name="search-options">
                                        <include-form name="FindIncomingDepositsReceived" location="component://accounting/widget/TreasurerPortalForms.xml"/>
                                    </decorator-section>
                                    <decorator-section name="search-results">
                                    	<platform-specific>
                                           	<html><html-template location="component://accounting/webapp/accounting/payment/ListSearchPayments.ftl"/></html>
                                       	</platform-specific>
                                        <!-- <include-form name="ListPayments"  location="component://accounting/widget/PaymentForms.xml"/> -->
                                    </decorator-section>
                                </decorator-screen>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="NewIncomingDepositsReceived">
       <section>
            <actions>
                <set field="titleProperty" value="New Deposits Receipt"/>
                <set field="tabButtonItem" value="IncomingDeposits"/>
                <set field="tabButtonItem4" value="IncomingDepositsReceived"/>
                <service service-name="acctgInvoicePermissionCheck" result-map="permResult">
                    <field-map field-name="mainAction" value="PAYMENT_EDIT"/>
                </service>
               	<set field="layoutSettings.javaScripts[]" value="/accounting/images/paymentMethodType.js" global="true"/>
                <set field="hasPaymentEditPermission" from-field="permResult.hasPermission"/>
            </actions>
            <widgets>
                <decorator-screen name="CommonTreasurerPortalDecorator" location="component://accounting/widget/CommonScreens.xml">
                    <decorator-section name="body">
                    	<include-menu name="IncomingDepositsTabBar" location="component://accounting/widget/AccountingMenus.xml"/>
                        <section>
                        	<condition>
                        		<if-compare operator="equals" value="true" field="hasPaymentEditPermission"/>
                        	</condition>
                            <widgets>
                                <screenlet title="New Incoming Deposits">
                                    <include-form name="NewIncomingDepositsReceipt" location="component://accounting/widget/TreasurerPortalForms.xml"/>
                                </screenlet>
                            </widgets>
                            <fail-widgets>
                            	<label style="h3" text="${uiLabelMap.newPaymentScreenError}"/>
                            </fail-widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
    
    <screen name="IncomingDepositsRefund">
        <section>
            <actions>
                <set field="titleProperty" value="Incoming Deposits Receipts"/>
                <set field="tabButtonItem" value="IncomingDeposits"/>
                <set field="tabButtonItem4" value="IncomingDepositsRefund"/>
                <set field="viewSize" from-field="parameters.VIEW_SIZE" type="Integer" default-value="1000"/>
                <service service-name="acctgInvoicePermissionCheck" result-map="permResult">
                    <field-map field-name="mainAction" value="PAYMENT_EDIT"/>
                </service>
                <set field="hasPaymentEditPermission" from-field="permResult.hasPermission"/>
                <service service-name="performFind" result-map="result">
	                <field-map field-name="inputFields" from-field="parameters"/>
	                <field-map field-name="entityName" value="PaymentAndTypeAndCreditCard"/>
	                <field-map field-name="orderBy" value="effectiveDate DESC"/>
	                <field-map field-name="viewIndex" from-field="viewIndex"/>
	                <field-map field-name="viewSize" from-field="viewSize"/>
	            </service>
	            <set field="payments" from-field="result.listIt"/>
            </actions>
            <widgets>
                <decorator-screen name="CommonTreasurerPortalDecorator" location="component://accounting/widget/CommonScreens.xml">
                    <decorator-section name="body">
                    	<include-menu name="IncomingDepositsTabBar" location="component://accounting/widget/AccountingMenus.xml"/>
                        <section>
                            <widgets>
                                <decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
                                    <decorator-section name="menu-bar">
                                    	<section>
                                    		<condition>
                                    		<if-compare operator="equals" value="true" field="hasPaymentEditPermission"/>
                                    		</condition>
                                    		<widgets>
                                             <container style="button-bar">
                                            <link target="NewIncomingDepositsRefund" text="${uiLabelMap.CommonCreateNew}" style="buttontext create"/>
                                        </container>
                                        </widgets>
                                    </section>
                                    </decorator-section>
                                    <decorator-section name="search-options">
                                        <include-form name="FindIncomingDepositsRefund" location="component://accounting/widget/TreasurerPortalForms.xml"/>
                                    </decorator-section>
                                    <decorator-section name="search-results">
                                    	<platform-specific>
                                           	<html><html-template location="component://accounting/webapp/accounting/payment/ListSearchPayments.ftl"/></html>
                                       	</platform-specific>
                                        <!-- <include-form name="ListPayments"  location="component://accounting/widget/PaymentForms.xml"/> -->
                                    </decorator-section>
                                </decorator-screen>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="NewIncomingDepositsRefund">
       <section>
            <actions>
                <set field="titleProperty" value="New Deposits Refund"/>
                <set field="tabButtonItem" value="IncomingDeposits"/>
                <set field="tabButtonItem4" value="IncomingDepositsRefund"/>
                <service service-name="acctgInvoicePermissionCheck" result-map="permResult">
                    <field-map field-name="mainAction" value="PAYMENT_EDIT"/>
                </service>
                <set field="layoutSettings.javaScripts[]" value="/accounting/images/paymentMethodType.js" global="true"/>
                <set field="hasPaymentEditPermission" from-field="permResult.hasPermission"/>
            </actions>
            <widgets>
                <decorator-screen name="CommonTreasurerPortalDecorator" location="component://accounting/widget/CommonScreens.xml">
                    <decorator-section name="body">
                    	<include-menu name="IncomingDepositsTabBar" location="component://accounting/widget/AccountingMenus.xml"/>
                        <section>
                        	<condition>
                        		<if-compare operator="equals" value="true" field="hasPaymentEditPermission"/>
                        	</condition>
                            <widgets>
                                <screenlet title="New Incoming Deposits">
                                    <include-form name="NewIncomingDepositsRefund" location="component://accounting/widget/TreasurerPortalForms.xml"/>
                                </screenlet>
                            </widgets>
                            <fail-widgets>
                            	<label style="h3" text="${uiLabelMap.newPaymentScreenError}"/>
                            </fail-widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
    <!-- ==================================== Outgoing Deposits  ===================================   -->
    
    <screen name="OutgoingDepositsRefund">
        <section>
            <actions>
                <set field="titleProperty" value="Outgoing Deposits Refund"/>
                <set field="tabButtonItem" value="OutgoingDeposits"/>
                <set field="tabButtonItem4" value="OutgoingDepositsRefund"/>
                <set field="viewSize" from-field="parameters.VIEW_SIZE" type="Integer" default-value="1000"/>
                <service service-name="acctgInvoicePermissionCheck" result-map="permResult">
                    <field-map field-name="mainAction" value="PAYMENT_EDIT"/>
                </service>
                <set field="hasPaymentEditPermission" from-field="permResult.hasPermission"/>
                <service service-name="performFind" result-map="result">
	                <field-map field-name="inputFields" from-field="parameters"/>
	                <field-map field-name="entityName" value="PaymentAndTypeAndCreditCard"/>
	                <field-map field-name="orderBy" value="effectiveDate DESC"/>
	                <field-map field-name="viewIndex" from-field="viewIndex"/>
	                <field-map field-name="viewSize" from-field="viewSize"/>
	            </service>
	            <set field="payments" from-field="result.listIt"/>
            </actions>
            <widgets>
                <decorator-screen name="CommonTreasurerPortalDecorator" location="component://accounting/widget/CommonScreens.xml">
                    <decorator-section name="body">
                    	<include-menu name="OutgoingDepositsTabBar" location="component://accounting/widget/AccountingMenus.xml"/>
                        <section>
                            <widgets>
                                <decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
                                    <decorator-section name="menu-bar">
                                    	<section>
                                    		<condition>
                                    		<if-compare operator="equals" value="true" field="hasPaymentEditPermission"/>
                                    		</condition>
                                    		<widgets>
                                             <container style="button-bar">
                                            <link target="NewOutgoingDepositsRefund" text="${uiLabelMap.CommonCreateNew}" style="buttontext create"/>
                                        </container>
                                        </widgets>
                                    </section>
                                    </decorator-section>
                                    <decorator-section name="search-options">
                                        <include-form name="FindOutgoingDepositsRefund" location="component://accounting/widget/TreasurerPortalForms.xml"/>
                                    </decorator-section>
                                    <decorator-section name="search-results">
                                    	<platform-specific>
                                           	<html><html-template location="component://accounting/webapp/accounting/payment/ListSearchPayments.ftl"/></html>
                                       	</platform-specific>
                                        <!-- <include-form name="ListPayments"  location="component://accounting/widget/PaymentForms.xml"/> -->
                                    </decorator-section>
                                </decorator-screen>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="NewOutgoingDepositsRefund">
       <section>
            <actions>
                <set field="titleProperty" value="New Deposits Refund"/>
                <set field="tabButtonItem" value="OutgoingDeposits"/>
                <set field="tabButtonItem4" value="OutgoingDepositsRefund"/>
                <service service-name="acctgInvoicePermissionCheck" result-map="permResult">
                    <field-map field-name="mainAction" value="PAYMENT_EDIT"/>
                </service>
               	<set field="layoutSettings.javaScripts[]" value="/accounting/images/paymentMethod.js" global="true"/>
                <set field="hasPaymentEditPermission" from-field="permResult.hasPermission"/>
            </actions>
            <widgets>
                <decorator-screen name="CommonTreasurerPortalDecorator" location="component://accounting/widget/CommonScreens.xml">
                    <decorator-section name="body">
                    	<include-menu name="OutgoingDepositsTabBar" location="component://accounting/widget/AccountingMenus.xml"/>
                        <section>
                        	<condition>
                        		<if-compare operator="equals" value="true" field="hasPaymentEditPermission"/>
                        	</condition>
                            <widgets>
                                <screenlet title="New Incoming Deposit">
                                    <include-form name="NewOutgoingDepositsRefund" location="component://accounting/widget/TreasurerPortalForms.xml"/>
                                </screenlet>
                            </widgets>
                            <fail-widgets>
                            	<label style="h3" text="${uiLabelMap.newPaymentScreenError}"/>
                            </fail-widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
    
    <screen name="OutgoingDepositsPaid">
        <section>
            <actions>
                <set field="titleProperty" value="Incoming Deposits Receipts"/>
                <set field="tabButtonItem" value="OutgoingDeposits"/>
                <set field="tabButtonItem4" value="OutgoingDepositsPaid"/>
                <set field="viewSize" from-field="parameters.VIEW_SIZE" type="Integer" default-value="1000"/>
                <service service-name="acctgInvoicePermissionCheck" result-map="permResult">
                    <field-map field-name="mainAction" value="PAYMENT_EDIT"/>
                </service>
                <set field="hasPaymentEditPermission" from-field="permResult.hasPermission"/>
                <service service-name="performFind" result-map="result">
	                <field-map field-name="inputFields" from-field="parameters"/>
	                <field-map field-name="entityName" value="PaymentAndTypeAndCreditCard"/>
	                <field-map field-name="orderBy" value="effectiveDate DESC"/>
	                <field-map field-name="viewIndex" from-field="viewIndex"/>
	                <field-map field-name="viewSize" from-field="viewSize"/>
	            </service>
	            <set field="payments" from-field="result.listIt"/>
            </actions>
            <widgets>
                <decorator-screen name="CommonTreasurerPortalDecorator" location="component://accounting/widget/CommonScreens.xml">
                    <decorator-section name="body">
                    	<include-menu name="OutgoingDepositsTabBar" location="component://accounting/widget/AccountingMenus.xml"/>
                        <section>
                            <widgets>
                                <decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
                                    <decorator-section name="menu-bar">
                                    	<section>
                                    		<condition>
                                    		<if-compare operator="equals" value="true" field="hasPaymentEditPermission"/>
                                    		</condition>
                                    		<widgets>
                                             <container style="button-bar">
                                            <link target="NewOutgoingDepositsPaid" text="${uiLabelMap.CommonCreateNew}" style="buttontext create"/>
                                        </container>
                                        </widgets>
                                    </section>
                                    </decorator-section>
                                    <decorator-section name="search-options">
                                        <include-form name="FindOutgoingDepositsPaid" location="component://accounting/widget/TreasurerPortalForms.xml"/>
                                    </decorator-section>
                                    <decorator-section name="search-results">
                                    	<platform-specific>
                                           	<html><html-template location="component://accounting/webapp/accounting/payment/ListSearchPayments.ftl"/></html>
                                       	</platform-specific>
                                        <!-- <include-form name="ListPayments"  location="component://accounting/widget/PaymentForms.xml"/> -->
                                    </decorator-section>
                                </decorator-screen>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="NewOutgoingDepositsPaid">
       <section>
            <actions>
                <set field="titleProperty" value="New Deposits Refund"/>
                <set field="tabButtonItem" value="OutgoingDeposits"/>
                <set field="tabButtonItem4" value="OutgoingDepositsPaid"/>
                <service service-name="acctgInvoicePermissionCheck" result-map="permResult">
                    <field-map field-name="mainAction" value="PAYMENT_EDIT"/>
                </service>
                <set field="layoutSettings.javaScripts[]" value="/accounting/images/paymentMethod.js" global="true"/>
                <set field="hasPaymentEditPermission" from-field="permResult.hasPermission"/>
            </actions>
            <widgets>
                <decorator-screen name="CommonTreasurerPortalDecorator" location="component://accounting/widget/CommonScreens.xml">
                    <decorator-section name="body">
                    	<include-menu name="OutgoingDepositsTabBar" location="component://accounting/widget/AccountingMenus.xml"/>
                        <section>
                        	<condition>
                        		<if-compare operator="equals" value="true" field="hasPaymentEditPermission"/>
                        	</condition>
                            <widgets>
                                <screenlet title="New Incoming Deposits">
                                    <include-form name="NewOutgoingDepositsPaid" location="component://accounting/widget/TreasurerPortalForms.xml"/>
                                </screenlet>
                            </widgets>
                            <fail-widgets>
                            	<label style="h3" text="${uiLabelMap.newPaymentScreenError}"/>
                            </fail-widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
</screens>