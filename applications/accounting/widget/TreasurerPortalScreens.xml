<?xml version="1.0" encoding="UTF-8"?>
<screens xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="http://ofbiz.apache.org/dtds/widget-screen.xsd">
    <screen name="FindNonBankAccount">
        <section>
            <actions>
                <set field="titleProperty" value="Non Finacial Accounts"/>
                  <set field="tabButtonItem" value="FindFinAccountAlt"/>
                 <set field="tabButtonItem2" value="FindNonBankAccount"/>
                <set field="viewIndex" from-field="parameters.VIEW_INDEX" type="Integer" default-value="0"/>
                <set field="viewSize" from-field="parameters.VIEW_SIZE" type="Integer" default-value="20"/>
               <!--  <set field="displayAdvancedSearch" from-field="parameters.displayAdvancedSearch"/> -->
                <set field="parameters.ownerPartyId" value="Company"/>
               <!--  <set field="parameters.finAccountTypeId" value="BANK_ACCOUNT"/> -->
                <set field="noConditionFind" value="Y"/>
                <set field="screenFlag" value="NON_BANKACCOUNT" /> 
                <service service-name="acctgFinAcctPermissionCheck" result-map="permResult">
                    <field-map field-name="mainAction" value="FINACCOUNT_EDIT"/>
                </service>
                <set field="hasFinEditPermission" from-field="permResult.hasPermission"/>
                 <script location="component://accounting/webapp/accounting/WEB-INF/actions/EditFinaccount.groovy"/>
            </actions>
            <widgets>
             <decorator-screen name="CashierCommonDecorator" location="component://accounting/widget/CommonScreens.xml">
              <!--   <decorator-screen name="CommonFinAccountDecorator" location="${parameters.finAccountDecoratorLocation}"> -->
                    <decorator-section name="body">
                        <section>
                            <widgets>
                                <decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
                                    <decorator-section name="menu-bar">
                                        <container style="button-bar">
                                            <include-menu name="CompanyFinAccountTabBar" location="component://accounting/widget/AccountingMenus.xml"/>
                                        </container>
                                    </decorator-section>
                                   <!--  <decorator-section name="search-options">
                                        <section>
                                            <condition>
                                                <if-compare field="displayAdvancedSearch" operator="equals" value="true"/>
                                            </condition>
                                            <widgets>
                                                <include-form name="FindFinAccounts" location="component://accounting/widget/FinAccountForms.xml"/>
                                            </widgets>
                                        </section>
                                    </decorator-section> -->
                                    <decorator-section name="search-results">
                                        <include-form name="ListNonBankAccounts" location="component://accounting/widget/TreasurerPortalForms.xml"/>
                                    </decorator-section>
                                </decorator-screen>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>  
    <screen name="FindFinAccountAlt">
        <section>
            <actions>
                <set field="titleProperty" value="PageTitleFindFinAccount"/>
                  <set field="tabButtonItem" value="FindFinAccountAlt"/>
                 <set field="tabButtonItem2" value="FindFinAccountAlt"/>
                <set field="viewIndex" from-field="parameters.VIEW_INDEX" type="Integer" default-value="0"/>
                <set field="viewSize" from-field="parameters.VIEW_SIZE" type="Integer" default-value="20"/>
               <!--  <set field="displayAdvancedSearch" from-field="parameters.displayAdvancedSearch"/> -->
                <set field="parameters.ownerPartyId" value="Company"/>
                <set field="parameters.finAccountTypeId" value="BANK_ACCOUNT"/>
                <set field="noConditionFind" value="Y"/>
                <!-- <field name="noConditionFind"><hidden value="Y"/> -->
                <set field="screenFlag" value="BANKACCOUNT" /> 
                <service service-name="acctgFinAcctPermissionCheck" result-map="permResult">
                    <field-map field-name="mainAction" value="FINACCOUNT_EDIT"/>
                </service>
                <set field="hasFinEditPermission" from-field="permResult.hasPermission"/>
            </actions>
            <widgets>
             <decorator-screen name="CashierCommonDecorator" location="component://accounting/widget/CommonScreens.xml">
              <!--   <decorator-screen name="CommonFinAccountDecorator" location="${parameters.finAccountDecoratorLocation}"> -->
                    <decorator-section name="body">
                        <section>
                            <widgets>
                                <decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
                                    <decorator-section name="menu-bar">
                                        <container style="button-bar">
                                            <include-menu name="CompanyFinAccountTabBar" location="component://accounting/widget/AccountingMenus.xml"/>
                                        </container>
                                    </decorator-section>
                                  <!--   <decorator-section name="search-options">
                                        <section>
                                            <condition>
                                                <if-compare field="displayAdvancedSearch" operator="equals" value="true"/>
                                            </condition>
                                            <widgets>
                                                <include-form name="FindFinAccounts" location="component://accounting/widget/FinAccountForms.xml"/>
                                            </widgets>
                                        </section>
                                    </decorator-section> -->
                                    <decorator-section name="search-results">
                                        <include-form name="ListFinAccountsAlt" location="component://accounting/widget/TreasurerPortalForms.xml"/>
                                    </decorator-section>
                                </decorator-screen>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>  
    <screen name="EditFinAccountAlt">
        <section>
            <actions>
                <set field="titleProperty" value="PageTitleEditFinAccount"/>
                <set field="tabButtonItem" value="FindFinAccountAlt"/>
                 <set field="tabButtonItem2" value="EditFinAccountAlt"/>
                
                <set field="finAccountId" from-field="parameters.finAccountId"/>
                <property-to-field field="defaultCurrencyUomId" resource="general" property="currency.uom.id.default" default="INR"/>
                <service service-name="acctgFinAcctPermissionCheck" result-map="permResult">
                    <field-map field-name="mainAction" value="FINACCOUNT_EDIT"/>
                </service>
                <set field="hasFinEditPermission" from-field="permResult.hasPermission"/> 
                <entity-one entity-name="FinAccount" value-field="finAccount"/>
                 
            </actions>
            <widgets>
              <decorator-screen name="CashierCommonDecorator" location="component://accounting/widget/CommonScreens.xml">
             <!--    <decorator-screen name="CommonFinAccountDecorator" location="${parameters.finAccountDecoratorLocation}"> -->
                    <decorator-section name="body">
                      <include-menu name="CompanyFinAccountTabBar" location="component://accounting/widget/AccountingMenus.xml"/>
                        <section>
                            <condition>
                            	<if-service-permission service-name="acctgFinAcctPermissionCheck" main-action="FINACCOUNT_EDIT"/>
                                <not><if-empty field="finAccountId"/></not>
                            </condition>
                            <widgets>
                                <container style="button-bar">
                                    <link target="EditFinAccount" text="${uiLabelMap.AccountingCreateNewFinAccount}" style="buttontext create"/>
                                </container>
                                <label style="h1" text="${uiLabelMap.AccountingEditFinAccount}"></label>
                                <screenlet id="EditFinAccountPanel" collapsible="true">
                                    <include-form name="EditFinAccount" location="component://accounting/widget/FinAccountForms.xml"/>
                                </screenlet>
                            </widgets>
                            <fail-widgets>
                                <label style="h1" text="${uiLabelMap.AccountingCreateNewFinAccount}"></label>
                                <screenlet id="CreateFinAccountPanel" collapsible="true">
                                    <include-form name="EditFinAccount" location="component://accounting/widget/FinAccountForms.xml"/>
                                </screenlet>
                            </fail-widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>  
     <screen name="FindFinAccountTransAlt">
        <section>
            <actions>
                <set field="titleProperty" value="PageTitleFindFinAccountTrans"/>
                  <set field="tabButtonItem" value="FindFinAccountAlt"/>
                <set field="tabButtonItem2" value="FinAccountTrans"/>
                <service service-name="getFinAccountTransListAndTotals" result-map="finAccountTransListAndTotals" auto-field-map="true"/>
                <set field="finAccountTransList" type="List" from-field="finAccountTransListAndTotals.finAccountTransList"/>
                <set field="searchedNumberOfRecords" type="Integer" from-field="finAccountTransListAndTotals.searchedNumberOfRecords"/>
                <set field="grandTotal" type="BigDecimal" from-field="finAccountTransListAndTotals.grandTotal"/>
                <set field="createdGrandTotal" type="BigDecimal" from-field="finAccountTransListAndTotals.createdGrandTotal"/>
                <set field="totalCreatedTransactions" type="Long" from-field="finAccountTransListAndTotals.totalCreatedTransactions"/>
                <set field="approvedGrandTotal" type="BigDecimal" from-field="finAccountTransListAndTotals.approvedGrandTotal"/>
                <set field="totalApprovedTransactions" type="Long" from-field="finAccountTransListAndTotals.totalApprovedTransactions"/>
                <set field="createdApprovedGrandTotal" type="BigDecimal" from-field="finAccountTransListAndTotals.createdApprovedGrandTotal"/>
                <set field="totalCreatedApprovedTransactions" type="Long" from-field="finAccountTransListAndTotals.totalCreatedApprovedTransactions"/>
                <set field="finAccountId" from-field="parameters.finAccountId"/>
                <entity-one entity-name="FinAccount" value-field="finAccount"/>
                <set field="glReconciliationId" from-field="parameters.glReconciliationId"/>
                <set field="finAccountTransId" from-field="parameters.finAccountTransId"/>
                <service service-name="acctgFinAcctPermissionCheck" result-map="permResult">
                    <field-map field-name="mainAction" value="FINACCOUNTTX_EDIT"/>
                </service>
                <set field="hasFinTxEditPermission" from-field="permResult.hasPermission"/> 
            </actions>
            <widgets>
                 <decorator-screen name="CashierCommonDecorator" location="component://accounting/widget/CommonScreens.xml">
             <!--    <decorator-screen name="CommonFinAccountDecorator" location="${parameters.finAccountDecoratorLocation}"> -->
                    <decorator-section name="body">
                        <include-menu name="CompanyFinAccountTabBar" location="component://accounting/widget/AccountingMenus.xml"/>
                    	<section>
                    		<condition>
                    			<if-compare operator="equals" value="true" field="hasFinTxEditPermission"/>
                    		</condition>
                    		<widgets>
                        		<link target="EditFinAccountTrans" text="${uiLabelMap.AccountingFinAccountTransationsAdjustment}" style="buttontext">
                           			<parameter param-name="finAccountId" from-field="finAccountId"/>
                           			<parameter param-name="finAccountTransTypeId" value="ADJUSTMENT"/>
                           			<parameter param-name="entryType" value="Adjustment"/>                           			
                        		</link>
                        		<!-- <link target="EditFinAccountTrans" text="${uiLabelMap.AccountingFinAccountTransationsPayment}" style="buttontext">
                           			<parameter param-name="finAccountId" from-field="finAccountId"/>
                           			<parameter param-name="entryType" value="Payment"/>                           			
                        		</link> -->
                        		<link target="EditFinAccountTrans" text="${uiLabelMap.AccountingFinAccountTransationsContra}" style="buttontext">
                           			<parameter param-name="finAccountId" from-field="finAccountId"/>                           			
                           			<parameter param-name="entryType" value="Contra"/>
                           		</link>                        
                        	</widgets>
                        	</section>
                        <section>
                            <condition>
                            	<if-service-permission service-name="acctgFinAcctPermissionCheck" main-action="FINACCOUNTREC_EDIT" />
                                <if-compare field="finAccount.finAccountTypeId" operator="equals" value="BANK_ACCOUNT"/>
                            </condition>
                            <widgets>
                                <link target="FinancialAccountReconciliation" text="${uiLabelMap.FinAccountReconciliation}" style="buttontext">
                                    <parameter param-name="finAccountId" from-field="finAccountId"/>
                                    <parameter param-name="statusId" value="FINACT_TRNS_CREATED"/>
                                </link>
                            </widgets>
                        </section>
                        <decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
                            <decorator-section name="search-options">
                                <include-form name="FindFinAccountTransactionsAlt" location="component://accounting/widget/TreasurerPortalForms.xml"/>
                            </decorator-section> 
                            <decorator-section name="search-results">
                                <platform-specific>
                                    <html><html-template location="component://accounting/webapp/accounting/finaccounttrans/FinAccountTrans.ftl"/></html>
                                </platform-specific>
                            </decorator-section>
                        </decorator-screen>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
</screens>