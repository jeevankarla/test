<?xml version="1.0" encoding="UTF-8"?>
<screens xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:noNamespaceSchemaLocation="http://ofbiz.apache.org/dtds/widget-screen.xsd">
	
	
	<screen name="StockDetailsDC">
		<section>
			<actions>
				<set field="titleProperty" value="Stock Details" />
				<!-- <set field="headerItem" value="facility" /> -->
				<set field="tabButtonItem" value="StockDetailsDC" />
				<!-- <set field="parameters.facilityId" from-field="parameters.facilityId"></set> -->
				<set field="isInventorySales" value="Y"/>
				<script	location="component://depotsales/webapp/depotsales/WEB-INF/actions/depotsales/StockDetailsDC.groovy" />
			</actions>
			<widgets>
				<decorator-screen name="DepotTransCommonDecoratorDC" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<screenlet title="Find Stock Details">
							<include-form name="FindStockDetailsDC" location="component://depotsales/widget/DepotSalesForms.xml" />
						</screenlet>
						<screenlet title="List Of Stock">
							<platform-specific><html><html-template location="component://depotsales/webapp/depotsales/depotsales/StockDetailsDC.ftl"/></html></platform-specific>
							<include-form name="ListStockDetailsDC" location="component://depotsales/widget/DepotSalesForms.xml" />
						</screenlet>
						<platform-specific>
							<html>
								<html-template location="component://depotsales/webapp/depotsales/depotsales/MakeSaleOrderDC.ftl" />
							</html>
						</platform-specific>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	
<screen name="FindDepotTransPODepotDC">
		<section>
			<actions>
				<set field="titleProperty" value="Find Purchase Order" />
				<set field="tabButtonItem" value="FindDepotTransPODepotDC" />
				<set field="tabButtonItem2" value="FindDepotTransPODepotDC" />
				<script location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/purchases/poRefNoSearchDC.groovy"/>
				<script location="component://depotsales/webapp/depotsales/WEB-INF/actions/depotsales/DepotTransROSearchFilterDC.groovy" />
				<service service-name="performFind" result-map="result"
					result-map-list="listIt">
					<field-map field-name="inputFields" from-field="parameters" />
					<field-map field-name="entityName" value="OrderHeaderAndSequenceAndRoles" />
					<field-map field-name="orderBy" value="-orderDate" />
				</service>
				<set field="targetRequest" value="FindDepotTransPODepotDC" />
			<!-- 	<set field="ChannalType" value="MATERIAL_PUR_CHANNEL" />  -->
				<!-- <set field="partyId" from-field="parameters.partyId" /> -->
				<set field="roleTypeId" value="BILL_FROM_VENDOR" />
				<set field="parameters.roleTypeId" from-field="roleTypeId" />
				<set field="parameters.noConditionFind" value="N"></set>
				<set field="parameters.purposeTypeId" value="DEPOT_PURCHASE"></set>
			<!-- 	<set field="parameters.salesChannelEnumId" value="MATERIAL_PUR_CHANNEL"></set>  -->
				<set field="parameters.partyId" value="${tempPartyId}" />
				<script
					location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/purchases/POSearchFilterDC.groovy" />
			</actions>
			<widgets>
				<decorator-screen name="DepotTransCommonDecoratorDC" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<include-menu location="component://depotsales/widget/DepotSalesMenus.xml"
							name="FindDepotTransPOSubTabBarDepotDC" />
						<section>
							<widgets>
								<section>
                             		<condition>
                            			<if-has-permission permission="DEPOTSALES"  action="_CREATE_PO"/>
                            		</condition>
									<widgets>
										<link target="CreateDepotTransPODC" text="Create PO" style="buttontext" />
									</widgets>
								</section>
								<screenlet title="search-options">
									<include-form name="FindDepotTransPurchaseOrderDC"
										location="component://depotsales/widget/DepotOperationForms.xml" />
								</screenlet>
								<screenlet title="Search-results">
									<include-form name="listDepotTransPurchaseOrdersDC"
										location="component://depotsales/widget/DepotOperationForms.xml" />
								</screenlet>
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

<screen name="CreateDepotTransPODC">
		<section>
			<actions>
				<set field="titleProperty" value="Find Purchase Order" />
				<set field="tabButtonItem" value="FindDepotTransPODepotDC" />
				<set field="targetRequest" value="FindDepotTransPODepotDC" />
				<!-- <set field="ChannalType" value="PROD_PRCHSE_CHANNEL"/> -->
				<set field="parameters.roleTypeId" value="SUPPLIER" />
				<set field="changeFlag" value="PurchaseOrder" />
				<set field="subDivDeptFlag" value="PurchaseOrder" />
				<set field="parameters.changeFlag" value="PurchaseOrder" />
				<set field="purchaseTypeFlag" from-field="parameters.purchaseTypeFlag" />
				<set field="parameters.partyStatusId" value="PARTY_ENABLED" />
				<!-- <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/enablePartyAutoComplete.groovy"/> -->
				<script
					location="component://depotsales/webapp/depotsales/WEB-INF/actions/facility/enableDepotPartyAutoCompleteDC.groovy" />
				<script
					location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/orgnigationDeptDC.groovy" />
				<script
					location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/purchases/PurchaseEntryFormNewDC.groovy" />
				<script
					location="component://depotsales/webapp/depotsales/WEB-INF/actions/facility/purchaseOrderDetailsEntryDepotTransDC.groovy" />
			</actions>
			<widgets>
				<decorator-screen name="DepotTransCommonDecoratorDC" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<widgets>
								<label style="h1">New PO</label>
								<platform-specific>
									<html>
										<html-template
											location="component://depotsales/webapp/depotsales/depotsales/CreateDepotTransPODC.ftl" />
									</html>
								</platform-specific>
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	
	<screen name="PurchaseOrderViewDEPOTpdfDC">
		<section>
			<actions>
				<property-map resource="OrderUiLabels" map-name="uiLabelMap" global="true"/>
				<property-map resource="ProductUiLabels" map-name="uiLabelMap" global="true"/>
				<property-map resource="PartyUiLabels" map-name="uiLabelMap" global="true"/>
				<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
				<script location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/purchases/POReportDepotDetailsDC.groovy"/> 
			</actions>
			<widgets> 
				<section>
					<widgets>
						<platform-specific>
						 	<xsl-fo>
								<html-template
								location="component://depotsales/webapp/depotsales/depotsales/purchaseOrderDEPOTDC.fo.ftl" />
							</xsl-fo>
						</platform-specific>
					</widgets>
				</section>
			</widgets>
		</section>
	</screen>

<screen name="EditMaterialDepotTransPODC">
		<section>
			<actions>
				<set field="titleProperty" value="Find Purchase Order" />
				<set field="tabButtonItem" value="FindDepotTransPODepotDC" />
				<set field="targetRequest" value="FindMaterialPODC" />
				<set field="parameters.roleTypeId" value="SUPPLIER" />
				<set field="orderId" from-field="parameters.orderId" />
				<set field="changeFlag" value="PurchaseOrder" />
				<set field="parameters.POId" from-field="orderId" />
				<set field="parameters.changeFlag" value="PurchaseOrder" />
				<script
					location="component://depotsales/webapp/depotsales/WEB-INF/actions/facility/enableDepotPartyAutoCompleteDC.groovy" />
				<script
					location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/orgnigationDeptDC.groovy" />
				<script
					location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/purchases/PurchaseEntryFormNewDC.groovy" />
				<script
					location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/purchases/EditPOEntryFormDC.groovy" />
				<set field="purchaseTypeFlag" from-field="parameters.purchaseTypeFlag" />
			</actions>
			<widgets>
				<decorator-screen name="DepotTransCommonDecoratorDC" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<widgets>
								<label style="h1">Order Id : "${orderId}"</label>

								<platform-specific>
									<html>
										<html-template
											location="component://depotsales/webapp/depotsales/depotsales/CreateDepotTransPODC.ftl" />
									</html>
								</platform-specific>
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	
	<screen name="DepotTransGRNShipmentsDC">
		<section>
			<actions>
				<set field="titleProperty" value="Find GRN Shipments" />
				<set field="tabButtonItem" value="DepotTransReceiptsDC" />
				<set field="tabButtonItem2" value="DepotTransGRNShipmentsDC" />
				<set field="viewIndex" from-field="parameters.VIEW_INDEX" type="Integer" />
				<set field="viewSize" from-field="parameters.VIEW_SIZE" type="Integer"
					default-value="20" />
				<set field="targetRequest" value="FindDepotTransGRNShipmentsDC" />
				<set field="noConditionFind" value="Y" />
				<script location="component://depotsales/webapp/depotsales/WEB-INF/actions/depotsales/shipmentROfilterDC.groovy" />
				<service service-name="performFind" result-map="result"
					result-map-list="listIt">
					<field-map field-name="inputFields" from-field="parameters" />
					<field-map field-name="inputFields.shipmentTypeId" value="DEPOT_SHIPMENT" />
					<field-map field-name="entityName" value="Shipment" />
					<field-map field-name="orderBy" value="-estimatedShipDate" />
					<field-map field-name="viewIndex" from-field="viewIndex" />
					<field-map field-name="viewSize" from-field="viewSize" />
				</service>
				<script
					location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/purchases/ShipmentPartyViewDC.groovy" />
				<script
					location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/purchases/purchaseDepartmentsDC.groovy" />
				
				<set field="parameters.partyIdTo" value="${parameters.tempPartyId}" />
			</actions>
			<widgets>
				<decorator-screen name="DepotTransCommonDecoratorDC"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<include-menu name="DepotTransReceiptTabBarDC"
							location="component://depotsales/widget/DepotSalesMenus.xml" />
						<section>
							<widgets>
								<platform-specific>
									<html>
										<html-template
											location="component://depotsales/webapp/depotsales/depotsales/LinkGRNWithPoDepotDC.ftl" />
									</html>
								</platform-specific>
								<decorator-screen name="FindScreenDecorator"
									location="component://common/widget/CommonScreens.xml">
									<decorator-section name="search-options">
										<include-form name="FindDepotTransMaterialShipmentDC"
											location="component://depotsales/widget/DepotSalesForms.xml" />
									</decorator-section>
									<decorator-section name="search-results">
										<screenlet title="">
										
											<include-form name="listDepotTransMaterialShipmentsDC"
												location="component://depotsales/widget/DepotSalesForms.xml" />
										</screenlet>
										<platform-specific>
											<html>
												<html-template
													location="component://depotsales/webapp/depotsales/depotsales/qcApprovalDepotDC.ftl" />
											</html>
										</platform-specific>
									</decorator-section>
								</decorator-screen>
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	
	<screen name="DepotSalesInventorySalesDC">
  		<section>
  			<actions>
  				<set field="titleProperty" value="Inventory Transfers" />
  				<!-- <set field="headerItem" value="facility" /> -->
  				<set field="tabButtonItem" value="PhysicalInventoryDC" />
  				<set field="tabButtonItem2" value="makeInventorySalesDC" />
  				<!-- <set field="parameters.facilityId" from-field="parameters.facilityId"></set> -->
  				<set field="isInventorySales" value="Y"/>
  				<script	location="component://depotsales/webapp/depotsales/WEB-INF/actions/depotsales/FindFacilityPhysicalInventoryDC.groovy" />
  			</actions>
  			<widgets>
  				<decorator-screen name="DepotTransCommonDecoratorDC" location="${parameters.mainDecoratorLocation}">
  					<decorator-section name="body">
  						<include-menu location="component://depotsales/widget/DepotSalesMenus.xml" name="InventorySalesSubTabBarDC" />
  						<screenlet title="Find Shipmet Inventory Items">
  							<include-form name="FindPhysicalInventoryDepotForSaleDC"	location="component://depotsales/widget/DepotSalesForms.xml" />
  						</screenlet>
  						<screenlet title="List Of Inventory Items">
  							<platform-specific><html><html-template location="component://depotsales/webapp/depotsales/depotsales/stockXferFormDC.ftl"/></html></platform-specific>
  							<include-form name="ListPhysicalInventoryDepotForSaleDC" location="component://depotsales/widget/DepotSalesForms.xml" />
  						</screenlet>
  						<platform-specific>
  							<html>
  								<html-template location="component://depotsales/webapp/depotsales/depotsales/MakeSaleOrderDC.ftl" />
  							</html>
  						</platform-specific>
  					</decorator-section>
  				</decorator-screen>
  			</widgets>
  		</section>
  	</screen>
  	
  	<screen name="ProcessInventorySalesOrderDC">
     		<section>
     			<actions>
      				<set field="titleProperty" value="Process Sale Indent" />
      				<set field="tabButtonItem" value="PhysicalInventoryDC" />
      				<set field="tabButtonItem2" value="paymentForSalesDC" />
      				<set field="screenFlag" value="depotSales" />
      				<set field="targetRequest" value="FindSalesIndentPaymentDC" />
      				<script
      					location="component://depotsales/webapp/depotsales/WEB-INF/actions/depotsales/ListDepotSalesOrderPaymentSearchResultsDC.groovy" />
      			   <!--  <script
      					location="component://depotsales/webapp/depotsales/WEB-INF/actions/depotsales/ListDepotSalesOrderAdvancePayments.groovy" /> -->
      	
      			</actions>
      			<widgets>
      				<decorator-screen name="DepotTransCommonDecoratorDC" location="${parameters.mainDecoratorLocation}">
      					<decorator-section name="body">
      						<include-menu location="component://depotsales/widget/DepotSalesMenus.xml" name="InventorySalesSubTabBarDC" />
     						<section>
      							<widgets>
      							<decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
      							 		<decorator-section name="search-options">
                                              <include-form name="FindSalesIndentPaymentDC" location="component://depotsales/widget/DepotOperationForms.xml"/>
                                         </decorator-section>
                                          <decorator-section name="search-results">
      								<!-- <screenlet title="Depot Orders">
      									<platform-specific>
      										<html>
      											<html-template
      												location="component://depotsales/webapp/depotsales/depotsales/ListDepotSearchOrderPayments.ftl" />
      										</html>
      									</platform-specific>
      								</screenlet> -->
      								<platform-specific>
      										<html>
      											<html-template
      												location="component://depotsales/webapp/depotsales/depotsales/viewOrderDetailsDepotDC.ftl" />
      										</html>
      									</platform-specific>
      								<screenlet title="Depot Orders">
                         					<include-form name="ListDepotSearchOrderPaymentsDC" location="component://depotsales/widget/DepotOperationForms.xml"/>
                     					</screenlet>
      								</decorator-section>
      								</decorator-screen>
      							</widgets>
      						</section>
      					</decorator-section>
      				</decorator-screen>
      			</widgets>
      		</section>
      	</screen>
      	
  	<screen name="DepotPurchaseInvoiceViewDC">
  		<section>
  			<actions>
  				<set field="titleProperty" value="Find Purchase Invoices" />
  				<set field="filterByDate" value="true" />
  				<script location="component://depotsales/webapp/depotsales/WEB-INF/actions/facility/sequenceFilterDC.groovy"/>
  				<service service-name="performFind" result-map="result">
  					<field-map field-name="inputFields" from-field="parameters" />
  					<field-map field-name="entityName" value="Invoice" />
  					<field-map field-name="orderBy" value="createdStamp DESC" />
  				</service>
  				<set field="invoices" from-field="result.listIt" />
  				<set field="tabButtonItem" value="purchaseinvoiceDC" />
  				<set field="tabButtonItem5" value="${parameters.subTabButtonValue}" />
  				<set field="tabButtonItem2" value="${parameters.actionSubTabButtonValue}" />
  				<set field="invoiceTypeId" value="${parameters.invoiceTypeId}" />
  				<set field="parameters.costCenterId" value="${parameters.costCenterId}" />	
  				<set field="parameters.partyIdFrom" value="${parameters.tempPartyIdFrom}" />
  				<script
  					location="component://accounting/webapp/ap/WEB-INF/actions/invoices/voucherPaymentMethodDC.groovy" />
  			</actions>
  			<widgets>
  				<decorator-screen name="DepotTransCommonDecoratorDC" location="${parameters.mainDecoratorLocation}">
      					<decorator-section name="body">
  						<section>
  							<widgets>
  								<decorator-screen name="FindScreenDecorator"
  									location="component://common/widget/CommonScreens.xml">
  									<decorator-section name="menu-bar">
  										<container style="button-bar">
  											<link target="partyFinanHistoryDepotDC" text="Party Financial History"
  												style="buttontext create"></link>
  										</container>
  									</decorator-section>
  									<decorator-section name="search-options">
  										<include-form name="FindApInvoicesForDepotDC"
  											location="component://depotsales/widget/DepotSalesForms.xml" />
  									</decorator-section>
  									<decorator-section name="search-results">
  										<screenlet title="Invoices List">
  											<section>
  												<condition>
  													<not>
  														<if-empty field="invoices" />
  													</not>
  												</condition>
  												<widgets>
  													<link text="${uiLabelMap.AccountingExportAsCsv}"
  														style="buttontext" target="InvoiceSearchResultsCsv.csv">
  														<parameter param-name="parentTypeId" from-field="parameters.parentTypeId" />
  														<parameter param-name="invoiceId_op" from-field="parameters.invoiceId_op" />
  														<parameter param-name="invoiceId" from-field="parameters.invoiceId" />
  														<parameter param-name="invoiceId_ic" from-field="parameters.invoiceId_ic" />
  														<parameter param-name="description_op"
  															from-field="parameters.description_op" />
  														<parameter param-name="description" from-field="parameters.description" />
  														<parameter param-name="description_ic"
  															from-field="parameters.description_ic" />
  														<parameter param-name="invoiceTypeId"
  															from-field="parameters.invoiceTypeId" />
  														<parameter param-name="statusId" from-field="parameters.statusId" />
  														<parameter param-name="partyIdFrom" from-field="parameters.partyIdFrom" />
  														<parameter param-name="partyId" from-field="parameters.partyId" />
  														<parameter param-name="invoiceDate_fld0_value"
  															from-field="parameters.invoiceDate_fld0_value" />
  														<parameter param-name="invoiceDate_fld0_op"
  															from-field="parameters.invoiceDate_fld0_op" />
  														<parameter param-name="invoiceDate_fld1_value"
  															from-field="parameters.invoiceDate_fld1_value" />
  														<parameter param-name="invoiceDate_fld1_op"
  															from-field="parameters.invoiceDate_fld1_op" />
  														<parameter param-name="dueDate_fld0_value"
  															from-field="parameters.dueDate_fld0_value" />
  														<parameter param-name="dueDate_fld0_op"
  															from-field="parameters.dueDate_fld0_op" />
  														<parameter param-name="dueDate_fld1_value"
  															from-field="parameters.dueDate_fld1_value" />
  														<parameter param-name="dueDate_fld1_op"
  															from-field="parameters.dueDate_fld1_op" />
  													</link>
  												</widgets>
  											</section>
  											<platform-specific>
  												<html>
  													<html-template
  														location="component://accounting/webapp/accounting/invoice/DepotTransactionPaymentDC.ftl" />
  												</html>
  											</platform-specific>
  											<platform-specific>
  												<html>
  													<html-template
  														location="component://depotsales/webapp/depotsales/depotsales/ListSearchDepotPurchaseInvoicesDC.ftl" />
  												</html>
  											</platform-specific>
  										</screenlet>
  									</decorator-section>
  								</decorator-screen>
  							</widgets>
  						</section>
  					</decorator-section>
  				</decorator-screen>
  			</widgets>
  		</section>
  	</screen>
    
    <screen name="partyFinanHistoryDepotDC">
			<section>
				<actions>
					<set field="tabButtonItem" value="purchaseinvoiceDC" />
					<set field="parameters.hideSearch" value="${parameters.hideSearch}"></set>
					<set field="parameters.noConditionFind" value="${parameters.noConditionFind}"></set>
				</actions>
				<widgets>
					<decorator-screen name="DepotTransCommonDecoratorDC"
						location="component://depotsales/widget/CommonScreens.xml">
						<decorator-section name="body">
							<container>
								<label style="h1">Party Financial History</label>
							</container>
							<screenlet title="Party Search">
								<include-form name="findPartyFinHistoryDepotDC"
									location="component://accounting/widget/ap/forms/InvoiceForms.xml" />
							</screenlet>
							<include-screen name="PartyFinanHistoryDepotDC"
								location="component://accounting/widget/ap/InvoiceScreens.xml" />
						</decorator-section>
					</decorator-screen>
				</widgets>
			</section>
		</screen>
		
  	<screen name="DepotSalesInvoiceViewDepotDC">
  		<section>
  			<actions>
  				<set field="titleProperty" value="Find Sales Invoices" />
  				<set field="filterByDate" value="true" />
  				<set field="parameters.invoiceDate" value=""/>
  				<script location="component://depotsales/webapp/depotsales/WEB-INF/actions/facility/sequenceFilterDC.groovy"/>
  				<service service-name="performFind" result-map="result">
  					<field-map field-name="inputFields" from-field="parameters" />
  					<field-map field-name="entityName" value="InvoiceAndType" />
  					<field-map field-name="orderBy" value="invoiceDate DESC" />
  				</service>
  				<set field="invoices" from-field="result.listIt" />
  				<set field="tabButtonItem" value="salesInvoiceViewDC" />
  				<set field="tabButtonItem5" value="${parameters.subTabButtonValue}" />
  				<set field="tabButtonItem2" value="${parameters.actionSubTabButtonValue}" />
  				<set field="invoiceTypeId" value="${parameters.invoiceTypeId}" />
  				<script
  					location="component://accounting/webapp/ap/WEB-INF/actions/invoices/voucherPaymentMethodDC.groovy" />
  			</actions>
  			<widgets>
  			
  			<decorator-screen name="DepotTransCommonDecoratorDC" location="${parameters.mainDecoratorLocation}">
      					<decorator-section name="body">
      						
  						<!-- <include-menu name="InvoiceTypesTabBar" location="component://depotsales/widget/DepotSalesMenus.xml"/> -->
  						<!-- <include-menu name="APInvoiceTabBar" location="component://depotsales/widget/DepotSalesMenus.xml" 
  							/> -->
  						<section>
  							<widgets>
  								<decorator-screen name="FindScreenDecorator"
  									location="component://common/widget/CommonScreens.xml">
  									<decorator-section name="menu-bar">
  										<container style="button-bar">
  											<!-- <link target="newInvoice" text="${uiLabelMap.CommonCreateNew}" 
  												style="buttontext create"/> --> <!-- NewPurchaseInvoice -->
  											<!-- <link target="newInvoice" text="New Cash Voucher" style="buttontext 
  												create"><parameter param-name="prefPaymentMethodTypeId" value="CASH"/></link> 
  												<link target="newInvoice" text="New Bank Voucher" style="buttontext create"><parameter 
  												param-name="prefPaymentMethodTypeId" value="BANK"/></link> <link target="partyFinanHistory" 
  												text="Party Financial History" style="buttontext create"></link> -->
  											<!-- <link target="CreateAPInvoice" text="Create Cash Voucher" 
  												style="buttontext create" > <parameter param-name="prefPaymentMethodTypeId" 
  												value="CASH"></parameter> <parameter param-name="subTabButtonValue" value="${parameters.subTabButtonValue}"></parameter> 
  												<parameter param-name="invoiceTypeId" value="${parameters.invoiceTypeId}"></parameter> 
  												<parameter param-name="showCreateButton" value="Y"></parameter> </link> <link 
  												target="CreateAPInvoice" text="Create Bank Voucher" style="buttontext create" 
  												> <parameter param-name="prefPaymentMethodTypeId" value="BANK"></parameter> 
  												<parameter param-name="subTabButtonValue" value="${parameters.subTabButtonValue}"></parameter> 
  												<parameter param-name="invoiceTypeId" value="${parameters.invoiceTypeId}"></parameter> 
  												<parameter param-name="showCreateButton" value="Y"></parameter> </link> -->
  											<link target="partyFinanHistoryDepotDC" text="Party Financial History"
  												style="buttontext create"></link>
  										</container>
  									</decorator-section>
  									<decorator-section name="search-options">
  										<include-form name="FindSalesApInvoicesForDepotDC"
  											location="component://depotsales/widget/DepotSalesForms.xml" />
  									</decorator-section>
  									<decorator-section name="search-results">
  										<screenlet title="Invoices List">
  											<section>
  												<condition>
  													<not>
  														<if-empty field="invoices" />
  													</not>
  												</condition>
  												<widgets>
  												<link text="${uiLabelMap.AccountingExportAsCsv}"
  														style="buttontext" target="InvoiceSearchResultsCsv.csv">
  														<parameter param-name="parentTypeId" from-field="parameters.parentTypeId" />
  														<parameter param-name="invoiceId_op" from-field="parameters.invoiceId_op" />
  														<parameter param-name="invoiceId" from-field="parameters.invoiceId" />
  														<parameter param-name="invoiceId_ic" from-field="parameters.invoiceId_ic" />
  														<parameter param-name="description_op"
  															from-field="parameters.description_op" />
  														<parameter param-name="description" from-field="parameters.description" />
  														<parameter param-name="description_ic"
  															from-field="parameters.description_ic" />
  														<parameter param-name="invoiceTypeId"
  															from-field="parameters.invoiceTypeId" />
  														<parameter param-name="statusId" from-field="parameters.statusId" />
  														<parameter param-name="partyIdFrom" from-field="parameters.partyIdFrom" />
  														<parameter param-name="partyId" from-field="parameters.partyId" />
  														<parameter param-name="invoiceDate_fld0_value"
  															from-field="parameters.invoiceDate_fld0_value" />
  														<parameter param-name="invoiceDate_fld0_op"
  															from-field="parameters.invoiceDate_fld0_op" />
  														<parameter param-name="invoiceDate_fld1_value"
  															from-field="parameters.invoiceDate_fld1_value" />
  														<parameter param-name="invoiceDate_fld1_op"
  															from-field="parameters.invoiceDate_fld1_op" />
  														<parameter param-name="dueDate_fld0_value"
  															from-field="parameters.dueDate_fld0_value" />
  														<parameter param-name="dueDate_fld0_op"
  															from-field="parameters.dueDate_fld0_op" />
  														<parameter param-name="dueDate_fld1_value"
  															from-field="parameters.dueDate_fld1_value" />
  														<parameter param-name="dueDate_fld1_op"
  															from-field="parameters.dueDate_fld1_op" />
  													</link>
  												</widgets>
  											</section>
  											<platform-specific>
  												<html>
  													<html-template
  														location="component://accounting/webapp/accounting/invoice/massPaymentsDC.ftl" />
  												</html>
  											</platform-specific>
  											<platform-specific>
  												<html>
  													<html-template
  														location="component://depotsales/webapp/depotsales/depotsales/ListSearchInvoicesDepotSaleListViewDC.ftl" />
  												</html>
  											</platform-specific>
  										</screenlet>
  									</decorator-section>
  								</decorator-screen>
  							</widgets>
  						</section>
  					</decorator-section>
  				</decorator-screen>
  			</widgets>
  		</section>
 	</screen>
	
	<screen name="MaterialShipmentOverviewDC">
		<section>
			<actions>
				<set field="titleProperty" value="Shipment Overview" />
				<set field="tabButtonItem" value="DepotTransReceipts" />
				<set field="tabButtonItem2" value="DepotTransMaterialShipmentOverview" />
				<set field="shipmentId" from-field="parameters.shipmentId" />
				<script
					location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/purchases/getGRNDetailsForInvoiceDC.groovy" />
				<set field="supplierId" from-field="supplierId" />
			</actions>
			<widgets>
				<decorator-screen name="DepotTransCommonDecoratorDC" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<include-menu name="DepotTransReceiptTabBar"
							location="component://depotsales/widget/DepotSalesMenus.xml" />
						<section>
							<widgets>
								<screenlet title="Overview">
									<include-screen name="ShipmentOverviewforInvoiceDC" />
								</screenlet>
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="ShipmentOverviewforInvoiceDC">
		<section>
			<actions>
				<entity-condition list="shipmentReceipt"
					entity-name="ShipmentReceipt">
					<condition-list combine="and">
						<condition-expr field-name="shipmentId" from-field="shipmentId" />
						<condition-expr field-name="statusId" operator="equals"
							value="SR_QUALITYCHECK" />
					</condition-list>
				</entity-condition>
			</actions>
			<widgets>
				<container style="lefthalf">
					<screenlet
						title="${uiLabelMap.CommonInformation} of ShipmentId : ${shipmentId}">
						<include-form name="shipmentInfoDC"
							location="component://depotsales/widget/DepotSalesForms.xml" />
					</screenlet>
				</container>
				<container style="righthalf">
					<screenlet title="Shipment Items">
						<include-form name="shipmentItemInfoDC"
							location="component://depotsales/widget/DepotSalesForms.xml" />
					</screenlet>
				</container>
				<container style="clear" />
				<container>
					<section>
						<widgets>
							<screenlet title="GRN Items">
								<include-form name="shipmentReceiptsForInvoiceDC"
									location="component://depotsales/widget/DepotSalesForms.xml" />
							</screenlet>
								<screenlet title="${uiLabelMap.ShipmentDocumentsList}">
                          			  <include-form name="ListShipmentContentsDC" location="component://depotsales/widget/DepotSalesForms.xml"/>
                       			</screenlet>
		                        <screenlet title="${uiLabelMap.ADDShipmentDocuments}">
		                     			<include-form name="AddShipmentContentDC" location="component://depotsales/widget/DepotSalesForms.xml"/>
		                        </screenlet>
						</widgets>
					</section>
				</container>
			</widgets>
		</section>
	</screen>
	
	
	<screen name="FindSupplierShipmentsDC">
		<section>
			<actions>
				<set field="titleProperty" value="Find Supplier Shipments" />
				<set field="tabButtonItem" value="FindSupplierDispatchs" />
				<set field="tabButtonItem2" value="FindSupplierShipments" />
				<set field="viewIndex" from-field="parameters.VIEW_INDEX" type="Integer" />
				<set field="viewSize" from-field="parameters.VIEW_SIZE" type="Integer"
					default-value="20" />
				<set field="targetRequest" value="FindSupplierShipmentsDC" />
				<set field="noConditionFind" value="Y" />
				<service service-name="performFind" result-map="result"
					result-map-list="listIt">
					<field-map field-name="inputFields" from-field="parameters" />
<!-- 					<field-map field-name="inputFields.shipmentTypeId" value="BRANCH_SHIPMENT" /> -->
					<field-map field-name="entityName" value="Shipment" />
					<field-map field-name="orderBy" value="-estimatedShipDate" />
					<field-map field-name="viewIndex" from-field="viewIndex" />
					<field-map field-name="viewSize" from-field="viewSize" />
				</service>
				<script
					location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/purchases/ShipmentPartyViewDC.groovy" />
				<script
					location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/purchases/purchaseDepartmentsDC.groovy" />
			</actions>
			<widgets>
				<decorator-screen name="SupplierMyPortalCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<include-menu name="SupplierReceiptTabBar"
							location="component://depotsales/widget/DepotSalesMenus.xml" />
						<section>
							<widgets>
							<platform-specific>
									<html>
										<html-template
											location="component://depotsales/webapp/depotsales/depotsales/DocumentUploadFormsToolTipDC.ftl" />
									</html>
								</platform-specific>
								<platform-specific>
									<html>
										<html-template
											location="component://depotsales/webapp/depotsales/depotsales/LinkGRNWithPoDepotDC.ftl" />
									</html>
								</platform-specific>
								<decorator-screen name="FindScreenDecorator"
									location="component://common/widget/CommonScreens.xml">
									<decorator-section name="search-options">
										<include-form name="FindMaterialShipmentDC"
											location="component://depotsales/widget/DepotSalesForms.xml" />
									</decorator-section>
									<decorator-section name="search-results">
										<screenlet title="">
											<include-form name="ListSupplierShipmentsDC"
												location="component://depotsales/widget/DepotOperationForms.xml" />
										</screenlet>
										<platform-specific>
											<html>
												<html-template
													location="component://depotsales/webapp/depotsales/depotsales/qcApprovalDepotDC.ftl" />
											</html>
										</platform-specific>
									</decorator-section>
								</decorator-screen>
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	
	<screen name="SupplierShipmentOverviewDC">
		<section>
			<actions>
				<set field="titleProperty" value="Shipment Overview" />
				<set field="tabButtonItem" value="FindSupplierDispatchs" />
				<set field="tabButtonItem2" value="SupplierShipmentOverviewDC" />
				<set field="shipmentId" from-field="parameters.shipmentId" />
				<script
					location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/purchases/getGRNDetailsForInvoiceDC.groovy" />
				<set field="supplierId" from-field="supplierId" />
			</actions>
			<widgets>
				<decorator-screen name="SupplierMyPortalCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<include-menu name="SupplierReceiptTabBar"
							location="component://depotsales/widget/DepotSalesMenus.xml" />
						<section>
							<widgets>
								<screenlet title="Overview">
									<include-screen name="ShipmentOverviewforInvoiceDC"  location="component://depotsales/widget/DepotSalesScreens.xml"/>
								</screenlet>
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	
	<screen name="ShipmentOverviewforInvoiceDC">
		<section>
			<actions>
				<entity-condition list="shipmentReceipt"
					entity-name="ShipmentReceipt">
					<condition-list combine="and">
						<condition-expr field-name="shipmentId" from-field="shipmentId" />
						<condition-expr field-name="statusId" operator="equals"
							value="SR_QUALITYCHECK" />
					</condition-list>
				</entity-condition>
			</actions>
			<widgets>
				<container style="lefthalf">
					<screenlet
						title="${uiLabelMap.CommonInformation} of ShipmentId : ${shipmentId}">
						<include-form name="shipmentInfoDC"
							location="component://depotsales/widget/DepotSalesForms.xml" />
					</screenlet>
				</container>
				<container style="righthalf">
					<screenlet title="Shipment Items">
						<include-form name="shipmentItemInfoDC"
							location="component://depotsales/widget/DepotSalesForms.xml" />
					</screenlet>
				</container>
				<container style="clear" />
				<container>
					<section>
						<widgets>
							<screenlet title="GRN Items">
								<include-form name="shipmentReceiptsForInvoiceDC"
									location="component://depotsales/widget/DepotSalesForms.xml" />
							</screenlet>
								<screenlet title="${uiLabelMap.ShipmentDocumentsList}">
                          			  <include-form name="ListShipmentContentsDC" location="component://depotsales/widget/DepotSalesForms.xml"/>
                       			</screenlet>
		                        <screenlet title="${uiLabelMap.ADDShipmentDocuments}">
		                     			<include-form name="AddShipmentContentDC" location="component://depotsales/widget/DepotSalesForms.xml"/>
		                        </screenlet>
						</widgets>
					</section>
				</container>
			</widgets>
		</section>
	</screen>
	
	<screen name="MRRreportPDFDC">
		<section>
			<actions>
				<property-map resource="OrderUiLabels" map-name="uiLabelMap"
					global="true" />
				<property-map resource="ProductUiLabels" map-name="uiLabelMap"
					global="true" />
				<property-map resource="PartyUiLabels" map-name="uiLabelMap"
					global="true" />
				<property-map resource="CommonUiLabels" map-name="uiLabelMap"
					global="true" />
				<set field="shipmentId" from-field="parameters.shipmentId" />
				<set field="orderId" value="${parameters.orderId}" />
				<set field="receiptId" from-field="parameters.receiptId" />
				<set field="datetimeReceived" from-field="parameters.datetimeReceived" />
				<script
					location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/purchases/MRRreportDC.groovy" />
			</actions>
			<widgets>
				<section>
					<widgets>
						<platform-specific>
							<xsl-fo>
								<html-template
									location="component://depotsales/webapp/depotsales/depotsales/MRRreportDepotSalesDC.fo.ftl" />
							</xsl-fo>
						</platform-specific>
					</widgets>
				</section>
			</widgets>
		</section>
	</screen>
	
	
	<screen name="DepotTransMaterialInvoiceInitDC">
		<section>
			<actions>
				<set field="titleProperty" value="Material Invoice Entry" />
				<set field="tabButtonItem" value="DepotTransReceiptsDC" />
				<set field="tabButtonItem2" value="DepotTransMaterialInvoiceInitDC" />
				<set field="shipmentId" from-field="parameters.shipmentId" />
				<set field="supplyDate" from-field="parameters.supplyDate" />
				<set field="isFormSubmitted" from-field="parameters.isFormSubmitted" />
				<set field="defaultEffectiveDateTime" value="${supplyDate}"
					default-value="${bsh:org.ofbiz.base.util.UtilDateTime.nowTimestamp()}" />
				<set field="defaultEffectiveDate"
					value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(defaultEffectiveDateTime, &quot;yyyy-MM-dd&quot;);}" />
				<script
					location="component://depotsales/webapp/depotsales/WEB-INF/actions/depotsales/PurchaseDepotInvoiceEntryFormDC.groovy" />
			</actions>
			<widgets>
				<decorator-screen name="DepotTransCommonDecoratorDC"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<include-menu name="DepotTransReceiptTabBarDC"
							location="component://depotsales/widget/DepotSalesMenus.xml" />
						<section>
							<condition>
								<if-compare operator="equals" field="isFormSubmitted"
									value="" />
							</condition>
							<widgets>
								<include-screen name="PurchaseDepotInvoiceInnerDC" />
							</widgets>
						</section>
						<section>
							<condition>
								<if-compare operator="equals" field="isFormSubmitted"
									value="YES" />
							</condition>
							<widgets>
								<include-screen name="PurchaseDepotInvoiceEntry" />
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="PurchaseDepotInvoiceInnerDC">
		<section>
			<actions>
				<set field="changeFlag" from-field="changeFlag" />
				<set field="productSubscriptionTypeId" value="${parameters.productSubscriptionTypeId}" />
				<set field="subscriptionTypeId" from-field="parameters.subscriptionTypeId" />
				<entity-one value-field="showBoothAutoSuggestConf"
					entity-name="TenantConfiguration">
					<field-map field-name="propertyTypeEnumId" value="FACILITY_AUTOSUGGEST" />
					<field-map field-name="propertyName" value="showBoothAutoSuggest" />
					<select-field field-name="propertyValue" />
				</entity-one>
				<set field="showBoothAutoSuggest" value="${showBoothAutoSuggestConf.propertyValue}" />
				<set field="supplyDate" from-field="parameters.supplyDate" />
				<set field="effectiveDate" value="${parameters.effectiveDate}" />
				<set field="shipmentTypeId" value="${parameters.shipmentTypeId}" />

				<script
					location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/enablePartyAutoCompleteDC.groovy" />
				<script
					location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/orgnigationDeptDC.groovy" />
			</actions>
			<widgets>
				<section>
					<widgets>
						<platform-specific>
							<html>
								<html-template
									location="component://depotsales/webapp/depotsales/depotsales/PurchaseDepotInvoiceDepotDC.ftl" />
							</html>
						</platform-specific>
					</widgets>
					<fail-widgets>
						<label style="h3">${uiLabelMap.ProductFacilityViewPermissionError}
						</label>
					</fail-widgets>
				</section>
			</widgets>
		</section>
	</screen>
	
	<screen name="editGRNDC">
		<section>
			<actions>
				<set field="titleProperty" value="Supplier PO Dispatch" />
				<set field="tabButtonItem" value="FindSupplierDispatchs" />
				<set field="tabButtonItem2" value="SupplierDispatchEntry" />
				<set field="viewSize" from-field="parameters.VIEW_SIZE" />
				<!-- <set field="ChannalType" value="PROD_PRCHSE_CHANNEL"/> -->
				<set field="supplyDate" from-field="parameters.supplyDate" />
				<set field="parameters.roleTypeId" value="SUPPLIER" />
				<set field="isFormSubmitted" from-field="parameters.isFormSubmitted" />
				<set field="orderNo" from-field="parameters.orderNo"/>
				<set field="defaultEffectiveDateTime" value="${supplyDate}"
					default-value="${bsh:org.ofbiz.base.util.UtilDateTime.nowTimestamp()}" />
				<set field="defaultEffectiveDate"
					value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(defaultEffectiveDateTime, &quot;dd MMMMM, yyyy&quot;);}" />
				<set field="defaulteffectiveDate"
					value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(defaultEffectiveDateTime, &quot;dd MMMMM, yyyy&quot;);}" />
				<!-- <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/enablePartyAutoComplete.groovy"/> -->
				<script location="component://depotsales/webapp/depotsales/WEB-INF/actions/facility/enableDepotPartyAutoComplete.groovy" />
				<script location="component://depotsales/webapp/depotsales/WEB-INF/actions/facility/TransportersList.groovy" />
				<entity-one entity-name="Shipment" value-field="shipmentDetail">
                    <field-map field-name="shipmentId" from-field="parameters.shipmentId"/>
                </entity-one>	
			</actions>
			<widgets>
				<decorator-screen name="SupplierMyPortalCommonDecorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<include-menu name="SupplierReceiptTabBar"
							location="component://depotsales/widget/DepotSalesMenus.xml" />
						<section>
							<widgets>
								<section>
									<widgets>
										<platform-specific>
											<html>
												<html-template
													location="component://depotsales/webapp/depotsales/depotsales/editGRNShipmentDC.ftl" />
											</html>
										</platform-specific>
									</widgets>
									<fail-widgets>
										<label style="h3">${uiLabelMap.ProductFacilityViewPermissionError}
										</label>
									</fail-widgets>
								</section>
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="PurchageOrderOverViewDepotDC">
		<section>
			<actions>
				<set field="titleProperty"
					value="Purchase Order OverView - OrderId - ${parameters.orderId}" />
				<set field="tabButtonItem" value="FindDepotTransPODepotDC" />
				<set field="tabButtonItem2" value="POoverViewDepotDC" />
				<set field="layoutSettings.javaScripts[]" value="/ordermgr/images/js/order.js"
					global="true" />
				<set field="layoutSettings.javaScripts[]" value="/ordermgr/images/js/OrderShippingInfo.js"
					global="true" />
				<set field="layoutSettings.javaScripts[]" value="/ordermgr/images/js/geoAutoCompleter.js"
					global="true" />
				<script
					location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/purchases/PurchageOrderViewDepotDC.groovy" />
				<script
					location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/purchases/POViewWebSecureDepotDC.groovy" />
			</actions>
			<widgets>
				<decorator-screen name="DepotTransCommonDecoratorDC" location="component://depotsales/widget/CommonScreens.xml">
					<decorator-section name="body">
						<include-menu name="FindDepotTransPOSubTabBarDepotDC"
							location="component://depotsales/widget/DepotSalesMenus.xml" />
						<section>
							<widgets>
								<container style="lefthalf">
									<platform-specific>
										<html>
											<html-template
												location="component://materialmgmt/webapp/materialmgmt/purchase/PurchageOrderInfoDepotDC.ftl" />
										</html>
									</platform-specific>
									<platform-specific>
										<html>
											<html-template
												location="component://materialmgmt/webapp/materialmgmt/purchase/POItemsDC.ftl" />
										</html>
									</platform-specific>
									<platform-specific>
										<html>
											<html-template
												location="component://materialmgmt/webapp/materialmgmt/purchase/POtermsDepotDC.ftl" />
										</html>
									</platform-specific>
									<platform-specific>
										<html>
											<html-template
												location="component://materialmgmt/webapp/materialmgmt/purchase/POSuspendDepotDC.ftl" />
										</html>
									</platform-specific>
									<screenlet title="Order Amendments">
										<include-form
											location="component://depotsales/widget/DepotSalesForms.xml"
											name="orderAmendmentsDepotDC" />
									</screenlet>
									<screenlet title="Order Attributes">
										<include-screen name="orderAttributesDepotDC" />
									</screenlet>
									<include-screen name="orderAssocDepotDc" />
								</container>
								<container style="righthalf">
									<platform-specific>
										<html>
											<html-template
												location="component://materialmgmt/webapp/materialmgmt/purchase/POContactInfoDepotDC.ftl" />
										</html>
									</platform-specific>
									<screenlet title="Receipts For Order">
										<!-- <include-form location="component://materialmgmt/widget/MaterialPurchaseForms.xml" 
											name="listMaterialShipmentReceipt"/> -->
										<include-screen name="listMaterialShipmentReceiptDepotDC" />
									</screenlet>
									<platform-specific>
										<html>
											<html-template
												location="component://materialmgmt/webapp/materialmgmt/purchase/POpaymentInfo.ftl" />
										</html>
									</platform-specific>
									<screenlet title="Invoices For Order">
										<include-form
											location="component://materialmgmt/widget/MaterialPurchaseForms.xml"
											name="invoiceDetailListDC" />
									</screenlet>
									<!-- <screenlet title="Content">
										<include-screen name="POcontent" />
									</screenlet> -->
									<platform-specific>
										<html>
											<html-template
												location="component://materialmgmt/webapp/materialmgmt/purchase/PONotesDepotDC.ftl" />
										</html>
									</platform-specific>
									<screenlet title="Supply Products Till Date">
										<include-screen name="supplyProductsTillDateDepotDC" />
									</screenlet>
								</container>
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="orderAttributesDepotDC">
		<section>
			<actions>
				<entity-and entity-name="OrderAttribute" list="OrderAttributeList">
					<field-map field-name="orderId" from-field="parameters.orderId" />
				</entity-and>
			</actions>
			<widgets>
				<!-- <include-form
					location="component://materialmgmt/widget/materialmgmtForms.xml"
					name="addAttribute" /> -->
				<screenlet>
					<include-form
						location="component://materialmgmt/widget/materialmgmtForms.xml"
						name="listAttributeDepotDC" />
				</screenlet>
			</widgets>
		</section>
	</screen>
	
	<screen name="listMaterialShipmentReceiptDepotDC">
		<section>
			<actions>
				<set field="viewIndex" from-field="parameters.VIEW_INDEX" type="Integer" />
				<set field="viewSize" from-field="parameters.VIEW_SIZE" type="Integer"
					default-value="20" />
				<set field="targetRequest" value="FindGRNShipmentsDepotDC" />
				<service service-name="performFind" result-map="result"
					result-map-list="listIt">
					<field-map field-name="inputFields" from-field="parameters" />
					<field-map field-name="entityName" value="ShipmentReceipt" />
					<field-map field-name="orderBy" value="-receiptId" />
					<field-map field-name="viewIndex" from-field="viewIndex" />
					<field-map field-name="viewSize" from-field="viewSize" />
				</service>
				<script
					location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/purchases/purchaseDepartmentsDC.groovy" />
				<script
					location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/purchases/SupplyTillDateDepotDC.groovy" />
			</actions>
			<widgets>
				<include-form name="listMaterialShipmentReceiptDepotDC"
					location="component://materialmgmt/widget/MaterialPurchaseForms.xml" />
				<platform-specific>
					<html>
						<html-template
							location="component://depotsales/webapp/depotsales/depotsales/qcApprovalDepotDC.ftl" />
					</html>
				</platform-specific>
			</widgets>
		</section>
	</screen>
	<screen name="supplyProductsTillDateDepotDC">
		<section>
			<actions>
				<set field="viewIndex" from-field="parameters.VIEW_INDEX" type="Integer" />
				<set field="viewSize" from-field="parameters.VIEW_SIZE" type="Integer"
					default-value="20" />
				<set field="targetRequest" value="FindGRNShipmentsDepotDC" />
				<service service-name="performFind" result-map="result"
					result-map-list="listIt">
					<field-map field-name="inputFields" from-field="parameters" />
					<field-map field-name="entityName" value="ShipmentReceipt" />
					<field-map field-name="orderBy" value="-receiptId" />
					<field-map field-name="viewIndex" from-field="viewIndex" />
					<field-map field-name="viewSize" from-field="viewSize" />
				</service>
				<!-- <script location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/purchases/purchaseDepartments.groovy"/> -->
				<script
					location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/purchases/SupplyTillDate.groovy" />
			</actions>
			<widgets>
				<include-form name="supplyProductstilldateDC"
					location="component://materialmgmt/widget/MaterialPurchaseForms.xml" />
			</widgets>
		</section>
	</screen>
	<screen name="orderAssocDepotDc">
		<section>
			<actions>
				<entity-condition list="OrderAssocList"
					entity-name="OrderAssoc">
					<condition-list combine="or">
						<condition-expr field-name="orderId" from-field="parameters.orderId" />
						<condition-expr field-name="toOrderId" from-field="parameters.orderId" />
					</condition-list>
				</entity-condition>
				<set field="assocId" value="${parameters.orderId}" />
			</actions>
			<widgets>
				<screenlet title="Order Associations">
					<include-form
						location="component://materialmgmt/widget/materialmgmtForms.xml"
						name="listOrderAssocDepotDC" />
				</screenlet>
			</widgets>
		</section>
	</screen>
	
	<screen name="PurchaseOrderMinutesReportDepotDC">
		<section>
			<actions>
				<property-map resource="OrderUiLabels" map-name="uiLabelMap" global="true"/>
				<property-map resource="ProductUiLabels" map-name="uiLabelMap" global="true"/>
				<property-map resource="PartyUiLabels" map-name="uiLabelMap" global="true"/>
				<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
				<script location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/purchases/POMinutesReportDepotDC.groovy"/> 
			</actions>
			<widgets> 
				<section>
					<widgets>
						<platform-specific>
						 	<xsl-fo>
								<html-template
								location="component://depotsales/webapp/depotsales/depotsales/POMinutesReportDepotDC.fo.ftl" />
							</xsl-fo>
						</platform-specific>
					</widgets>
				</section>
			</widgets>
		</section>
	</screen>
	
	<screen name="DepotSalesOrderNewDC">
		<section>
			<actions>
				<set field="titleProperty" value="${uiLabelMap.BranchSalesEntry}" />
				<set field="tabButtonItem" value="DepotSalesOrderDC" />
				<set field="tabButtonItem2" value="BranchSalesOrder" />
				<set field="tabButtonItem3" value="${parameters.menuName}" default-value="CottonIndent" />
				<set field="tabButtonItem4" value="DirectIndent" />
				<set field="changeFlag" value="DepotSales" />
				<set field="parameters.screenFlag" value="CottonIndent"/>
				<set field="parameters.formAction" value="DepotSalesOrderNewDC"/>
				<set field="priceTypeId" from-field="parameters.priceTypeId" />
				<set field="orderStatus" from-field="parameters.orderStatus" />
				<set field="orderId" from-field="parameters.orderId" />
				<set field="supplyDate" from-field="parameters.supplyDate" />
				<set field="indentReceivedDate" value="${parameters.indentReceivedDate}" />
				<set field="isFormSubmitted" from-field="parameters.isFormSubmitted" />
				<set field="defaultEffectiveDateTime" value="${supplyDate}"
					default-value="${bsh:org.ofbiz.base.util.UtilDateTime.nowTimestamp()}" />
				<set field="defaultEffectiveDate"
					value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(defaultEffectiveDateTime, &quot;dd MMMMM, yyyy&quot;);}" />
				<set field="parameters.roleTypeId" value="EMPANELLED_CUSTOMER"/>
			</actions>
			<widgets>
				<decorator-screen name="DepotTransCommonDecoratorDC"
									location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<!-- <container><label text="isFormSubmitted:${isFormSubmitted}" ></label></container> -->
						<!-- <include-menu name="BranchSalesEntryIndentTabBar"
							location="component://depotsales/widget/DepotSalesMenus.xml" /> -->
							<include-menu name="VariantIndentPortalTabDepot"
							location="component://depotsales/widget/DepotSalesMenus.xml" />
							<!-- <include-menu name="CottonBranchIndentPortalTab"
							location="component://depotsales/widget/DepotSalesMenus.xml" /> -->
						<section>
							<condition>
								<if-compare operator="equals" field="isFormSubmitted"
									value="" />
							</condition>
							<widgets>
								<include-screen name="CottonBranchSaleInnerDepotDC" />
							</widgets>
						</section>
						<section>
							<condition>
								<if-compare operator="equals" field="isFormSubmitted"
									value="YES" />
							</condition>
							<widgets>
								<include-screen name="CottonBranchSalesInnerScreenDepotDC" />
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="CottonBranchSaleInnerDepotDC">
		<section>
			<actions>
				<set field="changeFlag" from-field="changeFlag" />
				<set field="productSubscriptionTypeId" value="${parameters.productSubscriptionTypeId}" />
				<set field="subscriptionTypeId" from-field="parameters.subscriptionTypeId" />
				<entity-one value-field="showBoothAutoSuggestConf"
					entity-name="TenantConfiguration">
					<field-map field-name="propertyTypeEnumId" value="FACILITY_AUTOSUGGEST" />
					<field-map field-name="propertyName" value="showBoothAutoSuggest" />
					<select-field field-name="propertyValue" />
				</entity-one>


				<set field="showBoothAutoSuggest" value="${showBoothAutoSuggestConf.propertyValue}" />
				<set field="supplyDate" from-field="parameters.supplyDate" />
				<set field="effectiveDate" value="${parameters.effectiveDate}" />
				<set field="orderDate" value="${parameters.orderDate}" />
				<set field="checkListType" value="indentEntry" />
				<set field="shipmentTypeId" value="${parameters.shipmentTypeId}" />
				<entity-condition entity-name="Enumeration" list="prodSubTypes"
					use-cache="true">
					<condition-list>
						<condition-expr field-name="enumTypeId" value="SUB_PROD_TYPE" />
						<condition-expr field-name="enumId" operator="not-equals"
							value="CARD" />
						<condition-expr field-name="enumId" operator="not-equals"
							value="LEAK" />
					</condition-list>
					<order-by field-name="sequenceId" />
				</entity-condition>

				<!-- <entity-condition entity-name="Product" list="productList" use-cache="true"> 
					</entity-condition> -->
				<!-- <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/recentChangeIndents.groovy"/> -->
				<!-- <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/indentCheckListReport.groovy"/> -->
				<!-- <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/enableBoothAutoComplete.groovy"/> -->
				<script
					location="component://depotsales/webapp/depotsales/WEB-INF/actions/facility/enableDepotPartyAutoCompleteDC.groovy" />
				<set field="routeId" from-field="parameters.routeId" />
			</actions>
			<widgets>
				<section>
					<widgets>
						<platform-specific>
							<html>
								<html-template
									location="component://depotsales/webapp/depotsales/depotsales/BranchSaleOrderFormTestDepotDC.ftl" />
							</html>
						</platform-specific>
					</widgets>
					<fail-widgets>
						<label style="h3">${uiLabelMap.ProductFacilityViewPermissionError}
						</label>
					</fail-widgets>
				</section>
			</widgets>
		</section>
	</screen>
	<screen name="CottonBranchSalesInnerScreenDepotDC">
		<section>
			<actions>
				<set field="changeFlag" from-field="changeFlag" />
				<set field="productSubscriptionTypeId" from-field="parameters.productSubscriptionTypeId" />
				<set field="subscriptionTypeId" from-field="parameters.subscriptionTypeId" />
				<set field="boothId" from-field="parameters.boothId" />
				<!-- <entity-condition entity-name="Enumeration" list="prodSubTypes" 
					use-cache="true"> <condition-expr field-name="enumTypeId" value="SUB_PROD_TYPE"/> 
					<order-by field-name="sequenceId"/> </entity-condition> -->
				<set field="checkListType" value="indentEntry" />
				<set field="effectiveDate" value="${parameters.effectiveDate}" />
				<set field="orderDate" value="${parameters.orderDate}" />
				<set field="shipmentTypeId" value="${parameters.shipmentTypeId}" />
				<set field="priceTypeId" from-field="parameters.priceTypeId" />
				<set field="PONumber" from-field="parameters.PONumber" />
				<set field="insuranceNum" from-field="parameters.insuranceNum" />
				<set field="insCompany" from-field="parameters.insCompany" />
				<set field="promotionAdj" from-field="parameters.promotionAdj" />
				<set field="productCategoryId" from-field="parameters.productCategoryId" />
				<set field="vehicleId" from-field="parameters.vehicleId" />
				<set field="disableAcctgFlag" value="Y" />
				<set field="partyId" from-field="parameters.partyId" />
				<set field="cfcs" from-field="parameters.cfcs" />
				<set field="salesChannel" from-field="parameters.salesChannel" />
				<set field="partyGeoId" from-field="parameters.partyGeoId" />
				<set field="branchGeoId" from-field="parameters.branchGeoId" />
				<set field="supplierGeoId" from-field="parameters.supplierGeoId" />
				<set field="referenceNo" from-field="parameters.referenceNo" />
				<set field="tallyReferenceNo" from-field="parameters.tallyReferenceNo" />
				<set field="contactMechId" from-field="parameters.contactMechId" />
				<set field="transporterId" from-field="parameters.transporterId" />
				<set field="suplierAdd" from-field="parameters.suplierAdd" />
				<set field="productId" from-field="parameters.productId" />
				<set field="productName" from-field="parameters.productName" />
				<set field="quantityOnHandTotal" from-field="parameters.quantityOnHandTotal" />
				<set field="uom" from-field="parameters.uom" />
				<set field="bundleWeight" from-field="parameters.bundleWeight" />
				<set field="bundleUnitPrice" from-field="parameters.bundleUnitPrice" />
				<set field="balancedQty" from-field="parameters.balancedQty" />
				<set field="unitCost" from-field="parameters.unitCost" />
				<set field="bookedQuantity" from-field="parameters.bookedQuantity" />
				<set field="availbleQuantity" from-field="parameters.availbleQuantity" />
				<set field="inventoryItemId" from-field="parameters.inventoryItemId" />
				<set field="productStoreId" from-field="parameters.branchId" />
				<set field="submitFlag" value="YES"/>
				
				<script
					location="component://depotsales/webapp/depotsales/WEB-INF/actions/facility/BranchSalesOrderInnerScreenHelperDepotDC.groovy" />
				<!-- <script
					location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/EditStoreOrderForm.groovy" /> -->
				<!-- <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/recentChangeIndents.groovy"/> -->
				<!-- <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/indentCheckListReport.groovy"/> -->
			</actions>
			<widgets>
				<section>
					<widgets>
						<platform-specific>
							<html>
								<html-template
									location="component://depotsales/webapp/depotsales/depotsales/BranchSaleOrderFormTestDepotDC.ftl" />
							</html>
						</platform-specific>
					</widgets>
					<fail-widgets>
						<platform-specific>
							<html>
								<html-template
									location="component://depotsales/webapp/depotsales/depotsales/BranchSaleOrderFormTestDepotDC.ftl" />
							</html>
						</platform-specific>
					</fail-widgets>
				</section>
			</widgets>
		</section>
	</screen>
	
	<screen name="DepotMaterialSalesInvoiceInitDC">
		<section>
			<actions>
			
			<set field="titleProperty" value="Material Invoice Entry" />
				<set field="tabButtonItem" value="DepotTransReceiptsDC" />
				<set field="tabButtonItem2" value="DepotTransMaterialInvoiceInitDC" />
					<set field="shipmentId" from-field="parameters.shipmentId" />
				<set field="supplyDate" from-field="parameters.supplyDate" />
				<set field="isFormSubmitted" from-field="parameters.isFormSubmitted" />
				<set field="defaultEffectiveDateTime" value="${supplyDate}"
					default-value="${bsh:org.ofbiz.base.util.UtilDateTime.nowTimestamp()}" />
				<set field="defaultEffectiveDate"
					value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(defaultEffectiveDateTime, &quot;dd MMMMM, yyyy&quot;);}" />
				<script
					location="component://depotsales/webapp/depotsales/WEB-INF/actions/depotsales/DepotSalesInvoiceEntryFormDC.groovy" />
			</actions>
			<widgets>
				<decorator-screen name="DepotTransCommonDecoratorDC"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<include-menu name="DepotTransReceiptTabBar"
							location="component://depotsales/widget/DepotSalesMenus.xml" />
						<section>
							<condition>
								<if-compare operator="equals" field="isFormSubmitted"
									value="" />
							</condition>
							<widgets>
								<include-screen name="DepotSalesInvoiceInnerDC" />
							</widgets>
						</section>
						<section>
							<condition>
								<if-compare operator="equals" field="isFormSubmitted"
									value="YES" />
							</condition>
							<widgets>
								<include-screen name="DepotSalesInvoiceEntryDC" />
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

	<screen name="DepotSalesInvoiceInnerDC">
		<section>
			<actions>
				<set field="changeFlag" from-field="changeFlag" />
				<set field="productSubscriptionTypeId" value="${parameters.productSubscriptionTypeId}" />
				<set field="subscriptionTypeId" from-field="parameters.subscriptionTypeId" />
				<entity-one value-field="showBoothAutoSuggestConf"
					entity-name="TenantConfiguration">
					<field-map field-name="propertyTypeEnumId" value="FACILITY_AUTOSUGGEST" />
					<field-map field-name="propertyName" value="showBoothAutoSuggest" />
					<select-field field-name="propertyValue" />
				</entity-one>
				<set field="showBoothAutoSuggest" value="${showBoothAutoSuggestConf.propertyValue}" />
				<set field="supplyDate" from-field="parameters.supplyDate" />
				<set field="effectiveDate" value="${parameters.effectiveDate}" />
				<set field="shipmentTypeId" value="${parameters.shipmentTypeId}" />

				<script
					location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/enablePartyAutoCompleteDC.groovy" />
				<script
					location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/orgnigationDeptDC.groovy" />
			</actions>
			<widgets>
				<section>
					<widgets>
						<platform-specific>
							<html>
								<html-template
									location="component://depotsales/webapp/depotsales/depotsales/DepotSalesInvoiceDepotDC.ftl" />
							</html>
						</platform-specific>
					</widgets>
					<fail-widgets>
						<label style="h3">${uiLabelMap.ProductFacilityViewPermissionError}
						</label>
					</fail-widgets>
				</section>
			</widgets>
		</section>
	</screen>

	<screen name="DepotSalesInvoiceEntryDC">
		<section>
			<actions>
				<set field="changeFlag" from-field="changeFlag" />
				<set field="productSubscriptionTypeId" from-field="parameters.productSubscriptionTypeId" />
				<set field="subscriptionTypeId" from-field="parameters.subscriptionTypeId" />
				<set field="boothId" from-field="parameters.boothId" />
				<set field="checkListType" value="indentEntry" />
				<set field="effectiveDate" value="${parameters.effectiveDate}" />
				<set field="shipmentTypeId" value="${parameters.shipmentTypeId}" />
				<set field="priceTypeId" from-field="parameters.priceTypeId" />
				<set field="productCatageoryId" from-field="parameters.productCatageoryId" />
				<set field="vehicleId" from-field="parameters.vehicleId" />
				<script
					location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/purchases/PurchaseEntryFormNewDC.groovy" />
			</actions>
			<widgets>
				<section>
					<widgets>
						<platform-specific>
							<html>
								<html-template
									location="component://materialmgmt/webapp/materialmgmt/purchase/PurchaseOrderDC.ftl" />
							</html>
						</platform-specific>
					</widgets>
					<fail-widgets>
						<platform-specific>
							<html>
								<html-template
									location="component://materialmgmt/webapp/materialmgmt/purchase/PurchaseOrderDC.ftl" />
							</html>
						</platform-specific>
					</fail-widgets>
				</section>
			</widgets>
		</section>
	</screen>
	
	<screen name="FindGRNShipmentsDepotDC">
		<section>
			<actions>
				<set field="titleProperty" value="Find GRN Shipments" />
				<set field="tabButtonItem" value="FindGRNReceiptsDC" />
				<set field="tabButtonItem2" value="FindGRNShipmentsDC" />
				<set field="viewIndex" from-field="parameters.VIEW_INDEX" type="Integer" />
				<set field="viewSize" from-field="parameters.VIEW_SIZE" type="Integer"
					default-value="20" />
				<set field="targetRequest" value="FindGRNShipmentsDepotDC" />
				<!-- <set field="noConditionFind" value="Y" /> -->
				<script location="component://depotsales/webapp/depotsales/WEB-INF/actions/depotsales/ROSearchFilterDC.groovy" />
				<service service-name="performFind" result-map="result"
					result-map-list="listIt">
					<field-map field-name="inputFields" from-field="parameters" />
					<field-map field-name="entityName" value="ShipmentAndOrderRole" />
					<field-map field-name="orderBy" value="-estimatedShipDate" />
					<field-map field-name="viewIndex" from-field="viewIndex" />
					<field-map field-name="viewSize" from-field="viewSize" />
				</service>
				<set field="parameters.partyId" value="${tempPartyId}" />
				<script
					location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/purchases/PartyShipmentViewDC.groovy" />
				<script
					location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/purchases/purchaseDepartmentsDC.groovy" />
			</actions>
			<widgets>
				<decorator-screen name="BaanTransactionsCommonDecorator"
					location="component://depotsales/widget/CommonScreens.xml">
					<decorator-section name="body">
						<include-menu name="ReceiptTabBarDC"
							location="component://depotsales/widget/DepotSalesMenus.xml" />
						<section>
							<widgets>
								<platform-specific>
									<html>
										<html-template
											location="component://depotsales/webapp/depotsales/depotsales/LinkGRNWithPoDepotDC.ftl" />
									</html>
								</platform-specific>
								<decorator-screen name="FindScreenDecorator"
									location="component://common/widget/CommonScreens.xml">
									<decorator-section name="search-options">
										<include-form name="FindMaterialShipmentDC"
											location="component://depotsales/widget/DepotSalesForms.xml" />
									</decorator-section>
									<decorator-section name="search-results">
										<screenlet title="">
											<include-form name="listMaterialShipmentsDC"
												location="component://depotsales/widget/DepotSalesForms.xml" />
										</screenlet>
										<platform-specific>
											<html>
												<html-template
													location="component://depotsales/webapp/depotsales/depotsales/qcApprovalDepotDC.ftl" />
											</html>
										</platform-specific>
									</decorator-section>
								</decorator-screen>
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	
	<screen name="DepotTransAPInvoiceOverviewDC">
		<section>
			<actions>
				<property-map resource="PartyUiLabels" map-name="uiLabelMap"
					global="true" />
				<set field="titleProperty" value="PageTitleInvoiceOverview" />
				<set field="tabButtonItem" value="invoiceOverViewDC" />
				<!-- <set field="tabButtonItem5" value="${parameters.subTabButtonValue}" />
				<set field="tabButtonItem2" value="invoiceOverview" /> -->
				<set field="invoiceTypeId" value="${parameters.invoiceTypeId}" />
				<set field="invoiceId" from-field="parameters.invoiceId" />
				<set field="catflag" value="Ap" global="true" />
				<entity-one entity-name="Invoice" value-field="invoice" />
				<entity-and entity-name="InvoiceRole" list="invoiceRoles">
					<field-map from-field="parameters.invoiceId" field-name="invoiceId" />
					<order-by field-name="partyId" />
				</entity-and>
				<entity-and entity-name="InvoiceStatus" list="invoiceStatus">
					<field-map from-field="parameters.invoiceId" field-name="invoiceId" />
					<order-by field-name="statusDate" />
				</entity-and>
				<entity-and entity-name="InvoiceTerm" list="invoiceTerms">
					<field-map from-field="parameters.invoiceId" field-name="invoiceId" />
					<order-by field-name="invoiceTermId" />
				</entity-and>
				<entity-and entity-name="TimeEntry" list="timeEntries">
					<field-map from-field="parameters.invoiceId" field-name="invoiceId" />
					<order-by field-name="invoiceItemSeqId" />
				</entity-and>
				<!-- <entity-and entity-name="PaymentApplication" list="paymentApplications"> 
					<field-map from-field="parameters.invoiceId" field-name="invoiceId" /> <order-by 
					field-name="paymentApplicationId" /> </entity-and> -->
				<entity-and entity-name="PaymentAndApplication" list="payment">
					<field-map from-field="parameters.invoiceId" field-name="invoiceId" />
					<order-by field-name="paymentId" />
				</entity-and>
				<script
					location="component://accounting/webapp/accounting/WEB-INF/actions/invoice/CreateApplicationList.groovy" />
				<script
					location="component://accounting/webapp/accounting/WEB-INF/actions/invoice/OrderListInvoiceItem.groovy" />
				<set field="invoiceAmount"
					value="${bsh:org.ofbiz.accounting.invoice.InvoiceWorker.getInvoiceTotal(invoice)}"
					type="BigDecimal" />
				<set field="notAppliedAmount"
					value="${bsh:org.ofbiz.accounting.invoice.InvoiceWorker.getInvoiceNotApplied(invoice)}"
					type="BigDecimal" />
				<set field="appliedAmount"
					value="${bsh:org.ofbiz.accounting.invoice.InvoiceWorker.getInvoiceApplied(invoice)}"
					type="BigDecimal" />
				<!-- <entity-condition entity-name="AcctgTransAndEntries"
					list="AcctgTransAndEntries">
					<condition-expr field-name="invoiceId" operator="equals"
						from-field="invoiceId" />
					<order-by field-name="acctgTransId" />
				</entity-condition> -->
				<service service-name="getAcctTransEnries" result-map="AcctgTransAndEntries" auto-field-map="true"/>
			    <set field="AcctgTransAndEntries" type="List" from-field="AcctgTransAndEntries.AcctgTransAndEntries"/>
				<service service-name="acctgInvoicePermissionCheck"
					result-map="permResult">
					<field-map field-name="mainAction" value="ARINVOICE_EDIT" />
				</service>
				<set field="hasArInvoiceEditPermission" from-field="permResult.hasPermission" />
				<service service-name="acctgInvoicePermissionCheck"
					result-map="permResult">
					<field-map field-name="mainAction" value="INVOICE_APPROVE" />
				</service>
				<set field="hasApproveInvoiceEditPermission" from-field="permResult.hasPermission" />
				<service service-name="acctgInvoicePermissionCheck"
					result-map="permResult">
					<field-map field-name="mainAction" value="APINVOICE_EDIT" />
				</service>
				<set field="hasApInvoiceEditPermission" from-field="permResult.hasPermission" />
				<set field="localDispatcherName" value="${parameters.localDispatcherName}" />
				<set field="requestUri" value="${parameters.targetRequestUri}" />
			</actions>
			<widgets>
				<decorator-screen name="DepotTransCommonDecoratorDC" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<widgets>
								<platform-specific>
									<html>
										<html-template
											location="component://accounting/webapp/accounting/invoice/setInvoiceStatus.ftl" />
									</html>
								</platform-specific>
							</widgets>
						</section>
						<!-- <include-menu name="InvoiceTypesTabBar" location="component://accounting/widget/AccountingMenus.xml"/> -->
						<!-- <include-menu name="APInvoiceTabBar" location="component://accounting/widget/AccountingMenus.xml" 
							/> -->
						<!-- <include-menu name="CreateAPInvoiceSubTabBar"
							location="component://accounting/widget/AccountingMenus.xml" /> -->
						<container style="h1">
							<label>For: ${invoice.description} [${invoice.invoiceId}]</label>
						</container>
						<section>
							<condition>
								<and>
									<if-compare field="invoice.statusId" operator="equals"
										value="INVOICE_IN_PROCESS" />
									<if-compare field="invoice.invoiceTypeId" operator="equals"
										value="PETTYCASH_INVOICE" />
									<if-compare field="requestUri" operator="equals"
										value="/createInvoice" />
								</and>
							</condition>
							<actions>
								<script
									location="component://accounting/webapp/accounting/WEB-INF/actions/invoice/GetInvoiceItemTypes.groovy" />
							</actions>
							<widgets>
								<screenlet title="${uiLabelMap.AccountingInvoiceItems}">
									<include-form name="EditInvoiceItems"
										location="component://accounting/widget/InvoiceForms.xml" />
								</screenlet>
								<section>
									<condition>
										<and>
											<if-compare field="invoice.invoiceTypeId"
												operator="not-equals" value="PAYROL_INVOICE" />
											<or>
												<if-compare operator="equals" value="true"
													field="hasArInvoiceEditPermission" />
												<if-compare operator="equals" value="true"
													field="hasApInvoiceEditPermission" />
											</or>
										</and>
									</condition>
									<widgets>
										<screenlet title="${uiLabelMap.AccountingInvoiceItemAdd}">
											<section>
												<widgets>
													<include-form name="EditInvoiceItem"
														location="component://accounting/widget/InvoiceForms.xml" />
												</widgets>
											</section>
										</screenlet>
									</widgets>
								</section>
							</widgets>
							<fail-widgets>
								<section>
									<condition>
										<and>
											<if-compare field="invoice.statusId" operator="equals"
												value="INVOICE_IN_PROCESS" />
											<or>
												<if-compare operator="equals" value="true"
													field="hasArInvoiceEditPermission" />
												<if-compare operator="equals" value="true"
													field="hasApInvoiceEditPermission" />
											</or>
										</and>
									</condition>
									<widgets>
										<screenlet title="${uiLabelMap.AccountingInvoiceHeader}">
											<!-- <link target="editInvoice" text="${uiLabelMap.CommonUpdate}"
												style="buttontext">
												<parameter param-name="invoiceId" />
											</link> -->
											<include-form name="invoiceHeader"
												location="component://accounting/widget/InvoiceForms.xml" />
										</screenlet>
										<container style="lefthalf">
											<screenlet title="${uiLabelMap.CommonStatus}"
												navigation-form-name="ListInvoiceStatus">
												<include-form name="ListInvoiceStatus"
													location="component://accounting/widget/InvoiceForms.xml" />
											</screenlet>
											<!-- <screenlet title="${uiLabelMap.AccountingAppliedPayments} 
												${appliedAmount?currency(${invoice.currencyUomId})} ${uiLabelMap.AccountingOpenPayments} 
												${notAppliedAmount?currency(${invoice.currencyUomId})}" navigation-form-name="ListInvoiceApplications"> 
												<link target="editInvoiceApplications" text="${uiLabelMap.CommonUpdate}" 
												style="buttontext"> <parameter param-name="invoiceId" /> </link> <include-form 
												name="ListInvoiceApplications" location="component://accounting/widget/InvoiceForms.xml" 
												/> </screenlet> -->
										</container>
										<container style="righthalf">
											<screenlet
												title="${uiLabelMap.AccountingAppliedPayments} ${appliedAmount?currency(${invoice.currencyUomId})} ${uiLabelMap.AccountingOpenPayments} ${notAppliedAmount?currency(${invoice.currencyUomId})}"
												navigation-form-name="ListInvoiceApplications">
												<!-- <link target="editInvoiceApplications" text="${uiLabelMap.CommonUpdate}"
													style="buttontext">
													<parameter param-name="invoiceId" />
												</link> -->
												<include-form name="ListInvoiceApplications"
													location="component://accounting/widget/InvoiceForms.xml" />
											</screenlet>
											<!-- <screenlet title="${uiLabelMap.AccountingInvoiceRoles}" navigation-form-name="invoiceRoles"> 
												<container> <link target="invoiceRoles" text="${uiLabelMap.CommonUpdate}" 
												style="buttontext"> <parameter param-name="invoiceId" /> </link> </container> 
												<include-form name="invoiceRoles" location="component://accounting/widget/InvoiceForms.xml" 
												/> </screenlet> <screenlet title="${uiLabelMap.PartyTerms}"> <include-form 
												name="ListInvoiceTerms" location="component://accounting/widget/InvoiceForms.xml" 
												/> <include-form name="ListInvoicePaymentInfo" location="component://accounting/widget/InvoiceForms.xml" 
												/> </screenlet> -->
										</container>
										<container style="clear" />
										<screenlet title="${uiLabelMap.AccountingInvoiceItems}"
											navigation-form-name="invoiceItems">
											<!-- <link target="listInvoiceItems" text="${uiLabelMap.CommonUpdate}"
												style="buttontext">
												<parameter param-name="invoiceId" />
											</link> -->
											<include-form name="invoiceItems"
												location="component://accounting/widget/InvoiceForms.xml" />
										</screenlet>
										<section>
											<condition>
												<not>
													<if-empty field="timeEntries" />
												</not>
											</condition>
											<widgets>
												<screenlet title="${uiLabelMap.AccountingInvoiceTimeEntries}"
													navigation-form-name="ListTimeEntries">
													<link target="editInvoiceTimeEntries" text="${uiLabelMap.CommonUpdate}"
														style="buttontext">
														<parameter param-name="invoiceId" />
													</link>
													<include-form name="ListTimeEntries"
														location="component://accounting/widget/InvoiceForms.xml" />
												</screenlet>
											</widgets>
										</section>
										<screenlet title="${uiLabelMap.AccountingTransactions}"
											navigation-form-name="AcctgTransAndEntries">
											<include-form name="AcctgTransAndEntries"
												location="component://accounting/widget/InvoiceForms.xml" />
										</screenlet>
									</widgets>
									<fail-widgets>
										<screenlet title="${uiLabelMap.AccountingInvoiceHeader}">
											<include-form name="invoiceHeader"
												location="component://accounting/widget/InvoiceForms.xml" />
										</screenlet>
										<container style="lefthalf">
											<screenlet title="${uiLabelMap.CommonStatus}"
												navigation-form-name="ListInvoiceStatus">
												<include-form name="ListInvoiceStatus"
													location="component://accounting/widget/InvoiceForms.xml" />
											</screenlet>
											<screenlet
												title="${uiLabelMap.AccountingAppliedPayments} ${appliedAmount?currency(${invoice.currencyUomId})} ${uiLabelMap.AccountingOpenPayments} ${notAppliedAmount?currency(${invoice.currencyUomId})}"
												navigation-form-name="ListInvoiceApplications">
												<include-form name="ListInvoiceApplications"
													location="component://accounting/widget/InvoiceForms.xml" />
											</screenlet>
										</container>
										<container style="righthalf">
											<screenlet title="${uiLabelMap.AccountingInvoiceRoles}"
												navigation-form-name="invoiceRoles">
												<include-form name="invoiceRoles"
													location="component://accounting/widget/InvoiceForms.xml" />
											</screenlet>
											<screenlet title="${uiLabelMap.PartyTerms}">
												<include-form name="ListInvoiceTerms"
													location="component://accounting/widget/InvoiceForms.xml" />
												<include-form name="ListInvoicePaymentInfo"
													location="component://accounting/widget/InvoiceForms.xml" />
											</screenlet>
										</container>
										<container style="clear" />
										<screenlet title="${uiLabelMap.AccountingInvoiceItems}"
											navigation-form-name="invoiceItems">
											<include-form name="invoiceItems"
												location="component://accounting/widget/InvoiceForms.xml" />
										</screenlet>
										<section>
											<condition>
												<not>
													<if-empty field="timeEntries" />
												</not>
											</condition>
											<widgets>
												<screenlet title="${uiLabelMap.AccountingInvoiceTimeEntries}"
													navigation-form-name="ListTimeEntries">
													<include-form name="ListTimeEntries"
														location="component://accounting/widget/InvoiceForms.xml" />
												</screenlet>
											</widgets>
										</section>
										<screenlet title="${uiLabelMap.AccountingTransactions}"
											navigation-form-name="AcctgTransAndEntries">
											<include-form name="AcctgTransAndEntries"
												location="component://accounting/widget/InvoiceForms.xml" />
										</screenlet>
									</fail-widgets>
								</section>
							</fail-widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	
	<screen name="DepotpurchaseInvoiceEditDC">
		<section>
			<actions>
				<set field="titleProperty" value="Material Invoice Entry" />
				<set field="tabButtonItem" value="DepotTransReceiptsDC" />
				<set field="tabButtonItem2" value="DepotTransMaterialInvoiceInitDC" />
				<set field="shipmentId" from-field="parameters.shipmentId" />
				<set field="invoiceId" from-field="parameters.invoiceId" />
				<set field="supplyDate" from-field="parameters.supplyDate" />
				<set field="isFormSubmitted" from-field="parameters.isFormSubmitted" />
				<set field="defaultEffectiveDateTime" value="${supplyDate}"
					default-value="${bsh:org.ofbiz.base.util.UtilDateTime.nowTimestamp()}" />
				<set field="defaultEffectiveDate"
					value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(defaultEffectiveDateTime, &quot;dd MMMMM, yyyy&quot;);}" />
				<script
					location="component://depotsales/webapp/depotsales/WEB-INF/actions/depotsales/DEPOT_editBranchPurchaseInvoice.groovy" />
			</actions>
			<widgets>
				<decorator-screen name="DepotTransCommonDecoratorDC"
									location="${parameters.mainDecoratorLocation}">
									<decorator-section name="body">
										<include-menu name="DepotTransReceiptTabBar"
							location="component://depotsales/widget/DepotSalesMenus.xml" />
						<section>
							<condition>
								<if-compare operator="equals" field="isFormSubmitted"
									value="" />
							</condition>
							<widgets>
								<include-screen name="DepotPurchaseEditInvoiceInnerDC" />
							</widgets>
						</section>
						<section>
							<condition>
								<if-compare operator="equals" field="isFormSubmitted"
									value="YES" />
							</condition>
							<widgets>
								<include-screen name="DepotPurchaseEditInvoiceEntryDC" />
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

   <screen name="DepotPurchaseEditInvoiceInnerDC">
		<section>
			<actions>
				<set field="changeFlag" from-field="changeFlag" />
				<set field="productSubscriptionTypeId" value="${parameters.productSubscriptionTypeId}" />
				<set field="subscriptionTypeId" from-field="parameters.subscriptionTypeId" />
				<entity-one value-field="showBoothAutoSuggestConf"
					entity-name="TenantConfiguration">
					<field-map field-name="propertyTypeEnumId" value="FACILITY_AUTOSUGGEST" />
					<field-map field-name="propertyName" value="showBoothAutoSuggest" />
					<select-field field-name="propertyValue" />
				</entity-one>
				<set field="showBoothAutoSuggest" value="${showBoothAutoSuggestConf.propertyValue}" />
				<set field="supplyDate" from-field="parameters.supplyDate" />
				<set field="effectiveDate" value="${parameters.effectiveDate}" />
				<set field="shipmentTypeId" value="${parameters.shipmentTypeId}" />

				<script
					location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/enablePartyAutoCompleteDC.groovy" />
				<script
					location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/orgnigationDeptDC.groovy" />
			</actions>
			<widgets>
				<section>
					<widgets>
						<platform-specific>
							<html>
								<html-template
									location="component://depotsales/webapp/depotsales/depotsales/DEPOT_PurchaseInvoiceEditDepotDC.ftl" />
							</html>
						</platform-specific>
					</widgets>
					<fail-widgets>
						<label style="h3">${uiLabelMap.ProductFacilityViewPermissionError}
						</label>
					</fail-widgets>
				</section>
			</widgets>
		</section>
	</screen>

	<screen name="DepotPurchaseEditInvoiceEntryDC">
		<section>
			<actions>
				<set field="changeFlag" from-field="changeFlag" />
				<set field="productSubscriptionTypeId" from-field="parameters.productSubscriptionTypeId" />
				<set field="subscriptionTypeId" from-field="parameters.subscriptionTypeId" />
				<set field="boothId" from-field="parameters.boothId" />
				<set field="checkListType" value="indentEntry" />
				<set field="effectiveDate" value="${parameters.effectiveDate}" />
				<set field="shipmentTypeId" value="${parameters.shipmentTypeId}" />
				<set field="priceTypeId" from-field="parameters.priceTypeId" />
				<set field="productCatageoryId" from-field="parameters.productCatageoryId" />
				<set field="vehicleId" from-field="parameters.vehicleId" />
				<script
					location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/purchases/PurchaseEntryFormNewDepotDC.groovy" />
			</actions>
			<widgets>
				<section>
					<widgets>
						<platform-specific>
							<html>
								<html-template
									location="component://materialmgmt/webapp/materialmgmt/purchase/PurchaseOrderDEPOTDC.ftl" />
							</html>
						</platform-specific>
					</widgets>
					<fail-widgets>
						<platform-specific>
							<html>
								<html-template
									location="component://materialmgmt/webapp/materialmgmt/purchase/PurchaseOrderDEPOTDC.ftl" />
							</html>
						</platform-specific>
					</fail-widgets>
				</section>
			</widgets>
		</section>
	</screen>
	
	<screen name="DepotTransSalesInvoiceOverviewDC">
		<section>
			<actions>
				<property-map resource="PartyUiLabels" map-name="uiLabelMap"
					global="true" />
				<set field="titleProperty" value="PageTitleInvoiceOverview" />
				<set field="tabButtonItem" value="invoiceOverViewDC" />
				<!-- <set field="tabButtonItem5" value="${parameters.subTabButtonValue}" />
				<set field="tabButtonItem2" value="invoiceOverview" /> -->
				<set field="invoiceTypeId" value="${parameters.invoiceTypeId}" />
				<set field="invoiceId" from-field="parameters.invoiceId" />
				<set field="catflag" value="Ap" global="true" />
				<entity-one entity-name="Invoice" value-field="invoice" />
				<entity-and entity-name="InvoiceRole" list="invoiceRoles">
					<field-map from-field="parameters.invoiceId" field-name="invoiceId" />
					<order-by field-name="partyId" />
				</entity-and>
				<entity-and entity-name="InvoiceStatus" list="invoiceStatus">
					<field-map from-field="parameters.invoiceId" field-name="invoiceId" />
					<order-by field-name="statusDate" />
				</entity-and>
				<entity-and entity-name="InvoiceTerm" list="invoiceTerms">
					<field-map from-field="parameters.invoiceId" field-name="invoiceId" />
					<order-by field-name="invoiceTermId" />
				</entity-and>
				<entity-and entity-name="TimeEntry" list="timeEntries">
					<field-map from-field="parameters.invoiceId" field-name="invoiceId" />
					<order-by field-name="invoiceItemSeqId" />
				</entity-and>
				<!-- <entity-and entity-name="PaymentApplication" list="paymentApplications"> 
					<field-map from-field="parameters.invoiceId" field-name="invoiceId" /> <order-by 
					field-name="paymentApplicationId" /> </entity-and> -->
				<entity-and entity-name="PaymentAndApplication" list="payment">
					<field-map from-field="parameters.invoiceId" field-name="invoiceId" />
					<order-by field-name="paymentId" />
				</entity-and>
				<script
					location="component://accounting/webapp/accounting/WEB-INF/actions/invoice/CreateApplicationList.groovy" />
				<script
					location="component://accounting/webapp/accounting/WEB-INF/actions/invoice/OrderListInvoiceItem.groovy" />
				<set field="invoiceAmount"
					value="${bsh:org.ofbiz.accounting.invoice.InvoiceWorker.getInvoiceTotal(invoice)}"
					type="BigDecimal" />
				<set field="notAppliedAmount"
					value="${bsh:org.ofbiz.accounting.invoice.InvoiceWorker.getInvoiceNotApplied(invoice)}"
					type="BigDecimal" />
				<set field="appliedAmount"
					value="${bsh:org.ofbiz.accounting.invoice.InvoiceWorker.getInvoiceApplied(invoice)}"
					type="BigDecimal" />
				<!-- <entity-condition entity-name="AcctgTransAndEntries"
					list="AcctgTransAndEntries">
					<condition-expr field-name="invoiceId" operator="equals"
						from-field="invoiceId" />
					<order-by field-name="acctgTransId" />
				</entity-condition> -->
				<service service-name="getAcctTransEnries" result-map="AcctgTransAndEntries" auto-field-map="true"/>
			    <set field="AcctgTransAndEntries" type="List" from-field="AcctgTransAndEntries.AcctgTransAndEntries"/>
				<service service-name="acctgInvoicePermissionCheck"
					result-map="permResult">
					<field-map field-name="mainAction" value="ARINVOICE_EDIT" />
				</service>
				<set field="hasArInvoiceEditPermission" from-field="permResult.hasPermission" />
				<service service-name="acctgInvoicePermissionCheck"
					result-map="permResult">
					<field-map field-name="mainAction" value="INVOICE_APPROVE" />
				</service>
				<set field="hasApproveInvoiceEditPermission" from-field="permResult.hasPermission" />
				<service service-name="acctgInvoicePermissionCheck"
					result-map="permResult">
					<field-map field-name="mainAction" value="APINVOICE_EDIT" />
				</service>
				<set field="hasApInvoiceEditPermission" from-field="permResult.hasPermission" />
				<set field="localDispatcherName" value="${parameters.localDispatcherName}" />
				<set field="requestUri" value="${parameters.targetRequestUri}" />
			</actions>
			<widgets>
				<decorator-screen name="DepotTransCommonDecoratorDC" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<widgets>
								<platform-specific>
									<html>
										<html-template
											location="component://accounting/webapp/accounting/invoice/setInvoiceStatus.ftl" />
									</html>
								</platform-specific>
							</widgets>
						</section>
						<!-- <include-menu name="InvoiceTypesTabBar" location="component://accounting/widget/AccountingMenus.xml"/> -->
						<!-- <include-menu name="APInvoiceTabBar" location="component://accounting/widget/AccountingMenus.xml" 
							/> -->
						<!-- <include-menu name="CreateAPInvoiceSubTabBar"
							location="component://accounting/widget/AccountingMenus.xml" /> -->
						<container style="h1">
							<label>For: ${invoice.description} [${invoice.invoiceId}]</label>
						</container>
						<section>
							<condition>
								<and>
									<if-compare field="invoice.statusId" operator="equals"
										value="INVOICE_IN_PROCESS" />
									<if-compare field="invoice.invoiceTypeId" operator="equals"
										value="PETTYCASH_INVOICE" />
									<if-compare field="requestUri" operator="equals"
										value="/createInvoice" />
								</and>
							</condition>
							<actions>
								<script
									location="component://accounting/webapp/accounting/WEB-INF/actions/invoice/GetInvoiceItemTypes.groovy" />
							</actions>
							<widgets>
								<screenlet title="${uiLabelMap.AccountingInvoiceItems}">
									<include-form name="EditInvoiceItems"
										location="component://accounting/widget/InvoiceForms.xml" />
								</screenlet>
								<section>
									<condition>
										<and>
											<if-compare field="invoice.invoiceTypeId"
												operator="not-equals" value="PAYROL_INVOICE" />
											<or>
												<if-compare operator="equals" value="true"
													field="hasArInvoiceEditPermission" />
												<if-compare operator="equals" value="true"
													field="hasApInvoiceEditPermission" />
											</or>
										</and>
									</condition>
									<widgets>
										<screenlet title="${uiLabelMap.AccountingInvoiceItemAdd}">
											<section>
												<widgets>
													<include-form name="EditInvoiceItem"
														location="component://accounting/widget/InvoiceForms.xml" />
												</widgets>
											</section>
										</screenlet>
									</widgets>
								</section>
							</widgets>
							<fail-widgets>
								<section>
									<condition>
										<and>
											<if-compare field="invoice.statusId" operator="equals"
												value="INVOICE_IN_PROCESS" />
											<or>
												<if-compare operator="equals" value="true"
													field="hasArInvoiceEditPermission" />
												<if-compare operator="equals" value="true"
													field="hasApInvoiceEditPermission" />
											</or>
										</and>
									</condition>
									<widgets>
										<screenlet title="${uiLabelMap.AccountingInvoiceHeader}">
											<link target="editInvoice" text="${uiLabelMap.CommonUpdate}"
												style="buttontext">
												<parameter param-name="invoiceId" />
											</link>
											<include-form name="invoiceHeader"
												location="component://accounting/widget/InvoiceForms.xml" />
										</screenlet>
										<container style="lefthalf">
											<screenlet title="${uiLabelMap.CommonStatus}"
												navigation-form-name="ListInvoiceStatus">
												<include-form name="ListInvoiceStatus"
													location="component://accounting/widget/InvoiceForms.xml" />
											</screenlet>
											<!-- <screenlet title="${uiLabelMap.AccountingAppliedPayments} 
												${appliedAmount?currency(${invoice.currencyUomId})} ${uiLabelMap.AccountingOpenPayments} 
												${notAppliedAmount?currency(${invoice.currencyUomId})}" navigation-form-name="ListInvoiceApplications"> 
												<link target="editInvoiceApplications" text="${uiLabelMap.CommonUpdate}" 
												style="buttontext"> <parameter param-name="invoiceId" /> </link> <include-form 
												name="ListInvoiceApplications" location="component://accounting/widget/InvoiceForms.xml" 
												/> </screenlet> -->
										</container>
										<container style="righthalf">
											<screenlet
												title="${uiLabelMap.AccountingAppliedPayments} ${appliedAmount?currency(${invoice.currencyUomId})} ${uiLabelMap.AccountingOpenPayments} ${notAppliedAmount?currency(${invoice.currencyUomId})}"
												navigation-form-name="ListInvoiceApplications">
												<link target="editInvoiceApplications" text="${uiLabelMap.CommonUpdate}"
													style="buttontext">
													<parameter param-name="invoiceId" />
												</link>
												<include-form name="ListInvoiceApplications"
													location="component://accounting/widget/InvoiceForms.xml" />
											</screenlet>
											<!-- <screenlet title="${uiLabelMap.AccountingInvoiceRoles}" navigation-form-name="invoiceRoles"> 
												<container> <link target="invoiceRoles" text="${uiLabelMap.CommonUpdate}" 
												style="buttontext"> <parameter param-name="invoiceId" /> </link> </container> 
												<include-form name="invoiceRoles" location="component://accounting/widget/InvoiceForms.xml" 
												/> </screenlet> <screenlet title="${uiLabelMap.PartyTerms}"> <include-form 
												name="ListInvoiceTerms" location="component://accounting/widget/InvoiceForms.xml" 
												/> <include-form name="ListInvoicePaymentInfo" location="component://accounting/widget/InvoiceForms.xml" 
												/> </screenlet> -->
										</container>
										<container style="clear" />
										<screenlet title="${uiLabelMap.AccountingInvoiceItems}"
											navigation-form-name="invoiceItems">
											<link target="listInvoiceItems" text="${uiLabelMap.CommonUpdate}"
												style="buttontext">
												<parameter param-name="invoiceId" />
											</link>
											<include-form name="invoiceItems"
												location="component://accounting/widget/InvoiceForms.xml" />
										</screenlet>
										<section>
											<condition>
												<not>
													<if-empty field="timeEntries" />
												</not>
											</condition>
											<widgets>
												<screenlet title="${uiLabelMap.AccountingInvoiceTimeEntries}"
													navigation-form-name="ListTimeEntries">
													<link target="editInvoiceTimeEntries" text="${uiLabelMap.CommonUpdate}"
														style="buttontext">
														<parameter param-name="invoiceId" />
													</link>
													<include-form name="ListTimeEntries"
														location="component://accounting/widget/InvoiceForms.xml" />
												</screenlet>
											</widgets>
										</section>
										<screenlet title="${uiLabelMap.AccountingTransactions}"
											navigation-form-name="AcctgTransAndEntries">
											<include-form name="AcctgTransAndEntries"
												location="component://accounting/widget/InvoiceForms.xml" />
										</screenlet>
									</widgets>
									<fail-widgets>
										<screenlet title="${uiLabelMap.AccountingInvoiceHeader}">
											<include-form name="invoiceHeader"
												location="component://accounting/widget/InvoiceForms.xml" />
										</screenlet>
										<container style="lefthalf">
											<screenlet title="${uiLabelMap.CommonStatus}"
												navigation-form-name="ListInvoiceStatus">
												<include-form name="ListInvoiceStatus"
													location="component://accounting/widget/InvoiceForms.xml" />
											</screenlet>
											<screenlet
												title="${uiLabelMap.AccountingAppliedPayments} ${appliedAmount?currency(${invoice.currencyUomId})} ${uiLabelMap.AccountingOpenPayments} ${notAppliedAmount?currency(${invoice.currencyUomId})}"
												navigation-form-name="ListInvoiceApplications">
												<include-form name="ListInvoiceApplications"
													location="component://accounting/widget/InvoiceForms.xml" />
											</screenlet>
										</container>
										<container style="righthalf">
											<screenlet title="${uiLabelMap.AccountingInvoiceRoles}"
												navigation-form-name="invoiceRoles">
												<include-form name="invoiceRoles"
													location="component://accounting/widget/InvoiceForms.xml" />
											</screenlet>
											<screenlet title="${uiLabelMap.PartyTerms}">
												<include-form name="ListInvoiceTerms"
													location="component://accounting/widget/InvoiceForms.xml" />
												<include-form name="ListInvoicePaymentInfo"
													location="component://accounting/widget/InvoiceForms.xml" />
											</screenlet>
										</container>
										<container style="clear" />
										<screenlet title="${uiLabelMap.AccountingInvoiceItems}"
											navigation-form-name="invoiceItems">
											<include-form name="invoiceItems"
												location="component://accounting/widget/InvoiceForms.xml" />
										</screenlet>
										<section>
											<condition>
												<not>
													<if-empty field="timeEntries" />
												</not>
											</condition>
											<widgets>
												<screenlet title="${uiLabelMap.AccountingInvoiceTimeEntries}"
													navigation-form-name="ListTimeEntries">
													<include-form name="ListTimeEntries"
														location="component://accounting/widget/InvoiceForms.xml" />
												</screenlet>
											</widgets>
										</section>
										<screenlet title="${uiLabelMap.AccountingTransactions}"
											navigation-form-name="AcctgTransAndEntries">
											<include-form name="AcctgTransAndEntries"
												location="component://accounting/widget/InvoiceForms.xml" />
										</screenlet>
									</fail-widgets>
								</section>
							</fail-widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	
	<screen name="MaterialDepotSalesEditInvoiceInitDC">
		<section>
			<actions>
				<set field="titleProperty" value="Material Invoice Entry" />
				<set field="tabButtonItem" value="DepotTransReceiptsDC" />
				<set field="tabButtonItem2" value="MaterialDepotSalesEditInvoiceInitDC" />
				<set field="shipmentId" from-field="parameters.shipmentId" />
				<set field="invoiceId" from-field="parameters.invoiceId" />
				<set field="supplyDate" from-field="parameters.supplyDate" />
				<set field="isFormSubmitted" from-field="parameters.isFormSubmitted" />
				<set field="defaultEffectiveDateTime" value="${supplyDate}"
					default-value="${bsh:org.ofbiz.base.util.UtilDateTime.nowTimestamp()}" />
				<set field="defaultEffectiveDate"
					value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(defaultEffectiveDateTime, &quot;dd MMMMM, yyyy&quot;);}" />
				<script
					location="component://depotsales/webapp/depotsales/WEB-INF/actions/depotsales/editBranchDepotSalesInvoiceDC.groovy" />
			</actions>
			<widgets>
				<decorator-screen name="DepotTransCommonDecoratorDC"
									location="${parameters.mainDecoratorLocation}">
									<decorator-section name="body">
										<include-menu name="DepotTransReceiptTabBar"
							location="component://depotsales/widget/DepotSalesMenus.xml" />
						<section>
							<condition>
								<if-compare operator="equals" field="isFormSubmitted"
									value="" />
							</condition>
							<widgets>
								<include-screen name="SalesDepotEditInvoiceInnerDC" />
							</widgets>
						</section>
						<section>
							<condition>
								<if-compare operator="equals" field="isFormSubmitted"
									value="YES" />
							</condition>
							<widgets>
								<include-screen name="SalesDepotEditInvoiceEntryDC" />
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>

   <screen name="SalesDepotEditInvoiceInnerDC">
		<section>
			<actions>
				<set field="changeFlag" from-field="changeFlag" />
				<set field="productSubscriptionTypeId" value="${parameters.productSubscriptionTypeId}" />
				<set field="subscriptionTypeId" from-field="parameters.subscriptionTypeId" />
				<entity-one value-field="showBoothAutoSuggestConf"
					entity-name="TenantConfiguration">
					<field-map field-name="propertyTypeEnumId" value="FACILITY_AUTOSUGGEST" />
					<field-map field-name="propertyName" value="showBoothAutoSuggest" />
					<select-field field-name="propertyValue" />
				</entity-one>
				<set field="showBoothAutoSuggest" value="${showBoothAutoSuggestConf.propertyValue}" />
				<set field="supplyDate" from-field="parameters.supplyDate" />
				<set field="effectiveDate" value="${parameters.effectiveDate}" />
				<set field="shipmentTypeId" value="${parameters.shipmentTypeId}" />

				<script
					location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/enablePartyAutoCompleteDC.groovy" />
				<script
					location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/orgnigationDeptDC.groovy" />
			</actions>
			<widgets>
				<section>
					<widgets>
						<platform-specific>
							<html>
								<html-template
									location="component://depotsales/webapp/depotsales/depotsales/SalesDepotEditInvoiceDepotDC.ftl" />
							</html>
						</platform-specific>
					</widgets>
					<fail-widgets>
						<label style="h3">${uiLabelMap.ProductFacilityViewPermissionError}
						</label>
					</fail-widgets>
				</section>
			</widgets>
		</section>
	</screen>

	<screen name="SalesDepotEditInvoiceEntryDC">
		<section>
			<actions>
				<set field="changeFlag" from-field="changeFlag" />
				<set field="productSubscriptionTypeId" from-field="parameters.productSubscriptionTypeId" />
				<set field="subscriptionTypeId" from-field="parameters.subscriptionTypeId" />
				<set field="boothId" from-field="parameters.boothId" />
				<set field="checkListType" value="indentEntry" />
				<set field="effectiveDate" value="${parameters.effectiveDate}" />
				<set field="shipmentTypeId" value="${parameters.shipmentTypeId}" />
				<set field="priceTypeId" from-field="parameters.priceTypeId" />
				<set field="productCatageoryId" from-field="parameters.productCatageoryId" />
				<set field="vehicleId" from-field="parameters.vehicleId" />
				<script
					location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/purchases/PurchaseEntryFormNewDepotDC.groovy" />
			</actions>
			<widgets>
				<section>
					<widgets>
						<platform-specific>
							<html>
								<html-template
									location="component://materialmgmt/webapp/materialmgmt/purchase/PurchaseOrder.ftl" />
							</html>
						</platform-specific>
					</widgets>
					<fail-widgets>
						<platform-specific>
							<html>
								<html-template
									location="component://materialmgmt/webapp/materialmgmt/purchase/PurchaseOrder.ftl" />
							</html>
						</platform-specific>
					</fail-widgets>
				</section>
			</widgets>
		</section>
	</screen>
</screens>

