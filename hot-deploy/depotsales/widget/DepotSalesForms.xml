<?xml version="1.0" encoding="UTF-8"?>
<forms xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
        xsi:noNamespaceSchemaLocation="http://ofbiz.apache.org/dtds/widget-form.xsd">
        
<form name="FindShipmentDepot" title="" type="single" target="${targetRequest}" header-row-style="header-row" default-table-style="basic-table">
        
        <field title="shipment Date" name="estimatedShipDate"><date-find/></field>
        <field name="shipmentId"><text-find/></field>
        <field name="roleTypeId"><hidden value="BILL_TO_CUSTOMER"/></field>
        <field name="partyIdTo" parameter-name="partyId"><lookup target-form-name="LookupPartyName"/></field> 
        <field name="shipmentTypeId"><hidden value="${shipmentTypeId}"/></field>
        <field name="shipStatusId"><hidden value="GENERATED"/></field>
        <field name="vehicleId" title="Vehicle Number"><text-find/></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    
    <form name="listShipmentsDepot" type="list" list-name="listIt" paginate-target="FindDepotShipment"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
            <service service-name="performFind" result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="parameters"/>
                <field-map field-name="entityName" value="OrderHeaderAndRolesAndShipment"/>
                <field-map field-name="orderBy" from-field="parameters.sortField" value="-estimatedShipDate"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
            </service>
        </actions>
        <field name="shipmentId" ><display/></field>
        <field name="estimatedShipDate" title="Ship Date"><display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(estimatedShipDate, &quot;dd/MM/yyyy&quot;);}"/></field>
        <field name="vehicleId" title="Vehicle Number"><display/></field>
        <field name="GatePass" widget-style="buttontext" >
            <hyperlink target="nonRouteGatePass.pdf" description="GatePass" target-window="_blank">
               	  <parameter param-name="shipmentId" />
               	  <parameter param-name="screenFlag" /> 
            </hyperlink>
        </field> 
        <field name="buyerInvoice" widget-style="buttontext" id-name = "invoiceSlips">
            <hyperlink target="buyerInvoice.pdf" description="Invoice Slips" target-window="_blank"> 	
               	  <parameter param-name="shipmentId" /> 
            </hyperlink>
        </field>
      	<field name="taxInvoice" widget-style="buttontext" id-name = "taxInvoice">
            <hyperlink target="taxInvoice.pdf" description="Tax Invoice" target-window="_blank"> 	
               	  <parameter param-name="shipmentId" /> 
            </hyperlink>
        </field>
        <field use-when="${groovy:((security.hasEntityPermission(&quot;FGSSALE_SHIP&quot;, &quot;_CANCEL&quot;, session)))}" name="cancelShipment" widget-style="buttontext">
            <hyperlink target="cancelShipmentDepot" description="Cancel Shipment">
	            <parameter param-name="shipmentId"/>
            </hyperlink>
        </field> 
    </form> 

</forms>