<?xml version="1.0" encoding="UTF-8"?>
<forms xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
        xsi:noNamespaceSchemaLocation="http://ofbiz.apache.org/dtds/widget-form.xsd">
        
<form name="FindShipmentDepot" title="" type="single" target="${targetRequest}" header-row-style="header-row" default-table-style="basic-table">
        
        <field title="shipment Date" name="estimatedShipDate"><date-find/></field>
        <field name="shipmentId"><text-find/></field>
        <field name="roleTypeId"><hidden value="BILL_TO_CUSTOMER"/></field>
        <field name="partyIdTo" parameter-name="partyId"><lookup target-form-name="LookupPartyName"/></field> 
        <field name="shipmentTypeId"><hidden value="${shipmentTypeId}"/></field>
        <field name="shipStatusId"><hidden value="GENERATED"/></field>
        <field name="vehicleId" title="Vehicle Number"><text-find/></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
     <form name="FindByprodShipmentDepot" title="" type="single" target="${targetRequest}" header-row-style="header-row" default-table-style="basic-table">
        <field title="shipment Date" name="estimatedShipDate"><date-find/></field>
        <field name="shipmentId"><text-find/></field>
        <field name="primaryOrderId" title="Order Id"><text-find/></field>
        <field name="roleTypeId"><hidden value="BILL_TO_CUSTOMER"/></field>
        <field name="partyIdTo" parameter-name="partyId"><lookup target-form-name="LookupPartyName"/></field> 
        <field name="shipmentTypeId"><hidden value="${shipmentTypeId}"/></field>
        <field name="shipStatusId"><hidden value="GENERATED"/></field>
        <field name="vehicleId" title="Vehicle Number"><text-find/></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
     <form name="listByprodShipmentDepot" type="list" list-name="listIt" paginate-target="FindDepotSupplierPurchseShipment"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
            <service service-name="performFind" result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="parameters"/>
                <field-map field-name="entityName" value="Shipment"/>
                <field-map field-name="orderBy" from-field="parameters.sortField" value="-estimatedShipDate"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
            </service>
        </actions>
        <row-actions>
        	<entity-condition entity-name="InvoiceAndItem" list="invoices">
        		<condition-list combine="and">
        			<condition-expr field-name="shipmentId" from-field="shipmentId"/>
        			<condition-expr field-name="statusId" operator="not-equals" value="INVOICE_CANCELLED"/>
        		</condition-list>
        	</entity-condition>
        	<set field="invSize" value="${groovy: invoices.size();}"/>
        	<set field="invoiceId" value="${invoices[0].invoiceId}"/>
        	<set field="invoiceStatusId" value="${invoices[0].statusId}"/>
        	<entity-one value-field="invoiceAttr" entity-name="InvoiceAttribute">
        	<field-map field-name="invoiceId" value="${invoices[0].invoiceId}"/>
        	<field-map field-name="attrName" value="SALES_TAX_NUMBER"/>
        	</entity-one>
        	<set field="attrValue" from-field="invoiceAttr.attrValue"/>
        </row-actions>
        <field name="shipmentId" ><display/></field>
        <field name="primaryOrderId" title="SO No"><display/></field>
        <field name="statusId" ><display/></field>
        <field name="estimatedShipDate" title="Ship Date"><display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(estimatedShipDate, &quot;dd/MM/yyyy&quot;);}"/></field>
        <field name="vehicleId" title="Vehicle Number"><display/></field>
              <field name="partyId"><display  description= "${groovy:org.ofbiz.party.party.PartyHelper.getPartyName(delegator, invoices[0].partyId, false);}[${invoices[0].partyId}]"/></field>
              <field name="invoiceId"><display></display></field>
              <field name="EditInvoice" use-when="(invoiceId !=null) &amp;&amp;(invoiceStatusId.equals(&quot;INVOICE_IN_PROCESS&quot;))"  widget-style="buttontext" >
            <hyperlink target="EditInvoiceInit" description="EditInvoice" target-window="_blank">
               	  <parameter param-name="invoiceId"/>
               	   <parameter param-name="shipmentId" />
               	   <parameter param-name="vehicleId" />
               	   <parameter param-name="orderId"  value="${primaryOrderId}"/>
               	   <parameter param-name="partyId" value="${invoices[0].partyId}"/>
               	   <parameter param-name="attrValue" /> 
               	  <parameter param-name="screenFlag" /> 
            </hyperlink>
        </field> 
        <field name="EditSalesTax" title="EditSalesTax" widget-style="buttontext"
			use-when="(invoiceId !=null) &amp;&amp;(invoiceStatusId.equals(&quot;INVOICE_IN_PROCESS&quot;))">
			<hyperlink target-type="plain" description="EditSalesTax"
				target="javascript:getSalesTax('${invoiceId}','${attrValue}');">
			</hyperlink>
		</field>
        <field name="GatePass" widget-style="buttontext" use-when="(&quot;${invSize}&quot; != &quot;0&quot;)&amp;&amp;(!statusId.equals(&quot;SHIPMENT_CANCELLED&quot;))">
            <hyperlink target="ByprodGatePass.pdf" description="GatePass" target-window="_blank">
               	  <parameter param-name="shipmentId" />
               	  <parameter param-name="screenFlag" /> 
            </hyperlink>
        </field> 
        <field name="buyerInvoice" widget-style="buttontext" id-name = "invoiceSlips" use-when="(&quot;${invSize}&quot; != &quot;0&quot;)&amp;&amp;(!statusId.equals(&quot;SHIPMENT_CANCELLED&quot;))">
            <hyperlink target="ByprodInvoiceDepot.pdf" description="Invoice Slips" target-window="_blank"> 	
               	  <parameter param-name="shipmentId" /> 
            </hyperlink>
        </field>
      	<field name="taxInvoice" widget-style="buttontext" id-name = "taxInvoice" use-when="(&quot;${invSize}&quot; != &quot;0&quot;)&amp;&amp;(!statusId.equals(&quot;SHIPMENT_CANCELLED&quot;))">
            <hyperlink target="ByprodTaxInvoiceDepot.pdf" description="Tax Invoice" target-window="_blank"> 	
               	  <parameter param-name="shipmentId" /> 
            </hyperlink>
        </field>
        <field use-when="(&quot;${invSize}&quot; == &quot;0&quot;) &amp;&amp; (${groovy:((security.hasEntityPermission(&quot;FGSSALE_SHIP&quot;, &quot;_CANCEL&quot;, session)))})&amp;&amp;(!statusId.equals(&quot;SHIPMENT_CANCELLED&quot;))" name="cancelShipment" widget-style="buttontext">
            <hyperlink target="cancelShipmentDepot" description="Cancel Shipment">
	            <parameter param-name="shipmentId"/>
            </hyperlink>
        </field> 
        <field name="raiseInvoice"  use-when="(&quot;${invSize}&quot; == &quot;0&quot;)&amp;&amp;(!statusId.equals(&quot;SHIPMENT_CANCELLED&quot;))&amp;&amp;${groovy:((security.hasEntityPermission(&quot;DEPOTSALES&quot;, &quot;_RAISE_INVOICE&quot;, session)))}" widget-style="buttontext">
            <hyperlink target="raiseInvoiceForByProdSalesShipment" description="Raise Invoice">
	            <parameter param-name="shipmentId"/>
	            <parameter param-name="eventDate" from-field="estimatedShipDate"/>
            </hyperlink>
        </field>
        <field name="invoiceId" use-when="(&quot;${invSize}&quot; != &quot;0&quot;)&amp;&amp;(!statusId.equals(&quot;SHIPMENT_CANCELLED&quot;))&amp;&amp;${groovy:((security.hasEntityPermission(&quot;DEPOTSALES&quot;, &quot;_RAISE_INVOICE&quot;, session)))}" title="Invoice Id"><display/></field>
        
    </form> 
    
    <form name="FindTankerSalesOrder" title="" type="single" target="processOrdersBranchSales" header-row-style="header-row" default-table-style="basic-table">
        <field name="salesChannelEnumId" ><hidden value="DEPOT_CHANNEL"/></field>  
        <!-- <field name="orderTypeId">
           <drop-down no-current-selected-key="SALES_ORDER">
              <entity-options description="${description}" entity-name="OrderType" key-field-name="orderTypeId">
                 <entity-constraint name="parentTypeId" operator="like" value="%SALES%"/>
              </entity-options>
           </drop-down>
        </field> -->
        <field name="orderId" title="Indent Id"><text/></field>
        <field title="Delivery Date" name="estimatedDeliveryDate"><date-time/></field>
        
        <!-- <field name="sequenceId"><text-find/></field> -->
      <!--  <field name="productId"><lookup target-form-name="LookupProduct"/></field> -->
        <!-- <field name="orderTypeId"><hidden value="PURCHASE_ORDER"/></field> -->
        <field name="statusId">
	        	<drop-down allow-empty="true">
	        		<option key="ORDER_CREATED" description="Created"/>
	        		<option key="ORDER_APPROVED" description="Approved"/>
	        		<option key="ORDER_CANCELLED" description="Cancelled"/>
	        		<option key="ORDER_SUSPENDED" description="Suspended"/>
	        	</drop-down>
        </field>
         <field name="findPoFlag"><hidden value="Y"/></field>  
     	<field name="partyId" title="Customer"><lookup target-form-name="LookupPartyName"/></field> 
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    <form name="listShipmentsDepot" type="list" list-name="listIt" paginate-target="FindDepotShipment"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
            <service service-name="performFind" result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="parameters"/>
                <field-map field-name="entityName" value="OrderHeaderAndRolesAndShipment"/>
                <field-map field-name="orderBy" from-field="parameters.sortField" value="-estimatedShipDate"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
            </service>
        </actions>
        <field name="shipmentId" ><display/></field>
        <field name="estimatedShipDate" title="Ship Date"><display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(estimatedShipDate, &quot;dd/MM/yyyy&quot;);}"/></field>
        <field name="vehicleId" title="Vehicle Number"><display/></field>
        <field name="GatePass" widget-style="buttontext" >
            <hyperlink target="nonRouteGatePassDepot.pdf" description="GatePass" target-window="_blank">
               	  <parameter param-name="shipmentId" />
               	  <parameter param-name="screenFlag" /> 
            </hyperlink>
        </field> 
        <field name="buyerInvoice" widget-style="buttontext" id-name = "invoiceSlips">
            <hyperlink target="buyerInvoiceDepot.pdf" description="Invoice Slips" target-window="_blank"> 	
               	  <parameter param-name="shipmentId" /> 
            </hyperlink>
        </field>
      	<field name="taxInvoice" widget-style="buttontext" id-name = "taxInvoice">
            <hyperlink target="taxInvoiceDepot.pdf" description="Tax Invoice" target-window="_blank"> 	
               	  <parameter param-name="shipmentId" /> 
            </hyperlink>
        </field>
        <field use-when="${groovy:((security.hasEntityPermission(&quot;FGSSALE_SHIP&quot;, &quot;_CANCEL&quot;, session)))}" name="cancelShipment" widget-style="buttontext">
            <hyperlink target="cancelShipmentDepot" description="Cancel Shipment">
	            <parameter param-name="shipmentId"/>
            </hyperlink>
        </field> 
    </form> 
    
    <form name="FindShipmentReceipt" title="" type="single" target="${targetRequest}" header-row-style="header-row" default-table-style="basic-table">
        <field name="datetimeReceived"><date-find/></field>
        <field name="productId"><text-find/></field>
        <field name="receiptId" title="GRN Item No"><text-find/></field>
        <field name="statusId">
        	<drop-down allow-empty="true"   >
        		<entity-options description="${description}" entity-name="StatusItem" >
        			<entity-constraint name="statusTypeId" operator="equals" value="RECEIPT_STATUS"/>
        		</entity-options>
        	</drop-down>
        </field>
        <field name="shipmentId" title="GRN Shipment Id"><text-find/></field>
        <field name="orderId" title="PO Order"><text-find/></field>
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    
   <form name="listMaterialShipmentReceipt" type="list" list-name="listIt" paginate-target="${targetRequest}"
        odd-row-style="alternate-row" header-row-style="header-row"  target="sendReceiptQtyForQC" default-table-style="basic-table hover-bar">
      
        <row-actions>
        	<entity-one value-field="product" entity-name="Product">
				<field-map field-name="productId" from-field="productId"/>
			</entity-one>
			<entity-one value-field="uom" entity-name="Uom">
				<field-map field-name="uomId" from-field="product.quantityUomId"/>
			</entity-one>
			<set field="dec" from-field="uom.description"/>
        </row-actions>
      	<field name="receiptId" title="GRN Item No">
      		<display/>
      	</field>
      	<field name="productId" title="Code- Name [UOM]">
      		<display-entity entity-name="Product" description="${productId} ${description}[${dec}]"/>
      	</field>
        <field name="datetimeReceived" title="Received Date"><display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(datetimeReceived, &quot;dd-MMM-yyyy&quot;);}"/></field>
        <field name="shipmentId" title="GRN ShipmentId"><display/></field>
       <field name="orderId" title="PO No"><display/></field> 
        <field name="statusId" title="Status">
        	<display-entity entity-name="StatusItem" description="${description}"/>
        </field>
      	<field name="quantityAccepted" title="Quantity"><display/></field>
      	<field name="quantityRejected" title="Qty Rejected"><display/></field>
      	<field name="receivedByUserLoginId" title="Entry by"><display/></field>	
      	
        <field name="statusIdTo"  > <hidden  value="SR_QUALITYCHECK" /> </field>
         
      	<!-- <field name="SendtoQC" use-when="statusId.equals(&quot;SR_RECEIVED&quot;)"  title="Send to QC" widget-style="buttontext">
             <hyperlink  target-type="plain" description="Send to QC"  target="javascript:showQCApprovalQTip('${receiptId}');"></hyperlink>
        </field>  -->
    </form>
    
    <form name="FindMaterialShipment" title="" type="single" target="${targetRequest}" header-row-style="header-row" default-table-style="basic-table">
        
        <field name="shipmentTypeId"><hidden value="MATERIAL_SHIPMENT"/></field>
        <field name="estimatedShipDate" title="GRN Shipment Date"><date-find default-option-from="sameDay"  /></field>
        <field name="primaryOrderId" title="PO no"><text-find/></field>
        <field name="shipmentId" title="GRN Shipment Id"><text-find/></field>
        <field name="partyId" title="Party"><lookup target-form-name="LookupPartyName"/></field>
        <field name="vehicleId" title="Vehicle No"><text-find/></field>
        <field name="statusId" title="Status"  >
        <drop-down no-current-selected-key="GENERATED" allow-empty="true" > 
        <option key="SHIPMENT_CANCELLED" description="Cancelled" > </option>
        <option key="GENERATED" description="Generated"  ></option>
        </drop-down>
        </field>
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    
    <form name="listMaterialShipments" type="list" list-name="listIt" paginate-target="${targetRequest}"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
        </actions>
        <row-actions>
        	<entity-condition entity-name="Invoice" list="invoices">
        		<condition-list combine="and">
        			<condition-expr field-name="shipmentId" from-field="shipmentId"/>
        			<condition-expr field-name="statusId" operator="not-equals" value="INVOICE_CANCELLED"/>
        		</condition-list>
        	</entity-condition>
        	<set field="invSize" value="${groovy: invoices.size();}"/>
        	<entity-condition entity-name="ShipmentReceipt" list="shipmentReceiptList">
        		<condition-list combine="and">
        			<condition-expr field-name="shipmentId" from-field="shipmentId" />
        			<condition-expr field-name="statusId" operator="equals" value="SR_RECEIVED"/>
        		</condition-list>
        	</entity-condition>
        	<set field="shipmentReceiptSize" value="${groovy: shipmentReceiptList.size();}"/>
        	<entity-condition entity-name="ShipmentReceipt" list="invoiceReceiptList">
        		<condition-list combine="and">
        			<condition-expr field-name="shipmentId" from-field="shipmentId" />
        			<condition-expr field-name="statusId" operator="equals" value="SR_ACCEPTED"/>
        		</condition-list>
        	</entity-condition>
        	<set field="invoiceReceiptSize" value="${groovy: invoiceReceiptList.size();}"/>
        </row-actions>
      	<field name="shipmentId" widget-style="buttontext h3" title="GRN Shipment Id">
      		<hyperlink target="MaterialShipmentOverview" description="${shipmentId}" target-window="_blank" >
                <parameter param-name="shipmentId"/>
            </hyperlink>
      	</field>
        <field name="estimatedShipDate" title="GRN Ship Date"><display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(estimatedShipDate, &quot;dd MMMMM, yyyy&quot;);}"/></field>
        <field name="primaryOrderId" title="PO No" widget-style="buttontext">
        	<hyperlink target="POoverview" description="${primaryOrderId}" target-window="_blank">
      			<parameter param-name="orderId" value="${primaryOrderId}"/>
      		</hyperlink>
        </field>
        <field name="partyId">
        <display-entity entity-name="PartyNameView" key-field-name="partyId" description="${firstName} ${middleName} ${lastName} ${groupName}">
                <sub-hyperlink description="[${partyId}]" target="/partymgr/control/viewprofile" target-type="inter-app">
                    <parameter param-name="partyId" from-field="partyId"/>
                </sub-hyperlink>
            </display-entity>
        </field>
        <field name="vehicleId" title="Vehicle No"><display/></field>
        <field name="statusId" title="Status">
        	<display-entity entity-name="StatusItem" description="${description}"/>
        </field>
        <field name="linkGrnWithPO" widget-style="buttontext" title="Link GRN With PO" use-when="&quot;${primaryOrderId}&quot;==&quot;&quot; &amp;&amp;(!statusId.equals(&quot;SHIPMENT_CANCELLED&quot;))&amp;&amp; ${groovy:((security.hasEntityPermission(&quot;DEPOTSALES&quot;, &quot;_RAISE_GRN&quot;, session)))}" >
            <hyperlink target-type="plain" target="javascript:showLinkGrnWithPOForm('${shipmentId}','${partyId}');" description="Link GRN With PO">
            </hyperlink>
        </field> 
        <field name="cancelGRN" widget-style="buttontext" title="Cancel GRN" use-when="(&quot;${invSize}&quot; == &quot;0&quot;)&amp;&amp;(invoiceReceiptSize.equals(&quot;0&quot;))&amp;&amp;(!statusId.equals(&quot;SHIPMENT_CANCELLED&quot;))&amp;&amp; ${groovy:((security.hasEntityPermission(&quot;DEPOTSALES&quot;, &quot;_RAISE_GRN&quot;, session)))}">
            <hyperlink target="CancelGrnShipment" description="Cancel GRN">
                <parameter param-name="shipmentId"/>
            </hyperlink>
        </field>
        <field name="report" widget-style="buttontext"  use-when="(!statusId.equals(&quot;SHIPMENT_CANCELLED&quot;))">
            <hyperlink target="MRRreportDepotSales.pdf" description="Report" target-window="_blank">
             	<parameter param-name="shipmentId" value="${shipmentId}"/>
             	<parameter param-name="orderId" value="${primaryOrderId}"/>
               	<parameter param-name="datetimeReceived" value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(estimatedShipDate, &quot;dd-MMM-yyyy&quot;);}"/>
            </hyperlink>
        </field>
        <field name="SendtoQC" use-when="!shipmentReceiptSize.equals(&quot;0&quot;)"  title="Accept Shipment" widget-style="buttontext">
             <hyperlink  target-type="plain" description="Accept Shipment"  target="javascript:QCApprovalQTip('${shipmentId}');"></hyperlink>
        </field> 
        <field name="raiseInvoice" widget-style="buttontext" title="Raise Invoice" use-when="(&quot;${invSize}&quot; == &quot;0&quot;)&amp;&amp;(!invoiceReceiptSize.equals(&quot;0&quot;))&amp;&amp;(!statusId.equals(&quot;SHIPMENT_CANCELLED&quot;))&amp;&amp;${groovy:((security.hasEntityPermission(&quot;DEPOTSALES&quot;, &quot;_RAISE_INVOICE&quot;, session)))}">
            <hyperlink target="MaterialInvoiceInit" description="Invoice">
                <parameter param-name="shipmentId"/>
            </hyperlink>
        </field> 
    </form>
    
    <form name="shipmentInfo" type="single" title="request information" default-map-name="shipmentHeader"
        header-row-style="header-row" default-table-style="basic-table">
        
        <field name="shipmentId" title="shipment No"><display/></field>
        <field name="primaryOrderId" title="PO no"><display/></field>
        <field name="statusId" title="Status"><display/></field>
        <field name="estimatedShipDate" title="Ship Date"><display/></field>
        <field name="supplierId" title="Supplier">
        	<display default-value="${supplierId}"/>
        </field>
        <field name="supplierInvoiceId" title="Supplier Invoice No"><display/></field>
        <field name="supplierInvoiceDate" title="Supplier Invoice Date"><display /></field>
        <field name="vehicleId" title="Vehicle No"><display/></field>
        <field name="createdDate" title="Created Date"><display/></field>
        <field name="createdByUserLogin" title="Created User Login"><display/></field>
    </form>
    
    <form name="shipmentItemInfo" type="list" title="request information" default-map-name="" list-name="shipmentItems"
        header-row-style="header-row" default-table-style="basic-table">
        
        <field name="shipmentItemSeqId" title="Item No"><display/></field>
        <field name="productId" title="Material Code">
        	<display-entity entity-name="Product" key-field-name="productId" description="${productName} - [${productId}]"/>
        </field>
        <field name="quantity" title="Qty"><display/></field>
    </form>
    
    <form name="shipmentReceiptsForInvoice" type="list" title="request information" default-map-name="" list-name="shipmentReceipts"
        header-row-style="header-row" default-table-style="basic-table" target="">
        <field name="shipmentId"><hidden/></field>
        <field name="receiptId" title="GRN No"><display/></field>
        <field name="productId" title="Material Code">
        	<display-entity entity-name="Product" key-field-name="productId" description="${productName} - [${productId}]"/>
        </field>
        <field name="orderId" title="Order No."><display/></field>
        <field name="orderItemSeqId" title="Order Item Ref."><display/></field>
        <field name="quantityAccepted" title="Accepted Qty"><display/></field>
        <field name="quantityRejected" title="Rejected Qty"><display/></field>
        <field name="statusId" title="Status"><display-entity entity-name="StatusItem" key-field-name="statusId" description="${description}"/></field>
    </form>

	<form name="orderAmendments" type="list" list-name="orderAmendmentsList" separate-columns="true"
        odd-row-style="alternate-row" header-row-style="header-row" default-table-style="basic-table hover-bar">
      <actions>
      	<entity-condition entity-name="OrderItemChange" list="orderAmendmentsList">
      		<condition-expr field-name="orderId" operator="equals" from-field="parameters.orderId"/>
      	</entity-condition>
      </actions>  
      <row-actions>
      	<entity-one value-field="OrderItem" entity-name="OrderItem">
      		<field-map field-name="orderId" from-field="orderId"/>
      		<field-map field-name="orderItemSeqId" from-field="orderItemSeqId"/>
      	</entity-one>
      	<set field="productId"  from-field="OrderItem.productId"/>
      </row-actions>
      <field name="orderId"><hidden/></field>
      <field name="orderItemSeqId" title="Item No"><hidden/></field>
      <field name="productId" title="Product">
      		<display-entity entity-name="Product" description="${description}"/>
      	</field>
      <field name="quantity"><display></display></field>
      <field name="unitPrice"><display></display></field>
      <field name="effectiveDatetime" title="Effective Date"><display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(effectiveDatetime, &quot;dd-MMM-yyyy&quot;);}"></display></field>
      <field name="changeDatetime" title="Changed Date"><display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(changeDatetime, &quot;dd-MMM-yyyy&quot;);}"></display></field>
      <field name="changeUserLogin" title="Changed By"><display></display></field>
      <field name="changeComments" title="Comments"><display></display></field>
     </form>   
     
    <form name="findMaterial" type="single" target="searchProduct">
    	<field name="productId" title="Product">
             <lookup target-form-name="LookupProduct" size="15" />
        </field>
        <field name="internalName" title="Internal Name"><text-find/> </field>
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
   <form name="listMaterial" type="list" extends="MaterialsList" list-name="listIt">
        <actions>
          <service service-name="performFind" result-map="result" result-map-list="listIt">
            <field-map field-name="inputFields" from-field="parameters"/>
            <field-map field-name="entityName" from-field="entityName"/>
            <field-map field-name="inputFields.productTypeId" value="FINISHED_GOOD"/>
            <field-map field-name="viewIndex" from-field="viewIndex"/>
            <field-map field-name="viewSize" from-field="viewSize"/>
          </service>
        </actions>
    </form>
    <form name="MaterialsList" type="list" use-row-submit="true" 
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <row-actions>
        	<entity-condition entity-name="SupplierProduct" list="list" >
        		<condition-expr field-name="productId" operator="equals" value="${productId}"/>
        	</entity-condition>
        	<set  field="partyId" value="${list[0].partyId}"/>
        	<entity-condition entity-name="ProductPrice" list="priceList" >
        		<condition-expr field-name="productId" operator="equals" value="${productId}"/>
        		<condition-expr field-name="productPriceTypeId" operator="equals" value="PM_RC_W_PRICE"/>
        	</entity-condition>
        	<set  field="price" value="${priceList[0].price}"/>
        </row-actions>
    <!--  <field name="internalName" title="Internal Name"><display/></field> -->
	<!-- <field name="productId" title="Product">
     	<display-entity entity-name="Product" description="${description} [${productId}]" ></display-entity>
    </field>  -->    
    <field name="productId" title="Product" use-when="productId!=null" widget-style="buttontext">
            <hyperlink also-hidden="false" description="${description} [${productId}]" target="/catalog/control/EditProduct" target-window="_blank" target-type="inter-app">
                <parameter param-name="productId"/>
            </hyperlink>
     </field>
    
     <field name="longDescription" title="Specification"><display size="50"/></field>
     <field name="quantityUomId" title="UOM" ><display-entity entity-name="Uom" key-field-name="uomId" description="${description}"/></field> 
     <field name="primaryProductCategoryId" title="Material Category">
     	<display-entity entity-name="ProductCategory" key-field-name="productCategoryId" description="${description}" ></display-entity>
     </field>
      <field name="Barcode" title="Barcode" use-when="productId!=null" widget-style="buttontext">
            <hyperlink also-hidden="false" description="Barcode" target="/catalog/control/ProductBarCode.pdf" target-window="_blank" target-type="inter-app">
                <parameter param-name="productId"/>
            </hyperlink>
     </field>
     <!-- <field name="partyId" title="Supplier" >
     	<hyperlink target="/partymgr/control/viewprofile" target-type="inter-app" description="${groovy:org.ofbiz.party.party.PartyHelper.getPartyName(delegator, partyId, false);}  [${partyId}]">
                <parameter param-name="partyId" from-field="partyId"/>
            </hyperlink>
     </field> -->
     <field name="price" title="View Price" widget-style="buttontext">
     	<hyperlink  target="EditProductPricesDepot" target-type="inter-app" target-window="_blank" description="View"> 
     	   <parameter param-name="productId"/>
     	</hyperlink>
     </field>
      <field name="updateMaterial" widget-style="buttontext" title="Update Details" use-when="${groovy:((security.hasEntityPermission(&quot;MM&quot;, &quot;_MATERIAL_UPDATE&quot;, session)))}"  >
            <hyperlink target-type="plain" target="javascript:showUpdateProductForm('${productId}','${quantityUomId}');" description="Update">
            </hyperlink>
      </field> 
    </form>
    <form name="FindPurchaseOrder" title="" type="single" target="${targetRequest}" header-row-style="header-row" default-table-style="basic-table">
        <field name="salesChannelEnumId" ><hidden value="${ChannalType}"/></field>  
        <field name="orderTypeId">
           <drop-down no-current-selected-key="PURCHASE_ORDER">
              <entity-options description="${description}" entity-name="OrderType" key-field-name="orderTypeId">
                 <entity-constraint name="parentTypeId" operator="like" value="%PURCHASE%"/>
              </entity-options>
           </drop-down>
        </field>
        <field title="Delivery Date" name="estimatedDeliveryDate"><date-find/></field>
        <field name="orderId"><text-find/></field>
        <field name="sequenceId"><text-find/></field>
       <field name="productId"><lookup target-form-name="LookupProduct"/></field>
        <!-- <field name="orderTypeId"><hidden value="PURCHASE_ORDER"/></field> -->
        <field name="statusId">
	        	<drop-down allow-empty="true">
	        		<option key="ORDER_CREATED" description="Created"/>
	        		<option key="ORDER_APPROVED" description="Approved"/>
	        		<option key="ORDER_CANCELLED" description="Cancelled"/>
	        		<option key="ORDER_SUSPENDED" description="Suspended"/>
	        	</drop-down>
        </field>
<!--         <field name="roleTypeId"><hidden value="SUPPLIER_AGENT"/></field> -->
         <field name="findPoFlag"><hidden value="Y"/></field>  
    	<field name="partyId" title="Supplier"><lookup target-form-name="LookupPartyName" target-parameter="roleTypeId"/></field>
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
     <form name="listPurchaseOrders" type="list" list-name="listIt" paginate-target="${targetRequest}"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
           
        </actions>
      	<row-actions>
      		<entity-condition entity-name="OrderItem" list="orderItemList" >
      			<condition-expr field-name="orderId" operator="equals" value="${orderId}" />
      		</entity-condition>
      		<script location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/purchases/POSearchFilter.groovy"/>
      		<set field="newSize" value="${orderItemsSize}" />
      		<set field="size" value="${groovy: return(orderItemList.size())}"/>
      		<!-- <entity-condition entity-name="SupplierProduct" list="SupplierProductList" >
      			<condition-expr field-name="productId" operator="equals" value="${orderItemList[0].productId}"/>
      		</entity-condition>
      		<set field="partyId" value="${orderRoles[0].partyId}" />
      		<entity-condition entity-name="ShipmentReceipt" list="ShipmentReceiptList" >
      			<condition-list combine="and" >
	      			<condition-expr field-name="orderId" operator="equals" value="${orderId}" />
	      			<condition-expr field-name="statusId" operator="not-equals" value="SR_REJECTED" />
      			</condition-list>
      		</entity-condition>
      		<set field="flag" value="${groovy: return (ShipmentReceiptList.size() > 0)? 'Y' : 'N';}"/>
      		<entity-condition entity-name="Shipment" list="ShipmentList" >
      			<condition-list combine="and" >
	      			<condition-expr field-name="primaryOrderId" operator="equals" value="${orderId}" />
      			</condition-list>
      		</entity-condition>
      		<set field="vehicleId" value="${ShipmentList[0].vehicleId}"/> -->
      	</row-actions>
      	<field name="orderId" widget-style="buttontext">
      		<hyperlink target="POoverview" description="${orderId}" target-window="_blank">
      			<parameter param-name="orderId"/>
      		</hyperlink>
      	</field>
      	<field name="orderItemSeqId"><display></display></field>
        <field name="entryDate" title="Entry Date"><display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(entryDate, &quot;dd/MM/yyyy&quot;);}"/></field>
        <field name="createdBy" title="Created By"><display/></field>
        <!-- <field name="salesChannelEnumId"><display/></field> -->
        <field name="partyId" title="Supplier"><display description="${groovy:org.ofbiz.party.party.PartyHelper.getPartyName(delegator, partyId, false);} - [${partyId}]"/></field>
         <!-- <field use-when="&quot;${orderTypeId}&quot; == &quot;LETTER_OF_INTENT&quot;" name="poReport" widget-style="buttontext">
            <hyperlink target="LetterOfIndentReport.pdf" description="Report" target-window="_blank">
                <parameter param-name="orderId"/>
            </hyperlink>
        </field> -->
        <field use-when="&quot;${orderTypeId}&quot; != &quot;LETTER_OF_INTENT&quot; &amp;&amp; &quot;${orderTypeId}&quot; != &quot;ARC_ORDER&quot;" name="poReport" widget-style="buttontext">
            <hyperlink target="PurchaseOrderViewDepotSales.pdf" description="Report" target-window="_blank">
                <parameter param-name="orderId"/>
            </hyperlink>
        </field>
        <!--  <field use-when="&quot;${orderTypeId}&quot; == &quot;ARC_ORDER&quot;" name="arcReport" widget-style="buttontext">
            <hyperlink target="arcOrder.pdf" description="Report" target-window="_blank">
                <parameter param-name="orderId"/>
            </hyperlink>
        </field>
         -->
        
       <!-- <field name="editOrder" widget-style="buttontext" use-when="statusId.equals(&quot;ORDER_CREATED&quot;) &amp;&amp;${groovy:((security.hasEntityPermission(&quot;DEPOTSALES&quot;, &quot;_EDIT_PO&quot;, session)))}" >
            <hyperlink target="editMaterialPO" description="Edit Order">
                 <parameter param-name="orderId"/>
            </hyperlink>
        </field> -->  
      	<field name="ApproveOrder" widget-style="buttontext" use-when="statusId.equals(&quot;ORDER_CREATED&quot;)&amp;&amp;${groovy:((security.hasEntityPermission(&quot;DEPOTSALES&quot;, &quot;_APPROVE_PO&quot;, session)))}" >
            <hyperlink target="ApproveOrder" description="Approve">
                <parameter param-name="orderId"/>
                <parameter param-name="statusId" value="ORDER_APPROVED" />
                <parameter param-name="setItemStatus" value="Y" />
                 <parameter param-name="roleTypeId"  />
            </hyperlink>
        </field> 
        <field name="ApproveOrder" widget-style="buttontext" use-when="statusId.equals(&quot;ORDER_APPROVED&quot;)" ><display description="Order Approved" /></field>
        <field name="ApproveOrder" widget-style="buttontext" use-when="statusId.equals(&quot;ORDER_COMPLETED&quot;)" ><display description="Order Completed" /></field>
        <field name="ApproveOrder" widget-style="buttontext" use-when="statusId.equals(&quot;ORDER_CANCELLED&quot;)" ><display description="Order Cancelled" /></field>
        <!-- <field name="SuspendedOrder" use-when="statusId.equals(&quot;ORDER_SUSPENDED&quot;)" ><display description="Order Suspended" /></field> -->
        <field name="cancelOrder" widget-style="buttontext" use-when="statusId.equals(&quot;ORDER_CREATED&quot;) &amp;&amp;${groovy:((security.hasEntityPermission(&quot;DEPOTSALES&quot;, &quot;_CANCEL_PO&quot;, session)))}" >
            <hyperlink target="CancelOrder" description="Cancel Order" confirmation-message="Are you sure to Cancel Order..?">
                 <parameter param-name="orderId"/>
                <parameter param-name="statusId" value="ORDER_CANCELLED" />
                <parameter param-name="setItemStatus" value="Y" />
                <parameter param-name="roleTypeId"/>
            </hyperlink>
        </field> 
        <!-- <field use-when="(flag == &quot;N&quot;)&amp;&amp;((&quot;${statusId}&quot;!=&quot;ORDER_CANCELLED&quot;)&amp;&amp;(&quot;${statusId}&quot;!=&quot;ORDER_COMPLETED&quot;)&amp;&amp;(&quot;${statusId}&quot;!=&quot;ORDER_CREATED&quot;))"  name="raiseGRN" title="Raise GRN" widget-style="buttontext" > -->
       <!--  <field use-when="(&quot;${newSize}&quot;!=&quot;${size}&quot;)&amp;&amp;((&quot;${statusId}&quot;!=&quot;ORDER_CANCELLED&quot;)&amp;&amp;(&quot;${statusId}&quot;!=&quot;ORDER_COMPLETED&quot;)&amp;&amp;(&quot;${statusId}&quot;!=&quot;ORDER_CREATED&quot;)&amp;&amp;(&quot;${statusId}&quot;!=&quot;ORDER_SUSPENDED&quot;)) &amp;&amp;${groovy:((security.hasEntityPermission(&quot;DEPOTSALES&quot;, &quot;_RAISE_GRN&quot;, session)))}"  name="raiseGRN" title="Raise GRN" widget-style="buttontext" >	 <hyperlink target="raiseGRN" description="Raise GRN">
        	 	<parameter param-name="orderId"/>
        	 	<parameter param-name="vehicleId"/>
            </hyperlink>
         </field> -->
    </form>
     <form name="FindInvoices" type="single" target="DepotPurchaseInvoice" title="Find and list invoices"
        header-row-style="header-row" default-table-style="basic-table">
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="hideSearch"><hidden value="Y"/></field>
       <!--  <field name="prefPaymentMethodTypeId" title="Voucher Type">
			<drop-down allow-empty="true">
			<option key="CASH" description="Cash Voucher" ></option>
			<option key="BANK" description="Bank Voucher" ></option>
			</drop-down>
		</field> -->
        <field name="invoiceId"><text-find ignore-case="true"/></field>
        <field name="facilityId" title="Facility Id"><text-find ignore-case="true"/></field>
        <field name="description"><text-find ignore-case="true"/></field>
        <field name="invoiceTypeId"><display/></field>
        <field name="subTabButtonValue"><hidden/></field>
        <field name="actionSubTabButtonValue"><hidden/></field>
        <!-- <field position="1" name="invoiceTypeId">
            <drop-down allow-empty="true">
                <entity-options description="${description}" entity-name="InvoiceType"/>
            </drop-down>
        </field> -->
        <field name="statusId" title="${uiLabelMap.CommonStatus}" position="2">
            <drop-down allow-empty="true">
                <entity-options description="${description}" entity-name="StatusItem">
                    <entity-constraint name="statusTypeId" operator="equals" value="INVOICE_STATUS"/>
                </entity-options>
            </drop-down>
        </field>
        <field position="1" name="partyIdFrom"><lookup target-form-name="LookupPartyName"/></field>
        <field position="2" name="partyIdTo" parameter-name="partyId"><lookup target-form-name="LookupPartyName"/></field>       
        <!-- <field name="billingAccountId"><lookup target-form-name="LookupBillingAccount"/></field> -->
        <field name="invoiceDate"><date-find type="timestamp"/></field>
        <field name="dueDate"><hidden/></field>
        <field name="searchButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
     <form name="FindApInvoices" type="single" target="DepotPurchaseInvoice" extends="FindInvoices" extends-resource="component://depotsales/widget/DepotSalesForms.xml">
		<field name="parentTypeId"><hidden value="PURCHASE_INVOICE"/></field>
		<!-- <field name="invoiceTypeId" position="2">
			<drop-down allow-empty="true">
				<entity-options entity-name="InvoiceType" description="${description}">
					<entity-constraint name="parentTypeId" value="PURCHASE_INVOICE"/>
				</entity-options>
			</drop-down>
		</field> -->
		<field name="statusId" title="${uiLabelMap.CommonStatus}"
			position="2">
			<drop-down allow-empty="true">
				<entity-options description="${description}"
					entity-name="StatusItem">
					<entity-constraint name="statusTypeId" operator="equals"
						value="INVOICE_STATUS" />
					<entity-constraint name="statusId" operator="not-equals"
						value="INVOICE_SENT" />
				</entity-options>
			</drop-down>
		</field>
		<field name="dueDate"><date-find type="timestamp"/></field>
			<field name="billingAccountId">
			<hidden />
		</field>
		<field name="billingAccountId"><hidden/></field>
	</form>
	 <!--  <form name="FindPhysicalInventoryDepot" type="single" target="FindFacilityPhysicalInventoryDepot" title=""
        header-row-style="header-row" default-table-style="basic-table">
        <field name="facilityId"><hidden/></field>
        <field name="productId" title="${uiLabelMap.ProductProductId}">
            <text/>
        </field>
         <field name="effectiveDate" title="Effective Date"><date-time/></field>
        <field name="internalName" title="${uiLabelMap.ProductInternalName}">
            <text/>
        </field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit">
            <submit/>
        </field>
    </form> -->
     <form name="FindPhysicalInventoryDepot" title="" type="single" target="FindFacilityPhysicalInventoryDepot" header-row-style="header-row" default-table-style="basic-table">
        
        <field name="shipmentTypeId"><hidden value="MATERIAL_SHIPMENT"/></field>
        <field name="estimatedShipDate" title="GRN Shipment Date"><date-find default-option-from="sameDay"  /></field>
        <field name="primaryOrderId" title="PO no"><text-find/></field>
        <field name="shipmentId" title="GRN Shipment Id"><text-find/></field>
        <field name="partyId" title="Party"><lookup target-form-name="LookupPartyName"/></field>
        <field name="productId" title="Product"><lookup target-form-name="LookupProduct" size="15" /></field>
        <field name="facilityId" > <hidden value="${parameters.facilityId}"/></field>
    <!--     <field name="vehicleId" title="Vehicle No"><text-find/></field> -->
           <field name="statusId"><hidden value="GENERATED"/></field>
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    
    <form name="ListPhysicalInventoryDepot" type="multi" list-name="physicalInventory" target="createPhysicalInventoryVariances?facilityId=${parameters.facilityId}&amp;productId=${parameters.productId}&amp;internalName=${parameters.internalName}" use-row-submit="true"
        odd-row-style="alternate-row" default-table-style="basic-table hover-bar" separate-columns="true">
       
        <field name="shipmentId" title="Shipment Id"><display/></field>
        <field name="fromPartyId" title="From Party"><display/></field>
        <field name="estimatedShipDate" title="Recvd.Date"><display/></field>
        
        <field name="inventoryItemId" title="Inventory Id" widget-style="buttontext"><display></display>
            <!-- <hyperlink description="${inventoryItemId}" target="EditInventoryItem">
                <parameter param-name="inventoryItemId"/>
            </hyperlink> -->
        </field>
      <!--   <field name="productId" widget-style="buttontext">
            <hyperlink description="${productId}" target="/catalog/control/EditProductInventoryItems" target-type="inter-app">
                <parameter param-name="productId"/>
            </hyperlink>
        </field> -->
        <field name="productId" widget-style="buttontext" title="Product Name"><display-entity entity-name="Product" description="${description}[${${productId}}]"></display-entity>
        </field>
        <!--  <field name="internalName"><display/></field> -->
        <!--   <field name="availableToPromiseTotal" title="${uiLabelMap.ProductItemATP}"><display/></field>
        <field name="quantityOnHandTotal" title="${uiLabelMap.ProductItemQOH}"><display/></field> -->
        <!--  <field name="productATP" title="${uiLabelMap.ProductProductATP}"><display/></field>
        <field name="productQOH" title="${uiLabelMap.ProductProductQOH}"><display/></field> -->
        <field name="quantityOnHandTotal" title="Stock Avl"><display/></field>
        <field name="isVarianceForDamage"><hidden value="Y"/><!--it is to negate the QOH --></field>
        <field name="varianceReasonId">
            <drop-down allow-empty="false">
                <entity-options entity-name="VarianceReason" description="${description}"/>
            </drop-down>
        </field>
<!--    <field name="availableToPromiseVar" title="${uiLabelMap.ProductProductATPVar}" event="onchange" action="document.ListPhysicalInventoryDepot._rowSubmit_o_${itemIndex}.checked = true"><text size="6"/></field> -->
        <field name="quantityOnHandVar" title="Variance" event="onchange" action="document.ListPhysicalInventoryDepot._rowSubmit_o_${itemIndex}.checked = true"><text size="6"/></field>
        <field name="_rowSubmit" title="${uiLabelMap.CommonSelect}"><check/></field>
        <field name="submitButton" title="${uiLabelMap.CommonSubmit}" widget-style="smallSubmit">
            <submit/>
        </field>
    </form>
     <form name="FindDepotPayments" type="single" target="FinddepotPayments" extends="FindPayments" extends-resource="component://accounting/widget/PaymentForms.xml">
        <field name="parentTypeId"><hidden value="DISBURSEMENT"/></field>
        <field name="paymentTypeId" position="1">
            <drop-down allow-empty="true">
                <entity-options entity-name="PaymentType" description="${description}">
                    <entity-constraint name="parentTypeId" value="DISBURSEMENT"/>
                </entity-options>
            </drop-down>
        </field>
    </form>
    
     <form name="FindSalesReturns" type="single"  target="FindSalesReturns" title=""
        header-row-style="header-row" default-table-style="basic-table">
       <!--  <field name="returnHeaderTypeId">
            <drop-down allow-empty="true">
                <entity-options entity-name="ReturnHeaderType" description="${description}"/>
            </drop-down>
        </field> -->
        <field name="returnId" title="${uiLabelMap.OrderReturnId}"><text-find/></field>
        <field name="fromPartyId" title="${uiLabelMap.OrderReturnFromParty}">
            <lookup target-form-name="LookupPartyName"/>
        </field>
        <!-- <field name="billingAccountId" title="${uiLabelMap.AccountingBillingAccount}">
            <text-find/>
        </field> -->
        <field name="statusId" title="${uiLabelMap.CommonStatus}">
            <drop-down allow-empty="true">
                <entity-options entity-name="StatusItem" description="${description}">
                    <entity-constraint name="statusTypeId" operator="equals" value="ORDER_RETURN_STTS"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="entryDate" title="${uiLabelMap.OrderEntryDate}">
            <date-find/>
        </field>
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit">
            <submit button-type="button"/>
        </field>
    </form>
    
    <form name="ListSalesReturns" type="list"  target="findreturn" title="" list-name="listIt"
        odd-row-style="alternate-row" default-table-style="basic-table hover-bar" paginate-target="findreturn">
        <actions>
            <service service-name="performFind"  result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="requestParameters"/>
                <field-map field-name="entityName" value="ReturnHeader"/>
                <field-map field-name="orderBy" value="entryDate DESC"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
            </service>
        </actions>
        <!-- <row-actions>
        	<entity-one entity-name="Shipment">
        		<field-map field-name="shipmentId" from-field="shipmentId"/>
        		<select-field field-name="routeId"/>
        		<select-field field-name="tripNum"/>
        	</entity-one>
        	<set field="routeId" from-field="routeId"/>
        	<set field="tripId" from-field="tripNum"/>
        </row-actions> -->
        <field name="returnId" title="Return Id"><display/></field>
        <field name="fromPartyId" title="${uiLabelMap.OrderReturnFromParty}">
            <display-entity entity-name="PartyNameView" key-field-name="partyId" description="${groupName} ${firstName} ${lastName}">
                <sub-hyperlink link-style="buttontext" target-type="inter-app" description="${fromPartyId}" target="/partymgr/control/viewprofile">
                    <parameter param-name="partyId" from-field="fromPartyId"/>
                </sub-hyperlink>
            </display-entity>
        </field>
        <field name="statusId" title="${uiLabelMap.CommonStatus}">
            <display-entity entity-name="StatusItem" key-field-name="statusId" description="${description}"/>
        </field>
        
        <!-- <field name="shipmentId" title="Ship Date">
        	<display-entity entity-name="Shipment" key-field-name="shipmentId" description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(estimatedShipDate, &quot;dd MMMMM, yyyy&quot;);}"></display-entity>
        </field>
        <field name="routeId" title="Route">
        	<display-entity entity-name="Facility" key-field-name="facilityId" description="${facilityName}[${facilityId}]"></display-entity>
        </field>
        <field name="tripId" title="Trip">
        	<display description="${tripId}"></display>
        </field> -->
        <field name="entryDate" title="${uiLabelMap.OrderEntryDate}">
            <display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(entryDate, &quot;dd/MM/yyyy HH:mm:ss&quot;);}"/>
        </field>
        <field name="cancelReturn" widget-style="buttontext" use-when="!(&quot;${statusId}&quot;==&quot;RETURN_CANCELLED&quot;)" title="${uiLabelMap.CommonCancel}" >
            <hyperlink target-type="plain" target="cancelReturn" description="${uiLabelMap.CommonCancel}" link-type="hidden-form">
            	<parameter param-name="returnId"/>
            </hyperlink>
        </field>
    </form>
    
    
      <form name="FindSupplierPurchaseShipment" title="" type="single" target="${targetRequest}" header-row-style="header-row" default-table-style="basic-table">
               
               <field title="shipment Date" name="estimatedShipDate"><date-find/></field>
               <field name="shipmentId"><text-find/></field>
               <field name="roleTypeId"><hidden value="BILL_TO_CUSTOMER"/></field>
               <field name="partyIdTo" parameter-name="partyId"><lookup target-form-name="LookupPartyName"/></field> 
               <field name="shipmentTypeId"><hidden value="${shipmentTypeId}"/></field>
               <field name="shipStatusId"><hidden value="GENERATED"/></field>
               <field name="vehicleId" title="Vehicle Number"><text-find/></field>
               <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
           </form>
           
            <form name="listSupplierPurchaseShipmentsDepot" type="list" list-name="listIt" paginate-target="FindDepotSalesShipment"
               odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
               <actions>
                   <service service-name="performFind" result-map="result" result-map-list="listIt">
                       <field-map field-name="inputFields" from-field="parameters"/>
                       <field-map field-name="entityName" value="OrderHeaderAndRolesAndShipment"/>
                       <field-map field-name="orderBy" from-field="parameters.sortField" value="-estimatedShipDate"/>
                       <field-map field-name="viewIndex" from-field="viewIndex"/>
                       <field-map field-name="viewSize" from-field="viewSize"/>
                   </service>
               </actions>
               <row-actions>
               <entity-condition entity-name="OrderItemBillingAndInvoiceAndInvoiceItem" list="invoiceIdList">
               <condition-expr field-name="orderId" operator="equals" from-field="orderId"/>
               </entity-condition>
               <entity-condition entity-name="Invoice" list="invoiceDetails">
               <condition-expr field-name="invoiceId" operator="equals" value="${invoiceIdList[0].invoiceId}"/>
               </entity-condition>
               </row-actions>
               <field name="shipmentId" ><display/></field>
                <field name="partyId"><display  description= "${groovy:org.ofbiz.party.party.PartyHelper.getPartyName(delegator, invoiceDetails[0].partyId, false);}[${invoiceDetails[0].partyId}]"/></field>
               <field name="estimatedShipDate" title="Ship Date"><display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(estimatedShipDate, &quot;dd/MM/yyyy&quot;);}"/></field>
               <field name="vehicleId" title="Vehicle Number"><display/></field>
               <field name="GatePass" widget-style="buttontext" >
                   <hyperlink target="nonRouteGatePassDepot.pdf" description="GatePass" target-window="_blank">
                      	  <parameter param-name="shipmentId" />
                      	  <parameter param-name="screenFlag" /> 
                   </hyperlink>
               </field> 
               <field name="buyerInvoice" widget-style="buttontext" id-name = "invoiceSlips">
                   <hyperlink target="buyerInvoiceDepot.pdf" description="Invoice Slips" target-window="_blank"> 	
                      	  <parameter param-name="shipmentId" /> 
                   </hyperlink>
               </field>
             	<field name="taxInvoice" widget-style="buttontext" id-name = "taxInvoice">
                   <hyperlink target="taxInvoiceDepot.pdf" description="Tax Invoice" target-window="_blank"> 	
                      	  <parameter param-name="shipmentId" /> 
                   </hyperlink>
               </field>
               <field use-when="${groovy:((security.hasEntityPermission(&quot;FGSSALE_SHIP&quot;, &quot;_CANCEL&quot;, session)))}" name="cancelShipment" widget-style="buttontext">
                   <hyperlink target="cancelShipmentDepot" description="Cancel Shipment">
       	            <parameter param-name="shipmentId"/>
                   </hyperlink>
               </field> 
    </form> 
    
          
          <form name="EditProcProducer" odd-row-style="alternate-row"  header-row-style="header-row-2" type="single" list-name ="partyDetailsMapsList" default-table-style="basic-table "   
          	target="updateProcProducer">  
          
           <field name="shedName" title="Party Id"> <display description="${partyDetailsMapsList[0].partyId}"></display></field>
         <!--   <field name="unitName" title="Unit"> <display description="${unitDetails.facilityName}[${unitDetails.facilityCode}]"></display ></field>
           <field name="facilityIdStr" title="SocietyName"><display-entity entity-name="Facility" description="${facilityName}[${facilityCode}]" key-field-name="facilityId"></display-entity></field>	-->
           <field name="groupName" title="Weaver Name"><text size="35" default-value="${partyDetailsMap.groupName}"></text></field>
           <field name="idValueStr" title="Weaver Code" parameter-name="idValue"><text size="25" maxlength="4" default-value="${partyDetailsMap.idValue}"></text></field>
           <field name="partyId"><hidden value="${partyDetailsMapsList[0].partyId}"/></field>
           <field name="update"><submit/></field>
           
          </form>
        <form name="EditProducerAccountDetails" type="single" separate-columns="true"  target="updateProducerFinAccount" >
       		<field name="partyId"><hidden/></field>
       		<field name="finAccountId"><hidden/></field>
       		<field name="finAccountCode" title="Account No"  ><text size="20" maxlength="20"></text></field>
               <field name="finAccountName" title="Account Name" ><text size="20"></text></field>
               <field name="finAccountBranch" title="Account Branch" ><text size="20" maxlength="20"></text></field> 
       		<field name="ifscCode" title="Ifsc Code"><text size="10"></text></field>
       		<!-- <field name="disbursmentBank" title="Disbursment Bank">
       		<drop-down allow-empty="false" no-current-selected-key="${disbursment}" >
       			<entity-options description="${finAccountName}" key-field-name="finAccountId" entity-name="FinAccount">
       				 <entity-constraint name="ownerPartyId" operator="equals" value="Company"/>
       				<entity-order-by field-name="finAccountName"/> 
       				
       			</entity-options>
       			<list-options key-name="finAccoutId" list-name="finAccountList" description="${finAccountName}"/>
       		</drop-down>
       		</field> -->
       		<!-- <field name="date" title="Date"><date-time type="date" ></date-time></field> -->
       		 <field name="submitButton" title="${uiLabelMap.CommonUpdate}"><submit button-type="button"/></field>
      	</form>
      	
      	  <form name="ProducerIdentification" type="list" odd-row-style="alternate-row" header-row-style="header-row" target="updatePartyIdentification"
          	  default-table-style="basic-table hover-bar" separate-columns="true" list-name="partyIdentificationList">
          	  <actions>
      			<entity-condition entity-name="PartyIdentification" list="partyIdentificationList">
      			   <condition-list combine="and">
      			       <condition-expr field-name="partyId" from-field="parameters.partyId" operator="equals"/>
           			   <condition-expr field-name="partyIdentificationTypeId" value="PRODUCER_CODE" operator="not-equals"/>
      			   </condition-list>
          		</entity-condition>
      		</actions>
      		<field name="partyIdentificationTypeId" >
      		<drop-down allow-empty="true">             
      				<entity-options entity-name="PartyIdentificationType" key-field-name="partyIdentificationTypeId" description="${description}" >
      				          <entity-order-by field-name="partyIdentificationTypeId"/>
      				</entity-options>
      			</drop-down>  
      		</field>
      		<field name="partyIdentificationTypeId"><display-entity entity-name="PartyIdentificationType"  description="${description}"></display-entity></field>
      		<field name="partyId"><hidden /></field>
      		<field name="idValue" title="Number"><text size="22"></text></field>
      		<!-- <field name="issueDate" title="Issue Date"><date-time type="date"></date-time></field>
      		<field name="expiryDate" title="Expiry Date"><date-time type="date"></date-time></field> -->
      		<field name="submitButton" title="Update" separate-column="true">
                  <submit button-type="button"/></field>
              <field name="deleteLink" title="Delete" widget-style="buttontext">
                 <hyperlink also-hidden="false" description="${uiLabelMap.CommonDelete}" target="deletePartyIdentification">
                      <parameter param-name="partyId"/>
                      <parameter param-name="partyIdentificationTypeId"/>
                 </hyperlink>
              </field>
      	</form>
      	
      	
      	  <form name="createProducerIdentification" type="single" odd-row-style="alternate-row" header-row-style="header-row" target="createProducerPartyIdentification"
          	  default-table-style="basic-table hover-bar" separate-columns="true" >
          	  <actions>
      		</actions>
      		<field name="partyIdentificationTypeId" >
      		<drop-down allow-empty="false">             
      				 <entity-options entity-name="PartyIdentificationType" key-field-name="partyIdentificationTypeId" description="${description}" >
      				          <entity-order-by field-name="partyIdentificationTypeId"/>
      				</entity-options> 
      				<list-options key-name="partyIdentificationTypeId" list-name="partyIdentificationTypes" description="${description}"/>
      			</drop-down>  
      		</field>
      		<field name="partyId"><hidden /></field>
      		<field name="idValue" title="Number"><text size="22"></text></field>
      		<!-- <field name="issueDate" title="Issue Date"><date-time type="date" ></date-time></field>
      		<field name="expiryDate" title="Expiry Date"><date-time type="date"></date-time></field> -->
      		<field name="submitButton" title="Create" separate-column="true">
                  <submit button-type="button"/></field>
      	</form>
      	
      	
      <form name="CattleInformation" odd-row-style="alternate-row" header-row-style="header-row-2" type="list" default-table-style="basic-table " 
       		 list-name="LoomDetails" >
       		<field name="partyId"><hidden/></field>     
         	<field name="loomTypeId" title="Weaver Type"><display></display></field>
         	<field name="loomTypeId" title="Weaver Type"><display-entity entity-name="ProductCategory" key-field-name="productCategoryId" description="${description}"/></field>
         	<field name="quantity" title="Number Of Weavers"><display></display></field>
         	<field name="quotaPerLoom" title="quota Per Loom"><display></display></field>
        </form>
        
        <form name="CreateCattleInformation" odd-row-style="alternate-row" header-row-style="header-row-2" type="single" 
     	     			list-name="LoomDetails" default-table-style="basic-table" target="EditProcProducer" >    
     	       	<field name="partyId"><hidden/></field>
     	       	<field name="loomTypeId" title="Loom Type">
     	       		<drop-down allow-empty="false">
     	       			<entity-options description="${description}" entity-name="LoomType"></entity-options>
     	       		</drop-down>
     	       	</field>
     	       	<field name="numberOfCattle" title="Number Of Looms"><text size="10" maxlength="3"></text> </field>
     	       	<field name="submit" title="update"><submit/></field>
     	      </form>
     	      <form name="ProducerProfilePicture"  type="upload" target="createWeaverContent" 	header-row-style="header-row">
				<field name="imageWatermark" use-when="imageUrl != null" title="${uiLabelMap.CommonImage}" widget-area-style="img-src-de" ><image value="${imageUrl}" width="150"/></field>
	      
	            <field name="partyId" map-name="parameters"><hidden/></field>  
		        <field name="partyContentTypeId"><hidden value="INTERNAL"/></field>
		        <field name="dataResourceTypeId"><hidden value="IMAGE_OBJECT"/></field>
		        
		        <field name="contentTypeId"><hidden value="PROFILE_PIC"/></field>
		        <field name="statusId"><hidden value="CTNT_AVAILABLE"/></field>
		        <field name="mimeTypeId"><hidden value="image/jpeg"/></field>
		        
		        <field name="uploadedFile" title="${uiLabelMap.CommonUpload}"><file/></field>
		        <field name="dataCategoryId"><hidden value="PROFILE_PIC"/></field>
		        <field name="isPublic"><hidden value="N"/></field>
		             
		        <field name="createButton" title="Upload Pic"><submit button-type="button"/></field>
	      
	      </form> 
	    
       <form name="FindProcurementProducer" odd-row-style="alternate-row" target="single"
   		 header-row-style="header-row" type="single"  default-table-style="basic-table hover-bar" separate-columns="true" >	
           <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
           <field name="shedId" title="Shed Code">
           	<drop-down>
           		<entity-options description="${facilityName}" entity-name="Facility" key-field-name="facilityId">
           			<entity-constraint name="facilityTypeId" operator="equals" value="SHED"/>
           		</entity-options>
           	</drop-down>
           </field>
           <field name="partyIdentificationTypeId" ><hidden value="PRODUCER_CODE"/></field>
           <field name="unitCode" title="Unit Code"><text  size="15"></text></field>
           <field name="facilityCode" title="Society Code"><text  size="15"></text></field>
           <field name="producerCode" title="Producer Code"><text  size="15"></text></field>
           <field name="producerName" title="Producer Name"><text  size="15"></text></field>
           <field name="submit" title="Find"><submit/></field>
           
       </form>
  <!--  <form name="ListDepotSalesProducer" type="list" list-name="producerDetails" paginate-target="FindProcProducer"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        
         <actions>
        	<service service-name="performFind" result-map="result" result-map-list="producersList">
                <field-map field-name="inputFields" from-field="parameters"/>
                <field-map field-name="entityName" value="FacilityPartyPartyGroupAndIdentification"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
            </service>
        </actions> 
        <row-actions>
        	<set field="unitDetails" value="${groovy:import org.ofbiz.base.util.*; return (in.vasista.vbiz.procurement.ProcurementNetworkServices.getCenterDtails(dispatcher.getDispatchContext() ,UtilMisc.toMap(&quot;centerId&quot;,facilityId))).get(&quot;unitFacility&quot;);}" type="Object"/>
			<set  field="unitName" value="${groovy: unitDetails.get(&quot;facilityName&quot;)}[${groovy: unitDetails.get(&quot;facilityCode&quot;)}]"/>
			<set field="shedDetails" value="${groovy:import org.ofbiz.base.util.*; return (in.vasista.vbiz.procurement.ProcurementNetworkServices.getCenterDtails(dispatcher.getDispatchContext() ,UtilMisc.toMap(&quot;centerId&quot;,facilityId))).get(&quot;shedFacility&quot;);}" type="Object"/>
			<set  field="shedName" value="${groovy: shedDetails.get(&quot;facilityName&quot;)}"/>
        </row-actions>
        <field name="idValue" title="Producer">
           <hyperlink target="EditProcProducer?partyId=${partyId}" description="${groupName}[${idValue}]">
        </hyperlink></field>
        <field name="shedName" title="Shed"><display></display></field>
        <field name="unitName" title="Unit"><display></display></field>
        <field name="facilityId" title="Society"><display-entity entity-name="Facility" description="${facilityName}[${facilityCode}]" key-field-name="facilityId"></display-entity> </field>
    </form> -->
       
       <form name="FindDepotSalesProducer" odd-row-style="alternate-row" target="FindProcProducer"
      		 header-row-style="header-row" type="single"  default-table-style="basic-table hover-bar" separate-columns="true" >	
              <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
              
              <field name="partyId" title="Weaver Id"><text  size="15"></text></field>
              <field name="groupName" title="Weaver Name"><text  size="15"></text></field>
              <field name="roleTypeId" title="Role Type Id"><hidden value="EMPANELLED_CUSTOMER"/></field>
              <field name="submit" title="Find"><submit/></field>
              
          </form>
       <form name="ListDepotSalesProducer" type="list" list-name="listIt" odd-row-style="alternate-row" 
				default-entity-name="PartyRoleDetailAndPartyDetail" default-table-style="basic-table hover-bar" >
			<actions> 
			<service service-name="performFind" result-map="result" result-map-list="listIt">
			<field-map field-name="inputFields" from-field="parameters"/>
			<field-map field-name="entityName" value="PartyRoleDetailAndPartyDetail"/>
			<field-map field-name="viewIndex" from-field="viewIndex"/>
			<field-map field-name="viewSize" from-field="viewSize"/>
			</service> 
        </actions>
    	
    	 <field name="partyId" title="Weaver Id" widget-style="buttontext" id-name = "partyId">
             <hyperlink target="EditProcProducer" description="${partyId}" target-window="_blank"> 	
                	  <parameter param-name="partyId" /> 
             </hyperlink>
         </field>
        <field name="partyName" title="Weaver Name"><display description="${groovy:org.ofbiz.party.party.PartyHelper.getPartyName(delegator, partyId, false);}"/></field>  
    	<field name="description" title="Role Type"><display/></field>
    </form>
      <form name="FindOrderPaymentSeach" title="" type="single" target="orderPayment" header-row-style="header-row" default-table-style="basic-table">
        <field name="salesChannelEnumId" ><hidden value="DEPOT_CHANNEL"/></field>  
        <!-- <field name="orderTypeId">
           <drop-down no-current-selected-key="SALES_ORDER">
              <entity-options description="${description}" entity-name="OrderType" key-field-name="orderTypeId">
                 <entity-constraint name="parentTypeId" operator="like" value="%SALES%"/>
              </entity-options>
           </drop-down>
        </field> -->
        <field name="orderId" title="IndentId"><text/></field>
        <field title="Delivery Date" name="estimatedDeliveryDate"><date-time/></field>
        
        <!-- <field name="sequenceId"><text-find/></field> -->
      <!--  <field name="productId"><lookup target-form-name="LookupProduct"/></field> -->
        <!-- <field name="orderTypeId"><hidden value="PURCHASE_ORDER"/></field> -->
        <field name="statusId">
	        	<drop-down allow-empty="true">
	        		<option key="ORDER_CREATED" description="Created"/>
	        		<option key="ORDER_APPROVED" description="Approved"/>
	        		<option key="ORDER_CANCELLED" description="Cancelled"/>
	        		<option key="ORDER_SUSPENDED" description="Suspended"/>
	        	</drop-down>
        </field>
         <field name="findPoFlag"><hidden value="Y"/></field>  
     	<field name="partyId" title="Customer"><lookup target-form-name="LookupPartyName"/></field> 
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    <form name="FindShipmentReceiptDepotTrans" title="" type="single" target="${targetRequest}" header-row-style="header-row" default-table-style="basic-table">
        <field name="datetimeReceived"><date-find/></field>
        <field name="productId"><text-find/></field>
        <field name="receiptId" title="GRN Item No"><text-find/></field>
        <field name="statusId">
        	<drop-down allow-empty="true"   >
        		<entity-options description="${description}" entity-name="StatusItem" >
        			<entity-constraint name="statusTypeId" operator="equals" value="RECEIPT_STATUS"/>
        		</entity-options>
        	</drop-down>
        </field>
        <field name="shipmentId" title="GRN Shipment Id"><text-find/></field>
        <field name="orderId" title="PO Order"><text-find/></field>
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    
   <form name="listMaterialShipmentReceiptDepotTrans" type="list" list-name="listIt" paginate-target="${targetRequest}"
        odd-row-style="alternate-row" header-row-style="header-row"  target="sendReceiptQtyForQC" default-table-style="basic-table hover-bar">
      
        <row-actions>
        	<entity-one value-field="product" entity-name="Product">
				<field-map field-name="productId" from-field="productId"/>
			</entity-one>
			<entity-one value-field="uom" entity-name="Uom">
				<field-map field-name="uomId" from-field="product.quantityUomId"/>
			</entity-one>
			<set field="dec" from-field="uom.description"/>
        </row-actions>
      	<field name="receiptId" title="GRN Item No">
      		<display/>
      	</field>
      	<field name="productId" title="Code- Name [UOM]">
      		<display-entity entity-name="Product" description="${productId} ${description}[${dec}]"/>
      	</field>
        <field name="datetimeReceived" title="Received Date"><display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(datetimeReceived, &quot;dd-MMM-yyyy&quot;);}"/></field>
        <field name="shipmentId" title="GRN ShipmentId"><display/></field>
       <field name="orderId" title="PO No"><display/></field> 
        <field name="statusId" title="Status">
        	<display-entity entity-name="StatusItem" description="${description}"/>
        </field>
      	<field name="quantityAccepted" title="Quantity"><display/></field>
      	<field name="quantityRejected" title="Qty Rejected"><display/></field>
      	<field name="receivedByUserLoginId" title="Entry by"><display/></field>	
      	
        <field name="statusIdTo"  > <hidden  value="SR_QUALITYCHECK" /> </field>
         
      	<!-- <field name="SendtoQC" use-when="statusId.equals(&quot;SR_RECEIVED&quot;)"  title="Send to QC" widget-style="buttontext">
             <hyperlink  target-type="plain" description="Send to QC"  target="javascript:showQCApprovalQTip('${receiptId}');"></hyperlink>
        </field>  -->
    </form>
    
    <form name="FindDepotTransMaterialShipment" title="" type="single" target="${targetRequest}" header-row-style="header-row" default-table-style="basic-table">
        
        <field name="shipmentTypeId"><hidden value="MATERIAL_SHIPMENT"/></field>
        <field name="estimatedShipDate" title="GRN Shipment Date"><date-find default-option-from="sameDay"  /></field>
        <field name="primaryOrderId" title="PO no"><text-find/></field>
        <field name="shipmentId" title="GRN Shipment Id"><text-find/></field>
        <field name="partyId" title="Party"><lookup target-form-name="LookupPartyName"/></field>
        <field name="vehicleId" title="Vehicle No"><text-find/></field>
        <field name="statusId" title="Status"  >
        <drop-down no-current-selected-key="GENERATED" allow-empty="true" > 
        <option key="SHIPMENT_CANCELLED" description="Cancelled" > </option>
        <option key="GENERATED" description="Generated"  ></option>
        </drop-down>
        </field>
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    
    <form name="listDepotTransMaterialShipments" type="list" list-name="listIt" paginate-target="${targetRequest}"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
        </actions>
        <row-actions>
        	<entity-condition entity-name="Invoice" list="invoices">
        		<condition-list combine="and">
        			<condition-expr field-name="shipmentId" from-field="shipmentId"/>
        			<condition-expr field-name="statusId" operator="not-equals" value="INVOICE_CANCELLED"/>
        		</condition-list>
        	</entity-condition>
        	<set field="invSize" value="${groovy: invoices.size();}"/>
        	<entity-condition entity-name="ShipmentReceipt" list="shipmentReceiptList">
        		<condition-list combine="and">
        			<condition-expr field-name="shipmentId" from-field="shipmentId" />
        			<condition-expr field-name="statusId" operator="equals" value="SR_RECEIVED"/>
        		</condition-list>
        	</entity-condition>
        	<set field="shipmentReceiptSize" value="${groovy: shipmentReceiptList.size();}"/>
        	<entity-condition entity-name="ShipmentReceipt" list="invoiceReceiptList">
        		<condition-list combine="and">
        			<condition-expr field-name="shipmentId" from-field="shipmentId" />
        			<condition-expr field-name="statusId" operator="equals" value="SR_ACCEPTED"/>
        		</condition-list>
        	</entity-condition>
        	<set field="invoiceReceiptSize" value="${groovy: invoiceReceiptList.size();}"/>
        </row-actions>
      	<field name="shipmentId" widget-style="buttontext h3" title="GRN Shipment Id">
      		<hyperlink target="MaterialShipmentOverview" description="${shipmentId}" target-window="_blank" >
                <parameter param-name="shipmentId"/>
            </hyperlink>
      	</field>
        <field name="estimatedShipDate" title="GRN Ship Date"><display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(estimatedShipDate, &quot;dd MMMMM, yyyy&quot;);}"/></field>
        <field name="primaryOrderId" title="PO No" widget-style="buttontext">
        	<hyperlink target="POoverview" description="${primaryOrderId}" target-window="_blank">
      			<parameter param-name="orderId" value="${primaryOrderId}"/>
      		</hyperlink>
        </field>
        <field name="partyId">
        <display-entity entity-name="PartyNameView" key-field-name="partyId" description="${firstName} ${middleName} ${lastName} ${groupName}">
                <sub-hyperlink description="[${partyId}]" target="/partymgr/control/viewprofile" target-type="inter-app">
                    <parameter param-name="partyId" from-field="partyId"/>
                </sub-hyperlink>
            </display-entity>
        </field>
        <field name="vehicleId" title="Vehicle No"><display/></field>
        <field name="statusId" title="Status">
        	<display-entity entity-name="StatusItem" description="${description}"/>
        </field>
      <!--   <field name="linkGrnWithPO" widget-style="buttontext" title="Link GRN With PO" use-when="&quot;${primaryOrderId}&quot;==&quot;&quot; &amp;&amp;(!statusId.equals(&quot;SHIPMENT_CANCELLED&quot;))&amp;&amp; ${groovy:((security.hasEntityPermission(&quot;DEPOTSALES&quot;, &quot;_RAISE_GRN&quot;, session)))}" >
            <hyperlink target-type="plain" target="javascript:showLinkGrnWithPOForm('${shipmentId}','${partyId}');" description="Link GRN With PO">
            </hyperlink>
        </field> --> 
        <field name="cancelGRN" widget-style="buttontext" title="Cancel GRN" use-when="(&quot;${invSize}&quot; == &quot;0&quot;)&amp;&amp;(invoiceReceiptSize.equals(&quot;0&quot;))&amp;&amp;(!statusId.equals(&quot;SHIPMENT_CANCELLED&quot;))&amp;&amp; ${groovy:((security.hasEntityPermission(&quot;DEPOTSALES&quot;, &quot;_RAISE_GRN&quot;, session)))}">
            <hyperlink target="CancelDepotTransGrnShipment" description="Cancel GRN">
                <parameter param-name="shipmentId"/>
            </hyperlink>
        </field>
        <field name="report" widget-style="buttontext"  use-when="(!statusId.equals(&quot;SHIPMENT_CANCELLED&quot;))">
            <hyperlink target="MRRreportDepotSales.pdf" description="Report" target-window="_blank">
             	<parameter param-name="shipmentId" value="${shipmentId}"/>
             	<parameter param-name="orderId" value="${primaryOrderId}"/>
               	<parameter param-name="datetimeReceived" value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(estimatedShipDate, &quot;dd-MMM-yyyy&quot;);}"/>
            </hyperlink>
        </field>
         <field name="SendtoQC" use-when="!shipmentReceiptSize.equals(&quot;0&quot;)"  title="Accept Shipment" widget-style="buttontext">
             <hyperlink  target-type="plain" description="Accept Shipment"  target="javascript:QCApprovalQTip('${shipmentId}');"></hyperlink>
        </field>
        <field name="raiseInvoice" widget-style="buttontext" title="Raise Invoice" use-when="(&quot;${invSize}&quot; == &quot;0&quot;)&amp;&amp;(!invoiceReceiptSize.equals(&quot;0&quot;))&amp;&amp;(!statusId.equals(&quot;SHIPMENT_CANCELLED&quot;))&amp;&amp;${groovy:((security.hasEntityPermission(&quot;DEPOTSALES&quot;, &quot;_RAISE_INVOICE&quot;, session)))}">
            <hyperlink target="DepotTransMaterialInvoiceInit" description="Invoice">
                <parameter param-name="shipmentId"/>
            </hyperlink>
        </field> 
    </form>   
    
    <form name="FindPhysicalInventoryDepotForSale" title="" type="single" target="DepotSalesInventorySales" header-row-style="header-row" default-table-style="basic-table">
        
        <field name="shipmentTypeId"><hidden value="MATERIAL_SHIPMENT"/></field>
        <field name="estimatedShipDate" title="GRN Shipment Date"><date-find default-option-from="sameDay"  /></field>
        <field name="primaryOrderId" title="PO no"><text-find/></field>
        <field name="shipmentId" title="GRN Shipment Id"><text-find/></field>
        <field name="partyId" title="Party"><lookup target-form-name="LookupPartyName"/></field>
        <field name="productId" title="Product"><lookup target-form-name="LookupProduct" size="15" /></field>
        <field name="facilityId" > <hidden value="BRANCH1"/></field>
    <!--     <field name="vehicleId" title="Vehicle No"><text-find/></field> -->
           <field name="statusId"><hidden value="GENERATED"/></field>
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    <form name="ListPhysicalInventoryDepotForSale" type="list" list-name="physicalInventory" use-row-submit="true"
        odd-row-style="alternate-row" default-table-style="basic-table hover-bar" separate-columns="true">
       
        <field name="shipmentId" title="Shipment Id"><display/></field>
        <field name="fromPartyId" title="From Party"><display/></field>
        <field name="estimatedShipDate" title="Recvd.Date"><display/></field>
        <field name="inventoryItemId" > <hidden/></field>
       <!--  <field name="inventoryItemId" title="Inventory Id" widget-style="buttontext"><display></display></field> -->
        <field name="productId" widget-style="buttontext" title="Product Name">
        	<display-entity entity-name="Product" description="${description}[${${productId}}]"></display-entity>
        </field>
        <field name="quantityOnHandTotal" title="Stock Avl"><display/></field>
        <field name="unitCost"><hidden/></field>
        <field name="Sale" title="Sale Indent" widget-style="buttontext">
             <hyperlink  target-type="plain" description="Create Sale Indent"  target="javascript:showInventorySaleQTip('${productId}','${quantityOnHandTotal}','${unitCost}','${inventoryItemId}');"></hyperlink>
        </field>
    </form>
          <form name="ViewFacilityGeoPointSearch" odd-row-style="alternate-row" header-row-style="header-row" type="single" 
    	default-table-style="basic-table hover-bar" separate-columns="true" target="ViewFacilityGeoPoint">
    	<field name="hideSearch"><hidden value="Y" /></field>
		<field name="noConditionFind"><hidden value="N"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="facilityId" title="BO/RO-ID's" position="1"><lookup target-form-name="LookupFacility"/></field>
<!--         <field name="routeId2" title="Addtl. Route Id (Optional)" position="2"><lookup target-form-name="LookupFacility"/></field> -->
      <!--   <field name="categoryTypeEnum" title="${uiLabelMap.ProductFacilityCategoryType}">
            <drop-down allow-empty="true">
                <entity-options entity-name="Enumeration" description="${description}" key-field-name="enumId">
                    <entity-constraint name="enumTypeId" value="BOOTH_CAT_TYPE"/>
                    <entity-order-by field-name="sequenceId"/>
                </entity-options>
            </drop-down>
        </field> --> 
       	<field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit/></field>       
    </form> 
	      
</forms>