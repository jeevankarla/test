<?xml version="1.0" encoding="UTF-8"?>
<forms xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
        xsi:noNamespaceSchemaLocation="http://ofbiz.apache.org/dtds/widget-form.xsd">
        
<form name="FindShipmentDepot" title="" type="single" target="${targetRequest}" header-row-style="header-row" default-table-style="basic-table">
        
        <field title="shipment Date" name="estimatedShipDate"><date-find/></field>
        <field name="shipmentId"><text-find/></field>
        <field name="roleTypeId"><hidden value="BILL_TO_CUSTOMER"/></field>
        <field name="partyIdTo" parameter-name="partyId"><lookup target-form-name="LookupPartyName"/></field> 
        <field name="shipmentTypeId"><hidden value="${shipmentTypeId}"/></field>
        <field name="shipStatusId"><hidden value="GENERATED"/></field>
        <field name="vehicleId" title="Vehicle Number"><text-find/></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
     <form name="FindByprodShipmentDepot" title="" type="single" target="${targetRequest}" header-row-style="header-row" default-table-style="basic-table">
        <field title="shipment Date" name="estimatedShipDate"><date-find/></field>
        <field name="shipmentId"><text-find/></field>
        <field name="primaryOrderId" title="Order Id"><text-find/></field>
        <field name="roleTypeId"><hidden value="BILL_TO_CUSTOMER"/></field>
        <field name="partyIdTo" parameter-name="partyId"><lookup target-form-name="LookupPartyName"/></field> 
        <field name="shipmentTypeId"><hidden value="${shipmentTypeId}"/></field>
        <field name="shipStatusId"><hidden value="GENERATED"/></field>
        <field name="vehicleId" title="Vehicle Number"><text-find/></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
     <form name="listByprodShipmentDepot" type="list" list-name="listIt" paginate-target="FindDepotSupplierPurchseShipment"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
            <service service-name="performFind" result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="parameters"/>
                <field-map field-name="entityName" value="Shipment"/>
                <field-map field-name="orderBy" from-field="parameters.sortField" value="-estimatedShipDate"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
            </service>
        </actions>
        <row-actions>
        	<entity-condition entity-name="InvoiceAndItem" list="invoices">
        		<condition-list combine="and">
        			<condition-expr field-name="shipmentId" from-field="shipmentId"/>
        			<condition-expr field-name="statusId" operator="not-equals" value="INVOICE_CANCELLED"/>
        		</condition-list>
        	</entity-condition>
        	<set field="invSize" value="${groovy: invoices.size();}"/>
        	<set field="invoiceId" value="${invoices[0].invoiceId}"/>
        	<set field="invoiceStatusId" value="${invoices[0].statusId}"/>
        	<entity-one value-field="invoiceAttr" entity-name="InvoiceAttribute">
        	<field-map field-name="invoiceId" value="${invoices[0].invoiceId}"/>
        	<field-map field-name="attrName" value="SALES_TAX_NUMBER"/>
        	</entity-one>
        	<set field="attrValue" from-field="invoiceAttr.attrValue"/>
        </row-actions>
        <field name="shipmentId" ><display/></field>
        <field name="primaryOrderId" title="SO No"><display/></field>
        <field name="statusId" title="${uiLabelMap.CommonStatus}"><display/></field>
        <field name="estimatedShipDate" title="Ship Date"><display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(estimatedShipDate, &quot;dd/MM/yyyy&quot;);}"/></field>
        <field name="vehicleId" title="Vehicle Number"><display/></field>
              <field name="partyId"><display  description= "${groovy:org.ofbiz.party.party.PartyHelper.getPartyName(delegator, invoices[0].partyId, false);}[${invoices[0].partyId}]"/></field>
              <field name="invoiceId"><display></display></field>
              <field name="EditInvoice" use-when="(invoiceId !=null) &amp;&amp;(invoiceStatusId.equals(&quot;INVOICE_IN_PROCESS&quot;))"  widget-style="buttontext" >
            <hyperlink target="EditInvoiceInit" description="EditInvoice" target-window="_blank">
               	  <parameter param-name="invoiceId"/>
               	   <parameter param-name="shipmentId" />
               	   <parameter param-name="vehicleId" />
               	   <parameter param-name="orderId"  value="${primaryOrderId}"/>
               	   <parameter param-name="partyId" value="${invoices[0].partyId}"/>
               	   <parameter param-name="attrValue" /> 
               	  <parameter param-name="screenFlag" /> 
            </hyperlink>
        </field> 
        <field name="EditSalesTax" title="EditSalesTax" widget-style="buttontext"
			use-when="(invoiceId !=null) &amp;&amp;(invoiceStatusId.equals(&quot;INVOICE_IN_PROCESS&quot;))">
			<hyperlink target-type="plain" description="EditSalesTax"
				target="javascript:getSalesTax('${invoiceId}','${attrValue}');">
			</hyperlink>
		</field>
        <field name="GatePass" widget-style="buttontext" use-when="(&quot;${invSize}&quot; != &quot;0&quot;)&amp;&amp;(!statusId.equals(&quot;SHIPMENT_CANCELLED&quot;))">
            <hyperlink target="ByprodGatePass.pdf" description="GatePass" target-window="_blank">
               	  <parameter param-name="shipmentId" />
               	  <parameter param-name="screenFlag" /> 
            </hyperlink>
        </field> 
        <field name="buyerInvoice" widget-style="buttontext" id-name = "invoiceSlips" use-when="(&quot;${invSize}&quot; != &quot;0&quot;)&amp;&amp;(!statusId.equals(&quot;SHIPMENT_CANCELLED&quot;))">
            <hyperlink target="ByprodInvoiceDepot.pdf" description="Invoice Slips" target-window="_blank"> 	
               	  <parameter param-name="shipmentId" /> 
            </hyperlink>
        </field>
      	<field name="taxInvoice" widget-style="buttontext" id-name = "taxInvoice" use-when="(&quot;${invSize}&quot; != &quot;0&quot;)&amp;&amp;(!statusId.equals(&quot;SHIPMENT_CANCELLED&quot;))">
            <hyperlink target="ByprodTaxInvoiceDepot.pdf" description="Tax Invoice" target-window="_blank"> 	
               	  <parameter param-name="shipmentId" /> 
            </hyperlink>
        </field>
        <field use-when="(&quot;${invSize}&quot; == &quot;0&quot;) &amp;&amp; (${groovy:((security.hasEntityPermission(&quot;FGSSALE_SHIP&quot;, &quot;_CANCEL&quot;, session)))})&amp;&amp;(!statusId.equals(&quot;SHIPMENT_CANCELLED&quot;))" name="cancelShipment" widget-style="buttontext">
            <hyperlink target="cancelShipmentDepot" description="Cancel Shipment">
	            <parameter param-name="shipmentId"/>
            </hyperlink>
        </field> 
        <field name="raiseInvoice"  use-when="(&quot;${invSize}&quot; == &quot;0&quot;)&amp;&amp;(!statusId.equals(&quot;SHIPMENT_CANCELLED&quot;))&amp;&amp;${groovy:((security.hasEntityPermission(&quot;DEPOTSALES&quot;, &quot;_RAISE_INVOICE&quot;, session)))}" widget-style="buttontext">
            <hyperlink target="raiseInvoiceForByProdSalesShipment" description="Raise Invoice">
	            <parameter param-name="shipmentId"/>
	            <parameter param-name="eventDate" from-field="estimatedShipDate"/>
            </hyperlink>
        </field>
        <field name="invoiceId" use-when="(&quot;${invSize}&quot; != &quot;0&quot;)&amp;&amp;(!statusId.equals(&quot;SHIPMENT_CANCELLED&quot;))&amp;&amp;${groovy:((security.hasEntityPermission(&quot;DEPOTSALES&quot;, &quot;_RAISE_INVOICE&quot;, session)))}" title="Invoice Id"><display/></field>
        
    </form> 
    
    <form name="FindTankerSalesOrder" title="" type="single" target="processOrdersBranchSales" header-row-style="header-row" default-table-style="basic-table">
        <field name="salesChannelEnumId" ><hidden value="BRANCH_CHANNEL"/></field>  
        <!-- <field name="orderTypeId">
           <drop-down no-current-selected-key="SALES_ORDER">
              <entity-options description="${description}" entity-name="OrderType" key-field-name="orderTypeId">
                 <entity-constraint name="parentTypeId" operator="like" value="%SALES%"/>
              </entity-options>
           </drop-down>
        </field> -->
        <field name="partyIdFrom" title="${uiLabelMap.Branch}">
            <drop-down allow-empty="true">
               <list-options key-name="payToPartyId" list-name="formatList" description="${productStoreName}"/>
            </drop-down>
        </field>
        <field name="partyId" title="${uiLabelMap.Customer}"><lookup target-form-name="LookupBranchCustomers" target-parameter="partyIdFrom"/></field> 
        <field name="orderId" title="${uiLabelMap.IndentId}"><text/></field>
        <field name="tallyRefNO" title="Tally Ref No"><text/></field>
        <field name="orderNo" title="sequenceId"><text-find/></field>
        <field title="Indent From Date" name="estimatedDeliveryDate"><date-time/></field>
        <field title="Indent Thru Date" name="estimatedDeliveryThruDate"><date-time/></field>
        
        <!-- <field name="sequenceId"><text-find/></field> -->
      <!--  <field name="productId"><lookup target-form-name="LookupProduct"/></field> -->
        <!-- <field name="orderTypeId"><hidden value="PURCHASE_ORDER"/></field> -->
        <field name="indentDateSort">
	        	<drop-down allow-empty="false">
	        		<option key="-orderDate" description="Descending"/>
	        		<option key="orderDate" description="Ascending"/>
	        	</drop-down>
        </field>
        <field name="statusId" title="${uiLabelMap.CommonStatus}">
	        	<drop-down allow-empty="true">
	        		<option key="ORDER_CREATED" description="Created"/>
	        		<option key="ORDER_APPROVED" description="Approved"/>
	        		<option key="ORDER_CANCELLED" description="Cancelled"/>
	        		<option key="ORDER_SUSPENDED" description="Suspended"/>
	        	</drop-down>
        </field>
        <field name="findPoFlag"><hidden value="Y"/></field>  
		<field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
 
     <form name="FindIndentorPayment" title="" type="single" target="processIndentPortalBranchSales" header-row-style="header-row" default-table-style="basic-table">
        <field name="salesChannelEnumId" ><hidden value="BRANCH_CHANNEL"/></field>  
        <!-- <field name="orderTypeId">
           <drop-down no-current-selected-key="SALES_ORDER">
              <entity-options description="${description}" entity-name="OrderType" key-field-name="orderTypeId">
                 <entity-constraint name="parentTypeId" operator="like" value="%SALES%"/>
              </entity-options>
           </drop-down>
        </field> -->
        <field name="partyId" title="${uiLabelMap.Customer}"><lookup target-form-name="LookupPartyName"/></field> 
       <field name="branchId" title="${uiLabelMap.Branch}">
              <drop-down allow-empty="true">
                  <list-options key-name="payToPartyId" list-name="formatList" description="${productStoreName}"/>
              </drop-down>
        </field>
        <field name="orderNo" title="sequenceId"><text-find/></field>
        <field name="orderId" title="${uiLabelMap.IndentId}"><text/></field>
        <field title="${uiLabelMap.IndentDate}" name="estimatedDeliveryDate"><date-time/></field>
        
        <!-- <field name="sequenceId"><text-find/></field> -->
      <!--  <field name="productId"><lookup target-form-name="LookupProduct"/></field> -->
        <!-- <field name="orderTypeId"><hidden value="PURCHASE_ORDER"/></field> -->
        <field name="statusId" title="${uiLabelMap.Status}">
	        	<drop-down allow-empty="true">
	        		<option key="ORDER_CREATED" description="Created"/>
	        		<option key="ORDER_APPROVED" description="Approved"/>
	        		<option key="ORDER_CANCELLED" description="Cancelled"/>
	        		<option key="ORDER_SUSPENDED" description="Suspended"/>
	        	</drop-down>
        </field>
         <field name="findPoFlag"><hidden value="Y"/></field>  
     	<field name="partyId" title="${uiLabelMap.Customer}"><lookup target-form-name="LookupPartyName"/></field> 
       <field name="branchId" title="${uiLabelMap.Branch}">
              <drop-down allow-empty="true">
                  <list-options key-name="payToPartyId" list-name="formatList" description="${productStoreName}"/>
              </drop-down>
        </field>
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>

    <form name="listShipmentsDepot" type="list" list-name="listIt" paginate-target="FindDepotShipment"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
            <service service-name="performFind" result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="parameters"/>
                <field-map field-name="entityName" value="OrderHeaderAndRolesAndShipment"/>
                <field-map field-name="orderBy" from-field="parameters.sortField" value="-estimatedShipDate"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
            </service>
        </actions>
        <field name="shipmentId" ><display/></field>
        <field name="estimatedShipDate" title="Ship Date"><display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(estimatedShipDate, &quot;dd/MM/yyyy&quot;);}"/></field>
        <field name="vehicleId" title="Vehicle Number"><display/></field>
        <field name="GatePass" widget-style="buttontext" >
            <hyperlink target="nonRouteGatePassDepot.pdf" description="GatePass" target-window="_blank">
               	  <parameter param-name="shipmentId" />
               	  <parameter param-name="screenFlag" /> 
            </hyperlink>
        </field> 
        <field name="buyerInvoice" widget-style="buttontext" id-name = "invoiceSlips">
            <hyperlink target="buyerInvoiceDepot.pdf" description="Invoice Slips" target-window="_blank"> 	
               	  <parameter param-name="shipmentId" /> 
            </hyperlink>
        </field>
      	<field name="taxInvoice" widget-style="buttontext" id-name = "taxInvoice">
            <hyperlink target="taxInvoiceDepot.pdf" description="Tax Invoice" target-window="_blank"> 	
               	  <parameter param-name="shipmentId" /> 
            </hyperlink>
        </field>
        <field use-when="${groovy:((security.hasEntityPermission(&quot;FGSSALE_SHIP&quot;, &quot;_CANCEL&quot;, session)))}" name="cancelShipment" widget-style="buttontext">
            <hyperlink target="cancelShipmentDepot" description="Cancel Shipment">
	            <parameter param-name="shipmentId"/>
            </hyperlink>
        </field> 
    </form> 
    
    <form name="FindShipmentReceipt" title="" type="single" target="${targetRequest}" header-row-style="header-row" default-table-style="basic-table">
        <field name="datetimeReceived"><date-find/></field>
        <field name="productId"><text-find/></field>
        <field name="receiptId" title="GRN Item No"><text-find/></field>
        <field name="statusId" title="${uiLabelMap.CommonStatus}">
        	<drop-down allow-empty="true"   >
        		<entity-options description="${description}" entity-name="StatusItem" >
        			<entity-constraint name="statusTypeId" operator="equals" value="RECEIPT_STATUS"/>
        		</entity-options>
        	</drop-down>
        </field>
        <field name="shipmentId" title="GRN Shipment Id"><text-find/></field>
        <field name="orderId" title="PO Order"><text-find/></field>
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    
    
    
     <form name="IndentorFindShipmentReceipt" title="" type="single" target="${targetRequest}" header-row-style="header-row" default-table-style="basic-table">
        <field name="datetimeReceived"><date-find/></field>
        <field name="productId"><text-find/></field>
        <field name="receiptId" title="GRN Item No"><text-find/></field>
        <field name="statusId" title="${uiLabelMap.CommonStatus}">
        	<drop-down allow-empty="true"   >
        		<entity-options description="${description}" entity-name="StatusItem" >
        			<entity-constraint name="statusTypeId" operator="equals" value="RECEIPT_STATUS"/>
        		</entity-options>
        	</drop-down>
        </field>
        <field name="shipmentId" title="GRN Shipment Id"><text-find/></field>
        <field name="orderId" title="PO Order"><text-find/></field>
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    
    
    
   <form name="listMaterialShipmentReceipt" type="list" list-name="listIt" paginate-target="${targetRequest}"
        odd-row-style="alternate-row" header-row-style="header-row"  target="sendReceiptQtyForQC" default-table-style="basic-table hover-bar">
      
        <row-actions>
        	<entity-one value-field="product" entity-name="Product">
				<field-map field-name="productId" from-field="productId"/>
			</entity-one>
			<entity-one value-field="uom" entity-name="Uom">
				<field-map field-name="uomId" from-field="product.quantityUomId"/>
			</entity-one>
			<set field="dec" from-field="uom.description"/>
        </row-actions>
      	<field name="receiptId" title="GRN Item No">
      		<display/>
      	</field>
      	<field name="productId" title="Code- Name [UOM]">
      		<display-entity entity-name="Product" description="${productId} ${description}[${dec}]"/>
      	</field>
        <field name="datetimeReceived" title="Received Date"><display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(datetimeReceived, &quot;dd-MMM-yyyy&quot;);}"/></field>
        <field name="shipmentId" title="GRN ShipmentId"><display/></field>
       <field name="orderId" title="PO No"><display/></field> 
        <field name="statusId" title="${uiLabelMap.CommonStatus}">
        	<display-entity entity-name="StatusItem" description="${description}"/>
        </field>
      	<field name="quantityAccepted" title="Quantity"><display/></field>
      	<field name="quantityRejected" title="Qty Rejected"><display/></field>
      	<field name="receivedByUserLoginId" title="Entry by"><display/></field>	
      	
        <field name="statusIdTo"  > <hidden  value="SR_QUALITYCHECK" /> </field>
         
      	<!-- <field name="SendtoQC" use-when="statusId.equals(&quot;SR_RECEIVED&quot;)"  title="Send to QC" widget-style="buttontext">
             <hyperlink  target-type="plain" description="Send to QC"  target="javascript:showQCApprovalQTip('${receiptId}');"></hyperlink>
        </field>  -->
    </form>
    
    <form name="FindMaterialShipment" title="" type="single" target="${targetRequest}" header-row-style="header-row" default-table-style="basic-table">
    <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="hideSearch"><hidden value="Y"/></field>
       <field name="partyId" title="${uiLabelMap.Branch}">
              <drop-down allow-empty="true">
                  <list-options key-name="payToPartyId" list-name="branchList" description="${storeName}"/>
              </drop-down>
        </field>
        <field name="estimatedShipDate" title="${uiLabelMap.ShipmentDate}"><date-find default-option-from="sameDay"  /></field>
        <field name="orderNo" title="sequenceId"><text-find/></field>
        <field name="tallyRefNO" title="Tally Ref No"><text/></field>
        <field name="primaryOrderId" title="${uiLabelMap.PurchaseOrderNo}"><text-find/></field>
        <field name="shipmentId" title="${uiLabelMap.ShipmentId}"><text-find/></field>
        <field name="partyIdFrom" title="${uiLabelMap.ProductSupplier}"><lookup target-form-name="LookupPartyName"/></field> 
<!--         <field name="vehicleId" title="${uiLabelMap.VechicleNo}"><text-find/></field> -->
        <field name="statusId" title="${uiLabelMap.CommonStatus}"  >
        	<drop-down allow-empty="true" > 
        		<option key="DISPATCHED" description="Dispatched" > </option>
        		<option key="DOCUMENTS_RECEIVED" description="Documents Received" ></option>
        		<option key="DOCUMENTS_ENDORSED" description="Documents Endorsed" > </option>
        		<option key="GOODS_RECEIVED" description="Goods Received"  ></option>
        	</drop-down>
        </field>
        <field name="roleTypeId"><hidden value="BILL_TO_CUSTOMER"/></field>
         <field name="shipmentTypeId"><hidden value="BRANCH_SHIPMENT"/></field>
        
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    
     <form name="listMaterialShipments" type="list" list-name="listIt" paginate-target="${targetRequest}"
            odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
            <actions>
            </actions>
            <row-actions>
            	<entity-condition entity-name="Invoice" list="invoices">
            		<condition-list combine="and">
            			<condition-expr field-name="shipmentId" from-field="shipmentId"/>
            			<condition-expr field-name="statusId" operator="not-equals" value="INVOICE_CANCELLED"/>
            		</condition-list>
            	</entity-condition>
            	<set field="invSize" value="${groovy: invoices.size();}"/>
            	<set field="invoiceId" value="${invoices[0].invoiceId}"/>
            	<entity-condition entity-name="Invoice" list="invoicesstatusList">
            		<condition-list combine="and">
            			<condition-expr field-name="shipmentId" from-field="shipmentId"/>
            			<condition-expr field-name="statusId" operator="not-equals" value="INVOICE_CANCELLED"/>
            			<condition-expr field-name="invoiceTypeId" operator="equals" value="PURCHASE_INVOICE"/>
            		</condition-list>
            	</entity-condition>
            	<set field="purchaseInvoiceId" value="${invoicesstatusList[0].invoiceId}"/>
            	<entity-condition entity-name="Invoice" list="salesInvoiceStatusList">
            		<condition-list combine="and">
            			<condition-expr field-name="shipmentId" from-field="shipmentId"/>
            			<condition-expr field-name="statusId" operator="not-equals" value="INVOICE_CANCELLED"/>
            			<condition-expr field-name="invoiceTypeId" operator="equals" value="SALES_INVOICE"/>
            		</condition-list>
            	</entity-condition>
            	<set field="salesInvoiceId" value="${salesInvoiceStatusList[0].invoiceId}"/>
            	<set field="purchaseInvoiceSize" value="${groovy: invoicesstatusList.size();}"/>
            	<set field="salesInvoiceSize" value="${groovy: salesInvoiceStatusList.size();}"/>
            	<entity-condition entity-name="ShipmentReceipt" list="shipmentReceiptList">
            		<condition-list combine="and">
            			<condition-expr field-name="shipmentId" from-field="shipmentId" />
            			<condition-expr field-name="statusId" operator="equals" value="SR_RECEIVED"/>
            		</condition-list>
            	</entity-condition>
            	<set field="shipmentReceiptSize" value="${groovy: shipmentReceiptList.size();}"/>
            	<entity-condition entity-name="ShipmentReceipt" list="invoiceReceiptList">
            		<condition-list combine="and">
            			<condition-expr field-name="shipmentId" from-field="shipmentId" />
            			<condition-expr field-name="statusId" operator="equals" value="SR_ACCEPTED"/>
            		</condition-list>
            	</entity-condition>
            	<set field="invoiceReceiptSize" value="${groovy: invoiceReceiptList.size();}"/>
            </row-actions>
          	<field name="shipmentId" widget-style="buttontext h3" title="Shipment">
          		<hyperlink target="MaterialShipmentOverview" description="${shipmentId}" target-window="_blank" >
                    <parameter param-name="shipmentId"/>
                </hyperlink>
          	</field>
           <!--  <field name="estimatedShipDate" title="GRN Ship Date"><display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(estimatedShipDate, &quot;dd MMMMM, yyyy&quot;);}"/></field> -->
            <field name="salesOrder" title="Indent" widget-style="buttontext">
            	<hyperlink target="POoverview" description="${salesOrder}" target-window="_blank">
          			<parameter param-name="orderId" value="${orderId}"/>
          		</hyperlink>
            </field>
            <field name="poOrder" title="PO" widget-style="buttontext">
            	<hyperlink target="POoverview" description="${poOrder}" target-window="_blank">
          			<parameter param-name="orderId" value="${primaryOrderId}"/>
          		</hyperlink>
            </field>
            <field name="partyIdFrom" title="Supplier">
            <display-entity entity-name="PartyNameView" key-field-name="partyId" description="${firstName} ${middleName} ${lastName} ${groupName}">
                    <sub-hyperlink description="[${partyIdFrom}]" target="/partymgr/control/viewprofile" target-type="inter-app">
                        <parameter param-name="partyId" from-field="partyIdFrom"/>
                    </sub-hyperlink>
                </display-entity>
            </field>
             <field name="weaver">
            <display-entity entity-name="PartyNameView" key-field-name="partyId" description="${firstName} ${middleName} ${lastName} ${groupName}">
                    <sub-hyperlink description="[${weaver}]" target="/partymgr/control/viewprofile" target-type="inter-app">
                        <parameter param-name="partyId" from-field="weaver"/>
                    </sub-hyperlink>
                </display-entity>
            </field>
            <field name="tripNum" title="Tally Ref. No."><display/></field>
            <!-- <field name="vehicleId" title="Vehicle No"><display/></field> -->
            <field name="billToPartyId"><hidden/></field>
            <field name="partyIdTo" ><hidden/></field>
            <field name="partyName" ><hidden/></field>
            <!-- <field name="statusId" title="Status" use-when="(!statusId.equals(&quot;DISPATCHED&quot;)) &amp;&amp; (!statusId.equals(&quot;DOCUMENTS_RECEIVED&quot;)) &amp;&amp; (!statusId.equals(&quot;DOCUMENTS_ENDORSED&quot;))" >
            	<display-entity entity-name="StatusItem" description="${description}"/>
            </field> -->
           <!--  <field name="linkGrnWithPO" widget-style="buttontext" title="Link GRN With PO" use-when="&quot;${primaryOrderId}&quot;==&quot;&quot; &amp;&amp;(!statusId.equals(&quot;SHIPMENT_CANCELLED&quot;))&amp;&amp; ${groovy:((security.hasEntityPermission(&quot;DEPOTSALES&quot;, &quot;_RAISE_GRN&quot;, session)))}" >
                <hyperlink target-type="plain" target="javascript:showLinkGrnWithPOForm('${shipmentId}','${partyId}');" description="Link GRN With PO">
                </hyperlink>
            </field>  -->
            <field name="statusUpdate" title="GRN" widget-style="buttontext" use-when="statusId.equals(&quot;DISPATCHED&quot;)" >
	            <hyperlink target="updateShipment" description="Docs Received">
	                 <parameter param-name="shipmentId"/>
	                 <parameter param-name="statusId" value="DOCUMENTS_RECEIVED"/>
	                 <parameter param-name="roleTypeId" value="BILL_TO_CUSTOMER"/>
	            </hyperlink>
	        </field>
	        <field name="statusUpdate" title="GRN" widget-style="buttontext" use-when="statusId.equals(&quot;DOCUMENTS_RECEIVED&quot;)" >
	            <hyperlink target="updateShipment" description="Docs Endorsed">
	                 <parameter param-name="shipmentId"/>
	                 <parameter param-name="statusId" value="DOCUMENTS_ENDORSED"/>
	                 <parameter param-name="roleTypeId" value="BILL_TO_CUSTOMER"/>
	            </hyperlink>
	        </field>
	        <field name="statusUpdate" title="GRN" use-when="statusId.equals(&quot;DOCUMENTS_ENDORSED&quot;)" >
	            <display description="Docs Endorsed"></display>
	        </field>
	        <field name="statusUpdate" title="GRN" use-when="statusId.equals(&quot;GOODS_RECEIVED&quot;)" >
	            <display description="Accepted"></display>
	        </field>
            <!-- <field name="report" widget-style="buttontext"  use-when="(!statusId.equals(&quot;SHIPMENT_CANCELLED&quot;))">
                <hyperlink target="MRRreportDepotSales.pdf" description="Report" target-window="_blank">
                 	<parameter param-name="shipmentId" value="${shipmentId}"/>
                 	<parameter param-name="orderId" value="${primaryOrderId}"/>
                   	<parameter param-name="datetimeReceived" value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(estimatedShipDate, &quot;dd-MMM-yyyy&quot;);}"/>
                </hyperlink>
            </field> -->
            <!-- <field name="SendtoQC" use-when="!shipmentReceiptSize.equals(&quot;0&quot;)"  title="Accept Shipment" widget-style="buttontext">
                 <hyperlink  target-type="plain" description="Accept Shipment"  target="javascript:QCApprovalBranchSalesQTip('${shipmentId}','${partyIdTo}','${partyName}');"></hyperlink>
            </field> --> 
            <field name="raiseInvoice" widget-style="buttontext" title="Pur Invoice" use-when="(&quot;${purchaseInvoiceSize}&quot; == &quot;0&quot;) &amp;&amp;(statusId.equals(&quot;DOCUMENTS_ENDORSED&quot;)) ">
                <hyperlink target="MaterialInvoiceInit" description="Pur Invoice">
                    <parameter param-name="shipmentId"/>
                    <parameter param-name="billToPartyId"/>
                </hyperlink>
            </field>
            <field name="raiseInvoice" widget-style="buttontext" title="Pur Invoice" use-when="(!purchaseInvoiceSize.equals(&quot;0&quot;))">
                <display description="${purchaseInvoiceId}"></display>
            </field>
             <field name="raiseSalesInvoice" widget-style="buttontext" title="Sales Invoice" use-when="(!&quot;${purchaseInvoiceSize}&quot;.equals(&quot;0&quot;))&amp;&amp;(salesInvoiceSize.equals(&quot;0&quot;))&amp;&amp;(!statusId.equals(&quot;SHIPMENT_CANCELLED&quot;))&amp;&amp;${groovy:((security.hasEntityPermission(&quot;DEPOTSALES&quot;, &quot;_RAISE_INVOICE&quot;, session)))}">
                <hyperlink target="processSalesInvoice" description="Sales Invoice">
                    <parameter param-name="shipmentId"/>
                    <parameter param-name="orderId" value="${orderId}"/>
                    <parameter param-name="partyId" from-field="partyId"/>
                    <parameter param-name="billToPartyId" from-field="partyId"/>
                    <parameter param-name="purchaseInvoiceId" from-field="${purchaseInvoiceId}"/>
                    
                </hyperlink>
            </field>
            <field name="raiseSalesInvoice" widget-style="buttontext" title="Sales Invoice" use-when="(!salesInvoiceSize.equals(&quot;0&quot;))">
                <display description="${salesInvoiceId}"></display>
            </field>
            <!-- <field name="statusUpdate" title="Status Update" widget-style="buttontext" use-when="statusId.equals(&quot;DOCUMENTS_ENDORSED&quot;)" >
	            <hyperlink  target-type="plain" description="Accept Shipment"  target="javascript:QCApprovalBranchSalesQTip('${shipmentId}','${partyIdTo}','${partyName}');"></hyperlink>
	        </field> -->
            <field name="invStatus" title="Approval" widget-style="buttontext" use-when="(!salesInvoiceSize.equals(&quot;0&quot;)) &amp;&amp; (!salesInvoiceSize.equals(&quot;0&quot;))" >
	            <hyperlink  target-type="plain" description="Approve Invoice"  target="javascript:QCApprovalBranchSalesAndInvApproveQTip('${shipmentId}','${partyIdTo}','${partyName}', '${salesInvoiceId}', '${purchaseInvoiceId}');"></hyperlink>
	            
	            <!-- <hyperlink target="approveInvoices" description="Approve Invoice">
                    <parameter param-name="salesInvoiceId" from-field="${salesInvoiceId}"/>
                    <parameter param-name="purchaseInvoiceId" from-field="${purchaseInvoiceId}"/>
                </hyperlink> -->
	        </field>
            <field name="invStatus" title="Invoice Approval" use-when="statusId.equals(&quot;GOODS_RECEIVED&quot;)" >
	            <display description="Approved"></display>
	        </field>
            <field name="cancelGRN" widget-style="buttontext" title="Cancel Ship" use-when="(&quot;${invSize}&quot; == &quot;0&quot;)&amp;&amp;(invoiceReceiptSize.equals(&quot;0&quot;))&amp;&amp;(!statusId.equals(&quot;SHIPMENT_CANCELLED&quot;))&amp;&amp; ${groovy:((security.hasEntityPermission(&quot;DEPOTSALES&quot;, &quot;_RAISE_GRN&quot;, session)))}">
                <hyperlink target="CancelGrnShipment" description="Cancel">
                    <parameter param-name="shipmentId"/>
                </hyperlink>
            </field> 
    </form>
    
    
    
     <form name="IndentorListMaterialShipments" type="list" list-name="listIt" paginate-target="${targetRequest}"
            odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
            <actions>
            </actions>
            <row-actions>
            	<entity-condition entity-name="Invoice" list="invoices">
            		<condition-list combine="and">
            			<condition-expr field-name="shipmentId" from-field="shipmentId"/>
            			<condition-expr field-name="statusId" operator="not-equals" value="INVOICE_CANCELLED"/>
            		</condition-list>
            	</entity-condition>
            	<set field="invSize" value="${groovy: invoices.size();}"/>
            	<entity-condition entity-name="ShipmentReceipt" list="shipmentReceiptList">
            		<condition-list combine="and">
            			<condition-expr field-name="shipmentId" from-field="shipmentId" />
            			<condition-expr field-name="statusId" operator="equals" value="SR_RECEIVED"/>
            		</condition-list>
            	</entity-condition>
            	<set field="shipmentReceiptSize" value="${groovy: shipmentReceiptList.size();}"/>
            	<entity-condition entity-name="ShipmentReceipt" list="invoiceReceiptList">
            		<condition-list combine="and">
            			<condition-expr field-name="shipmentId" from-field="shipmentId" />
            			<condition-expr field-name="statusId" operator="equals" value="SR_ACCEPTED"/>
            		</condition-list>
            	</entity-condition>
            	<set field="invoiceReceiptSize" value="${groovy: invoiceReceiptList.size();}"/>
            </row-actions>
          	<field name="shipmentId" widget-style="buttontext h3" title="${uiLabelMap.ShipmentId}">
          		<hyperlink target="MaterialShipmentOverview" description="${shipmentId}" target-window="_blank" >
                    <parameter param-name="shipmentId"/>
                </hyperlink>
          	</field>
            <field name="estimatedShipDate" title="${uiLabelMap.ShipmentDate}"><display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(estimatedShipDate, &quot;dd MMMMM, yyyy&quot;);}"/></field>
            <field name="salesOrder" title="${uiLabelMap.PurchaseOrderNo}" widget-style="buttontext">
            	<hyperlink target="POoverview" description="${salesOrder}" target-window="_blank">
          			<parameter param-name="orderId" value="${primaryOrderId}"/>
          		</hyperlink>
            </field>
            <field name="partyId" title="${uiLabelMap.ProductSupplier}">
            <display-entity entity-name="PartyNameView" key-field-name="partyId" description="${firstName} ${middleName} ${lastName} ${groupName}">
                    <sub-hyperlink description="[${partyId}]" target="/partymgr/control/viewprofile" target-type="inter-app">
                        <parameter param-name="partyId" from-field="partyId"/>
                    </sub-hyperlink>
                </display-entity>
            </field>
<!--             <field name="vehicleId" title="${uiLabelMap.VechicleNo}"><display/></field> -->
            <field name="partyIdTo" ><hidden/></field>
            <field name="partyName" ><hidden/></field>
            <field name="statusId" title="${uiLabelMap.CommonStatus}">
            	<display-entity entity-name="StatusItem" description="${description}"/>
            </field>
            <!-- <field name="linkGrnWithPO" widget-style="buttontext" title="Link GRN With PO" use-when="&quot;${primaryOrderId}&quot;==&quot;&quot; &amp;&amp;(!statusId.equals(&quot;SHIPMENT_CANCELLED&quot;))&amp;&amp; ${groovy:((security.hasEntityPermission(&quot;DEPOTSALES&quot;, &quot;_RAISE_GRN&quot;, session)))}" >
                <hyperlink target-type="plain" target="javascript:showLinkGrnWithPOForm('${shipmentId}','${partyId}');" description="Link GRN With PO">
                </hyperlink>
            </field> --> 
            <!-- <field name="cancelGRN" widget-style="buttontext" title="Cancel GRN" use-when="(&quot;${invSize}&quot; == &quot;0&quot;)&amp;&amp;(invoiceReceiptSize.equals(&quot;0&quot;))&amp;&amp;(!statusId.equals(&quot;SHIPMENT_CANCELLED&quot;))&amp;&amp; ${groovy:((security.hasEntityPermission(&quot;DEPOTSALES&quot;, &quot;_RAISE_GRN&quot;, session)))}">
                <hyperlink target="IndentorCancelGrnShipment" description="Cancel GRN">
                    <parameter param-name="shipmentId"/>
                </hyperlink>
            </field> -->
            <field name="report" title="${uiLabelMap.Report}" widget-style="buttontext"  use-when="(!statusId.equals(&quot;SHIPMENT_CANCELLED&quot;))">
                <hyperlink target="MRRreportDepotSales.pdf" description="Report" target-window="_blank">
                 	<parameter param-name="shipmentId" value="${shipmentId}"/>
                 	<parameter param-name="orderId" value="${primaryOrderId}"/>
                   	<parameter param-name="datetimeReceived" value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(estimatedShipDate, &quot;dd-MMM-yyyy&quot;);}"/>
                </hyperlink>
            </field>
            <field name="SendtoQC" use-when="!shipmentReceiptSize.equals(&quot;0&quot;)"  title="${uiLabelMap.AcceptShipment}" widget-style="buttontext">
                 <hyperlink  target-type="plain" description="Accept Shipment"  target="javascript:QCIndentorApprovalBranchSalesQTip('${shipmentId}','${partyIdTo}','${partyName}');"></hyperlink>
            </field> 
            <!-- <field name="raiseInvoice" widget-style="buttontext" title="Raise Invoice" use-when="(&quot;${invSize}&quot; == &quot;0&quot;)&amp;&amp;(!invoiceReceiptSize.equals(&quot;0&quot;))&amp;&amp;(!statusId.equals(&quot;SHIPMENT_CANCELLED&quot;))&amp;&amp;${groovy:((security.hasEntityPermission(&quot;DEPOTSALES&quot;, &quot;_RAISE_INVOICE&quot;, session)))}">
                <hyperlink target="MaterialInvoiceInit" description="Invoice">
                    <parameter param-name="shipmentId"/>
                </hyperlink>
            </field>  -->
    </form>
    
    
    
    
    <form name="shipmentInfo" type="single" title="request information" default-map-name="shipmentHeader"
        header-row-style="header-row" default-table-style="basic-table">
        
        <field name="shipmentId" title="shipment No"><display/></field>
        <field name="primaryOrderId" title="PO no"><display/></field>
        <field name="statusId" title="Status"><display/></field>
        <field name="estimatedShipDate" title="Ship Date"><display/></field>
        <field name="supplierId" title="Supplier">
        	<display default-value="${supplierId}"/>
        </field>
        <field name="supplierInvoiceId" title="Supplier Invoice No"><display/></field>
        <field name="supplierInvoiceDate" title="Supplier Invoice Date"><display /></field>
        <field name="vehicleId" title="Vehicle No"><display/></field>
        <field name="createdDate" title="Created Date"><display/></field>
        <field name="createdByUserLogin" title="Created User Login"><display/></field>
    </form>
    
    <form name="shipmentItemInfo" type="list" title="request information" default-map-name="" list-name="shipmentItems"
        header-row-style="header-row" default-table-style="basic-table">
        
        <field name="shipmentItemSeqId" title="Item No"><display/></field>
        <field name="productId" title="Material Code">
        	<display-entity entity-name="Product" key-field-name="productId" description="${productName} - [${productId}]"/>
        </field>
        <field name="quantity" title="Qty"><display/></field>
    </form>
    
    <form name="shipmentReceiptsForInvoice" type="list" title="request information" default-map-name="" list-name="shipmentReceipts"
        header-row-style="header-row" default-table-style="basic-table" target="">
        <field name="shipmentId"><hidden/></field>
        <field name="receiptId" title="GRN No"><display/></field>
        <field name="productId" title="Material Code">
        	<display-entity entity-name="Product" key-field-name="productId" description="${productName} - [${productId}]"/>
        </field>
        <field name="orderId" title="Order No."><display/></field>
        <field name="orderItemSeqId" title="Order Item Ref."><display/></field>
        <field name="quantityAccepted" title="Accepted Qty"><display/></field>
        <field name="quantityRejected" title="Rejected Qty"><display/></field>
        <field name="statusId" title="Status"><display-entity entity-name="StatusItem" key-field-name="statusId" description="${description}"/></field>
    </form>

	<form name="orderAmendments" type="list" list-name="orderAmendmentsList" separate-columns="true"
        odd-row-style="alternate-row" header-row-style="header-row" default-table-style="basic-table hover-bar">
      <actions>
      	<entity-condition entity-name="OrderItemChange" list="orderAmendmentsList">
      		<condition-expr field-name="orderId" operator="equals" from-field="parameters.orderId"/>
      	</entity-condition>
      </actions>  
      <row-actions>
      	<entity-one value-field="OrderItem" entity-name="OrderItem">
      		<field-map field-name="orderId" from-field="orderId"/>
      		<field-map field-name="orderItemSeqId" from-field="orderItemSeqId"/>
      	</entity-one>
      	<set field="productId"  from-field="OrderItem.productId"/>
      </row-actions>
      <field name="orderId"><hidden/></field>
      <field name="orderItemSeqId" title="Item No"><hidden/></field>
      <field name="productId" title="Product">
      		<display-entity entity-name="Product" description="${description}"/>
      	</field>
      <field name="quantity"><display></display></field>
      <field name="unitPrice"><display></display></field>
      <field name="effectiveDatetime" title="Effective Date"><display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(effectiveDatetime, &quot;dd-MMM-yyyy&quot;);}"></display></field>
      <field name="changeDatetime" title="Changed Date"><display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(changeDatetime, &quot;dd-MMM-yyyy&quot;);}"></display></field>
      <field name="changeUserLogin" title="Changed By"><display></display></field>
      <field name="changeComments" title="Comments"><display></display></field>
     </form>   
     
    <form name="findMaterial" type="single" target="searchProduct">
    	<field name="productId" title="Product">
             <lookup target-form-name="LookupProduct" size="15" />
        </field>
        <field name="internalName" title="Internal Name"><text-find/> </field>
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
   <form name="listMaterial" type="list" extends="MaterialsList" list-name="listIt">
        <actions>
          <service service-name="performFind" result-map="result" result-map-list="listIt">
            <field-map field-name="inputFields" from-field="parameters"/>
            <field-map field-name="entityName" from-field="entityName"/>
            <field-map field-name="inputFields.productTypeId" value="FINISHED_GOOD"/>
            <field-map field-name="viewIndex" from-field="viewIndex"/>
            <field-map field-name="viewSize" from-field="viewSize"/>
          </service>
        </actions>
    </form>
    <form name="MaterialsList" type="list" use-row-submit="true" 
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <row-actions>
        	<entity-condition entity-name="SupplierProduct" list="list" >
        		<condition-expr field-name="productId" operator="equals" value="${productId}"/>
        	</entity-condition>
        	<set  field="partyId" value="${list[0].partyId}"/>
        	<entity-condition entity-name="ProductPrice" list="priceList" >
        		<condition-expr field-name="productId" operator="equals" value="${productId}"/>
        		<condition-expr field-name="productPriceTypeId" operator="equals" value="PM_RC_W_PRICE"/>
        	</entity-condition>
        	<set  field="price" value="${priceList[0].price}"/>
        </row-actions>
    <!--  <field name="internalName" title="Internal Name"><display/></field> -->
	<!-- <field name="productId" title="Product">
     	<display-entity entity-name="Product" description="${description} [${productId}]" ></display-entity>
    </field>  -->    
    <field name="productId" title="Product" use-when="productId!=null" ><display description="${description} [${productId}]"></display>
            <!-- <hyperlink also-hidden="false" description="${description} [${productId}]" target="/catalog/control/EditProduct" target-window="_blank" target-type="inter-app">
                <parameter param-name="productId"/>
            </hyperlink> -->
     </field>
    
     <field name="longDescription" title="Specification"><display size="50"/></field>
     <field name="quantityUomId" title="UOM" ><display-entity entity-name="Uom" key-field-name="uomId" description="${description}"/></field> 
     <field name="primaryProductCategoryId" title="Material Category">
     	<display-entity entity-name="ProductCategory" key-field-name="productCategoryId" description="${description}" ></display-entity>
     </field>
      <field name="Barcode" title="Barcode" use-when="productId!=null" widget-style="buttontext">
            <hyperlink also-hidden="false" description="Barcode" target="/catalog/control/ProductBarCode.pdf" target-window="_blank" target-type="inter-app">
                <parameter param-name="productId"/>
            </hyperlink>
     </field>
     <!-- <field name="partyId" title="Supplier" >
     	<hyperlink target="/partymgr/control/viewprofile" target-type="inter-app" description="${groovy:org.ofbiz.party.party.PartyHelper.getPartyName(delegator, partyId, false);}  [${partyId}]">
                <parameter param-name="partyId" from-field="partyId"/>
            </hyperlink>
     </field> -->
     <field name="price" title="View Price" widget-style="buttontext">
     	<hyperlink  target="EditProductPricesDepot" target-type="inter-app" target-window="_blank" description="View"> 
     	   <parameter param-name="productId"/>
     	</hyperlink>
     </field>
      <!-- <field name="updateMaterial" widget-style="buttontext" title="Update Details" use-when="${groovy:((security.hasEntityPermission(&quot;MM&quot;, &quot;_MATERIAL_UPDATE&quot;, session)))}"  >
            <hyperlink target-type="plain" target="javascript:showUpdateProductForm('${productId}','${quantityUomId}');" description="Update">
            </hyperlink>
      </field>  -->
    </form>
    <form name="FindPurchaseOrder" title="" type="single" target="${targetRequest}" header-row-style="header-row" default-table-style="basic-table">
       <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="hideSearch"><hidden value="Y"/></field>
         <field name="ChannalType"><hidden value="MATERIAL_PUR_CHANNEL"/></field>
          <field name="roleTypeId"><hidden value="BILL_TO_CUSTOMER"/></field>
           <field name="salesChannelEnumId"><hidden value="MATERIAL_PUR_CHANNEL"/></field>
            <field name="findPoFlag"><hidden value="Y"/></field>
             <field name="orderTypeId"><hidden value="PURCHASE_ORDER"/></field>
		<field name="partyId" title="${uiLabelMap.Branch}">
              <drop-down allow-empty="true">
                  <list-options key-name="payToPartyId" list-name="branchList" description="${storeName}"/>
              </drop-down>
        </field>
       
        <field name="salesChannelEnumId" ><hidden value="${ChannalType}"/></field> 
        <field name="orderTypeId" ><hidden value="PURCHASE_ORDER"/></field> 
        <!-- <field name="orderTypeId">
           <drop-down no-current-selected-key="PURCHASE_ORDER">
              <entity-options description="${description}" entity-name="OrderType" key-field-name="orderTypeId">
                 <entity-constraint name="parentTypeId" operator="like" value="%PURCHASE%"/>
              </entity-options>
           </drop-down>
        </field> -->
        <field title="Delivery Date" name="estimatedDeliveryDate"><date-find/></field>
        <field name="orderId"><text-find/></field>
        <field title="Entry Date" name="entryDate"><date-find/></field>
        <field name="orderNo" title="sequenceId"><text-find default-option="contains"/></field>
<!--        <field name="productId"><lookup target-form-name="LookupProduct"/></field> -->
        <!-- <field name="orderTypeId"><hidden value="PURCHASE_ORDER"/></field> -->
        <field name="statusId">
	        	<drop-down allow-empty="true">
	        		<option key="ORDER_CREATED" description="Created"/>
	        		<option key="ORDER_APPROVED" description="Approved"/>
	        		<option key="ORDER_CANCELLED" description="Cancelled"/>
	        		<option key="ORDER_SUSPENDED" description="Suspended"/>
	        	</drop-down>
        </field>
<!--         <field name="roleTypeId"><hidden value="SUPPLIER_AGENT"/></field> -->
         <field name="purposeTypeId"><hidden value="BRANCH_PURCHASE"/></field> 
         <field name="findPoFlag"><hidden value="Y"/></field>  
    	<field name="supplierId" title="Supplier"><lookup target-form-name="LookupPartyName" target-parameter="roleTypeId"/></field>
        <field name="noConditionFind"><hidden value="N"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
     <form name="listPurchaseOrders" type="list" list-name="listIt" paginate-target="${targetRequest}"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
           
        </actions>
      	<row-actions>
      		<entity-condition entity-name="OrderItem" list="orderItemList" >
      			<condition-expr field-name="orderId" operator="equals" value="${orderId}" />
      		</entity-condition>
      		<script location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/purchases/POSearchFilter.groovy"/>
      		<set field="newSize" value="${orderItemsSize}" />
      		<set field="size" value="${groovy: return(orderItemList.size())}"/>
      		<entity-condition entity-name="OrderRole" list="orderRoleList" >
      			<condition-list>
      			<condition-expr field-name="orderId" operator="equals" value="${orderId}" />
      			<condition-expr field-name="roleTypeId" operator="equals" value="SHIP_TO_CUSTOMER" />
      			</condition-list>
      		</entity-condition>
      		<entity-condition entity-name="OrderRole" list="orderRoleSuppList" >
      			<condition-list>
      			<condition-expr field-name="orderId" operator="equals" value="${orderId}" />
      			<condition-expr field-name="roleTypeId" operator="equals" value="BILL_FROM_VENDOR" />
      			</condition-list>
      		</entity-condition>
      		<set field="customerId" value="${orderRoleList[0].partyId}"/>
      		<set field="supplierId" value="${orderRoleSuppList[0].partyId}"/>
      		<!-- <entity-condition entity-name="SupplierProduct" list="SupplierProductList" >
      			<condition-expr field-name="productId" operator="equals" value="${orderItemList[0].productId}"/>
      		</entity-condition>
      		<set field="partyId" value="${orderRoles[0].partyId}" />
      		<entity-condition entity-name="ShipmentReceipt" list="ShipmentReceiptList" >
      			<condition-list combine="and" >
	      			<condition-expr field-name="orderId" operator="equals" value="${orderId}" />
	      			<condition-expr field-name="statusId" operator="not-equals" value="SR_REJECTED" />
      			</condition-list>
      		</entity-condition>
      		<set field="flag" value="${groovy: return (ShipmentReceiptList.size() > 0)? 'Y' : 'N';}"/>
      		<entity-condition entity-name="Shipment" list="ShipmentList" >
      			<condition-list combine="and" >
	      			<condition-expr field-name="primaryOrderId" operator="equals" value="${orderId}" />
      			</condition-list>
      		</entity-condition>
      		<set field="vehicleId" value="${ShipmentList[0].vehicleId}"/> -->
      	</row-actions>
      	<field name="orderId" widget-style="buttontext">
      	<hyperlink target="POoverview" description="${groovy: if(orderNo !=null) return orderNo; else return orderId;}" target-window="_blank">
      			<parameter param-name="orderId"/>
      		</hyperlink>
       </field>
      	<field name="customerId" title="Customer"><display description="${groovy:org.ofbiz.party.party.PartyHelper.getPartyName(delegator, customerId, false);} - [${customerId}]"></display></field>
		<field name="supplierId" title="Supplier"><display description="${groovy:org.ofbiz.party.party.PartyHelper.getPartyName(delegator, supplierId, false);} - [${supplierId}]"></display></field>
        <field name="partyId" title="Branch"><display description="${groovy:org.ofbiz.party.party.PartyHelper.getPartyName(delegator, partyId, false);} - [${partyId}]"/></field>
        <field name="entryDate" title="Entry Date"><display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(entryDate, &quot;dd/MM/yyyy&quot;);}"/></field>
        <field name="createdBy" title="Created By"><display/></field>
        <!-- <field name="salesChannelEnumId"><display/></field> -->
        <field name="partyId" title="Supplier"><display description="${groovy:org.ofbiz.party.party.PartyHelper.getPartyName(delegator, partyId, false);} - [${partyId}]"/></field>
         <!-- <field use-when="&quot;${orderTypeId}&quot; == &quot;LETTER_OF_INTENT&quot;" name="poReport" widget-style="buttontext">
            <hyperlink target="LetterOfIndentReport.pdf" description="Report" target-window="_blank">
                <parameter param-name="orderId"/>
            </hyperlink>
        </field> -->
        <field use-when="&quot;${orderTypeId}&quot; != &quot;LETTER_OF_INTENT&quot; &amp;&amp; &quot;${orderTypeId}&quot; != &quot;ARC_ORDER&quot;" name="poReport" widget-style="buttontext">
            <hyperlink description="Report" target="javascript:showAgencyAddress('${orderId}');" target-window="_blank" target-type="plain">
            </hyperlink>
        </field>
        
        <field use-when="&quot;${orderTypeId}&quot; != &quot;LETTER_OF_INTENT&quot; &amp;&amp; &quot;${orderTypeId}&quot; != &quot;ARC_ORDER&quot;" name="Hindi Po Report" widget-style="buttontext">
	            <hyperlink target="hindiPoPrintReport.pdf" description="Hindi PO" target-window="_blank">
	                <parameter param-name="orderId"/>
	            </hyperlink>
        </field>
        
        <!--  <field use-when="&quot;${orderTypeId}&quot; == &quot;ARC_ORDER&quot;" name="arcReport" widget-style="buttontext">
            <hyperlink target="arcOrder.pdf" description="Report" target-window="_blank">
                <parameter param-name="orderId"/>
            </hyperlink>
        </field>
         -->
        
       <!-- <field name="editOrder" widget-style="buttontext" use-when="statusId.equals(&quot;ORDER_CREATED&quot;) &amp;&amp;${groovy:((security.hasEntityPermission(&quot;DEPOTSALES&quot;, &quot;_EDIT_PO&quot;, session)))}" >
            <hyperlink target="editMaterialPO" description="Edit Order">
                 <parameter param-name="orderId"/>
            </hyperlink>
        </field> -->  
      	<field name="Order Status" widget-style="buttontext" use-when="statusId.equals(&quot;ORDER_CREATED&quot;)&amp;&amp;${groovy:((security.hasEntityPermission(&quot;DEPOTSALES&quot;, &quot;_APPROVE_PO&quot;, session)))}" >
          <display description="Order Created" />
        </field> 
        
        <field name="Order Status" widget-style="buttontext" use-when="statusId.equals(&quot;ORDER_APPROVED&quot;)" ><display description="Order Approved" /></field>
        <field name="Order Status" widget-style="buttontext" use-when="statusId.equals(&quot;ORDER_COMPLETED&quot;)" ><display description="Order Completed" /></field>
        <field name="Order Status" widget-style="buttontext" use-when="statusId.equals(&quot;ORDER_CANCELLED&quot;)" ><display description="Order Cancelled" /></field>
        <!-- <field name="SuspendedOrder" use-when="statusId.equals(&quot;ORDER_SUSPENDED&quot;)" ><display description="Order Suspended" /></field> -->
        <field name="cancelOrder" widget-style="buttontext" use-when="statusId.equals(&quot;ORDER_CREATED&quot;) &amp;&amp;${groovy:((security.hasEntityPermission(&quot;DEPOTSALES&quot;, &quot;_CANCEL_PO&quot;, session)))}" >
            <hyperlink target="CancelOrder" description="Cancel Order" confirmation-message="Are you sure to Cancel Order..?">
                 <parameter param-name="orderId"/>
                <parameter param-name="statusId" value="ORDER_CANCELLED" />
                <parameter param-name="setItemStatus" value="Y" />
                <parameter param-name="roleTypeId"/>
            </hyperlink>
        </field> 
        <!-- <field use-when="(flag == &quot;N&quot;)&amp;&amp;((&quot;${statusId}&quot;!=&quot;ORDER_CANCELLED&quot;)&amp;&amp;(&quot;${statusId}&quot;!=&quot;ORDER_COMPLETED&quot;)&amp;&amp;(&quot;${statusId}&quot;!=&quot;ORDER_CREATED&quot;))"  name="raiseGRN" title="Raise GRN" widget-style="buttontext" > -->
       <!--  <field use-when="(&quot;${newSize}&quot;!=&quot;${size}&quot;)&amp;&amp;((&quot;${statusId}&quot;!=&quot;ORDER_CANCELLED&quot;)&amp;&amp;(&quot;${statusId}&quot;!=&quot;ORDER_COMPLETED&quot;)&amp;&amp;(&quot;${statusId}&quot;!=&quot;ORDER_CREATED&quot;)&amp;&amp;(&quot;${statusId}&quot;!=&quot;ORDER_SUSPENDED&quot;)) &amp;&amp;${groovy:((security.hasEntityPermission(&quot;DEPOTSALES&quot;, &quot;_RAISE_GRN&quot;, session)))}"  name="raiseGRN" title="Raise GRN" widget-style="buttontext" >	 <hyperlink target="raiseGRN" description="Raise GRN">
        	 	<parameter param-name="orderId"/>
        	 	<parameter param-name="vehicleId"/>
            </hyperlink>
         </field> -->
    </form>
     <form name="FindInvoices" type="single" target="DepotPurchaseInvoice" title="Find and list invoices"
        header-row-style="header-row" default-table-style="basic-table">
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="hideSearch"><hidden value="Y"/></field>
       <!--  <field name="prefPaymentMethodTypeId" title="Voucher Type">
			<drop-down allow-empty="true">
			<option key="CASH" description="Cash Voucher" ></option>
			<option key="BANK" description="Bank Voucher" ></option>
			</drop-down>
		</field> -->
		<field name="partyIdFrom" title="${uiLabelMap.Branch}" use-when="(&quot;${invoiceTypeId}&quot;==&quot;SALES_INVOICE&quot;)">
              <drop-down allow-empty="true">
                  <list-options key-name="payToPartyId" list-name="branchList" description="${storeName}"/>
              </drop-down>
        </field>
		<field name="partyIdTo" title="${uiLabelMap.Branch}" use-when="(&quot;${invoiceTypeId}&quot;==&quot;PURCHASE_INVOICE&quot;)">
              <drop-down allow-empty="true">
                  <list-options key-name="payToPartyId" list-name="branchList" description="${storeName}"/>
              </drop-down>
        </field>
        <field name="invoiceId"><text-find ignore-case="true"/></field>
        <field name="facilityId" title="Facility Id"><text-find ignore-case="true"/></field>
        <field name="description"><text-find ignore-case="true"/></field>
        <field name="invoiceTypeId"><display/></field>
        <field name="subTabButtonValue"><hidden/></field>
        <field name="actionSubTabButtonValue"><hidden/></field>
        <!-- <field position="1" name="invoiceTypeId">
            <drop-down allow-empty="true">
                <entity-options description="${description}" entity-name="InvoiceType"/>
            </drop-down>
        </field> -->
        <field name="statusId" title="${uiLabelMap.CommonStatus}" position="2">
            <drop-down allow-empty="true">
                <entity-options description="${description}" entity-name="StatusItem">
                    <entity-constraint name="statusTypeId" operator="equals" value="INVOICE_STATUS"/>
                </entity-options>
            </drop-down>
        </field>
       <!--  <field position="1" name="partyIdFrom"><lookup target-form-name="LookupPartyName"/></field> -->
       <!--  <field position="2" name="partyIdTo" parameter-name="partyId"><lookup target-form-name="LookupPartyName"/></field>   -->     
        <!-- <field name="billingAccountId"><lookup target-form-name="LookupBillingAccount"/></field> -->
        <field name="invoiceDate"><date-find type="timestamp"/></field>
        <field name="dueDate"><hidden/></field>
        <field name="searchButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
     <form name="FindApInvoices" type="single" target="DepotPurchaseInvoice" extends="FindInvoices" extends-resource="component://depotsales/widget/DepotSalesForms.xml">
		<field name="parentTypeId"><hidden value="PURCHASE_INVOICE"/></field>
		<!-- <field name="invoiceTypeId" position="2">
			<drop-down allow-empty="true">
				<entity-options entity-name="InvoiceType" description="${description}">
					<entity-constraint name="parentTypeId" value="PURCHASE_INVOICE"/>
				</entity-options>
			</drop-down>
		</field> -->
		<field name="statusId" title="${uiLabelMap.CommonStatus}"
			position="2">
			<drop-down allow-empty="true">
				<entity-options description="${description}"
					entity-name="StatusItem">
					<entity-constraint name="statusTypeId" operator="equals"
						value="INVOICE_STATUS" />
					<entity-constraint name="statusId" operator="not-equals"
						value="INVOICE_SENT" />
				</entity-options>
			</drop-down>
		</field>
		<field name="dueDate"><date-find type="timestamp"/></field>
			<field name="billingAccountId">
			<hidden />
		</field>
		<field name="billingAccountId"><hidden/></field>
	</form>
	
	
	  <form name="FindSalesApInvoices" type="single" target="DepotSalesInvoice" extends="FindInvoices" extends-resource="component://depotsales/widget/DepotSalesForms.xml">
		<field name="parentTypeId"><hidden value="SALES_INVOICE"/></field>
		<!-- <field name="invoiceTypeId" position="2">
			<drop-down allow-empty="true">
				<entity-options entity-name="InvoiceType" description="${description}">
					<entity-constraint name="parentTypeId" value="PURCHASE_INVOICE"/>
				</entity-options>
			</drop-down>
		</field> -->
		<field name="statusId" title="${uiLabelMap.CommonStatus}"
			position="2">
			<drop-down allow-empty="true">
				<entity-options description="${description}"
					entity-name="StatusItem">
					<entity-constraint name="statusTypeId" operator="equals"
						value="INVOICE_STATUS" />
					<entity-constraint name="statusId" operator="not-equals"
						value="INVOICE_SENT" />
				</entity-options>
			</drop-down>
		</field>
		<field name="dueDate"><date-find type="timestamp"/></field>
			<field name="billingAccountId">
			<hidden />
		</field>
		<field name="billingAccountId"><hidden/></field>
	</form>
	
	 <!--  <form name="FindPhysicalInventoryDepot" type="single" target="FindFacilityPhysicalInventoryDepot" title=""
        header-row-style="header-row" default-table-style="basic-table">
        <field name="facilityId"><hidden/></field>
        <field name="productId" title="${uiLabelMap.ProductProductId}">
            <text/>
        </field>
         <field name="effectiveDate" title="Effective Date"><date-time/></field>
        <field name="internalName" title="${uiLabelMap.ProductInternalName}">
            <text/>
        </field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit">
            <submit/>
        </field>
    </form> -->
     <form name="FindPhysicalInventoryDepot" title="" type="single" target="FindFacilityPhysicalInventoryDepot" header-row-style="header-row" default-table-style="basic-table">
        
        <field name="shipmentTypeId"><hidden value="MATERIAL_SHIPMENT"/></field>
        <field name="estimatedShipDate" title="GRN Shipment Date"><date-find default-option-from="sameDay"  /></field>
        <field name="primaryOrderId" title="PO no"><text-find/></field>
        <field name="shipmentId" title="GRN Shipment Id"><text-find/></field>
        <field name="partyId" title="Party"><lookup target-form-name="LookupPartyName"/></field>
        <field name="productId" title="Product"><lookup target-form-name="LookupProduct" size="15" /></field>
        <field name="facilityId" > <hidden value="${parameters.facilityId}"/></field>
    <!--     <field name="vehicleId" title="Vehicle No"><text-find/></field> -->
           <field name="statusId"><hidden value="GENERATED"/></field>
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    
    <form name="ListPhysicalInventoryDepot" type="multi" list-name="physicalInventory" target="createPhysicalInventoryVariances?facilityId=${parameters.facilityId}&amp;productId=${parameters.productId}&amp;internalName=${parameters.internalName}" use-row-submit="true"
        odd-row-style="alternate-row" default-table-style="basic-table hover-bar" separate-columns="true">
       
        <field name="shipmentId" title="Shipment Id"><display/></field>
        <field name="fromPartyId" title="From Party"><display/></field>
        <field name="estimatedShipDate" title="Recvd.Date"><display/></field>
        
        <field name="inventoryItemId" title="Inventory Id" widget-style="buttontext"><display></display>
            <!-- <hyperlink description="${inventoryItemId}" target="EditInventoryItem">
                <parameter param-name="inventoryItemId"/>
            </hyperlink> -->
        </field>
      <!--   <field name="productId" widget-style="buttontext">
            <hyperlink description="${productId}" target="/catalog/control/EditProductInventoryItems" target-type="inter-app">
                <parameter param-name="productId"/>
            </hyperlink>
        </field> -->
        <field name="productId" widget-style="buttontext" title="Product Name"><display-entity entity-name="Product" description="${description}[${${productId}}]"></display-entity>
        </field>
        <!--  <field name="internalName"><display/></field> -->
        <!--   <field name="availableToPromiseTotal" title="${uiLabelMap.ProductItemATP}"><display/></field>
        <field name="quantityOnHandTotal" title="${uiLabelMap.ProductItemQOH}"><display/></field> -->
        <!--  <field name="productATP" title="${uiLabelMap.ProductProductATP}"><display/></field>
        <field name="productQOH" title="${uiLabelMap.ProductProductQOH}"><display/></field> -->
        <field name="quantityOnHandTotal" title="Stock Avl"><display/></field>
        <field name="isVarianceForDamage"><hidden value="Y"/><!--it is to negate the QOH --></field>
        <field name="varianceReasonId">
            <drop-down allow-empty="false">
                <entity-options entity-name="VarianceReason" description="${description}"/>
            </drop-down>
        </field>
<!--    <field name="availableToPromiseVar" title="${uiLabelMap.ProductProductATPVar}" event="onchange" action="document.ListPhysicalInventoryDepot._rowSubmit_o_${itemIndex}.checked = true"><text size="6"/></field> -->
        <field name="quantityOnHandVar" title="Variance" event="onchange" action="document.ListPhysicalInventoryDepot._rowSubmit_o_${itemIndex}.checked = true"><text size="6"/></field>
        <field name="_rowSubmit" title="${uiLabelMap.CommonSelect}"><check/></field>
        <field name="submitButton" title="${uiLabelMap.CommonSubmit}" widget-style="smallSubmit">
            <submit/>
        </field>
    </form>
     <form name="FindDepotPayments" type="single" target="FinddepotPayments" extends="FindPayments" extends-resource="component://accounting/widget/PaymentForms.xml">
        <field name="parentTypeId"><hidden value="DISBURSEMENT"/></field>
        <field name="paymentTypeId" position="1">
            <drop-down allow-empty="true">
                <entity-options entity-name="PaymentType" description="${description}">
                    <entity-constraint name="parentTypeId" value="DISBURSEMENT"/>
                </entity-options>
            </drop-down>
        </field>
    </form>
    
     <form name="FindSalesReturns" type="single"  target="FindSalesReturns" title=""
        header-row-style="header-row" default-table-style="basic-table">
       <!--  <field name="returnHeaderTypeId">
            <drop-down allow-empty="true">
                <entity-options entity-name="ReturnHeaderType" description="${description}"/>
            </drop-down>
        </field> -->
        <field name="returnId" title="${uiLabelMap.OrderReturnId}"><text-find/></field>
        <field name="fromPartyId" title="${uiLabelMap.OrderReturnFromParty}">
            <lookup target-form-name="LookupPartyName"/>
        </field>
        <!-- <field name="billingAccountId" title="${uiLabelMap.AccountingBillingAccount}">
            <text-find/>
        </field> -->
        <field name="statusId" title="${uiLabelMap.CommonStatus}">
            <drop-down allow-empty="true">
                <entity-options entity-name="StatusItem" description="${description}">
                    <entity-constraint name="statusTypeId" operator="equals" value="ORDER_RETURN_STTS"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="entryDate" title="${uiLabelMap.OrderEntryDate}">
            <date-find/>
        </field>
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit">
            <submit button-type="button"/>
        </field>
    </form>
    
    <form name="ListSalesReturns" type="list"  target="findreturn" title="" list-name="listIt"
        odd-row-style="alternate-row" default-table-style="basic-table hover-bar" paginate-target="findreturn">
        <actions>
            <service service-name="performFind"  result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="requestParameters"/>
                <field-map field-name="entityName" value="ReturnHeader"/>
                <field-map field-name="orderBy" value="entryDate DESC"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
            </service>
        </actions>
        <!-- <row-actions>
        	<entity-one entity-name="Shipment">
        		<field-map field-name="shipmentId" from-field="shipmentId"/>
        		<select-field field-name="routeId"/>
        		<select-field field-name="tripNum"/>
        	</entity-one>
        	<set field="routeId" from-field="routeId"/>
        	<set field="tripId" from-field="tripNum"/>
        </row-actions> -->
        <field name="returnId" title="Return Id"><display/></field>
        <field name="fromPartyId" title="${uiLabelMap.OrderReturnFromParty}">
            <display-entity entity-name="PartyNameView" key-field-name="partyId" description="${groupName} ${firstName} ${lastName}">
                <sub-hyperlink link-style="buttontext" target-type="inter-app" description="${fromPartyId}" target="/partymgr/control/viewprofile">
                    <parameter param-name="partyId" from-field="fromPartyId"/>
                </sub-hyperlink>
            </display-entity>
        </field>
        <field name="statusId" title="${uiLabelMap.CommonStatus}">
            <display-entity entity-name="StatusItem" key-field-name="statusId" description="${description}"/>
        </field>
        
        <!-- <field name="shipmentId" title="Ship Date">
        	<display-entity entity-name="Shipment" key-field-name="shipmentId" description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(estimatedShipDate, &quot;dd MMMMM, yyyy&quot;);}"></display-entity>
        </field>
        <field name="routeId" title="Route">
        	<display-entity entity-name="Facility" key-field-name="facilityId" description="${facilityName}[${facilityId}]"></display-entity>
        </field>
        <field name="tripId" title="Trip">
        	<display description="${tripId}"></display>
        </field> -->
        <field name="entryDate" title="${uiLabelMap.OrderEntryDate}">
            <display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(entryDate, &quot;dd/MM/yyyy HH:mm:ss&quot;);}"/>
        </field>
        <field name="cancelReturn" widget-style="buttontext" use-when="!(&quot;${statusId}&quot;==&quot;RETURN_CANCELLED&quot;)" title="${uiLabelMap.CommonCancel}" >
            <hyperlink target-type="plain" target="cancelReturn" description="${uiLabelMap.CommonCancel}" link-type="hidden-form">
            	<parameter param-name="returnId"/>
            </hyperlink>
        </field>
    </form>
    
    
      <form name="FindSupplierPurchaseShipment" title="" type="single" target="${targetRequest}" header-row-style="header-row" default-table-style="basic-table">
               
               <field title="shipment Date" name="estimatedShipDate"><date-find/></field>
               <field name="shipmentId"><text-find/></field>
               <field name="roleTypeId"><hidden value="BILL_TO_CUSTOMER"/></field>
               <field name="partyIdTo" parameter-name="partyId"><lookup target-form-name="LookupPartyName"/></field> 
               <field name="shipmentTypeId"><hidden value="${shipmentTypeId}"/></field>
               <field name="shipStatusId"><hidden value="GENERATED"/></field>
               <field name="vehicleId" title="Vehicle Number"><text-find/></field>
               <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
           </form>
           
            <form name="listSupplierPurchaseShipmentsDepot" type="list" list-name="listIt" paginate-target="FindDepotSalesShipment"
               odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
               <actions>
                   <service service-name="performFind" result-map="result" result-map-list="listIt">
                       <field-map field-name="inputFields" from-field="parameters"/>
                       <field-map field-name="entityName" value="OrderHeaderAndRolesAndShipment"/>
                       <field-map field-name="orderBy" from-field="parameters.sortField" value="-estimatedShipDate"/>
                       <field-map field-name="viewIndex" from-field="viewIndex"/>
                       <field-map field-name="viewSize" from-field="viewSize"/>
                   </service>
               </actions>
               <row-actions>
               <entity-condition entity-name="OrderItemBillingAndInvoiceAndInvoiceItem" list="invoiceIdList">
               <condition-expr field-name="orderId" operator="equals" from-field="orderId"/>
               </entity-condition>
               <entity-condition entity-name="Invoice" list="invoiceDetails">
               <condition-expr field-name="invoiceId" operator="equals" value="${invoiceIdList[0].invoiceId}"/>
               </entity-condition>
               </row-actions>
               <field name="shipmentId" ><display/></field>
                <field name="partyId"><display  description= "${groovy:org.ofbiz.party.party.PartyHelper.getPartyName(delegator, invoiceDetails[0].partyId, false);}[${invoiceDetails[0].partyId}]"/></field>
               <field name="estimatedShipDate" title="Ship Date"><display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(estimatedShipDate, &quot;dd/MM/yyyy&quot;);}"/></field>
               <field name="vehicleId" title="Vehicle Number"><display/></field>
               <field name="GatePass" widget-style="buttontext" >
                   <hyperlink target="nonRouteGatePassDepot.pdf" description="GatePass" target-window="_blank">
                      	  <parameter param-name="shipmentId" />
                      	  <parameter param-name="screenFlag" /> 
                   </hyperlink>
               </field> 
               <field name="buyerInvoice" widget-style="buttontext" id-name = "invoiceSlips">
                   <hyperlink target="buyerInvoiceDepot.pdf" description="Invoice Slips" target-window="_blank"> 	
                      	  <parameter param-name="shipmentId" /> 
                   </hyperlink>
               </field>
             	<field name="taxInvoice" widget-style="buttontext" id-name = "taxInvoice">
                   <hyperlink target="taxInvoiceDepot.pdf" description="Tax Invoice" target-window="_blank"> 	
                      	  <parameter param-name="shipmentId" /> 
                   </hyperlink>
               </field>
               <field use-when="${groovy:((security.hasEntityPermission(&quot;FGSSALE_SHIP&quot;, &quot;_CANCEL&quot;, session)))}" name="cancelShipment" widget-style="buttontext">
                   <hyperlink target="cancelShipmentDepot" description="Cancel Shipment">
       	            <parameter param-name="shipmentId"/>
                   </hyperlink>
               </field> 
    </form> 
    
          
          <form name="EditProcProducer" odd-row-style="alternate-row"  header-row-style="header-row-2" type="single" list-name ="partyDetailsMapsList" default-table-style="basic-table "   
          	target="updateProcProducer">  
          
           <field name="shedName" title="Party Id"> <display description="${partyDetailsMapsList[0].partyId}"></display></field>
         <!--   <field name="unitName" title="Unit"> <display description="${unitDetails.facilityName}[${unitDetails.facilityCode}]"></display ></field>
           <field name="facilityIdStr" title="SocietyName"><display-entity entity-name="Facility" description="${facilityName}[${facilityCode}]" key-field-name="facilityId"></display-entity></field>	-->
           <field name="groupName" title="Weaver Name"><text size="35" default-value="${partyDetailsMap.groupName}"></text></field>
           <field name="idValueStr" title="Weaver Code" parameter-name="idValue"><text size="25" maxlength="4" default-value="${partyDetailsMap.idValue}"></text></field>
           <field name="partyId"><hidden value="${partyDetailsMapsList[0].partyId}"/></field>
           <field name="update"><submit/></field>
           
          </form>
        <form name="EditProducerAccountDetails" type="single" separate-columns="true"  target="updateBankDetails" >
       		<field name="partyId"><hidden/></field>
       		<field name="finAccountId"><hidden/></field>
       		<field name="finAccountCode" title="Account No"  ><text size="20" maxlength="20"></text></field>
               <field name="finAccountName" title="Account Name" ><text size="20"></text></field>
               <field name="finAccountBranch" title="Account Branch" ><text size="20" maxlength="20"></text></field> 
       		<field name="ifscCode" title="Ifsc Code"><text size="10"></text></field>
       		<!-- <field name="disbursmentBank" title="Disbursment Bank">
       		<drop-down allow-empty="false" no-current-selected-key="${disbursment}" >
       			<entity-options description="${finAccountName}" key-field-name="finAccountId" entity-name="FinAccount">
       				 <entity-constraint name="ownerPartyId" operator="equals" value="Company"/>
       				<entity-order-by field-name="finAccountName"/> 
       				
       			</entity-options>
       			<list-options key-name="finAccoutId" list-name="finAccountList" description="${finAccountName}"/>
       		</drop-down>
       		</field> -->
       		<!-- <field name="date" title="Date"><date-time type="date" ></date-time></field> -->
       		 <field name="submitButton" title="${uiLabelMap.CommonUpdate}"><submit button-type="button"/></field>
      	</form>
      	
      	
      	 <form name="EditProducerAccountDetails" type="single" separate-columns="true"  target="updateProducerFinAccount" >
       		<field name="partyId"><hidden/></field>
       		<field name="finAccountId"><hidden/></field>
       		<field name="finAccountCode" title="Account No"  ><text size="20" maxlength="20"></text></field>
               <field name="finAccountName" title="Account Name" ><text size="20"></text></field>
               <field name="finAccountBranch" title="Account Branch" ><text size="20" maxlength="20"></text></field> 
       		<field name="ifscCode" title="Ifsc Code"><text size="10"></text></field>
       		<!-- <field name="disbursmentBank" title="Disbursment Bank">
       		<drop-down allow-empty="false" no-current-selected-key="${disbursment}" >
       			<entity-options description="${finAccountName}" key-field-name="finAccountId" entity-name="FinAccount">
       				 <entity-constraint name="ownerPartyId" operator="equals" value="Company"/>
       				<entity-order-by field-name="finAccountName"/> 
       				
       			</entity-options>
       			<list-options key-name="finAccoutId" list-name="finAccountList" description="${finAccountName}"/>
       		</drop-down>
       		</field> -->
       		<!-- <field name="date" title="Date"><date-time type="date" ></date-time></field> -->
       		 <field name="submitButton" title="${uiLabelMap.CommonUpdate}"><submit button-type="button"/></field>
      	</form>
      	
      	
      	
      	
      	
      	
      	
      	
      	
      	  <form name="ProducerIdentification" type="list" odd-row-style="alternate-row" header-row-style="header-row" target="updatePartyIdentification"
          	  default-table-style="basic-table hover-bar" separate-columns="true" list-name="partyIdentificationList">
          	  <actions>
      			<entity-condition entity-name="PartyIdentification" list="partyIdentificationList">
      			   <condition-list combine="and">
      			       <condition-expr field-name="partyId" from-field="parameters.partyId" operator="equals"/>
           			   <condition-expr field-name="partyIdentificationTypeId" value="PRODUCER_CODE" operator="not-equals"/>
      			   </condition-list>
          		</entity-condition>
      		</actions>
      		<field name="partyIdentificationTypeId" >
      		<drop-down allow-empty="true">             
      				<entity-options entity-name="PartyIdentificationType" key-field-name="partyIdentificationTypeId" description="${description}" >
      				          <entity-order-by field-name="partyIdentificationTypeId"/>
      				</entity-options>
      			</drop-down>  
      		</field>
      		<field name="partyIdentificationTypeId"><display-entity entity-name="PartyIdentificationType"  description="${description}"></display-entity></field>
      		<field name="partyId"><hidden /></field>
      		<field name="idValue" title="Number"><text size="22"></text></field>
      		<!-- <field name="issueDate" title="Issue Date"><date-time type="date"></date-time></field>
      		<field name="expiryDate" title="Expiry Date"><date-time type="date"></date-time></field> -->
      		<field name="submitButton" title="Update" separate-column="true">
                  <submit button-type="button"/></field>
              <field name="deleteLink" title="Delete" widget-style="buttontext">
                 <hyperlink also-hidden="false" description="${uiLabelMap.CommonDelete}" target="deletePartyIdentification">
                      <parameter param-name="partyId"/>
                      <parameter param-name="partyIdentificationTypeId"/>
                 </hyperlink>
              </field>
      	</form>
      	
      	
      	  <form name="createProducerIdentification" type="single" odd-row-style="alternate-row" header-row-style="header-row" target="createProducerPartyIdentification"
          	  default-table-style="basic-table hover-bar" separate-columns="true" >
          	  <actions>
      		</actions>
      		<field name="partyIdentificationTypeId" >
      		<drop-down allow-empty="false">             
      				 <entity-options entity-name="PartyIdentificationType" key-field-name="partyIdentificationTypeId" description="${description}" >
      				          <entity-order-by field-name="partyIdentificationTypeId"/>
      				</entity-options> 
      				<list-options key-name="partyIdentificationTypeId" list-name="partyIdentificationTypes" description="${description}"/>
      			</drop-down>  
      		</field>
      		<field name="partyId"><hidden /></field>
      		<field name="idValue" title="Number"><text size="22"></text></field>
      		<!-- <field name="issueDate" title="Issue Date"><date-time type="date" ></date-time></field>
      		<field name="expiryDate" title="Expiry Date"><date-time type="date"></date-time></field> -->
      		<field name="submitButton" title="Create" separate-column="true">
                  <submit button-type="button"/></field>
      	</form>
      	
      	
      <form name="CattleInformation" odd-row-style="alternate-row" header-row-style="header-row-2" type="list" default-table-style="basic-table " 
       		 list-name="LoomDetails" >
       		 <row-actions>
					<entity-condition entity-name="SchemeProductCategory" list="SchemeCatQty">
					<condition-expr field-name="productCategoryId" from-field="loomTypeId"/>
					</entity-condition>
			</row-actions>
       		<field name="partyId"><hidden/></field>     
         	<field name="loomTypeId" title="Weaver Type"><display></display></field>
         	<field name="loomTypeId" title="Loom Type"><display-entity entity-name="ProductCategory" key-field-name="productCategoryId" description="${description}"/></field>
         	<field name="quantity" title="Number Of Looms"><display></display></field>
         	<field name="quotaPerLoom" title="Total Eligibility"><display description="${(SchemeCatQty[0].maxQty)*(quantity)}"></display></field>
        </form>
        
        <form name="CreateCattleInformation" odd-row-style="alternate-row" header-row-style="header-row-2" type="single" 
     	     			list-name="LoomDetails" default-table-style="basic-table" target="editPartyLooms" >    
     	       	<field name="partyId"><hidden/></field>
     	       	<field name="loomTypeId" title="Loom Type">
     	       		<drop-down allow-empty="false">
     	       			<entity-options description="${description}" entity-name="LoomType"></entity-options>
     	       		</drop-down>
     	       	</field>
     	       	<field name="numberOfCattle" title="Number Of Looms"><text size="10" ></text> </field>
     	       	<field name="submit" title="update"><submit/></field>
     	      </form>
     	      <form name="ProducerProfilePicture"  type="upload" target="createWeaverContent" 	header-row-style="header-row">
				<field name="imageWatermark" use-when="imageUrl != null" title="${uiLabelMap.CommonImage}" widget-area-style="img-src-de" ><image value="${imageUrl}" width="150"/></field>
	      
	            <field name="partyId" map-name="parameters"><hidden/></field>  
		        <field name="partyContentTypeId"><hidden value="INTERNAL"/></field>
		        <field name="dataResourceTypeId"><hidden value="IMAGE_OBJECT"/></field>
		        
		        <field name="contentTypeId"><hidden value="PROFILE_PIC"/></field>
		        <field name="statusId"><hidden value="CTNT_AVAILABLE"/></field>
		        <field name="mimeTypeId"><hidden value="image/jpeg"/></field>
		        
		        <field name="uploadedFile" title="${uiLabelMap.CommonUpload}"><file/></field>
		        <field name="dataCategoryId"><hidden value="PROFILE_PIC"/></field>
		        <field name="isPublic"><hidden value="N"/></field>
		             
		        <field name="createButton" title="Upload Pic"><submit button-type="button"/></field>
	      
	      </form> 
	    
       <form name="FindProcurementProducer" odd-row-style="alternate-row" target="single"
   		 header-row-style="header-row" type="single"  default-table-style="basic-table hover-bar" separate-columns="true" >	
           <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
           <field name="shedId" title="Shed Code">
           	<drop-down>
           		<entity-options description="${facilityName}" entity-name="Facility" key-field-name="facilityId">
           			<entity-constraint name="facilityTypeId" operator="equals" value="SHED"/>
           		</entity-options>
           	</drop-down>
           </field>
           <field name="partyIdentificationTypeId" ><hidden value="PRODUCER_CODE"/></field>
           <field name="unitCode" title="Unit Code"><text  size="15"></text></field>
           <field name="facilityCode" title="Society Code"><text  size="15"></text></field>
           <field name="producerCode" title="Producer Code"><text  size="15"></text></field>
           <field name="producerName" title="Producer Name"><text  size="15"></text></field>
           <field name="submit" title="Find"><submit/></field>
           
       </form>
  <!--  <form name="ListDepotSalesProducer" type="list" list-name="producerDetails" paginate-target="FindProcProducer"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        
         <actions>
        	<service service-name="performFind" result-map="result" result-map-list="producersList">
                <field-map field-name="inputFields" from-field="parameters"/>
                <field-map field-name="entityName" value="FacilityPartyPartyGroupAndIdentification"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
            </service>
        </actions> 
        <row-actions>
        	<set field="unitDetails" value="${groovy:import org.ofbiz.base.util.*; return (in.vasista.vbiz.procurement.ProcurementNetworkServices.getCenterDtails(dispatcher.getDispatchContext() ,UtilMisc.toMap(&quot;centerId&quot;,facilityId))).get(&quot;unitFacility&quot;);}" type="Object"/>
			<set  field="unitName" value="${groovy: unitDetails.get(&quot;facilityName&quot;)}[${groovy: unitDetails.get(&quot;facilityCode&quot;)}]"/>
			<set field="shedDetails" value="${groovy:import org.ofbiz.base.util.*; return (in.vasista.vbiz.procurement.ProcurementNetworkServices.getCenterDtails(dispatcher.getDispatchContext() ,UtilMisc.toMap(&quot;centerId&quot;,facilityId))).get(&quot;shedFacility&quot;);}" type="Object"/>
			<set  field="shedName" value="${groovy: shedDetails.get(&quot;facilityName&quot;)}"/>
        </row-actions>
        <field name="idValue" title="Producer">
           <hyperlink target="EditProcProducer?partyId=${partyId}" description="${groupName}[${idValue}]">
        </hyperlink></field>
        <field name="shedName" title="Shed"><display></display></field>
        <field name="unitName" title="Unit"><display></display></field>
        <field name="facilityId" title="Society"><display-entity entity-name="Facility" description="${facilityName}[${facilityCode}]" key-field-name="facilityId"></display-entity> </field>
    </form> -->
       
       <form name="FindDepotSalesProducer" odd-row-style="alternate-row" target="FindProcProducer"
      		 header-row-style="header-row" type="single"  default-table-style="basic-table hover-bar" separate-columns="true" >	
              <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
              
              <field name="partyId" title="Weaver Id"><text  size="15"></text></field>
              <field name="groupName" title="Weaver Name"><text  size="15"></text></field>
             
           <field name="branchId" title="${uiLabelMap.Branch}">
              <drop-down allow-empty="true">
                  <list-options key-name="payToPartyId" list-name="formatList" description="${productStoreName}"/>
              </drop-down>
        </field>
              <field name="passbookNumber" title="Passbook Number"><text  size="15"></text></field>
              <field name="roleTypeId" title="Role Type Id"><hidden value="EMPANELLED_CUSTOMER"/></field>
              <field name="submit" title="Find"><submit/></field>
              
          </form>
       <form name="ListDepotSalesProducer" type="list" list-name="listIt" odd-row-style="alternate-row" 
				default-entity-name="PartyRoleDetailAndPartyDetail" default-table-style="basic-table hover-bar" >
				
				 <field name="partyId" title="Weaver Id" widget-style="buttontext" id-name = "partyId">
             		<hyperlink target="EditProcProducer" description="${partyId}" target-window="_blank"> 	
                	  <parameter param-name="partyId" /> 
             		</hyperlink>
         		 </field>
				 <field name="groupName" title="Weaver Name"><display/></field> 
				 <field name="storeName" title="Branch Name"><display/></field> 
				<field name="passbookId" title="Passbook Number"><display/></field> 
			    </form>
      <form name="FindOrderPaymentSeach" title="" type="single" target="orderPayment" header-row-style="header-row" default-table-style="basic-table">
        <field name="salesChannelEnumId" ><hidden value="BRANCH_CHANNEL"/></field>  
        <!-- <field name="orderTypeId">
           <drop-down no-current-selected-key="SALES_ORDER">
              <entity-options description="${description}" entity-name="OrderType" key-field-name="orderTypeId">
                 <entity-constraint name="parentTypeId" operator="like" value="%SALES%"/>
              </entity-options>
           </drop-down>
        </field> -->
        <field name="partyIdFrom" title="${uiLabelMap.Branch}">
            <drop-down allow-empty="true">
               <list-options key-name="payToPartyId" list-name="formatList" description="${productStoreName}"/>
            </drop-down>
        </field>
        <field name="partyId" title="${uiLabelMap.Customer}"><lookup target-form-name="LookupBranchCustomers" target-parameter="partyIdFrom"/></field> 
        <field name="orderId" title="${uiLabelMap.IndentId}"><text/></field>
        <field name="orderNo" title="sequenceId"><text-find/></field>
         <field title="Indent From Date" name="estimatedDeliveryDate"><date-time/></field>
        <field title="Indent Thru Date" name="estimatedDeliveryThruDate"><date-time/></field>
         <field name="indentDateSort">
	        	<drop-down allow-empty="false">
	        		<option key="-orderDate" description="Descending"/>
	        		<option key="orderDate" description="Ascending"/>
	        	</drop-down>
        </field>
        <!-- <field name="sequenceId"><text-find/></field> -->
      <!--  <field name="productId"><lookup target-form-name="LookupProduct"/></field> -->
        <!-- <field name="orderTypeId"><hidden value="PURCHASE_ORDER"/></field> -->
        <field name="statusId">
	        	<drop-down allow-empty="true">
	        		<option key="ORDER_CREATED" description="Created"/>
	        		<option key="ORDER_APPROVED" description="Approved"/>
	        		<option key="ORDER_CANCELLED" description="Cancelled"/>
	        		<option key="ORDER_SUSPENDED" description="Suspended"/>
	        	</drop-down>
        </field>
         <field name="findPoFlag"><hidden value="Y"/></field>  
     	    <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    
    <form name="FindIndentOrderPaymentSeach" title="" type="single" target="IndentPortalOrderPayment" header-row-style="header-row" default-table-style="basic-table">
        <field name="salesChannelEnumId" ><hidden value="BRANCH_CHANNEL"/></field>  
        <!-- <field name="orderTypeId">
           <drop-down no-current-selected-key="SALES_ORDER">
              <entity-options description="${description}" entity-name="OrderType" key-field-name="orderTypeId">
                 <entity-constraint name="parentTypeId" operator="like" value="%SALES%"/>
              </entity-options>
           </drop-down>
        </field> -->
         <field name="partyId" title="${uiLabelMap.Customer}"><lookup target-form-name="LookupPartyName"/></field> 
       <field name="branchId" title="${uiLabelMap.Branch}">
              <drop-down allow-empty="true">
                  <list-options key-name="payToPartyId" list-name="formatList" description="${productStoreName}"/>
              </drop-down>
        </field>
        <field name="orderId" title="${uiLabelMap.IndentId}"><text/></field>
        <field name="orderNo" title="sequenceId"><text-find/></field>
        <field title="${uiLabelMap.IndentDate}" name="estimatedDeliveryDate"><date-time/></field>
        
        <!-- <field name="sequenceId"><text-find/></field> -->
      <!--  <field name="productId"><lookup target-form-name="LookupProduct"/></field> -->
        <!-- <field name="orderTypeId"><hidden value="PURCHASE_ORDER"/></field> -->
        <field name="statusId" title="${uiLabelMap.Status}">
	        	<drop-down allow-empty="true">
	        		<option key="ORDER_CREATED" description="Created"/>
	        		<option key="ORDER_APPROVED" description="Approved"/>
	        		<option key="ORDER_CANCELLED" description="Cancelled"/>
	        		<option key="ORDER_SUSPENDED" description="Suspended"/>
	        	</drop-down>
        </field>
         <field name="findPoFlag"><hidden value="Y"/></field>  
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    
    <form name="FindShipmentReceiptDepotTrans" title="" type="single" target="${targetRequest}" header-row-style="header-row" default-table-style="basic-table">
        <field name="datetimeReceived"><date-find/></field>
        <field name="productId"><text-find/></field>
        <field name="receiptId" title="GRN Item No"><text-find/></field>
        <field name="statusId">
        	<drop-down allow-empty="true"   >
        		<entity-options description="${description}" entity-name="StatusItem" >
        			<entity-constraint name="statusTypeId" operator="equals" value="RECEIPT_STATUS"/>
        		</entity-options>
        	</drop-down>
        </field>
        <field name="shipmentId" title="GRN Shipment Id"><text-find/></field>
        <field name="orderId" title="PO Order"><text-find/></field>
        <field name="orderNo" title="sequenceId"><text-find/></field>
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    
   <form name="listMaterialShipmentReceiptDepotTrans" type="list" list-name="listIt" paginate-target="${targetRequest}"
        odd-row-style="alternate-row" header-row-style="header-row"  target="sendReceiptQtyForQC" default-table-style="basic-table hover-bar">
      
        <row-actions>
        	<entity-one value-field="product" entity-name="Product">
				<field-map field-name="productId" from-field="productId"/>
			</entity-one>
			<entity-one value-field="uom" entity-name="Uom">
				<field-map field-name="uomId" from-field="product.quantityUomId"/>
			</entity-one>
			<set field="dec" from-field="uom.description"/>
        </row-actions>
      	<field name="receiptId" title="GRN Item No">
      		<display/>
      	</field>
      	<field name="productId" title="Code- Name [UOM]">
      		<display-entity entity-name="Product" description="${productId} ${description}[${dec}]"/>
      	</field>
        <field name="datetimeReceived" title="Received Date"><display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(datetimeReceived, &quot;dd-MMM-yyyy&quot;);}"/></field>
        <field name="shipmentId" title="GRN ShipmentId"><display/></field>
       <field name="orderId" title="PO No"><display/></field> 
        <field name="statusId" title="Status">
        	<display-entity entity-name="StatusItem" description="${description}"/>
        </field>
      	<field name="quantityAccepted" title="Quantity"><display/></field>
      	<field name="quantityRejected" title="Qty Rejected"><display/></field>
      	<field name="receivedByUserLoginId" title="Entry by"><display/></field>	
      	
        <field name="statusIdTo"  > <hidden  value="SR_QUALITYCHECK" /> </field>
         
      	<!-- <field name="SendtoQC" use-when="statusId.equals(&quot;SR_RECEIVED&quot;)"  title="Send to QC" widget-style="buttontext">
             <hyperlink  target-type="plain" description="Send to QC"  target="javascript:showQCApprovalQTip('${receiptId}');"></hyperlink>
        </field>  -->
    </form>
    
    <form name="FindDepotTransMaterialShipment" title="" type="single" target="${targetRequest}" header-row-style="header-row" default-table-style="basic-table">
        
        <field name="shipmentTypeId"><hidden value="DEPOT_SHIPMENT"/></field>
        <field name="estimatedShipDate" title="GRN Shipment Date"><date-find default-option-from="sameDay"  /></field>
        <field name="primaryOrderId" title="PO no"><text-find/></field>
        <field name="orderNo" title="sequenceId"><text-find/></field>
        <field name="shipmentId" title="GRN Shipment Id"><text-find/></field>
        <field name="partyId" title="Party"><lookup target-form-name="LookupPartyName"/></field>
<!--         <field name="vehicleId" title="Vehicle No"><text-find/></field> -->
        <field name="statusId" title="Status"  >
        <drop-down allow-empty="true" > 
        <option key="SHIPMENT_CANCELLED" description="Cancelled" > </option>
        <option key="GENERATED" description="Generated"  ></option>
        </drop-down>
        </field>
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    
    <form name="listDepotTransMaterialShipments" type="list" list-name="listIt" paginate-target="${targetRequest}"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
        </actions>
        <row-actions>
        	<entity-condition entity-name="Invoice" list="invoices">
        		<condition-list combine="and">
        			<condition-expr field-name="shipmentId" from-field="shipmentId"/>
        			<condition-expr field-name="statusId" operator="not-equals" value="INVOICE_CANCELLED"/>
        		</condition-list>
        	</entity-condition>
        	<set field="invSize" value="${groovy: invoices.size();}"/>
        	<entity-condition entity-name="ShipmentReceipt" list="shipmentReceiptList">
        		<condition-list combine="and">
        			<condition-expr field-name="shipmentId" from-field="shipmentId" />
        			<condition-expr field-name="statusId" operator="equals" value="SR_RECEIVED"/>
        		</condition-list>
        	</entity-condition>
        	<set field="shipmentReceiptSize" value="${groovy: shipmentReceiptList.size();}"/>
        	<entity-condition entity-name="ShipmentReceipt" list="invoiceReceiptList">
        		<condition-list combine="and">
        			<condition-expr field-name="shipmentId" from-field="shipmentId" />
        			<condition-expr field-name="statusId" operator="equals" value="SR_ACCEPTED"/>
        		</condition-list>
        	</entity-condition>
        	<set field="invoiceReceiptSize" value="${groovy: invoiceReceiptList.size();}"/>
        </row-actions>
      	<field name="shipmentId" widget-style="buttontext h3" title="GRN Shipment Id">
      		<hyperlink target="MaterialShipmentOverview" description="${shipmentId}" target-window="_blank" >
                <parameter param-name="shipmentId"/>
            </hyperlink>
      	</field>
        <field name="estimatedShipDate" title="GRN Ship Date"><display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(estimatedShipDate, &quot;dd MMMMM, yyyy&quot;);}"/></field>
        <field name="salesOrder" title="PO No" widget-style="buttontext">
        	<hyperlink target="POoverview" description="${salesOrder}" target-window="_blank">
      			<parameter param-name="orderId" value="${primaryOrderId}"/>
      		</hyperlink>
        </field>
        <field name="partyId">
        <display-entity entity-name="PartyNameView" key-field-name="partyId" description="${firstName} ${middleName} ${lastName} ${groupName}">
                <sub-hyperlink description="[${partyId}]" target="/partymgr/control/viewprofile" target-type="inter-app">
                    <parameter param-name="partyId" from-field="partyId"/>
                </sub-hyperlink>
            </display-entity>
        </field>
<!--         <field name="vehicleId" title="Vehicle No"><display/></field> -->
        <field name="depoPartyName" title="Vehicle No"><hidden/></field>
        <field name="partyIdTo" title="Vehicle No"><hidden/></field>
        <field name="statusId" title="${uiLabelMap.CommonStatus}">
        	<display-entity entity-name="StatusItem" description="${description}"/>
        </field>
      <!--   <field name="linkGrnWithPO" widget-style="buttontext" title="Link GRN With PO" use-when="&quot;${primaryOrderId}&quot;==&quot;&quot; &amp;&amp;(!statusId.equals(&quot;SHIPMENT_CANCELLED&quot;))&amp;&amp; ${groovy:((security.hasEntityPermission(&quot;DEPOTSALES&quot;, &quot;_RAISE_GRN&quot;, session)))}" >
            <hyperlink target-type="plain" target="javascript:showLinkGrnWithPOForm('${shipmentId}','${partyId}');" description="Link GRN With PO">
            </hyperlink>
        </field> --> 
        <field name="cancelGRN" widget-style="buttontext" title="Cancel GRN" use-when="(&quot;${invSize}&quot; == &quot;0&quot;)&amp;&amp;(invoiceReceiptSize.equals(&quot;0&quot;))&amp;&amp;(!statusId.equals(&quot;SHIPMENT_CANCELLED&quot;))&amp;&amp; ${groovy:((security.hasEntityPermission(&quot;DEPOTSALES&quot;, &quot;_RAISE_GRN&quot;, session)))}">
            <hyperlink target="CancelDepotTransGrnShipment" description="Cancel GRN">
                <parameter param-name="shipmentId"/>
            </hyperlink>
        </field>
        <field name="report" widget-style="buttontext"  use-when="(!statusId.equals(&quot;SHIPMENT_CANCELLED&quot;))">
            <hyperlink target="MRRreportDepotSales.pdf" description="Report" target-window="_blank">
             	<parameter param-name="shipmentId" value="${shipmentId}"/>
             	<parameter param-name="orderId" value="${primaryOrderId}"/>
               	<parameter param-name="datetimeReceived" value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(estimatedShipDate, &quot;dd-MMM-yyyy&quot;);}"/>
            </hyperlink>
        </field>
         <field name="SendtoQC" use-when="!shipmentReceiptSize.equals(&quot;0&quot;)"  title="Accept Shipment" widget-style="buttontext">
             <hyperlink  target-type="plain" description="Accept Shipment"  target="javascript:QCApprovalQTip('${shipmentId}','${partyIdTo}','${depoPartyName}');"></hyperlink>
        </field>
        <field name="raiseInvoice" widget-style="buttontext" title="Raise Invoice" use-when="(&quot;${invSize}&quot; == &quot;0&quot;)&amp;&amp;(!invoiceReceiptSize.equals(&quot;0&quot;))&amp;&amp;(!statusId.equals(&quot;SHIPMENT_CANCELLED&quot;))&amp;&amp;${groovy:((security.hasEntityPermission(&quot;DEPOTSALES&quot;, &quot;_RAISE_INVOICE&quot;, session)))}">
            <hyperlink target="DepotTransMaterialInvoiceInit" description="Invoice">
                <parameter param-name="shipmentId"/>
            </hyperlink>
        </field> 
    </form>   
    
    <form name="FindPhysicalInventoryDepotForSale" title="" type="single" target="DepotSalesInventorySales" header-row-style="header-row" default-table-style="basic-table">
        
        <field name="shipmentTypeId"><hidden value="MATERIAL_SHIPMENT"/></field>
        <field name="estimatedShipDate" title="GRN Shipment Date"><date-find default-option-from="sameDay"  /></field>
<!--         <field name="primaryOrderId" title="PO no"><text-find/></field> -->
        <field name="shipmentId" title="GRN Shipment Id"><text-find/></field>
        <field name="partyId" title="Party"><lookup target-form-name="LookupPartyName"/></field>
        <field name="productId" title="Product"><lookup target-form-name="LookupProduct" size="15" /></field>
        <field name="facilityId" title="Facility"><lookup target-form-name="ProductionLookupFacility"></lookup></field>
        <!-- <field name="facilityId" > <hidden value="BRANCH1"/></field> -->
    <!--     <field name="vehicleId" title="Vehicle No"><text-find/></field> -->
           <field name="statusId" title="${uiLabelMap.CommonStatus}"><hidden value="GOODS_RECEIVED"/></field>
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    <form name="ListPhysicalInventoryDepotForSale" type="list" list-name="physicalInventory" use-row-submit="true"
        odd-row-style="alternate-row" default-table-style="basic-table hover-bar" separate-columns="true">
       
        <field name="shipmentId" title="Shipment Id"><display/></field>
        <field name="shipmentTypeId" title="shipment Type"><display-entity entity-name="ShipmentType" key-field-name="shipmentTypeId" description="${description}"></display-entity></field>
        <field name="facilityName" title="Depot"><display></display></field>
        <field name="partyName" title="Supplier"><display></display></field>
        <field name="fromPartyId"><hidden/></field>
        <field name="productStoreId"><hidden/></field>
        <field name="estimatedShipDate" title="Received Date"><display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(estimatedShipDate, &quot;dd/MM/yyyy&quot;);}"/></field>
        <field name="inventoryItemId" > <hidden/></field>
       <!--  <field name="inventoryItemId" title="Inventory Id" widget-style="buttontext"><display></display></field> -->
        <field name="productId" widget-style="buttontext" title="Product Name">
        	<display-entity entity-name="Product" description="${description}"></display-entity>
        </field>
        <field name="quantityOnHandTotal" title="Stock Available"><display/></field>
        <field name="unitCost"><hidden/></field>
        <field name="Sale" title="Sale Indent" widget-style="buttontext">
             <hyperlink  target-type="plain" description="Create Sale Indent"  target="javascript:showInventorySaleQTip('${productId}','${quantityOnHandTotal}','${unitCost}','${inventoryItemId}','${productStoreId}');"></hyperlink>
        </field>
        <!-- <field name="Transfer" title="Transfer" widget-style="buttontext">
	             <hyperlink  target-type="plain" description="Transfer"  target="javascript:showInventoryTransferQTip('${productId}','${quantityOnHandTotal}','${unitCost}','${inventoryItemId}');"></hyperlink>
        </field> -->
    </form>
    <form name="FindPhysicalInventoryDepotTransfer" title="" type="single" target="DepotSalesInventoryTransefer" header-row-style="header-row" default-table-style="basic-table">
        
        <field name="shipmentTypeId"><hidden value="MATERIAL_SHIPMENT"/></field>
        <field name="estimatedShipDate" title="GRN Shipment Date"><date-find default-option-from="sameDay"  /></field>
        <field name="primaryOrderId" title="PO no"><text-find/></field>
        <field name="shipmentId" title="GRN Shipment Id"><text-find/></field>
        <field name="partyId" title="Party"><lookup target-form-name="LookupPartyName"/></field>
        <field name="productId" title="Product"><lookup target-form-name="LookupProduct" size="15" /></field>
        <field name="facilityId" title="Facility"><lookup target-form-name="ProductionLookupFacility"></lookup></field>
        <!-- <field name="facilityId" > <hidden value="BRANCH1"/></field> -->
        <!-- <field name="vehicleId" title="Vehicle No"><text-find/></field> -->
        <field name="statusId"><hidden value="GENERATED"/></field>
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    <form name="ListPhysicalInventoryDepotTransfer" type="list" list-name="physicalInventory" use-row-submit="true"
        odd-row-style="alternate-row" default-table-style="basic-table hover-bar" separate-columns="true">
       
        <field name="shipmentId" title="Shipment Id"><display/></field>
        <field name="shipmentTypeId" title="shipment Type"><display-entity entity-name="ShipmentType" key-field-name="shipmentTypeId" description="${description}"></display-entity></field>
        <field name="fromPartyId" title="From Party"><hidden/></field>
        <field name="facilityId" title="facilityId"><hidden/></field>
        <field name="facilityName" title="facilityName"><hidden/></field>
        <field name="partyName" title="Party"><display></display></field>
        <field name="estimatedShipDate" title="Received Date"><display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(estimatedShipDate, &quot;dd/MM/yyyy&quot;);}"/></field>
        <field name="inventoryItemId" > <hidden/></field>
       <!--  <field name="inventoryItemId" title="Inventory Id" widget-style="buttontext"><display></display></field> -->
        <field name="productId" widget-style="buttontext" title="Product Name">
        	<display-entity entity-name="Product" description="${description}"></display-entity>
        </field>
        <field name="productName"><hidden/></field>
        <field name="quantityOnHandTotal" title="Stock Available"><display/></field>
        <field name="unitCost"><hidden/></field>
        <field name="Transfer" title="Transfer" widget-style="buttontext">
	             <hyperlink  target-type="plain" description="Transfer"  target="javascript:showInventoryTransferQTip('${productId}','${quantityOnHandTotal}','${unitCost}','${inventoryItemId}','${facilityName}','${facilityId}','${productName}');"></hyperlink>
        </field>
    </form>
          <form name="ViewFacilityGeoPointSearch" odd-row-style="alternate-row" header-row-style="header-row" type="single" 
    	default-table-style="basic-table hover-bar" separate-columns="true" target="ViewFacilityGeoPoint">
    	<field name="hideSearch"><hidden value="Y" /></field>
		<field name="noConditionFind"><hidden value="N"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="facilityId" title="BO/RO-ID's" position="1"><lookup target-form-name="LookupFacility"/></field>
<!--         <field name="routeId2" title="Addtl. Route Id (Optional)" position="2"><lookup target-form-name="LookupFacility"/></field> -->
      <!--   <field name="categoryTypeEnum" title="${uiLabelMap.ProductFacilityCategoryType}">
            <drop-down allow-empty="true">
                <entity-options entity-name="Enumeration" description="${description}" key-field-name="enumId">
                    <entity-constraint name="enumTypeId" value="BOOTH_CAT_TYPE"/>
                    <entity-order-by field-name="sequenceId"/>
                </entity-options>
            </drop-down>
        </field> --> 
       	<field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit/></field>       
    </form> 
	<form name="FindByProduct" type="single" target="FindYarnProducts" title="" default-map-name="product"
        header-row-style="header-row" default-table-style="basic-table">
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="productId" title="${uiLabelMap.ProductProductId}"><text-find/></field>
        <field name="productName" title="Product Name"><text-find/></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit">
            <submit button-type="button"/>
        </field>
    </form>
    <form name="ListByProducts" list-name="listIt" target="" title="" type="list" paginate-target="FindYarnProducts"
        odd-row-style="alternate-row" default-table-style="basic-table hover-bar" header-row-style="header-row-2">
        <actions>
            <set field="entityName" value="Product"/>
            <service service-name="performFind" result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="requestParameters"/>
                <field-map field-name="entityName" from-field="entityName"/>
                <field-map field-name="orderBy" from-field="parameters.sortField"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
            </service>
        </actions>
        <field name="productId" sort-field="true"><display/></field>
        <field name="productName" sort-field="true"><display/></field>
        <field name="primaryProductCategoryId" sort-field="true"><display/></field>
        <field name="description" sort-field="true"><display/></field>
    </form> 
    <form name="FindFacilityProducts" odd-row-style="alternate-row" header-row-style="header-row" type="single"
    	default-table-style="basic-table hover-bar" separate-columns="true">    	   	
    	<field name="hideSearch"><hidden value="N"/></field>
        <field name="facilityId" title="Depot"><lookup target-form-name="ProductionLookupFacility"></lookup></field>
        <field name="productId" title="Product"><lookup target-form-name="LookupProduct"></lookup></field>
       	<field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit/></field>       
    </form>
     <form name="FindBranchIncomingAdvancesReceived" type="single" target="BranchIncomingAdvancesReceived" header-row-style="header-row" default-table-style="basic-table">
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="paymentId"><text-find ignore-case="true"/></field>
        <field name="comments"><text-find ignore-case="true"/></field>
        <field name="paymentTypeId" position="1">
            <drop-down allow-empty="true">
                <entity-options entity-name="PaymentType" description="${description}">
                    <entity-constraint name="parentTypeId" value="ADVANCES_PAYIN" />
                </entity-options>
            </drop-down>
        </field>
        <field name="statusId" title="${uiLabelMap.CommonStatus}" position="2">
            <drop-down allow-empty="true">
                <entity-options description="${description}" entity-name="StatusItem">
                    <entity-constraint name="statusTypeId" operator="equals" value="PMNT_STATUS"/>
                    <entity-order-by field-name="description"/>
                </entity-options>
            </drop-down>
        </field>
        <field position="1" name="partyIdFrom"><lookup target-form-name="LookupPartyName"/></field>
        <field position="2" name="partyIdTo"><lookup target-form-name="LookupPartyName"/></field>
        <field name="paymentDate"><date-find type="date" default-option-from="sameDay"/></field>
        <field position="1" name="amount"><range-find></range-find></field>
        <field name="paymentRefNum"><text-find ignore-case="true"/></field>
        <field name="parentTypeId"><hidden value="ADVANCES_PAYIN"/></field>
        <field name="searchButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    
      <form name="BranchNewIncomingAdvanceReceipt" type="single" target="BranchcreateNewIncomingAdvanceReceipt" default-map-name="payment"
        header-row-style="header-row" default-table-style="basic-table" >
        <field name="statusId"><hidden value="PMNT_NOT_PAID"/></field>
           <field name="paymentPurposeType"><hidden value="NHDC_RECEIPT"></hidden></field>
        <field name="currencyUomId"><hidden value="${defaultOrganizationPartyCurrencyUomId}"/></field>
        <field position="1" name="organizationPartyId" parameter-name="partyIdTo">
             <drop-down allow-empty="true">
                  <list-options key-name="payToPartyId" list-name="formatList" description="${productStoreName}"/>
              </drop-down>
        </field>
        <field name="partyIdFrom" position="2" required-field="true"><lookup target-form-name="LookupPartyName"/></field>
        <field name="paymentTypeId" title="${uiLabelMap.AccountingPaymentType}" position="1">
            <drop-down allow-empty="false">
                <entity-options description="${description}" entity-name="PaymentType">
                    <entity-constraint name="parentTypeId" value="ADVANCES_PAYIN"/>
                    <entity-order-by field-name="description"/>
                </entity-options>
            </drop-down>
        </field>
                <!-- <field position="2" name="paymentMethodTypeId" event="onchange" action="javascript:paymentFieldsOnchange();">
            <drop-down allow-empty="false">
                <entity-options entity-name="PaymentMethodType"  description="${description}">
                	<entity-constraint name="paymentMethodTypeId" operator="like" value="%_PAYIN%"/>
                    <entity-order-by field-name="description"/>                   
                </entity-options>
            </drop-down>
        </field> -->
        <field position="2" name="paymentMethodTypeId" title="${uiLabelMap.FormFieldTitle_paymentMethodTypeId}" event="onchange" action="javascript:paymentFieldsOnchange();" >
            <drop-down allow-empty="true">
                 <list-options list-name="paymentMethodTypeList" key-name="paymentMethodTypeId" description="${description}"/>
            </drop-down>
        </field>
        <field name="paymentRefNum" position="1" title="${uiLabelMap.paymentRefNum}"><text/></field>
        <field name="paymentDate" position="2" title="${uiLabelMap.effectiveDate}"><date-time type="timestamp"></date-time></field>
        <field name="issuingAuthority" position="2" title="${uiLabelMap.issuingAuthority}"><text></text></field>       
        <field name="amount" position="1" required-field="true"><text/></field>
        <field name="comments" position="2"><text size="70"/></field>
        <field name="isDepositWithDrawPayment"><hidden value="Y"/></field>
        <field name="finAccountTransTypeId"><hidden value="DEPOSIT"/></field>
        <field position="1" name="createButton" widget-style="smallSubmit">
            <submit button-type="button"/>
        </field>
    </form>
    
    
    <form name="BranchNewIncomingAdvancesRefund" type="single" target="BranchNewIncomingAdvancesRefund" header-row-style="header-row" default-table-style="basic-table">
        <actions>
            <entity-one entity-name="PartyGroup" use-cache="true" value-field="partyGroup">
                <field-map field-name="partyId" from-field="parameters.partyIdFrom"/>
            </entity-one>
            <set field="partyGroupName" from-field="partyGroup.groupName"/>
            <set field="paymentPartyId" from-field="parameters.partyIdFrom" default-value="${defaultOrganizationPartyId}"/>
            <entity-condition entity-name="PaymentMethodAndFinAccount" list="paymentMethodAndFinAccounts">
                <condition-list>
                    <condition-expr field-name="partyId" from-field="paymentPartyId"/>
                    <condition-expr field-name="statusId" operator="not-equals" value="FNACT_MANFROZEN"/>
                    <condition-expr field-name="statusId" operator="not-equals" value="FNACT_CANCELLED"/>
                </condition-list>
            </entity-condition>
        </actions>
        <field name="statusId" title="${uiLabelMap.CommonStatus}"><hidden value="PMNT_RECEIVED"/></field>
        <field name="parentTypeId"><hidden value="ADVANCES_PAYIN"/></field>
        <field position="1" name="partyIdTo" title="OrganizationPartyId">
             <drop-down allow-empty="true">
                  <list-options key-name="payToPartyId" list-name="formatList" description="${productStoreName}"/>
              </drop-down>
        </field>
        <field name="partyIdFrom" position="2"><lookup target-form-name="LookupPartyName"/></field>
        <field name="paymentTypeId" title="${uiLabelMap.AccountingPaymentType}" position="1">
            <drop-down allow-empty="true">
                <list-options list-name="paymentTypes" key-name="paymentTypeId" description="${description}"/>
            </drop-down>
        </field>
        <field name="searchButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    
    
     <form name="BranchlistPaymentsNotApplied" type="list" list-name="refundAvblPaymentList"  title=""
        odd-row-style="alternate-row" default-table-style="basic-table hover-bar">
        <field name="paymentId"><display/></field>
        <field name="paymentTypeId"><display/></field>
        <field name="refundPaymentTypeId"><hidden/></field>
        <field name="paymentMethodTypeId"><display/></field>
        <field name="partyIdFrom"><display/></field>
        <field name="partyIdTo"><display/></field>
        <field name="amount"><display type="currency" currency="${currencyUomId}"/></field>
        <field name="availableAmtToRefund" title="Avbl Amt to Refund"><display type="currency" currency="${currencyUomId}"/></field>
        <field name="refundButton" title="Refund" widget-style="buttontext">
            <hyperlink  target-type="plain" description="Refund"  target="javascript:showPaymentRefundQTip('${paymentId}', '${partyIdTo}', '${partyIdFrom}', '${availableAmtToRefund}', '${refundPaymentTypeId}', 'refundAdvanceUnappliedPayments', 'N', 'WITHDRAWAL');"></hyperlink>
        </field>
    </form>
    
      <form name="BranchFindIncomingAdvancesRefund" type="single" target="BranchIncomingAdvancesRefund" header-row-style="header-row" default-table-style="basic-table">
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="paymentId"><text-find ignore-case="true"/></field>
        <field name="comments"><text-find ignore-case="true"/></field>
        <field name="paymentTypeId" position="1">
            <drop-down allow-empty="true">
                <entity-options entity-name="PaymentType" description="${description}">
                    <entity-constraint name="parentTypeId" value="REFUND_PAYOUT"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="statusId" title="${uiLabelMap.CommonStatus}" position="2">
            <drop-down allow-empty="true">
                <entity-options description="${description}" entity-name="StatusItem">
                    <entity-constraint name="statusTypeId" operator="equals" value="PMNT_STATUS"/>
                    <entity-order-by field-name="description"/>
                </entity-options>
            </drop-down>
        </field>
        <field position="1" name="partyIdFrom"><lookup target-form-name="LookupPartyName"/></field>
        <field position="2" name="partyIdTo"><lookup target-form-name="LookupPartyName"/></field>
        <field name="paymentDate"><date-find type="date" default-option-from="sameDay"/></field>
        <field position="1" name="amount"><range-find></range-find></field>
        <field name="paymentRefNum"><text-find ignore-case="true"/></field>
        <field name="parentTypeId"><hidden value="REFUND_PAYOUT"/></field>
        <field name="searchButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    
    <form name="ListShipmentContents" type="list" separate-columns="false"
        odd-row-style="alternate-row" default-table-style="basic-table hover-bar">
        <actions>
            <entity-and entity-name="ShipmentContentDetail">
                <field-map field-name="shipmentId"/>
                <order-by field-name="-fromDate"/>
            </entity-and>
        </actions>
        
        <row-actions>
            <entity-one entity-name="DataResource" value-field="dataResource"/>
            <entity-one entity-name="DataCategory" value-field="dataCategory">
                <field-map field-name="dataCategoryId" from-field="dataResource.dataCategoryId"/>            
            </entity-one> 
            <set field="dataCategoryId" from-field="dataCategory.categoryName"/>
        </row-actions>
        <field name="shipmentId"><hidden/></field>
        <field name="contentId"><hidden/></field>
        <field name="contentName">
            <display-entity entity-name="Content" description="${contentName}" key-field-name="contentId">
                <sub-hyperlink  target="img/${contentName}" description="${uiLabelMap.CommonView}" target-window="_BLANK" link-style="smallSubmit">
                    <parameter param-name="imgId" value="${dataResource.dataResourceId}"/>
                </sub-hyperlink>                
            </display-entity>
        </field>
        <field name="fromDate" title="${uiLabelMap.CommonDate}"><display/></field>
        <field name="dataCategoryId" title="Category"><display/></field>
        <field name="isPublic"><display description="${dataResource.isPublic}" /></field>        
        <field name="deleteLink" title="${uiLabelMap.CommonDelete}" widget-style="smallSubmit">
            <hyperlink target="deleteDepotSalesShipmentContent" description="${uiLabelMap.CommonDelete}" also-hidden="false">
                <parameter param-name="contentId"/>
                <parameter param-name="shipmentId"/>
                <parameter param-name="partyContentTypeId"/>                
                <parameter param-name="fromDate"/>
            </hyperlink>
        </field>        
    </form>



<!-- Shipment Content Form -->

    <form name="AddShipmentContent" target="createDepotSalesShipmentContent" type="upload" 
  		header-row-style="header-row">

        <!-- <auto-fields-entity entity-name="Content"/> -->

        <field name="shipmentId" map-name="parameters"><hidden/></field>  
<!--         <field name="partyContentTypeId"><hidden value="INTERNAL"/></field> -->
        <field name="dataResourceTypeId"><hidden value="IMAGE_OBJECT"/></field>
        <!-- note sure if these two are necessray, but they are kind of confusing in this context:
        <field name="ownerContentId"><lookup target-form-name="LookupContent"/></field>-->
<!--         <field name="dataResourceName"><lookup target-form-name="LookupDataResource"/></field> -->
        
<!--         <field name="contentTypeId"><hidden value="DOCUMENT"/></field> -->
        <field name="statusId"><hidden value="CTNT_AVAILABLE"/></field><!--
        <field name="mimeTypeId" >
            <drop-down allow-empty="false">
                <entity-options description="${description}" entity-name="MimeType"/>
            </drop-down>
        </field>
        -->
        <field name="dataResourceName" title="${uiLabelMap.CommonUpload}"><file/></field>
        <field name="contentTypeId" title="Category">
            <drop-down allow-empty="false">
                <option key="LR_DOCUMENT" description="LR Document"/>
                <option key="INVOICE_DOCUMENT" description="Invoice Document"/>
            </drop-down>
        </field>
        <!-- <field name="isPublic">            
        	<drop-down>
                <option key="Y" description="${uiLabelMap.CommonYes}" />
                <option key="N" description="${uiLabelMap.CommonNo}" />
            </drop-down>
        </field> -->
        <field name="createButton"><submit button-type="button"/></field>
    </form>
	
	<form name="ProductMastersCSV" type="list" list-name="listIt" view-size="99999">
		<field name="parentCategory" title="Yarn Type"><display/></field>
        <field name="productId" title="Product Id"><display/></field>
        <field name="name" title="Name"><display/></field>
        <field name="categoryName" title="Category"><display /></field>
        
        <field name="PLY" title="Ply"><display/></field>
        <field name="COUNT" title="Count"><display/></field>
        <field name="UOM" title="Uom"><display /></field>
        
        <field name="COLORING" title="Coloring"><display/></field>
        <field name="FINESSE" title="Finesse"><display/></field>
        <field name="FINISHING" title="Finishing"><display /></field>
        
        <field name="LUSTER" title="Luster"><display/></field>
        <field name="ORGANIC" title="Organic"><display/></field>
        <field name="PACKING" title="Packing"><display /></field>
        
        <field name="STRENGTH" title="Strength"><display/></field>
        <field name="STYLE" title="Style"><display/></field>
       
    </form>
     <form name="weaverMastersCSV" type="list" list-name="listIt" view-size="99999">
        <field name="srNo" title="Sr.No."><display/></field>
        <field name="groupName" title="Party Name"><display/></field>
        <field name="adress" title="Address"><display /></field>
        <field name="district" title="District"><display/></field>
        <field name="cluster" title="Cluster"><display/></field>
        <field name="state" title="State Name"><display/></field>
        <field name="agencyType" title="Agency Type"><display/></field>
        <field name="depotStatus" title="Depo Status"><display/></field>
        <field name="passBookNo" title="Passbook Number"><display/></field>
        <field name="application" title="Application"><display/></field>
        <field name="appDate" title="Application Date"><display/></field>
        <field name="category" title="Category"><display/></field>
        <field name="noOfLooms" title="No.of Looms"><display/></field>
        <field name="ledgerQuota" title="Ledger Quota"><display/></field>
        <field name="phone" title="Phone"><display/></field>
        <field name="mobileNo" title="Mobile No."><display/></field>
        <field name="fax" title="Fax"><display/></field>
        <field name="email" title="E-Mail "><display/></field>
        <field name="panNo" title="Pan No."><display/></field>
        <field name="tinNo" title="TIN/VAT No."><display/></field>
        <field name="cstNo" title="CST No."><display/></field>
        <field name="serviceTax" title="Service Tax No."><display/></field>
        <field name="type" title="Type"><display/></field>
        <field name="rationCardNo" title="Ration Card No."><display/></field>
        <field name="voterId" title="Voter Card Id."><display/></field>
        <field name="aadharNo" title="Aadhar No."><display/></field>
        <field name="male" title="Male"><display/></field>
       <field name="female" title="Female"><display/></field>
       <field name="male" title="Male in SC"><display/></field>
       <field name="female" title="Female in SC"><display/></field>
       <field name="male" title="Male ST"><display/></field>
       <field name="female" title="Female ST"><display/></field>
       <field name="male" title="Male OBC"><display/></field>
       <field name="female" title="Female OBC"><display/></field>
       <field name="male" title="Male Minority"><display/></field>
       <field name="female" title="Female Minority"><display/></field>
       <field name="male" title="Male General"><display/></field>
       <field name="female" title="Female General"><display/></field>
    </form>
    <form name="EditSupplier" type="single" target="EditVendor" default-map-name="partyGroup"
        focus-field-name="groupName" header-row-style="header-row" default-table-style="basic-table">
        <field use-when="partyGroup!=null" name="partyId" title="${uiLabelMap.VendorId}" tooltip="${uiLabelMap.CommonNotModifRecreat}"><display/></field>
        <field name="groupName" required-field="true" ><text></text></field>
        <!--  <field  name="roleTypeId"  event="onChange" action="javascript:vendorValidation();">   
            <drop-down allow-empty="false">
                <entity-options description="${description}" entity-name="RoleType">
                    <entity-constraint name="parentTypeId" operator="equals" value="VENDOR"/>
                    <entity-order-by field-name="description"/>
                </entity-options>
            </drop-down>
        </field>  -->
        <field use-when="partyGroup==null&amp;&amp;partyId==null" name="partyId" title="${uiLabelMap.PartyPartyId}"><ignored/></field>
        <field name="submitButton" title="${uiLabelMap.CommonSave}"><submit button-type="button"/></field>
        <field name="cancelLink" title="${uiLabelMap.CommonEmptyHeader}" widget-style="smallSubmit">
            <hyperlink target="${donePage}" also-hidden="false" description="${uiLabelMap.CommonCancelDone}">
                <parameter param-name="partyId"/>
            </hyperlink>
        </field>
   </form>
    
	<form name="CustomerMastersCSV" type="list" list-name="listIt" view-size="99999">
        <!-- <field name="sNo" title="Sr.NO"><display/></field> -->
        <field name="partyId" title="Party Code"><display/></field>
        <field name="groupName" title="Name"><display/></field>
        <field name="fullAddress" title="fullAddress"><display/></field>
        <field name="districtGeoId" title="District"><display/></field>
        <field name="cluster" title="Cluster"><display/></field>
        <field name="stateProvinceGeoId" title="State"><display/></field>
        <field name="storeName" title="Branch"><display/></field>
        
        <field name="partyClassificationGroupId" title="Agency Type"><display/></field>
        <field name="depot" title="Depot Status"><display/></field>
        <field name="daoDate" title="Date Of Depot Allotment"><display/></field>
        
        <field name="passbookId" title="Passbook No"><display/></field>
        <field name="issueDate" title="Issue Date"><display/></field>
        <field name="loomType" title="Quota Category"><display/></field>
        <field name="qty" title="No of Looms"><display/></field>
        <field name="ledgerQuota" title="Ledger Quota"><display/></field>
        <field name="bankAccountName" title="Name of Account"><display/></field>
        <field name="bankAccountCode" title="Account Number"><display/></field>
        <field name="ifscCode" title="IfscCode"><display/></field>
        <field name="branchCode" title="Branch Code"><display/></field>
        
        
    </form>
  <form name="SupplierMastersCSV" type="list" list-name="supplierMastersList" view-size="99999">
        <!-- <field name="sNo" title="Sr.NO"><display/></field> -->
        <field name="partyId" title="Party Code"><display/></field>
        <field name="name" title="Name"><display/></field>
        <field name="contactNo" title="Contact No"><display/></field>
        <field name="paAddress1" title="Address 1"><display/></field>
        <field name="paAddress2" title="Address 2"><display/></field>
        <field name="city" title="City"><display/></field>
        <field name="postCode" title="Post Code"><display/></field>
        <field name="state" title="State"><display/></field>
        <field name="country" title="Country"><display/></field>
        <field name="cstNo" title="CST No"><display/></field>
        <field name="tanNo" title="TAN No"><display/></field>
        <field name="panNo" title="PAN No"><display/></field>
        <field name="tinNo" title="TIN No"><display/></field>
         <field name="bankAccountName" title="Name of Account"><display/></field>
        <field name="bankAccountCode" title="Account Number"><display/></field>
        <field name="ifscCode" title="IfscCode"><display/></field>
        <field name="branchCode" title="Branch Code"><display/></field>
        
    </form>

 <form name="ViewIndentStatus" type="list" list-name="statusHistory"
        odd-row-style="alternate-row" default-table-style="basic-table hover-bar">
        <field name="statusId"><display-entity entity-name="StatusItem" description="${description}"/></field>
        <field name="statusDatetime"><display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(statusDatetime, &quot;dd-MM-yyyy HH:mm:ss&quot;)}"></display></field>
        <field name="userLogin" title="Entry by"><display/></field>	  
    </form>
  <form name="invoiceDetailList" type="list" list-name="invoiceDetailList"  odd-row-style="alternate-row" header-row-style="header-row" default-table-style="basic-table hover-bar">
    	<field name="invoiceId" widget-style="buttontext"><hyperlink  target="/accounting/control/invoiceOverview" target-type="inter-app" target-window="_blank" description="${invoiceId}"> <parameter param-name="invoiceId"/></hyperlink></field>
    	<field name="statusId" title="Status">
    		<display-entity entity-name="StatusItem" description="${description}" ></display-entity>
    	</field>
    	<field name="invoiceTypeId" title="invoiceType">
    		<display-entity entity-name="InvoiceType" description="${description}" ></display-entity>
    	</field>
    	<field name="invoiceDate" title="Date" ><display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(invoiceDate, &quot;dd-MMM-yyyy&quot;);}"/></field>
          <field name="createdByUserLogin" title="Entry by"><display/></field>	  
    </form>
<form name="FindShippingReimbursement" title="" type="single" target="ShippingReimbursement" header-row-style="header-row" default-table-style="basic-table">
	<!-- 	 <field name="timePeriodId" title="Scheme Time Period">
              <drop-down >
                  <list-options key-name="schemeTimePeriodId" list-name="reimbPeriodList" description="${value}"/>
              </drop-down>
        </field> -->
        <field name="shipmentTypeId"><hidden value="BRANCH_SHIPMENT"/></field> 
         <field name="statusId"><hidden value="GOODS_RECEIVED"/></field>  
        <field name="estimatedShipDate" title="Shipment Date"><date-find default-option-from="sameDay"  /></field>
        <field name="primaryOrderId" title="PO no"><text-find/></field>
        <field name="shipmentId" title="Shipment Id"><text-find/></field>
        <field name="partyId" title="Party"><lookup target-form-name="LookupPartyName"/></field>
        <field name="vehicleId" title="Vehicle No"><text-find/></field>
        <!-- <field name="statusId" title="${uiLabelMap.CommonStatus}"  >
        	<drop-down allow-empty="true" > 
        		<option key="DISPATCHED" description="Dispatched" > </option>
        		<option key="DOCUMENTS_RECEIVED" description="Documents Received" ></option>
        		<option key="DOCUMENTS_ENDORSED" description="Documents Endorsed" > </option>
        		<option key="GOODS_RECEIVED" description="Goods Received"  ></option>
        	</drop-down>
        </field> -->
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    
    <form name="listShippingReimbursement" type="list" list-name="listIt" paginate-target="${targetRequest}"
            odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
            <actions>
            </actions>
            <row-actions>
            	<entity-condition entity-name="Invoice" list="invoices">
            		<condition-list combine="and">
            			<condition-expr field-name="shipmentId" from-field="shipmentId"/>
            			<condition-expr field-name="statusId" operator="not-equals" value="INVOICE_CANCELLED"/>
            		</condition-list>
            	</entity-condition>
            	<set field="invSize" value="${groovy: invoices.size();}"/>
            	<set field="invoiceId" value="${invoices[0].invoiceId}"/>
            	<entity-condition entity-name="Invoice" list="invoicesstatusList">
            		<condition-list combine="and">
            			<condition-expr field-name="shipmentId" from-field="shipmentId"/>
            			<condition-expr field-name="statusId" operator="not-equals" value="INVOICE_CANCELLED"/>
            			<condition-expr field-name="invoiceTypeId" operator="equals" value="PURCHASE_INVOICE"/>
            		</condition-list>
            	</entity-condition>
            	
            	<entity-condition entity-name="Invoice" list="salesInvoiceStatusList">
            		<condition-list combine="and">
            			<condition-expr field-name="shipmentId" from-field="shipmentId"/>
            			<condition-expr field-name="statusId" operator="not-equals" value="INVOICE_CANCELLED"/>
            			<condition-expr field-name="invoiceTypeId" operator="equals" value="SALES_INVOICE"/>
            		</condition-list>
            	</entity-condition>
            	<set field="purchaseInvoiceSize" value="${groovy: invoicesstatusList.size();}"/>
            	<set field="salesInvoiceSize" value="${groovy: salesInvoiceStatusList.size();}"/>
            	<entity-condition entity-name="ShipmentReceipt" list="shipmentReceiptList">
            		<condition-list combine="and">
            			<condition-expr field-name="shipmentId" from-field="shipmentId" />
            			<condition-expr field-name="statusId" operator="equals" value="SR_RECEIVED"/>
            		</condition-list>
            	</entity-condition>
            	<set field="shipmentReceiptSize" value="${groovy: shipmentReceiptList.size();}"/>
            	<entity-condition entity-name="ShipmentReceipt" list="invoiceReceiptList">
            		<condition-list combine="and">
            			<condition-expr field-name="shipmentId" from-field="shipmentId" />
            			<condition-expr field-name="statusId" operator="equals" value="SR_ACCEPTED"/>
            		</condition-list>
            	</entity-condition>
            	<set field="invoiceReceiptSize" value="${groovy: invoiceReceiptList.size();}"/>
            </row-actions>
          	<field name="shipmentId" widget-style="buttontext h3" title="Shipment">
          		<hyperlink target="MaterialShipmentOverview" description="${shipmentId}" target-window="_blank" >
                    <parameter param-name="shipmentId"/>
                </hyperlink>
          	</field>
           <!--  <field name="estimatedShipDate" title="GRN Ship Date"><display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(estimatedShipDate, &quot;dd MMMMM, yyyy&quot;);}"/></field> -->
            <field name="salesOrder" title="Indent" widget-style="buttontext">
            	<hyperlink target="POoverview" description="${salesOrder}" target-window="_blank">
          			<parameter param-name="orderId" value="${salesOrder}"/>
          		</hyperlink>
            </field>
            <field name="primaryOrderId" title="PO" widget-style="buttontext">
            	<hyperlink target="POoverview" description="${primaryOrderId}" target-window="_blank">
          			<parameter param-name="orderId" value="${primaryOrderId}"/>
          		</hyperlink>
            </field>
            <field name="partyId" title="Supplier">
            <display-entity entity-name="PartyNameView" key-field-name="partyId" description="${firstName} ${middleName} ${lastName} ${groupName}">
                    <sub-hyperlink description="[${partyId}]" target="/partymgr/control/viewprofile" target-type="inter-app">
                        <parameter param-name="partyId" from-field="partyId"/>
                    </sub-hyperlink>
                </display-entity>
            </field>
             <field name="weaver">
            <display-entity entity-name="PartyNameView" key-field-name="partyId" description="${firstName} ${middleName} ${lastName} ${groupName}">
                    <sub-hyperlink description="[${weaver}]" target="/partymgr/control/viewprofile" target-type="inter-app">
                        <parameter param-name="partyId" from-field="weaver"/>
                    </sub-hyperlink>
                </display-entity>
            </field>
            <field name="vehicleId" title="Vehicle Number"  widget-style="buttontext">
          			<display/>
            </field>
             <field name="invoiceAmount" title="Invoice Amount"  widget-style="buttontext">
          			<display/>
            </field>
            <field name="reimbursementEligibilityPercentage" title="Eligibility %"  widget-style="buttontext"> 
          			<display/>
            </field>
          <field name="reimbursementEligibilityAmount" title="Eligibility Amount"  widget-style="buttontext"> 
          			<display/>
            </field> 
          <field name="claimAmount" title="Claim Amount"  widget-style="buttontext"> 
          			<display/>
            </field>
            <field name="claimStatus" title="Claim Status"  widget-style="buttontext"> 
          			<display/>
            </field>
            <field  use-when="!(&quot;GENERATED&quot;).equals(claimStatus)" name="SendtoQC"   title="Reimbursement" widget-style="buttontext">
             <hyperlink  target-type="plain" description="${receiptAction}"  target="javascript:payReimbursement('${shipmentId}','${invoiceAmount}','${reimbursementEligibilityAmount}');"></hyperlink>
           </field>
            <!-- <field name="vehicleId" title="Vehicle No"><display/></field> -->
            <field name="shipmentReimbursementList"><hidden/></field>
            <field name="partyIdTo" ><hidden/></field>
            <field name="partyName" ><hidden/></field>

    </form>
    
      <form name="FindDepotReimbursement" title="" type="single" target="DepotReimbursement" header-row-style="header-row" default-table-style="basic-table">
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>

        <field name="timePeriodId" title="Scheme Time Period">
              <drop-down >
                  <list-options key-name="schemeTimePeriodId" list-name="reimbPeriodList" description="${value}"/>
              </drop-down>
        </field>

       <field name="groupName" title="Depot Name"><text  size="15"></text></field>
              <field name="partyId" title="Owner Id"><text  size="15"></text></field>
             
           <field name="branchId" title="${uiLabelMap.Branch}">
              <drop-down allow-empty="true">
                  <list-options key-name="payToPartyId" list-name="formatList" description="${productStoreName}"/>
              </drop-down>
        </field>
            <!--   <field name="passbookNumber" title="Passbook Number"><text  size="15"></text></field>
              <field name="roleTypeId" title="Role Type Id"><hidden value="EMPANELLED_CUSTOMER"/></field> -->
       
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    
    <form name="listDepotReimbursement" type="list" list-name="listIt" paginate-target="${targetRequest}"
            odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
				<!-- <field name="groupName" title="Depot Name"><display/></field>  -->
				
   				<field name="groupName" title="Depot Name">
            <display-entity entity-name="Facility" key-field-name="facilityId" description="${facilityName}">
                    <sub-hyperlink description="[${facilityId}]" target="/partymgr/control/viewprofile" target-type="inter-app">
                        <parameter param-name="facilityId" from-field="facilityId"/>
                    </sub-hyperlink>
                </display-entity>
            </field>
   
   
                 <field name="partyId" title="Owner">
            <display-entity entity-name="PartyNameView" key-field-name="partyId" description="${firstName} ${middleName} ${lastName} ${groupName}">
                    <sub-hyperlink description="[${partyId}]" target="/partymgr/control/viewprofile" target-type="inter-app">
                        <parameter param-name="partyId" from-field="partyId"/>
                    </sub-hyperlink>
                </display-entity>
            </field>
                
				 <field name="storeName" title="Branch Name"><display/></field> 
           <field name="invoiceAmount" title="Invoice Amount"  widget-style="buttontext">
          			<display/>
            </field>
            <field name="reimbursementEligibilityPercentage" title="Eligibility %"  widget-style="buttontext"> 
          			<display/>
            </field>
          <field name="reimbursementEligibilityAmount" title="Eligibility Amount"  widget-style="buttontext"> 
          			<display/>
            </field>
            <field name="claimAmount" title="Claim Amount"  widget-style="buttontext"> 
          			<display/>
            </field>
            <field name="claimStatus" title="Claim Status"  widget-style="buttontext"> 
          			<display/>
            </field>
             <field   use-when="!claimStatus.equals(&quot;GENERATED&quot;)" name="SendtoQC"    title="Receipts" widget-style="buttontext">
             <hyperlink  target-type="plain" description="${receiptAction}"  target="javascript:payReimbursement('${facilityId}','${partyId}','${invoiceAmount}','${reimbursementEligibilityAmount}','${groupName}');"></hyperlink>
           </field> 
         

    </form>
    
    
    <form name="FindDepotReimbursementBilling" title="" type="single" target="FindDepotReimbursementBilling" header-row-style="header-row" default-table-style="basic-table">
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>

        <field name="timePeriodId" title="Scheme Time Period">
              <drop-down >
                  <list-options key-name="schemeTimePeriodId" list-name="reimbPeriodList" description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(fromDate, &quot;dd MMM, yyyy&quot;);} - ${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(thruDate, &quot;dd MMM, yyyy&quot;);}"/>
              </drop-down>
        </field>

           <field name="branchId" title="${uiLabelMap.Branch}">
              <drop-down allow-empty="true">
                  <list-options key-name="payToPartyId" list-name="branchList" description="${storeName}"/>
              </drop-down>
        </field>

        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    
    
     <form name="ListDepotReimbursementBilling" type="list"
		list-name="periodBillingList" odd-row-style="alternate-row"
		default-table-style="basic-table hover-bar">
		<actions>		    
		    <entity-condition entity-name="PeriodBillingAndSchemeTimePeriod" list="periodBillingList">
		    	<condition-list >
		    	    <condition-expr field-name="billingTypeId" operator="equals" value="SHIPMENT_BILLING"/>
		    		<condition-expr field-name="statusId" operator="not-equals" value="COM_CANCELLED"/>
		    		<condition-expr field-name="statusId" operator="not-equals" value="GENERATION_FAIL"/>
		    		<condition-expr field-name="statusId" operator="not-equals" value="CANCEL_FAILED"/>
	    		    <condition-expr field-name="schemeTimePeriodId"  from-field="parameters.timePeriodId"/>
		    		<condition-expr field-name="partyId"  from-field="parameters.branchId"/>
		    	</condition-list>
		    	<order-by field-name="-thruDate"/>
		    </entity-condition>
			<script location="component://humanres/webapp/humanres/WEB-INF/actions/reports/employeePersonalProfile.groovy"/>
			<set field="partyId" value="${partyId}"/>
			<set field="nowTimeStamp" value="${groovy: return org.ofbiz.base.util.UtilDateTime.nowTimestamp()}"/>
		</actions>
		<field name="periodBillingId" title="Bill Id">
			<display description="${periodBillingId}" />
		</field>
		<field name="partyId" title="Branch">
			<display-entity entity-name="PartyGroup" key-field-name="partyId" description="${groupName}"></display-entity>
		</field>
		<field name="schemeTimePeriodId" title="Payroll Period">
			<display-entity entity-name="SchemeTimePeriod" description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(fromDate, &quot;dd MMM, yyyy&quot;);} - ${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(thruDate, &quot;dd MMM, yyyy&quot;);}"></display-entity>
		</field>
		<field name="statusId" title = "Status">
          <display-entity entity-name="StatusItem" key-field-name="statusId" description="${description}"/>
        </field>
       
        <field use-when="statusId.equals(&quot;GENERATED&quot;)" name="cancel" widget-style="buttontext cancel">
			<hyperlink target="cancelShipmentReimbursementBilling" description="Cancel" confirmation-message="Are You Sure You Want To Cancel">
	        	<parameter param-name="periodBillingId" from-field="periodBillingId"/>
	        	<parameter param-name="schemeTimePeriodId" from-field="schemeTimePeriodId"/>
	        </hyperlink>
        </field>

	</form>


    <form name="FindShipmentReimbursementBilling" title="" type="single" target="FindShipmentReimbursementBilling" header-row-style="header-row" default-table-style="basic-table">
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>

        <field name="timePeriodId" title="Scheme Time Period">
              <drop-down >
                  <list-options key-name="schemeTimePeriodId" list-name="reimbPeriodList" description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(fromDate, &quot;dd MMM, yyyy&quot;);} - ${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(thruDate, &quot;dd MMM, yyyy&quot;);}"/>
              </drop-down>
        </field>

           <field name="branchId" title="${uiLabelMap.Branch}">
              <drop-down allow-empty="true">
                  <list-options key-name="payToPartyId" list-name="branchList" description="${storeName}"/>
              </drop-down>
        </field>

        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    
    
     <form name="ListShipmentReimbursementBilling" type="list"
		list-name="periodBillingList" odd-row-style="alternate-row"
		default-table-style="basic-table hover-bar">
		<actions>		    
		    <entity-condition entity-name="PeriodBillingAndSchemeTimePeriod" list="periodBillingList">
		    	<condition-list >
		    	    <condition-expr field-name="billingTypeId" operator="equals" value="SHIPMENT_BILLING"/>
		    		<condition-expr field-name="statusId" operator="not-equals" value="COM_CANCELLED"/>
		    		<condition-expr field-name="statusId" operator="not-equals" value="GENERATION_FAIL"/>
		    		<condition-expr field-name="statusId" operator="not-equals" value="CANCEL_FAILED"/>
	    		    <condition-expr field-name="schemeTimePeriodId"  from-field="parameters.timePeriodId"/>
		    		<condition-expr field-name="partyId"  from-field="parameters.branchId"/>
		    	</condition-list>
		    	<order-by field-name="-thruDate"/>
		    </entity-condition>
			<set field="partyId" value="${partyId}"/>
			<set field="nowTimeStamp" value="${groovy: return org.ofbiz.base.util.UtilDateTime.nowTimestamp()}"/>
		</actions>
		<field name="periodBillingId" title="Bill Id">
			<display description="${periodBillingId}" />
		</field>
		<field name="partyId" title="Branch">
			<display-entity entity-name="PartyGroup" key-field-name="partyId" description="${groupName}"></display-entity>
		</field>
		<field name="schemeTimePeriodId" title="Payroll Period">
			<display-entity entity-name="SchemeTimePeriod" description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(fromDate, &quot;dd MMM, yyyy&quot;);} - ${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(thruDate, &quot;dd MMM, yyyy&quot;);}"></display-entity>
		</field>
		<field name="statusId" title = "Status">
          <display-entity entity-name="StatusItem" key-field-name="statusId" description="${description}"/>
        </field>
       
        <field use-when="statusId.equals(&quot;GENERATED&quot;)" name="cancel" widget-style="buttontext cancel">
			<hyperlink target="cancelShipmentReimbursementBilling" description="Cancel" confirmation-message="Are You Sure You Want To Cancel">
	        	<parameter param-name="periodBillingId" from-field="periodBillingId"/>
	        	<parameter param-name="schemeTimePeriodId" from-field="schemeTimePeriodId"/>
	        </hyperlink>
        </field>

	</form>

    
    
    
        
</forms>