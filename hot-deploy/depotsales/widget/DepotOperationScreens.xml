<?xml version="1.0" encoding="UTF-8"?>
<screens xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:noNamespaceSchemaLocation="http://ofbiz.apache.org/dtds/widget-screen.xsd">

<screen name="DepotOperationMainScreen">
		<section>
            <actions>
               <property-map resource="OrderUiLabels" map-name="uiLabelMap"
					global="true" />
				<property-map resource="ProductUiLabels" map-name="uiLabelMap"
					global="true" />
				<set field="titleProperty" value="StockPosition" />
				<set field="tabButtonItem" value="stockPositionDepotSales" />
				<!-- <set field="tabButtonItem2" value="stockPosition"/> -->
				<set field="headerItem" value="StockPosition" />
				<set field="ajaxUrl" value="StockPositionDepotInternal" type="String" />
            </actions>
            <widgets>
                 <section>
                 <widgets>
                 <platform-specific>
									<html>
										<html-template
											location="component://depotsales/webapp/depotsales/depotsales/stockPositionDepot_Select.ftl" />
									</html>
								</platform-specific>
                    <include-screen name="StockPositionDepotInternal" />
                    </widgets>
                    </section>
            </widgets>
        </section>
	</screen>
	
	<screen name="StockPositionSubDepot">
		<section>
			<actions>
				<property-map resource="OrderUiLabels" map-name="uiLabelMap"
					global="true" />
				<property-map resource="ProductUiLabels" map-name="uiLabelMap"
					global="true" />
				<set field="titleProperty" value="Stock Position" />
				<set field="tabButtonItem" value="StockPositionSubDepot" />
				<!-- <set field="tabButtonItem2" value="stockPosition"/> -->
				<set field="headerItem" value="StockPosition" />
				<set field="ajaxUrl" value="StockPositionSubDepot" type="String" />
				<script
					location="component://depotsales/webapp/depotsales/WEB-INF/actions/facility/enableDepotPartyAutoComplete.groovy" />
			</actions>
			<widgets>
				<!-- <decorator-screen name="DepotSalesCommonDecorator" location="${parameters.mainDecoratorLocation}"> -->
				<decorator-screen name="CommonInventoryDecoratorSubOprDepot"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<widgets>
								<platform-specific>
									<html>
										<html-template
											location="component://depotsales/webapp/depotsales/depotsales/stockPostionFindSubDepot.ftl" />
									</html>
								</platform-specific>
								<include-screen name="StockPositionDepotInternal" />
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>


	<screen name="StockPositionDepotInternal">
		<section>
			<actions>
				<property-map resource="OrderUiLabels" map-name="uiLabelMap"
					global="true" />
				<property-map resource="ProductUiLabels" map-name="uiLabelMap"
					global="true" />
				<property-map resource="CommonUiLabels" map-name="uiLabelMap"
					global="true" />
				<script location="component://depotsales/webapp/depotsales/WEB-INF/actions/facility/stockPositionDepot.groovy"/> 
			</actions>
			<condition>
				<or>
					<not>
						<if-empty field="parameters.productId" />
					</not>
					<not>
						<if-empty field="productId" />
					</not>
				</or>
			</condition>
			<widgets>
			
				<container>
					<platform-specific>
						<html>
							<html-template
								location="component://materialmgmt/webapp/materialmgmt/reports/stockPosition.ftl" />
						</html>
					</platform-specific>

					<platform-specific>
						<html>
							<html-template
								location="component://materialmgmt/webapp/materialmgmt/reports/EditProductInventoryItems.ftl" />
						</html>
					</platform-specific>

					<screenlet title="${uiLabelMap.ProductOutstandingPurchaseOrders}">
						<include-form name="OutstandingPurchaseOrders"
							location="component://materialmgmt/widget/materialmgmtForms.xml" />
					</screenlet>
					<screenlet title="${uiLabelMap.ProductRequirements}">
						<include-form name="ListRequirements"
							location="component://materialmgmt/widget/materialmgmtForms.xml" />
					</screenlet>
					<!-- <screenlet title="${uiLabelMap.Indents}">
						<include-form name="ListRequestList"
							location="component://materialmgmt/widget/materialmgmtForms.xml" />
					</screenlet> -->
					<screenlet title="Receipts">
						<include-form name="ListReceiptsList"
							location="component://materialmgmt/widget/materialmgmtForms.xml" />
					</screenlet>
					<screenlet title="${uiLabelMap.ProductSuppliers}">
						<include-form name="ListSupplierProducts"
							location="component://materialmgmt/widget/materialmgmtForms.xml" />
					</screenlet>
				</container>
			</widgets>
		</section>
	</screen>
	
	<screen name="DepotSalesInventorySales">
		<section>
			<actions>
				<set field="titleProperty" value="Inventory Transfers" />
				<!-- <set field="headerItem" value="facility" /> -->
				<set field="tabButtonItem" value="PhysicalInventory" />
				<set field="tabButtonItem2" value="makeInventorySales" />
				<!-- <set field="parameters.facilityId" from-field="parameters.facilityId"></set> -->
				<set field="isInventorySales" value="Y"/>
				<script	location="component://depotsales/webapp/depotsales/WEB-INF/actions/depotsales/FindFacilityPhysicalInventory.groovy" />
			</actions>
			<widgets>
				<decorator-screen name="DepotTransCommonDecorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<include-menu location="component://depotsales/widget/DepotSalesMenus.xml" name="InventorySalesSubTabBar" />
						<screenlet title="Find Shipmet Inventory Items">
							<include-form name="FindPhysicalInventoryDepotForSale"	location="component://depotsales/widget/DepotSalesForms.xml" />
						</screenlet>
						<screenlet title="List Of Inventory Items">
							<platform-specific><html><html-template location="component://depotsales/webapp/depotsales/depotsales/stockXferForm.ftl"/></html></platform-specific>
							<include-form name="ListPhysicalInventoryDepotForSale" location="component://depotsales/widget/DepotSalesForms.xml" />
						</screenlet>
						<platform-specific>
							<html>
								<html-template location="component://depotsales/webapp/depotsales/depotsales/MakeSaleOrder.ftl" />
							</html>
						</platform-specific>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="FindDepotTransPO">
		<section>
			<actions>
				<set field="titleProperty" value="Find Purchase Order" />
				<set field="tabButtonItem" value="FindDepotTransPO" />
				<set field="tabButtonItem2" value="FindDepotTransPO" />
				<script location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/purchases/poRefNoSearch.groovy"/>
				<service service-name="performFind" result-map="result"
					result-map-list="listIt">
					<field-map field-name="inputFields" from-field="parameters" />
					<field-map field-name="entityName" value="OrderHeaderAndSequenceAndRoles" />
					<field-map field-name="orderBy" value="-orderDate" />
				</service>
				<set field="targetRequest" value="FindDepotTransPO" />
			<!-- 	<set field="ChannalType" value="MATERIAL_PUR_CHANNEL" />  -->
				<set field="partyId" from-field="parameters.partyId" />
				<set field="roleTypeId" value="BILL_FROM_VENDOR" />
				<set field="parameters.roleTypeId" from-field="roleTypeId" />
				<set field="parameters.noConditionFind" value="N"></set>
				<set field="parameters.purposeTypeId" value="DEPOT_PURCHASE"></set>
			<!-- 	<set field="parameters.salesChannelEnumId" value="MATERIAL_PUR_CHANNEL"></set>  -->

				<script
					location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/purchases/POSearchFilter.groovy" />
			</actions>
			<widgets>
				<decorator-screen name="DepotTransCommonDecorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<include-menu location="component://depotsales/widget/DepotSalesMenus.xml"
							name="FindDepotTransPOSubTabBar" />
						<section>
							<widgets>
								<section>
                             		<condition>
                            			<if-has-permission permission="DEPOTSALES"  action="_CREATE_PO"/>
                            		</condition>
									<widgets>
										<link target="CreateDepotTransPO" text="Create PO" style="buttontext" />
									</widgets>
								</section>
								<screenlet title="search-options">
									<include-form name="FindDepotTransPurchaseOrder"
										location="component://depotsales/widget/DepotOperationForms.xml" />
								</screenlet>
								<screenlet title="Search-results">
									<include-form name="listDepotTransPurchaseOrders"
										location="component://depotsales/widget/DepotOperationForms.xml" />
								</screenlet>
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="CreateDepotTransPO">
		<section>
			<actions>
				<set field="titleProperty" value="Find Purchase Order" />
				<set field="tabButtonItem" value="FindDepotTransPO" />
				<set field="targetRequest" value="FindDepotTransPO" />
				<!-- <set field="ChannalType" value="PROD_PRCHSE_CHANNEL"/> -->
				<set field="parameters.roleTypeId" value="SUPPLIER" />
				<set field="changeFlag" value="PurchaseOrder" />
				<set field="subDivDeptFlag" value="PurchaseOrder" />
				<set field="parameters.changeFlag" value="PurchaseOrder" />
				<set field="purchaseTypeFlag" from-field="parameters.purchaseTypeFlag" />
				<set field="parameters.partyStatusId" value="PARTY_ENABLED" />
				<!-- <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/enablePartyAutoComplete.groovy"/> -->
				<script
					location="component://depotsales/webapp/depotsales/WEB-INF/actions/facility/enableDepotPartyAutoComplete.groovy" />
				<script
					location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/orgnigationDept.groovy" />
				<script
					location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/purchases/PurchaseEntryFormNew.groovy" />
				<script
					location="component://depotsales/webapp/depotsales/WEB-INF/actions/facility/purchaseOrderDetailsEntryDepotTrans.groovy" />
			</actions>
			<widgets>
				<decorator-screen name="DepotTransCommonDecorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<widgets>
								<label style="h1">New PO</label>
								<platform-specific>
									<html>
										<html-template
											location="component://depotsales/webapp/depotsales/depotsales/CreateDepotTransPO.ftl" />
									</html>
								</platform-specific>
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="ProcessOrderAndShipmentGeneration">
        <section>
            <actions>
				<set field="titleProperty" value="Process Depot Orders" />
				<set field="tabButtonItem" value="FindDepotTransPO" />
				<set field="tabButtonItem2" value="ProcessOrdersSuppliersDepotTrans" />
				<set field="viewSize" from-field="parameters.VIEW_SIZE" />
				<set field="defaultEffectiveDateTime"
					value="${bsh:org.ofbiz.base.util.UtilDateTime.getDayStart(org.ofbiz.base.util.UtilDateTime.nowTimestamp())}" />
				<set field="defaultEffectiveDate"
					value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(defaultEffectiveDateTime, &quot;dd MMMMM, yyyy&quot;);}" />
				<set field="shipmentTypeId" from-field="parameters.shipmentTypeId" />
				<set field="salesChannelEnumId" from-field="parameters.salesChannelEnumId" />
				<set field="screenFlag" value="depotSales" />
				<!-- <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/getIcpSalesOrder.groovy" 
					/> -->
				<script
					location="component://depotsales/webapp/depotsales/WEB-INF/actions/depotsales/ListSalesOrderSearchResults.groovy" />
			</actions>
            <widgets>
                 <decorator-screen name="DepotTransCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
					<include-menu location="component://depotsales/widget/DepotSalesMenus.xml" name="FindDepotTransPOSubTabBar" />
						 <section>
                            <widgets>
                                <decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
                                    <decorator-section name="menu-bar">
                                    	 
                                    </decorator-section>
                                    <decorator-section name="search-options">
                                        <include-form name="FindDepotTransOrder" location="component://depotsales/widget/DepotOperationForms.xml"/>
                                    </decorator-section>
                                    <decorator-section name="search-results">
            							<screenlet title="Orders List"> 
                                        	<platform-specific>
												<html>
													<html-template location="component://depotsales/webapp/depotsales/depotsales/ListOrderSearchResults.ftl" />
												</html>
											</platform-specific>
                                        </screenlet>
                                    </decorator-section>
                                </decorator-screen>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="EditMaterialDepotTransPO">
		<section>
			<actions>
				<set field="titleProperty" value="Find Purchase Order" />
				<set field="tabButtonItem" value="FindDepotTransPO" />
				<set field="targetRequest" value="FindMaterialPO" />
				<set field="parameters.roleTypeId" value="SUPPLIER" />
				<set field="orderId" from-field="parameters.orderId" />
				<set field="changeFlag" value="PurchaseOrder" />
				<set field="parameters.POId" from-field="orderId" />
				<set field="parameters.changeFlag" value="PurchaseOrder" />
				<script
					location="component://depotsales/webapp/depotsales/WEB-INF/actions/facility/enableDepotPartyAutoComplete.groovy" />
				<script
					location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/orgnigationDept.groovy" />
				<script
					location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/purchases/PurchaseEntryFormNew.groovy" />
				<script
					location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/purchases/EditPOEntryForm.groovy" />
				<set field="purchaseTypeFlag" from-field="parameters.purchaseTypeFlag" />
			</actions>
			<widgets>
				<decorator-screen name="DepotTransCommonDecorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<widgets>
								<label style="h1">Order Id : "${orderId}"</label>

								<platform-specific>
									<html>
										<html-template
											location="component://depotsales/webapp/depotsales/depotsales/CreateDepotTransPO.ftl" />
									</html>
								</platform-specific>
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="DepotTransReceiptInitEntry">
		<section>
			<actions>
				<entity-one value-field="showBoothAutoSuggestConf"
					entity-name="TenantConfiguration">
					<field-map field-name="propertyTypeEnumId" value="FACILITY_AUTOSUGGEST" />
					<field-map field-name="propertyName" value="showBoothAutoSuggest" />
					<select-field field-name="propertyValue" />
				</entity-one>
				<set field="showBoothAutoSuggest" value="${showBoothAutoSuggestConf.propertyValue}" />
				<set field="supplyDate" from-field="parameters.supplyDate" />
				<set field="effectiveDate" value="${parameters.effectiveDate}" />
				<!-- <set field="shipmentTypeId" value="${parameters.shipmentTypeId}"/> -->
				<entity-condition entity-name="Product" list="productList"
					use-cache="true">
				</entity-condition>
			</actions>
			<widgets>
				<section>
					<widgets>
						<platform-specific>
							<html>
								<html-template
									location="component://depotsales/webapp/depotsales/depotsales/ReceiptEntryDepotTrans.ftl" />
							</html>
						</platform-specific>
					</widgets>
					<fail-widgets>
						<label style="h3">${uiLabelMap.ProductFacilityViewPermissionError}
						</label>
					</fail-widgets>
				</section>
			</widgets>
		</section>
	</screen>
	<screen name="DepotTransReceiptInnerScreen">
		<section>
			<actions>
				<set field="effectiveDate" value="${parameters.effectiveDate}" />
			</actions>
			<widgets>
				<section>
					<widgets>
						<platform-specific>
							<html>
								<html-template
									location="component://depotsales/webapp/depotsales/depotsales/ReceiptEntryDepotTrans.ftl" />
							</html>
						</platform-specific>
					</widgets>
				</section>
			</widgets>
		</section>
	</screen>
	<screen name="DepotTransPOMaterialReceiptsDepot">
		<section>
			<actions>
				<set field="titleProperty" value="Supplier PO Dispatch" />
				<set field="tabButtonItem" value="FindSupplierDispatchs" />
				<set field="tabButtonItem2" value="SupplierDispatchEntry" />
				<set field="viewSize" from-field="parameters.VIEW_SIZE" />
				<!-- <set field="ChannalType" value="PROD_PRCHSE_CHANNEL"/> -->
				<set field="supplyDate" from-field="parameters.supplyDate" />
				<set field="parameters.roleTypeId" value="SUPPLIER" />
				<set field="isFormSubmitted" from-field="parameters.isFormSubmitted" />
				<set field="defaultEffectiveDateTime" value="${supplyDate}"
					default-value="${bsh:org.ofbiz.base.util.UtilDateTime.nowTimestamp()}" />
				<set field="defaultEffectiveDate"
					value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(defaultEffectiveDateTime, &quot;dd MMMMM, yyyy&quot;);}" />
				<set field="defaulteffectiveDate"
					value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(defaultEffectiveDateTime, &quot;dd MMMMM, yyyy&quot;);}" />
				<!-- <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/enablePartyAutoComplete.groovy"/> -->
				<script
					location="component://depotsales/webapp/depotsales/WEB-INF/actions/facility/enableDepotPartyAutoComplete.groovy" />

				<script
					location="component://depotsales/webapp/depotsales/WEB-INF/actions/facility/purchaseOrderDetailsEntryDepotTrans.groovy" />
					
			</actions>
			<widgets>
				<decorator-screen name="SupplierMyPortalCommonDecorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<include-menu name="SupplierReceiptTabBar"
							location="component://depotsales/widget/DepotSalesMenus.xml" />
						<section>
							<widgets>
								<section>
									<condition>
										<if-compare operator="equals" field="isFormSubmitted"
											value="" />
									</condition>
									<widgets>
										<include-screen name="DepotTransReceiptInitEntry" />
									</widgets>
								</section>
								<section>
									<condition>
										<if-compare operator="equals" field="isFormSubmitted"
											value="YES" />
									</condition>
									<widgets>
										<include-screen name="DepotTransReceiptInnerScreen" />
									</widgets>
								</section>
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="ProcessInventorySalesOrder">
    		<section>
    			<actions>
    				<set field="titleProperty" value="Process Sale Indent" />
    				<set field="tabButtonItem" value="PhysicalInventory" />
    				<set field="tabButtonItem2" value="paymentForSales" />
    				<set field="screenFlag" value="depotSales" />
    				<set field="targetRequest" value="FindSalesIndentPayment" />
    				<script
    					location="component://depotsales/webapp/depotsales/WEB-INF/actions/depotsales/ListDepotSalesOrderPaymentSearchResults.groovy" />
    			   <!--  <script
    					location="component://depotsales/webapp/depotsales/WEB-INF/actions/depotsales/ListDepotSalesOrderAdvancePayments.groovy" /> -->
    	
    			</actions>
    			<widgets>
    				<decorator-screen name="DepotTransCommonDecorator" location="${parameters.mainDecoratorLocation}">
    					<decorator-section name="body">
    						<include-menu location="component://depotsales/widget/DepotSalesMenus.xml" name="InventorySalesSubTabBar" />
    						<section>
    							<widgets>
    							<decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
    							 		<decorator-section name="search-options">
                                            <include-form name="FindSalesIndentPayment" location="component://depotsales/widget/DepotOperationForms.xml"/>
                                        </decorator-section>
                                        <decorator-section name="search-results">
    								<screenlet title="Depot Orders">
    									<platform-specific>
    										<html>
    											<html-template
    												location="component://depotsales/webapp/depotsales/depotsales/ListDepotSearchOrderPayments.ftl" />
    										</html>
    									</platform-specific>
    								</screenlet>
    								</decorator-section>
    								</decorator-screen>
    							</widgets>
    						</section>
    					</decorator-section>
    				</decorator-screen>
    			</widgets>
    		</section>
    	</screen>
    	<screen name="DepotSalesIndentIssuance">
    		<section>
    			<actions>
    				<set field="titleProperty" value="Sales Issuance" />
    				<set field="tabButtonItem" value="indentIssuance" />
    				<set field="screenFlag" value="depotSales" />
    				<set field="targetRequest" value="DepotSalesIndentIssuance" />
    				<script	location="component://depotsales/webapp/depotsales/WEB-INF/actions/depotsales/ListSalesOrderISSUEPaymentResults.groovy" />
    			</actions>
    			<widgets>
    				<decorator-screen name="DepotTransCommonDecorator" location="${parameters.mainDecoratorLocation}">
    					<decorator-section name="body">
    						<section>
    							<widgets>
    							<decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
    							 		<decorator-section name="search-options">
                                            <include-form name="FindSalesIndentPayment" location="component://depotsales/widget/DepotOperationForms.xml"/>
                                        </decorator-section>
                                        <decorator-section name="search-results">
    								<screenlet title="Depot Orders">
    									<platform-specific>
    										<html>
    											<html-template location="component://depotsales/webapp/depotsales/depotsales/ListOrdersForIssuance.ftl" />
    										</html>
    									</platform-specific>
    									<!-- <platform-specific>
											<html>
												<html-template location="component://depotsales/webapp/depotsales/depotsales/MakeSaleOrder.ftl" />
											</html>
										</platform-specific> -->
    								</screenlet>
    								</decorator-section>
    								</decorator-screen>
    							</widgets>
    						</section>
    					</decorator-section>
    				</decorator-screen>
    			</widgets>
    		</section>
    </screen>
    <screen name="FindSupplierPO">
        <section>
            <actions>
                <set field="titleProperty" value="Find Purchase Order"/>              
			    <set field="tabButtonItem" value="FindSupplierPO" />	
			    <set field="tabButtonItem2" value="FindSupplierPO"/>
           		<script location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/purchases/tallyRefNoSearch.groovy"/>
			    <service service-name="performFind" result-map="result" result-map-list="listIt">
	                <field-map field-name="inputFields" from-field="parameters"/>
	                <field-map field-name="entityName" value="OrderHeaderAndSequenceAndRoles"/>
	                <field-map field-name="orderBy" value="-orderDate" />
                </service>
               <set field="targetRequest" value="FindSupplierPO"/>
           <!--     <set field="ChannalType" value="MATERIAL_PUR_CHANNEL"/>  -->
               <set field="partyId" from-field="parameters.partyId"/>
               <set field="roleTypeId" value="BILL_FROM_VENDOR"/>
               <set field="parameters.roleTypeId" from-field="roleTypeId"/>
               <set field="parameters.noConditionFind"  value="N"></set> 
            <!--    <set field="parameters.purposeTypeId" value="BRANCH_PURCHASE"></set>  -->
          <!--      <set field="parameters.salesChannelEnumId"  value="MATERIAL_PUR_CHANNEL"></set>  -->
            <script location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/purchases/supplierPOSearchFilter.groovy"/>
            </actions>
            <widgets>
                 <decorator-screen name="SupplierMyPortalCommonDecorator" location="${parameters.mainDecoratorLocation}">
                      <decorator-section name="body">  
                      <include-menu name="FindSupplierPOSubTabBar" location="component://depotsales/widget/DepotSalesMenus.xml" />
                     <!--  <include-menu name="FindMaterialPOSubTabBar" location="component://materialmgmt/widget/materialmgmtMenus.xml"/> -->
                        <section>
                            <widgets>
                           <!--  <section>
                            <condition>
                            	<if-has-permission permission="MM"  action="_CREATE_PO"/>
                            </condition>
                            <widgets>
                               <link target="CreateMPO" text="Create PO" style="buttontext"/>
                               <link target="CreateMPO" text="Create Rate Contract PO" style="buttontext">
									<parameter param-name="purchaseTypeFlag" value="contractPurchase"/>
							   </link>
							   </widgets>
							   </section> -->
                                  	<screenlet title="search-options">
                          				<include-form name="FindMaterialPurchaseOrder" location="component://materialmgmt/widget/MaterialPurchaseForms.xml"/>
                          			</screenlet>
                          			<platform-specific><html><html-template location="component://materialmgmt/webapp/materialmgmt/purchase/email/PoReportEmail.ftl"/></html></platform-specific>
                   					<screenlet title="Search-results">
                       					<include-form name="listSupplierPurchaseOrders" location="component://depotsales/widget/DepotOperationForms.xml"/>
                   					</screenlet>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>            
        </section>
    </screen>
      <screen name="processIndentBranchSales">
        <section>
            <actions>
                <set field="titleProperty" value="Find Purchase Order"/>              
			    <set field="tabButtonItem" value="FindSupplierPO" />	
			    <set field="tabButtonItem2" value="FindSupplierPO"/>
			    <service service-name="performFind" result-map="result" result-map-list="listIt">
	                <field-map field-name="inputFields" from-field="parameters"/>
	                <field-map field-name="entityName" value="OrderHeaderAndSequenceAndRoles"/>
	                <field-map field-name="orderBy" value="-orderDate" />
                </service>
               <set field="targetRequest" value="FindSupplierPO"/>
               <set field="ChannalType" value="MATERIAL_PUR_CHANNEL"/>
               <set field="partyId" from-field="parameters.partyId"/>
               <set field="roleTypeId" value="BILL_FROM_VENDOR"/>
               <set field="parameters.roleTypeId" from-field="roleTypeId"/>
               <set field="parameters.noConditionFind"  value="N"></set> 
               <set field="parameters.salesChannelEnumId"  value="MATERIAL_PUR_CHANNEL"></set> 
               
            <script location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/purchases/POSearchFilter.groovy"/>
            </actions>
            <widgets>
                 <decorator-screen name="SupplierMyPortalCommonDecorator" location="${parameters.mainDecoratorLocation}">
                      <decorator-section name="body">  
                      <include-menu name="FindSupplierPOSubTabBar" location="component://depotsales/widget/DepotSalesMenus.xml" />
                     <!--  <include-menu name="FindMaterialPOSubTabBar" location="component://materialmgmt/widget/materialmgmtMenus.xml"/> -->
                        <section>
                            <widgets>
                           <!--  <section>
                            <condition>
                            	<if-has-permission permission="MM"  action="_CREATE_PO"/>
                            </condition>
                            <widgets>
                               <link target="CreateMPO" text="Create PO" style="buttontext"/>
                               <link target="CreateMPO" text="Create Rate Contract PO" style="buttontext">
									<parameter param-name="purchaseTypeFlag" value="contractPurchase"/>
							   </link>
							   </widgets>
							   </section> -->
                                  	<screenlet title="search-options">
                          				<include-form name="FindMaterialPurchaseOrder" location="component://materialmgmt/widget/MaterialPurchaseForms.xml"/>
                          			</screenlet>
                          			<platform-specific><html><html-template location="component://materialmgmt/webapp/materialmgmt/purchase/email/PoReportEmail.ftl"/></html></platform-specific>
                   					<screenlet title="Search-results">
                       					<include-form name="listSupplierPurchaseOrders" location="component://depotsales/widget/DepotOperationForms.xml"/>
                   					</screenlet>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>            
        </section>
    </screen>
    
    <screen name="FindSupplierDispatchs">
		<section>
			<actions>
				<set field="titleProperty" value="Find Supplier Dispatch Items" />
				<set field="tabButtonItem" value="FindSupplierDispatchs" />
				<set field="tabButtonItem2" value="FindSupplierDispatchs" />
				<set field="viewIndex" from-field="parameters.VIEW_INDEX" type="Integer" />
				<set field="viewSize" from-field="parameters.VIEW_SIZE" type="Integer"
					default-value="20" />
				<set field="targetRequest" value="FindSupplierDispatchs" />
				<service service-name="performFind" result-map="result"
					result-map-list="listIt">
					<field-map field-name="inputFields" from-field="parameters" />
					<field-map field-name="entityName" value="ShipmentReceipt" />
					<field-map field-name="orderBy" value="-receiptId" />
					<field-map field-name="viewIndex" from-field="viewIndex" />
					<field-map field-name="viewSize" from-field="viewSize" />
				</service>
				<script
					location="component://depotsales/webapp/depotsales/WEB-INF/actions/facility/DepotTranspurchaseDepartments.groovy" />
				<script
					location="component://depotsales/webapp/depotsales/WEB-INF/actions/facility/DepotTransSupplyTillDate.groovy" />
			</actions>
			<widgets>
				<decorator-screen name="SupplierMyPortalCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<include-menu name="SupplierReceiptTabBar"
							location="component://depotsales/widget/DepotSalesMenus.xml" />
						<section>
							<widgets>
								<decorator-screen name="FindScreenDecorator"
									location="component://common/widget/CommonScreens.xml">
									<decorator-section name="search-options">
										<include-form name="FindShipmentReceiptDepotTrans"
											location="component://depotsales/widget/DepotSalesForms.xml" />
									</decorator-section>
									<decorator-section name="search-results">
										<screenlet title="">
											<include-form name="listMaterialShipmentReceiptDepotTrans"
												location="component://depotsales/widget/DepotSalesForms.xml" />
										</screenlet>
										<platform-specific>
											<html>
												<html-template
													location="component://depotsales/webapp/depotsales/depotsales/qcApprovalDepot.ftl" />
											</html>
										</platform-specific>
									</decorator-section>
								</decorator-screen>
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="SupplierPoOverView">
		<section>
			<actions>
				<set field="titleProperty"
					value="Purchase Order OverView - OrderId- ${parameters.orderId}" />
				<set field="tabButtonItem" value="FindSupplierPO" />
				<set field="tabButtonItem2" value="SupplierPoOverView" />
				<set field="layoutSettings.javaScripts[]" value="/ordermgr/images/js/order.js"
					global="true" />
				<set field="layoutSettings.javaScripts[]" value="/ordermgr/images/js/OrderShippingInfo.js"
					global="true" />
				<set field="layoutSettings.javaScripts[]" value="/ordermgr/images/js/geoAutoCompleter.js"
					global="true" />
				<script
					location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/purchases/PurchageOrderView.groovy" />
				<script
					location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/purchases/POViewWebSecure.groovy" />
			</actions>
			<widgets>
				<decorator-screen name="SupplierMyPortalCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<include-menu name="FindSupplierPOSubTabBar"
							location="component://depotsales/widget/DepotSalesMenus.xml" />
						<section>
							<widgets>
								<container style="lefthalf">
									<platform-specific>
										<html>
											<html-template
												location="component://depotsales/webapp/depotsales/Supplier/SupPOInfo.ftl" />
										</html>
									</platform-specific>
									<platform-specific>
										<html>
											<html-template
												location="component://materialmgmt/webapp/materialmgmt/purchase/POItems.ftl" />
										</html>
									</platform-specific>
									<platform-specific>
										<html>
											<html-template
												location="component://materialmgmt/webapp/materialmgmt/purchase/POterms.ftl" />
										</html>
									</platform-specific>
									<platform-specific>
										<html>
											<html-template
												location="component://materialmgmt/webapp/materialmgmt/purchase/POSuspend.ftl" />
										</html>
									</platform-specific>
									<!-- <screenlet title="Order Amendments">
										<include-form
											location="component://depotsales/widget/DepotSalesForms.xml"
											name="orderAmendments" />
									</screenlet> -->
									<!-- <screenlet title="Order Attributes">
										<include-screen name="orderAttributes"  location="component://depotsales/widget/DepotSalesScreens.xml" />
									</screenlet>
									<include-screen name="orderAssoc" location="component://depotsales/widget/DepotSalesScreens.xml" /> -->
								</container>
								<container style="righthalf">
									<!-- <platform-specific>
										<html>
											<html-template
												location="component://materialmgmt/webapp/materialmgmt/purchase/POContactInfo.ftl" />
										</html>
									</platform-specific> -->
									<screenlet title="Receipts For Order">
										<!-- <include-form location="component://materialmgmt/widget/MaterialPurchaseForms.xml" 
											name="listMaterialShipmentReceipt"/> -->
										<include-screen name="listMaterialShipmentReceipt" location="component://depotsales/widget/DepotSalesScreens.xml"/>
									</screenlet>
									<platform-specific>
										<html>
											<html-template
												location="component://materialmgmt/webapp/materialmgmt/purchase/POpaymentInfo.ftl" />
										</html>
									</platform-specific>
									<!-- <screenlet title="Invoices For Order">
										<include-form
											location="component://materialmgmt/widget/MaterialPurchaseForms.xml"
											name="invoiceDetailList" />
									</screenlet>
									<screenlet title="Content">
										<include-screen name="POcontent" location="component://depotsales/widget/DepotSalesScreens.xml"/>
									</screenlet> -->
									<!-- <platform-specific>
										<html>
											<html-template
												location="component://materialmgmt/webapp/materialmgmt/purchase/PONotes.ftl" />
										</html>
									</platform-specific> -->
									<screenlet title="Supply Products Till Date">
										<include-screen name="supplyProductsTillDate" location="component://depotsales/widget/DepotSalesScreens.xml" />
									</screenlet>
								</container>
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	
	<screen name="SupplierDispatchEntry">
		<section>
			<actions>
				<set field="titleProperty" value="PO Receipts" />
				<set field="tabButtonItem" value="FindSupplierDispatchs" />
				<set field="tabButtonItem2" value="SupplierDispatchEntry" />
				<set field="viewSize" from-field="parameters.VIEW_SIZE" />
				<!-- <set field="ChannalType" value="PROD_PRCHSE_CHANNEL"/> -->
				<set field="supplyDate" from-field="parameters.supplyDate" />
				<set field="parameters.roleTypeId" value="SUPPLIER" />
				<set field="isFormSubmitted" from-field="parameters.isFormSubmitted" />
				<set field="defaultEffectiveDateTime" value="${supplyDate}"
					default-value="${bsh:org.ofbiz.base.util.UtilDateTime.nowTimestamp()}" />
				<set field="defaultEffectiveDate"
					value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(defaultEffectiveDateTime, &quot;dd MMMMM, yyyy&quot;);}" />
				<set field="defaulteffectiveDate"
					value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(defaultEffectiveDateTime, &quot;dd MMMMM, yyyy&quot;);}" />
				<!-- <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/enablePartyAutoComplete.groovy"/> -->
				<script
					location="component://depotsales/webapp/depotsales/WEB-INF/actions/facility/enableDepotPartyAutoComplete.groovy" />

				<script
					location="component://depotsales/webapp/depotsales/WEB-INF/actions/facility/purchaseOrderDetailsEntryDepotTrans.groovy" />
			</actions>
			<widgets>
				<decorator-screen name="SupplierMyPortalCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<include-menu name="SupplierReceiptTabBar"
							location="component://depotsales/widget/DepotSalesMenus.xml" />
						<section>
							<widgets>
								<section>
									<condition>
										<if-compare operator="equals" field="isFormSubmitted"
											value="" />
									</condition>
									<widgets>
										<include-screen name="DepotTransReceiptInitEntry" />
									</widgets>
								</section>
								<section>
									<condition>
										<if-compare operator="equals" field="isFormSubmitted"
											value="YES" />
									</condition>
									<widgets>
										<include-screen name="DepotTransReceiptInnerScreen" />
									</widgets>
								</section>
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="DepotTransReceiptInitEntry">
		<section>
			<actions>
				<entity-one value-field="showBoothAutoSuggestConf"
					entity-name="TenantConfiguration">
					<field-map field-name="propertyTypeEnumId" value="FACILITY_AUTOSUGGEST" />
					<field-map field-name="propertyName" value="showBoothAutoSuggest" />
					<select-field field-name="propertyValue" />
				</entity-one>
				<set field="showBoothAutoSuggest" value="${showBoothAutoSuggestConf.propertyValue}" />
				<set field="supplyDate" from-field="parameters.supplyDate" />
				<set field="effectiveDate" value="${parameters.effectiveDate}" />
				<!-- <set field="shipmentTypeId" value="${parameters.shipmentTypeId}"/> -->
				<entity-condition entity-name="Product" list="productList"
					use-cache="true">
				</entity-condition>
				<script
					location="component://depotsales/webapp/depotsales/WEB-INF/actions/facility/TransportersList.groovy" />
			</actions>
			<widgets>
				<section>
					<widgets>
						<platform-specific>
							<html>
								<html-template
									location="component://depotsales/webapp/depotsales/depotsales/ReceiptEntryDepotTrans.ftl" />
							</html>
						</platform-specific>
					</widgets>
					<fail-widgets>
						<label style="h3">${uiLabelMap.ProductFacilityViewPermissionError}
						</label>
					</fail-widgets>
				</section>
			</widgets>
		</section>
	</screen>
	<screen name="DepotTransReceiptInnerScreen">
		<section>
			<actions>
				<set field="effectiveDate" value="${parameters.effectiveDate}" />
			</actions>
			<widgets>
				<section>
					<widgets>
						<platform-specific>
							<html>
								<html-template
									location="component://depotsales/webapp/depotsales/depotsales/ReceiptEntryDepotTrans.ftl" />
							</html>
						</platform-specific>
					</widgets>
				</section>
			</widgets>
		</section>
	</screen>
	<screen name="FindSupplierShipments">
		<section>
			<actions>
				<set field="titleProperty" value="Find Supplier Shipments" />
				<set field="tabButtonItem" value="FindSupplierDispatchs" />
				<set field="tabButtonItem2" value="FindSupplierShipments" />
				<set field="viewIndex" from-field="parameters.VIEW_INDEX" type="Integer" />
				<set field="viewSize" from-field="parameters.VIEW_SIZE" type="Integer"
					default-value="20" />
				<set field="targetRequest" value="FindSupplierShipments" />
				<set field="noConditionFind" value="Y" />
				<service service-name="performFind" result-map="result"
					result-map-list="listIt">
					<field-map field-name="inputFields" from-field="parameters" />
<!-- 					<field-map field-name="inputFields.shipmentTypeId" value="BRANCH_SHIPMENT" /> -->
					<field-map field-name="entityName" value="Shipment" />
					<field-map field-name="orderBy" value="-estimatedShipDate" />
					<field-map field-name="viewIndex" from-field="viewIndex" />
					<field-map field-name="viewSize" from-field="viewSize" />
				</service>
				<script
					location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/purchases/ShipmentPartyView.groovy" />
				<script
					location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/purchases/purchaseDepartments.groovy" />
			</actions>
			<widgets>
				<decorator-screen name="SupplierMyPortalCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<include-menu name="SupplierReceiptTabBar"
							location="component://depotsales/widget/DepotSalesMenus.xml" />
						<section>
							<widgets>
							<platform-specific>
									<html>
										<html-template
											location="component://depotsales/webapp/depotsales/depotsales/DocumentUploadFormsToolTip.ftl" />
									</html>
								</platform-specific>
								<platform-specific>
									<html>
										<html-template
											location="component://depotsales/webapp/depotsales/depotsales/LinkGRNWithPoDepot.ftl" />
									</html>
								</platform-specific>
								<decorator-screen name="FindScreenDecorator"
									location="component://common/widget/CommonScreens.xml">
									<decorator-section name="search-options">
										<include-form name="FindMaterialShipment"
											location="component://depotsales/widget/DepotSalesForms.xml" />
									</decorator-section>
									<decorator-section name="search-results">
										<screenlet title="">
											<include-form name="ListSupplierShipments"
												location="component://depotsales/widget/DepotOperationForms.xml" />
										</screenlet>
										<platform-specific>
											<html>
												<html-template
													location="component://depotsales/webapp/depotsales/depotsales/qcApprovalDepot.ftl" />
											</html>
										</platform-specific>
									</decorator-section>
								</decorator-screen>
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="SupplierShipmentOverview">
		<section>
			<actions>
				<set field="titleProperty" value="Shipment Overview" />
				<set field="tabButtonItem" value="FindSupplierDispatchs" />
				<set field="tabButtonItem2" value="SupplierShipmentOverview" />
				<set field="shipmentId" from-field="parameters.shipmentId" />
				<script
					location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/purchases/getGRNDetailsForInvoice.groovy" />
				<set field="supplierId" from-field="supplierId" />
			</actions>
			<widgets>
				<decorator-screen name="SupplierMyPortalCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<include-menu name="SupplierReceiptTabBar"
							location="component://depotsales/widget/DepotSalesMenus.xml" />
						<section>
							<widgets>
								<screenlet title="Overview">
									<include-screen name="ShipmentOverviewforInvoice"  location="component://depotsales/widget/DepotSalesScreens.xml"/>
								</screenlet>
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="OrderNewNote">
        <section>
            <actions>
            <set field="titleProperty" value="Create New Note"/> 
            <set field="tabButtonItem" value="FindMaterialPO" />	
			      <set field="tabButtonItem2" value="FindMaterialPO"/> 
                <script location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/purchases/PONewNote.groovy"/>
            </actions>
            <widgets>
            <decorator-screen name="DepotTransCommonDecorator" location="${parameters.mainDecoratorLocation}">
	            <decorator-section name="body"> 
                 <platform-specific>
                     <html><html-template location="component://materialmgmt/webapp/materialmgmt/purchase/PONewNote.ftl"/></html>
                 </platform-specific>
                </decorator-section>
            </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="DepotSalesInventoryTransfer">
    		<section>
    			<actions>
    				<set field="titleProperty" value="Inventory Transfers" />
    				<!-- <set field="headerItem" value="facility" /> -->
    				<set field="tabButtonItem" value="findInventoryTransfer" />
    				<set field="tabButtonItem2" value="depotStockXfers" />
    				<!-- <set field="parameters.facilityId" from-field="parameters.facilityId"></set> -->
    				<set field="isInventorySales" value="Y"/>
    				<script	location="component://depotsales/webapp/depotsales/WEB-INF/actions/depotsales/FindFacilityPhysicalInventory.groovy" />
    			</actions>
    			<widgets>
    				<decorator-screen name="DepotTransCommonDecorator" location="${parameters.mainDecoratorLocation}">
    					<decorator-section name="body">
    						<include-menu location="component://depotsales/widget/DepotSalesMenus.xml" name="InventoryTransferTabBar" />
    						<screenlet title="Find Shipmet Inventory Items">
    							<include-form name="FindPhysicalInventoryDepotTransfer"	location="component://depotsales/widget/DepotSalesForms.xml" />
    						</screenlet>
    						<screenlet title="List Of Inventory Items">
    							<platform-specific><html><html-template location="component://depotsales/webapp/depotsales/depotsales/stockXferForm.ftl"/></html></platform-specific>
    							<include-form name="ListPhysicalInventoryDepotTransfer" location="component://depotsales/widget/DepotSalesForms.xml" />
    						</screenlet>
    						<platform-specific>
    							<html>
    								<html-template location="component://depotsales/webapp/depotsales/depotsales/MakeSaleOrder.ftl" />
    							</html>
    						</platform-specific>
    					</decorator-section>
    				</decorator-screen>
    			</widgets>
    		</section>
    	</screen>
    	<screen name="InOutInventoryXfers">
        	<section>
    		     <actions>
    		     	<set field="headerItem" value="Xfer"/>
    		     	<set field="tabButtonItem" value="findInventoryTransfer" />
    		     	<set field="tabButtonItem2" value="InOutTransfer"/>
    		     	<set field="titleProperty" value="Inventory Transfers"/>
    		     	<set field="facilityId" from-field="parameters.facilityId"/>
    		     	<entity-one value-field="facility" entity-name="Facility">
    		     		<field-map field-name="facilityId"/>
    		     	</entity-one>
    		     	<script location="component://depotsales/webapp/depotsales/WEB-INF/actions/depotsales/ListIncomingAndOutgoingXfer.groovy"/>
    		     </actions>
    		     <widgets>
    	     		 <decorator-screen name="DepotTransCommonDecorator" location="${parameters.mainDecoratorLocation}">
    	     		 	<decorator-section name="body">
    	     		 		<include-menu location="component://depotsales/widget/DepotSalesMenus.xml" name="InventoryTransferTabBar" />
    	     		 		<!-- <label style="h1">${facility.facilityName}:[${facility.facilityId}]</label> -->
    		     		 	<screenlet title="Find Product Inventory">
    		     		 		<include-form location="component://depotsales/widget/DepotSalesForms.xml" name="FindFacilityProducts"/>
    		     		 	</screenlet>
    		     		 	<screenlet title="Incomming Transfers">
    		     		 	   	<platform-specific><html><html-template location="component://depotsales/webapp/depotsales/depotsales/ProductQualityAnalysis.ftl"/></html></platform-specific>
    		     		 		<platform-specific><html><html-template location="component://depotsales/webapp/depotsales/depotsales/ListSearchIncomingXfer.ftl"/></html></platform-specific>
    		     		 	</screenlet>
    	     		 	</decorator-section>
    	     		 </decorator-screen>
    	     	</widgets>
    		</section>
    </screen>
	
</screens>