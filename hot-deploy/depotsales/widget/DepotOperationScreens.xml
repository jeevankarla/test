<?xml version="1.0" encoding="UTF-8"?>
<screens xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:noNamespaceSchemaLocation="http://ofbiz.apache.org/dtds/widget-screen.xsd">

<screen name="DepotOperationMainScreen">
		<section>
            <actions>
               <property-map resource="OrderUiLabels" map-name="uiLabelMap"
					global="true" />
				<property-map resource="ProductUiLabels" map-name="uiLabelMap"
					global="true" />
				<set field="titleProperty" value="StockPosition" />
				<set field="tabButtonItem" value="stockPositionDepotSales" />
				<!-- <set field="tabButtonItem2" value="stockPosition"/> -->
				<set field="headerItem" value="StockPosition" />
				<set field="ajaxUrl" value="StockPositionDepotInternal" type="String" />
            </actions>
            <widgets>
                 <section>
                 <widgets>
                 <platform-specific>
									<html>
										<html-template
											location="component://depotsales/webapp/depotsales/depotsales/stockPositionDepot_Select.ftl" />
									</html>
								</platform-specific>
                    <include-screen name="StockPositionDepotInternal" />
                    </widgets>
                    </section>
            </widgets>
        </section>
	</screen>
	
	<screen name="StockPositionSubDepot">
		<section>
			<actions>
				<property-map resource="OrderUiLabels" map-name="uiLabelMap"
					global="true" />
				<property-map resource="ProductUiLabels" map-name="uiLabelMap"
					global="true" />
				<set field="titleProperty" value="Stock Position SubDepot" />
				<set field="tabButtonItem" value="StockPositionSubDepot" />
				<!-- <set field="tabButtonItem2" value="stockPosition"/> -->
				<set field="headerItem" value="StockPosition" />
				<set field="ajaxUrl" value="StockPositionSubDepot" type="String" />
			</actions>
			<widgets>
				<!-- <decorator-screen name="DepotSalesCommonDecorator" location="${parameters.mainDecoratorLocation}"> -->
				<decorator-screen name="CommonInventoryDecoratorSubOprDepot"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<widgets>
								<platform-specific>
									<html>
										<html-template
											location="component://depotsales/webapp/depotsales/depotsales/stockPostionFindSubDepot.ftl" />
									</html>
								</platform-specific>
								<include-screen name="StockPositionDepotInternal" />
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>


	<screen name="StockPositionDepotInternal">
		<section>
			<actions>
				<property-map resource="OrderUiLabels" map-name="uiLabelMap"
					global="true" />
				<property-map resource="ProductUiLabels" map-name="uiLabelMap"
					global="true" />
				<property-map resource="CommonUiLabels" map-name="uiLabelMap"
					global="true" />
				<script location="component://depotsales/webapp/depotsales/WEB-INF/actions/facility/stockPositionDepot.groovy"/> 
			</actions>
			<condition>
				<or>
					<not>
						<if-empty field="parameters.productId" />
					</not>
					<not>
						<if-empty field="productId" />
					</not>
				</or>
			</condition>
			<widgets>
			
				<container>
					<platform-specific>
						<html>
							<html-template
								location="component://materialmgmt/webapp/materialmgmt/reports/stockPosition.ftl" />
						</html>
					</platform-specific>

					<platform-specific>
						<html>
							<html-template
								location="component://materialmgmt/webapp/materialmgmt/reports/EditProductInventoryItems.ftl" />
						</html>
					</platform-specific>

					<screenlet title="${uiLabelMap.ProductOutstandingPurchaseOrders}">
						<include-form name="OutstandingPurchaseOrders"
							location="component://materialmgmt/widget/materialmgmtForms.xml" />
					</screenlet>
					<screenlet title="${uiLabelMap.ProductRequirements}">
						<include-form name="ListRequirements"
							location="component://materialmgmt/widget/materialmgmtForms.xml" />
					</screenlet>
					<screenlet title="${uiLabelMap.Indents}">
						<include-form name="ListRequestList"
							location="component://materialmgmt/widget/materialmgmtForms.xml" />
					</screenlet>
					<screenlet title="Receipts">
						<include-form name="ListReceiptsList"
							location="component://materialmgmt/widget/materialmgmtForms.xml" />
					</screenlet>
					<screenlet title="${uiLabelMap.ProductSuppliers}">
						<include-form name="ListSupplierProducts"
							location="component://materialmgmt/widget/materialmgmtForms.xml" />
					</screenlet>
				</container>
			</widgets>
		</section>
	</screen>
	
	<screen name="DepotSalesInventorySales">
		<section>
			<actions>
				<set field="titleProperty" value="Inventory Sales" />
				<!-- <set field="headerItem" value="facility" /> -->
				<set field="tabButtonItem" value="PhysicalInventory" />
				<!-- <set field="parameters.facilityId" from-field="parameters.facilityId"></set> -->
				<set field="isInventorySales" value="Y"/>
				<script	location="component://depotsales/webapp/depotsales/WEB-INF/actions/depotsales/FindFacilityPhysicalInventory.groovy" />
			</actions>
			<widgets>
				<decorator-screen name="DepotTransCommonDecorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<screenlet title="Find Shipmet Inventory Items">
							<include-form name="FindPhysicalInventoryDepotForSale"	location="component://depotsales/widget/DepotSalesForms.xml" />
						</screenlet>
						<screenlet title="List Of Inventory Items">
							<include-form name="ListPhysicalInventoryDepotForSale" location="component://depotsales/widget/DepotSalesForms.xml" />
						</screenlet>
						<platform-specific>
							<html>
								<html-template location="component://depotsales/webapp/depotsales/depotsales/MakeSaleOrder.ftl" />
							</html>
						</platform-specific>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="FindDepotTransPO">
		<section>
			<actions>
				<set field="titleProperty" value="Find Purchase Order" />
				<set field="tabButtonItem" value="FindDepotTransPO" />
				<set field="tabButtonItem2" value="FindDepotTransPO" />
				<service service-name="performFind" result-map="result"
					result-map-list="listIt">
					<field-map field-name="inputFields" from-field="parameters" />
					<field-map field-name="entityName" value="OrderHeaderAndSequenceAndRoles" />
					<field-map field-name="orderBy" value="-orderDate" />
				</service>
				<set field="targetRequest" value="FindDepotTransPO" />
				<set field="ChannalType" value="MATERIAL_PUR_CHANNEL" />
				<set field="partyId" from-field="parameters.partyId" />
				<set field="roleTypeId" value="BILL_FROM_VENDOR" />
				<set field="parameters.roleTypeId" from-field="roleTypeId" />
				<set field="parameters.noConditionFind" value="N"></set>
				<set field="parameters.salesChannelEnumId" value="MATERIAL_PUR_CHANNEL"></set>

				<script
					location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/purchases/POSearchFilter.groovy" />
			</actions>
			<widgets>
				<decorator-screen name="DepotTransCommonDecorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<include-menu location="component://depotsales/widget/DepotSalesMenus.xml"
							name="FindDepotTransPOSubTabBar" />
						<section>
							<widgets>
								<section>
                             		<condition>
                            			<if-has-permission permission="DEPOTSALES"  action="_CREATE_PO"/>
                            		</condition>
									<widgets>
										<link target="CreateDepotTransPO" text="Create PO" style="buttontext" />
									</widgets>
								</section>
								<screenlet title="search-options">
									<include-form name="FindDepotTransPurchaseOrder"
										location="component://depotsales/widget/DepotOperationForms.xml" />
								</screenlet>
								<screenlet title="Search-results">
									<include-form name="listDepotTransPurchaseOrders"
										location="component://depotsales/widget/DepotOperationForms.xml" />
								</screenlet>
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="CreateDepotTransPO">
		<section>
			<actions>
				<set field="titleProperty" value="Find Purchase Order" />
				<set field="tabButtonItem" value="FindDepotTransPO" />
				<set field="targetRequest" value="FindDepotTransPO" />
				<!-- <set field="ChannalType" value="PROD_PRCHSE_CHANNEL"/> -->
				<set field="parameters.roleTypeId" value="SUPPLIER" />
				<set field="changeFlag" value="PurchaseOrder" />
				<set field="subDivDeptFlag" value="PurchaseOrder" />
				<set field="parameters.changeFlag" value="PurchaseOrder" />
				<set field="purchaseTypeFlag" from-field="parameters.purchaseTypeFlag" />
				<set field="parameters.partyStatusId" value="PARTY_ENABLED" />
				<!-- <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/enablePartyAutoComplete.groovy"/> -->
				<script
					location="component://depotsales/webapp/depotsales/WEB-INF/actions/facility/enableDepotPartyAutoComplete.groovy" />
				<script
					location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/orgnigationDept.groovy" />
				<script
					location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/purchases/PurchaseEntryFormNew.groovy" />
				<script
					location="component://depotsales/webapp/depotsales/WEB-INF/actions/facility/purchaseOrderDetailsEntryDepotTrans.groovy" />
			</actions>
			<widgets>
				<decorator-screen name="DepotTransCommonDecorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<widgets>
								<label style="h1">New PO</label>
								<platform-specific>
									<html>
										<html-template
											location="component://depotsales/webapp/depotsales/depotsales/CreateDepotTransPO.ftl" />
									</html>
								</platform-specific>
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="ProcessOrderAndShipmentGeneration">
        <section>
            <actions>
				<set field="titleProperty" value="Process Depot Orders" />
				<set field="tabButtonItem" value="FindDepotTransPO" />
				<set field="tabButtonItem2" value="ProcessOrdersSuppliersDepotTrans" />
				<set field="viewSize" from-field="parameters.VIEW_SIZE" />
				<set field="defaultEffectiveDateTime"
					value="${bsh:org.ofbiz.base.util.UtilDateTime.getDayStart(org.ofbiz.base.util.UtilDateTime.nowTimestamp())}" />
				<set field="defaultEffectiveDate"
					value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(defaultEffectiveDateTime, &quot;dd MMMMM, yyyy&quot;);}" />
				<set field="shipmentTypeId" from-field="parameters.shipmentTypeId" />
				<set field="salesChannelEnumId" from-field="parameters.salesChannelEnumId" />
				<set field="screenFlag" value="depotSales" />
				<!-- <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/getIcpSalesOrder.groovy" 
					/> -->
				<script
					location="component://depotsales/webapp/depotsales/WEB-INF/actions/depotsales/ListSalesOrderSearchResults.groovy" />
			</actions>
            <widgets>
                 <decorator-screen name="DepotTransCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
					<include-menu location="component://depotsales/widget/DepotSalesMenus.xml" name="FindDepotTransPOSubTabBar" />
						 <section>
                            <widgets>
                                <decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
                                    <decorator-section name="menu-bar">
                                    	 
                                    </decorator-section>
                                    <decorator-section name="search-options">
                                        <include-form name="FindDepotTransOrder" location="component://depotsales/widget/DepotOperationForms.xml"/>
                                    </decorator-section>
                                    <decorator-section name="search-results">
            							<screenlet title="Orders List"> 
                                        	<platform-specific>
												<html>
													<html-template location="component://depotsales/webapp/depotsales/depotsales/ListOrderSearchResults.ftl" />
												</html>
											</platform-specific>
                                        </screenlet>
                                    </decorator-section>
                                </decorator-screen>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="EditMaterialDepotTransPO">
		<section>
			<actions>
				<set field="titleProperty" value="Find Purchase Order" />
				<set field="tabButtonItem" value="FindDepotTransPO" />
				<set field="targetRequest" value="FindMaterialPO" />
				<set field="parameters.roleTypeId" value="MAINSTORE_VENDOR" />
				<set field="orderId" from-field="parameters.orderId" />
				<set field="changeFlag" value="PurchaseOrder" />
				<set field="parameters.POId" from-field="orderId" />
				<set field="parameters.changeFlag" value="PurchaseOrder" />
				<script
					location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/enablePartyAutoComplete.groovy" />
				<script
					location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/orgnigationDept.groovy" />
				<script
					location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/purchases/PurchaseEntryFormNew.groovy" />
				<script
					location="component://materialmgmt/webapp/materialmgmt/WEB-INF/actions/purchases/EditPOEntryForm.groovy" />
				<set field="purchaseTypeFlag" from-field="parameters.purchaseTypeFlag" />
			</actions>
			<widgets>
				<decorator-screen name="DepotTransCommonDecorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<section>
							<widgets>
								<label style="h1">Order Id : "${orderId}"</label>

								<platform-specific>
									<html>
										<html-template
											location="component://depotsales/webapp/depotsales/depotsales/CreateDepotTransPO.ftl" />
									</html>
								</platform-specific>
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="DepotTransReceiptInitEntry">
		<section>
			<actions>
				<entity-one value-field="showBoothAutoSuggestConf"
					entity-name="TenantConfiguration">
					<field-map field-name="propertyTypeEnumId" value="FACILITY_AUTOSUGGEST" />
					<field-map field-name="propertyName" value="showBoothAutoSuggest" />
					<select-field field-name="propertyValue" />
				</entity-one>
				<set field="showBoothAutoSuggest" value="${showBoothAutoSuggestConf.propertyValue}" />
				<set field="supplyDate" from-field="parameters.supplyDate" />
				<set field="effectiveDate" value="${parameters.effectiveDate}" />
				<!-- <set field="shipmentTypeId" value="${parameters.shipmentTypeId}"/> -->
				<entity-condition entity-name="Product" list="productList"
					use-cache="true">
				</entity-condition>
			</actions>
			<widgets>
				<section>
					<widgets>
						<platform-specific>
							<html>
								<html-template
									location="component://depotsales/webapp/depotsales/depotsales/ReceiptEntryDepotTrans.ftl" />
							</html>
						</platform-specific>
					</widgets>
					<fail-widgets>
						<label style="h3">${uiLabelMap.ProductFacilityViewPermissionError}
						</label>
					</fail-widgets>
				</section>
			</widgets>
		</section>
	</screen>
	<screen name="DepotTransReceiptInnerScreen">
		<section>
			<actions>
				<set field="effectiveDate" value="${parameters.effectiveDate}" />
			</actions>
			<widgets>
				<section>
					<widgets>
						<platform-specific>
							<html>
								<html-template
									location="component://depotsales/webapp/depotsales/depotsales/ReceiptEntryDepotTrans.ftl" />
							</html>
						</platform-specific>
					</widgets>
				</section>
			</widgets>
		</section>
	</screen>
	<screen name="DepotTransPOMaterialReceiptsDepot">
		<section>
			<actions>
				<set field="titleProperty" value="PO Receipts" />
				<set field="tabButtonItem" value="DepotTransReceipts" />
				<set field="tabButtonItem2" value="DepotTransMaterialReceipts" />
				<set field="viewSize" from-field="parameters.VIEW_SIZE" />
				<!-- <set field="ChannalType" value="PROD_PRCHSE_CHANNEL"/> -->
				<set field="supplyDate" from-field="parameters.supplyDate" />
				<set field="parameters.roleTypeId" value="SUPPLIER" />
				<set field="isFormSubmitted" from-field="parameters.isFormSubmitted" />
				<set field="defaultEffectiveDateTime" value="${supplyDate}"
					default-value="${bsh:org.ofbiz.base.util.UtilDateTime.nowTimestamp()}" />
				<set field="defaultEffectiveDate"
					value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(defaultEffectiveDateTime, &quot;dd MMMMM, yyyy&quot;);}" />
				<set field="defaulteffectiveDate"
					value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(defaultEffectiveDateTime, &quot;dd:MM:yyyy hh:mm&quot;);}" />
				<!-- <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/enablePartyAutoComplete.groovy"/> -->
				<script
					location="component://depotsales/webapp/depotsales/WEB-INF/actions/facility/enableDepotPartyAutoComplete.groovy" />

				<script
					location="component://depotsales/webapp/depotsales/WEB-INF/actions/facility/purchaseOrderDetailsEntryDepotTrans.groovy" />
					
			</actions>
			<widgets>
				<decorator-screen name="DepotTransCommonDecorator" location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<include-menu name="DepotTransReceiptTabBar"
							location="component://depotsales/widget/DepotSalesMenus.xml" />
						<section>
							<widgets>
								<section>
									<condition>
										<if-compare operator="equals" field="isFormSubmitted"
											value="" />
									</condition>
									<widgets>
										<include-screen name="DepotTransReceiptInitEntry" />
									</widgets>
								</section>
								<section>
									<condition>
										<if-compare operator="equals" field="isFormSubmitted"
											value="YES" />
									</condition>
									<widgets>
										<include-screen name="DepotTransReceiptInnerScreen" />
									</widgets>
								</section>
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
</screens>