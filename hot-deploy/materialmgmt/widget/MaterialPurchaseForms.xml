<?xml version="1.0" encoding="UTF-8"?>
<forms xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"  xsi:noNamespaceSchemaLocation="http://ofbiz.apache.org/dtds/widget-form.xsd">

	<form name="FindMaterialPurchaseOrder" title="" type="single" target="${targetRequest}" header-row-style="header-row" default-table-style="basic-table">
        <field title="Delivery Date" name="estimatedDeliveryDate"><date-find/></field>
        <field name="orderId"><text-find/></field>
        <field name="orderTypeId"><hidden value="PURCHASE_ORDER"/></field>
        <field name="salesChannelEnumId" ><hidden value="${ChannalType}"  > </hidden></field>
        <field name="statusId">
        	<drop-down>
        		<option key="ORDER_CREATED" description="Created"/>
        		<option key="ORDER_APPROVED" description="Approved"/>
        		<option key="ORDER_CANCELLED" description="Cancelled"/>
        	</drop-down>
        </field>
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    
     <form name="listMaterialPurchaseOrders" type="list" list-name="listIt" paginate-target="${targetRequest}"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
            <service service-name="performFind" result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="parameters"/>
                <field-map field-name="entityName" value="OrderHeader"/>
                <field-map field-name="orderBy" from-field="parameters.sortField" value="-lastUpdatedStamp"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
            </service>
        </actions>
      	<row-actions>
      		<entity-condition entity-name="OrderRole" list="orderRoles">
      			<condition-list combine="and">
      				<condition-expr field-name="orderId" from-field="orderId"/>
      				<condition-expr field-name="roleTypeId" operator="equals" value="BILL_FROM_VENDOR"/>
      			</condition-list>
      		</entity-condition>
      	</row-actions>
      	<field name="orderId" widget-style="buttontext">
      		<hyperlink target="orderview" description="${orderId}" target-window="_blank">
      			<parameter param-name="orderId"/>
      		</hyperlink>
      	</field>
        <field name="entryDate" title="Entry Date"><display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(entryDate, &quot;dd/MM/yyyy&quot;);}"/></field>
        <field name="createdBy" title="Created By"><display/></field>
        <field name="salesChannelEnumId"><display/></field>
      
        <field name="cancelOrder" widget-style="buttontext">
            <hyperlink target="cancelPurchaseOrder" description="Cancel Order">
                <parameter param-name="orderId"/>
                <parameter param-name="statusId"/>
                <parameter param-name="partyId" from-field="partyIdFrom"/>
            </hyperlink>
        </field> 
    </form>
	
</forms>