<?xml version="1.0" encoding="UTF-8"?>
<forms xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
        xsi:noNamespaceSchemaLocation="http://ofbiz.apache.org/dtds/widget-form.xsd">

 	<form name="IndentEntryProducts" type="multi" list-name="indentEntryIncList" odd-row-style="alternate-row" header-row-style="header-row"
    	default-table-style="basic-table hover-bar" separate-columns="true" target="processIndentEntry" id="IndentEntryProducts" >
    	<field name="sno" title="SNo"><display/></field>	  
        <field name="productId" title="${uiLabelMap.Product}"><lookup target-form-name="LookupByProduct"></lookup></field>
        <field name="quantity" title="${uiLabelMap.quantity}"><text size="10"></text></field>                                 
        <field name="submitButton" title="${uiLabelMap.ProductSubmit}" action="javascript:appendParamsToIndentEntryProducts();" event="onclick" widget-style="h2">
            <submit button-type="button" />
        </field>        
    </form>
   
   <form name="FindFacilityOptions" title="" type="single" target="FindByProdFacility" header-row-style="header-row" default-table-style="basic-table">
        <actions>
        	<set field="byProdRouteId" from-field="byProdRouteId"/>
        	<set field="byProdRouteId_op" from-field="byProdRouteId_op"/>
        </actions>
        <field name="facilityId"><text-find/></field>
        <field name="facilityName"><text-find/></field>
        <field name="facilityTypeId"><hidden value="BOOTH"/></field>
        <!-- <field name="parentFacilityId" title="Route/Parent Facility Id"><text-find/></field> -->
        <!-- <field name="facilityTypeId">
            <drop-down allow-empty="true">
                <entity-options description="${description}" entity-name="FacilityType" key-field-name="facilityTypeId">
                    <entity-order-by field-name="description"/>
                </entity-options>
            </drop-down>
        </field> -->
        <field name="categoryTypeEnum" title="Category">
            <drop-down allow-empty="true">
                <entity-options entity-name="Enumeration" description="${description}" key-field-name="enumId">
                    <entity-constraint name="enumTypeId" value="BYPROD_FA_CAT"/>
                    <entity-order-by field-name="sequenceId"/>
                </entity-options>
            </drop-down>
        </field>        
        <field name="ownerPartyId" title="${uiLabelMap.ProductFacilityOwner}"><lookup target-form-name="LookupPartyName"/></field>
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    <form name="subscriptionIndent" title="" type="single" target="subscriptionIndent" header-row-style="header-row" default-table-style="basic-table" >
        <field name="facilityId" title="Requesting Facility" required-field="true"><lookup target-form-name="LookupFacility"/></field>
        <field name="orderTypeId" event="onchange" action="javascript:indentFieldsOnchange();">
            <drop-down allow-empty="false">
            		<option key="CASH" description="Cash"/>
            		<option key="SPECIAL_ORDER" description="Special Order"/>
            </drop-down>
        </field>
        <field name="route" required-field="true"><text/></field>
        <field name="submitButton" title="Get Indent" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    <!-- <form name="parlorSalesIndent" title="" type="single" target="" header-row-style="header-row" default-table-style="basic-table" >
    	
    	<field name="orderDate" title="Date" required-field="true"> <date-time/></field>
        <field name="facilityId" title="Parlor Id" required-field="true"><lookup target-form-name="LookupFacility"/></field>
        <field name="submitButton" title="Create Order" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form> -->
    <form name="parlorSalesIndent" title="" type="single" target="ParlorSales" header-row-style="header-row" default-table-style="basic-table" >
        <field name="facilityId" title="Requesting Facility" required-field="true"><lookup target-form-name="LookupFacility"/></field>
        <!-- <field name="orderTypeId" event="onchange" action="javascript:indentFieldsOnchange();">
            <drop-down allow-empty="false">
            		<option key="CASH" description="Cash"/>
            		<option key="SPECIAL_ORDER" description="Special Order"/>
            </drop-down>
        </field>
        <field name="route" required-field="true"><text/></field> -->
        <field name="submitButton" title="Get Indent" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    <form name="listParlorIndentProducts" title="" type="multi" target="createParlorSalesIndent" odd-row-style="alternate-row" header-row-style="header-row" default-table-style="basic-table" separate-columns="true" group-columns="true">
        <!-- <actions>
        	<set field="prodSize" value="${groovy:return productList.size()}" type="Integer"/>
        </actions> -->
        <field name="facilityId"><hidden/></field>
        <field name="productId" title="Product"><text/></field>
        <field name="quantity" title="Today Qty"><text size="5"/></field>
        <field name="button" title="Add Items" event="onclick" action="javascript:return addItemsOnclick();" widget-style="smallSubmit"><submit button-type="button"/></field>
        <field name="submitButton" title="Save Indent" widget-style="smallSubmit"><submit button-type="button"/></field>
        <sort-order>
        	<sort-field name="productId" />
        	<sort-field name="nowQuantity"/>
        	<sort-field name="quantity"/>
        	<field-group >
	        	<sort-field name="nowQuantity"/>
        		<sort-field name="quantity"/>
        	</field-group>
        	
        </sort-order>
    </form>
    <form name="listLastIndentProducts" title="" type="multi" list-name="productList" target="createSubscriptionIndent" odd-row-style="alternate-row" header-row-style="header-row" default-table-style="basic-table" group-columns="true">
        <actions>
        	<set field="prodSize" value="${groovy:return productList.size()}" type="Integer"/>
        </actions>
        <field name="facilityId"><hidden/></field>
        <field name="orderTypeId"><hidden/></field>
        <field name="productSize"><hidden value="${prodSize}"/></field>
        <field use-when="productId == null" name="productId" title="Product"><text/></field>
        <field use-when="productId == null" name="quantity" title="Today Qty"><text size="5"/></field>
        <field name="lastQuantity" title="Last Qty(${lastIndentDate})"><display/></field>
        <field use-when="productId != null" name="productId" title="Product"><display-entity entity-name="Product" key-field-name="productId" description="${internalName}[${productId}]"/></field>
        <field use-when="productId != null" name="quantity" title="Today Qty"><text size="5"/></field>
        <!-- <field use-when="productId != null" name="quantity" title="Last Qty"><display/></field> -->
        <!-- <field name="button" title="Add Items" event="onclick" action="javascript:return addFieldsOnclick(${prodSize});" widget-style="smallSubmit"><submit button-type="button"/></field> -->
        <field name="submitButton" title="Save Indent" widget-style="smallSubmit"><submit button-type="button"/></field>
        <sort-order>
        	<sort-field name="productId" />
        	<sort-field name="nowQuantity"/>
        	<sort-field name="quantity"/>
        	<field-group >
	        	<sort-field name="nowQuantity"/>
        		<sort-field name="quantity"/>
        	</field-group>
        	
        </sort-order>
    </form>
    <form name="DSCorrectionIndent" title="" type="single" target="DeliveryScheduleCorrection" header-row-style="header-row" default-table-style="basic-table" >
        <!-- <field name="scheduleDate"><date-time/></field> -->
        <field name="facilityId" title="Requesting Facility" required-field="true"><lookup target-form-name="LookupFacility"/></field>
        <field name="orderTypeId">
            <drop-down allow-empty="false">
            		<option key="CASH" description="Cash"/>
            		<option key="SPECIAL_ORDER" description="Special Order"/>
            </drop-down>
        </field>
        <field name="submitButton" title="Get Entry" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    <form name="listDeliveryScheduleProducts" title="" type="multi" list-name="productList" target="ProcessDeliveryScheduleCorrection" odd-row-style="alternate-row" header-row-style="header-row" default-table-style="basic-table">
        <!-- <actions>
        	<set field="prodSize" value="${groovy:return productList.size()}" type="Integer"/>
        </actions> -->
        <field name="facilityId"><hidden/></field>
        <field name="orderTypeId"><hidden/></field>
        <!-- <field name="productSize"><hidden value="${prodSize}"/></field> -->
        <field name="productId" title="Product"><text/></field>
        <field name="quantity" title="Quantity"><text/></field>
        <!-- <field use-when="productId != null" name="productId" title="Product"><display-entity entity-name="Product" key-field-name="productId" description="${internalName}[${productId}]"/></field>
        <field use-when="productId != null" name="quantity" title="Quantity"><text/></field>
         --><field name="button" title="Add Items" event="onclick" action="javascript:return addItemsOnclick();" widget-style="smallSubmit"><submit button-type="button"/></field>
        <field name="submitButton" title="Save Indent" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    
	<form name="FindFacility" type="list" list-name="listIt" paginate-target="FindByProdFacility"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
            <service service-name="performFind" result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="parameters"/>
                <field-map field-name="entityName" value="Facility"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
            </service>
            <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/customFacilitySearch.groovy" />
        </actions>
        
        <field name="facilityId" title="Facility Id">
            <hyperlink target="EditFacility" description="${facilityId}">
                <parameter param-name="facilityId"/>
            </hyperlink>
        </field>
        <field name="facilityName" title="Facility Name"><display/></field>
        <field name="ownerPartyId" title="Owner Party Id">	
        <hyperlink target="viewprofile?partyId=${ownerPartyId}" description="${ownerPartyId}" >
        </hyperlink>
        </field>
        <field name="categoryTypeEnum" title="${uiLabelMap.ProductFacilityType}"><display/></field>
        <field name="zoneId" title="Zone"><display/></field>
        <field name="byProdRouteId" title="Route"><display/></field>
        <!-- <field name="parentFacilityId" title="Route/Parent Facility Id"><display/></field>  -->
        <!-- <on-event-update-area event-type="paginate" area-id="search-results" area-target="FindByProdFacility"/> -->
    </form>
    
    
    <form name="EditFacility" type="single" odd-row-style="alternate-row" header-row-style="header-row"
    	default-table-style="basic-table hover-bar" separate-columns="true" target="CreateFacility" >
    	<auto-fields-entity entity-name="Facility" default-field-type="edit"/>
    	<alt-target use-when="facilityId != null" target="EditFacility"/>
    	<field name="defaultInventoryItemTypeId"><ignored/></field>
    	<field name="sequenceNum"><ignored/></field>
    	<field name="oldSquareFootage"><ignored/></field>
    	<field name="facilitySize"><ignored/></field>
    	<field name="facilitySizeUomId"><ignored/></field>
    	<field name="defaultDaysToShip"><ignored/></field>
    	<field name="excludeIncentive"><ignored/></field>
    	<field name="excludeStopShipCheck"><ignored/></field>
    	<field name="isUpcountry"><ignored/></field>
    	<field name="defaultDimensionUomId"><ignored/></field>
    	<field name="defaultWeightUomId"><ignored/></field>
    	<field name="cashDues"><ignored/></field>
    	<field name="useEcs"><ignored/></field>
    	<field name="categoryTypeEnum"><ignored/></field>
    	<field name="geoPointId"><ignored/></field>
    	<field name="submitButton" title="Submit" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
     <form name="FindArPayments" type="single" target="findPayments" extends="FindPayments" extends-resource="component://byproducts/widget/ByProductsForms.xml">
        <field name="parentTypeId"><hidden value="RECEIPT"/></field>
        <!-- <field name="paymentTypeId" position="1">
            <drop-down allow-empty="true">
                <entity-options entity-name="PaymentType" description="${description}">
                    <entity-constraint name="parentTypeId" value="RECEIPT"/>
                </entity-options>
            </drop-down>
        </field> -->
    </form>
    <form name="ListPayments" type="list" separate-columns="true" default-entity-name="Payment" list-name="listIt" paginate-target="findPayments" paginate="true"
        odd-row-style="alternate-row" default-table-style="basic-table hover-bar">
        <actions>
            <service service-name="performFind" result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="parameters"/>
                <field-map field-name="entityName" value="Payment"/>
                <field-map field-name="orderBy" value="effectiveDate DESC"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
            </service>
        </actions>
        <field name="paymentId" widget-style="buttontext">
            <hyperlink description="${paymentId}" target="paymentOverview">
                <parameter param-name="paymentId"/>
            </hyperlink>
        </field>
        <field name="facilityId" title="Party Code"><display/></field>
        <!-- <field name="paymentTypeId" title="${uiLabelMap.AccountingPaymentType}"><display-entity entity-name="PaymentType"/></field> -->
        <field name="statusId" title="${uiLabelMap.CommonStatus}"><display-entity entity-name="StatusItem"/></field>
        <field name="partyIdFrom" title="${uiLabelMap.AccountingFromParty}">
            <display-entity entity-name="PartyNameView" key-field-name="partyId" description="${groupName}${lastName},${firstName}">
                <sub-hyperlink target="/partymgr/control/viewprofile" target-type="inter-app" description="[${partyIdFrom}]" >
                    <parameter param-name="partyId" from-field="partyIdFrom"/>
                </sub-hyperlink>
            </display-entity>
        </field>
        <field name="partyIdTo" title="${uiLabelMap.AccountingToParty}">
            <display-entity entity-name="PartyNameView" key-field-name="partyId" description="${groupName}${lastName},${firstName}">
                <sub-hyperlink target="/partymgr/control/viewprofile" target-type="inter-app" description="[${partyIdTo}]" >
                    <parameter param-name="partyId" from-field="partyIdTo"/>
                </sub-hyperlink>
            </display-entity>
        </field>        
        <field name="paymentDate" title="Payment Date" ><display  description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(paymentDate, &quot;dd/MM/yyyy&quot;);}"/></field>
        <field name="lastModifiedByUserLogin" title="Entry Made By" ><display/></field>
        <field name="lastModifiedDate" title="Last Modified Date"><display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(lastModifiedDate, &quot;dd/MM/yyyy hh:mm a&quot;);}"/></field>
        <field name="currencyUomId"><hidden/></field>
        <field name="amount"><display also-hidden="false" type="currency" currency="${currencyUomId}"/></field>
    </form>
    
    <form name="FindPayments" type="single" target="findPayments" header-row-style="header-row" default-table-style="basic-table">
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="paymentId"><text-find ignore-case="true"/></field>
        <field name="facilityId" title="Party Code"><text-find ignore-case="true"/></field>
        <field position="2" name="partyIdTo" title="To Party Code"><lookup target-form-name="LookupPartyName"/></field>
        <!-- <field name="paymentTypeId" title="${uiLabelMap.AccountingPaymentType}" position="1">
            <drop-down allow-empty="true">
                <entity-options description="${description}" entity-name="PaymentType">
                    <entity-order-by field-name="description"/>
                </entity-options>
            </drop-down>
        </field> -->
        <field name="statusId" title="${uiLabelMap.CommonStatus}" position="2">
            <drop-down allow-empty="true">
                <entity-options description="${description}" entity-name="StatusItem">
                    <entity-constraint name="statusTypeId" operator="equals" value="PMNT_STATUS"/>
                    <entity-order-by field-name="description"/>
                </entity-options>
            </drop-down>
        </field>
        <!-- <field position="1" name="partyIdFrom"><lookup target-form-name="LookupPartyName"/></field> -->
        
        <field position="1" name="amount"><text/></field>
        <field name="paymentRefNum"><text-find ignore-case="true"/></field> 
        <field name="searchButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    <form name="CreateAdvancePayment"  title="" type="single" target="CreateAdvancedPayments">
        <field name="partyId"><hidden value="${partyId}"/></field>
        <field name="facilityId" title="Booth Id" required-field="true" tooltip="booth Id is mandatory field for payment"><lookup target-form-name="LookupFacility"></lookup></field>
        <field use-when="facilityId != null" name="" title="" widget-style="buttontext">
        	<hyperlink  target-type="plain" description="Make Advance Payment"  target="javascript:showPaymentEntry(${partyId});"></hyperlink>
        </field>
    	<field use-when="facilityId == null" name="submitButton" title="Submit" ><submit button-type="button"/></field>
    </form>
            
    <form name="listAdvancePayments"  title="" type="list" separate-columns="true" default-entity-name="Payment" list-name="listIt" paginate-target="CreateAdvancedPayments" paginate="true"
        odd-row-style="alternate-row" default-table-style="basic-table hover-bar" view-size="10">
     	<actions>
     		<set field="parameters.paymentTypeId" value="ADVDEPOSIT_PAYIN"/>
     		<set field="parameters.statusId" value="PMNT_RECEIVED"/>
            <service service-name="performFind" result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="parameters"/>
                <field-map field-name="entityName" value="Payment"/>
                <field-map field-name="orderBy" value="-paymentDate"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
            </service>
    	</actions>
    	<field name="paymentId" widget-style="buttontext">
           <hyperlink description="${paymentId}" target="paymentOverview">
                <parameter param-name="paymentId"/>
            </hyperlink>
        </field>
    	<field name="partyIdFrom">
    	<display-entity entity-name="PartyNameView" key-field-name="partyId" description="${groupName}${lastName} ${firstName}">
                <!-- <sub-hyperlink target="/partymgr/control/viewprofile" target-type="inter-app" description="[${partyIdFrom}]" >
                    <parameter param-name="partyId" from-field="partyIdFrom"/>
                </sub-hyperlink> -->
            </display-entity>
    	</field>
    	<field name="paymentDate"><display/></field>
    	<field name="amount"><display/></field>
    	<field name="submitButton" title="Cancel Payment" widget-style="buttontext">
            <hyperlink description="Cancel Payment" target="voidPayment">
                <parameter param-name="paymentId"/>
            </hyperlink>
        </field>
    </form>
    
    <form name="FindDuesPayments" odd-row-style="alternate-row" header-row-style="header-row" type="single" target="FindDuesToPay"
    	default-table-style="basic-table hover-bar" separate-columns="true"> 
    	<field name="hideSearch"><hidden value="N"/></field>
    	<field name="onlyCurrentDues"><hidden value="false"/></field>     	  
    	<field name="organizationPartyId" title="Payment to Organization"><hidden value="Company"/></field> 	
    	<field name="paymentDate" title="${uiLabelMap.SupplyDate}"><hidden value="${bsh:org.ofbiz.base.util.UtilDateTime.nowDateString(&quot;yyyy-MM-dd&quot;)}"/></field>    	
        <!-- <field name="partyId" title="Party Id" required-field="true"><lookup target-form-name="LookupPartyName"></lookup></field> -->
        <field name="facilityId" title="Party Code" required-field="true"><lookup target-form-name="LookupFacility"></lookup></field>
        <!-- <field name="paymentMethodTypeId">
         	<drop-down allow-empty="true">
         		<entity-options description="${description}" entity-name="PaymentMethodType">
         		</entity-options>
         	</drop-down>
         </field> -->    
         <field name="statusId" title="${uiLabelMap.CommonStatus}" position="1">
            <drop-down allow-empty="false">
            	<option key="NOT_PAID" description="Not Paid"/>
            	<option key="PAID" description="Paid"/>                
            </drop-down>
        </field>    
       	<field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit/></field>       
    </form>
     <form name="ListDuesPayments" type="list" target="createPostPayment" list-name="myList" paginate-target="FindDuesPayments"
    		odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar" separate-columns="true">
    		
    	<field name="facilityId" title="Party Code" parameter-name="facilityId"><display/></field>
    	<field name="partyId" title="Party Name" parameter-name="partyIdFrom">
    		<display-entity entity-name="PartyNameView" key-field-name="partyId" description="${groupName}${lastName} ${firstName}"/>
        </field>  
        <field name="duesPay"><hidden value="${duesPay}"/></field>
        <field name="totalDues" title="${uiLabelMap.TotalDueAmount}"><display /></field>
        <field name="amountDue" ><hidden value="${totalDues}"/></field> 
        <field name="viewButton" title=" " widget-style="buttontext"><hyperlink  target-type="plain" description="View Details"  target="javascript:showPaymentHistory(${partyId});"></hyperlink></field>
        <field name="makePayment" title="" widget-style="buttontext">
        <hyperlink  target-type="plain" description="${uiLabelMap.makePayment}"  target="javascript:showInstitutionPaymentEntry(${partyId}, ${duesPay});"></hyperlink>
        </field>    	    	
    </form>
    <form name="ListPastPaymentsFromParty" type="list" target="createPostPayment" list-name="paymentList" paginate-target="FindDuesToPay"
    		odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar" separate-columns="true">
    	<field name="facilityId" title="Booth Id"><display/></field>    	
        <field name="paymentId" title="Payment Id"><display /></field> 
        <field name="paymentRefNum" title="Cheque Num"><display /></field> 
        <field name="amount" title="Payment Amount"><display/></field>
        <field name="paymentDate" title="Payment Date"><display type="date-time"/></field>
        <field name="submitButton" title="Cancel Payment" widget-style="buttontext">
            <hyperlink description="Cancel Payment" target="voidPayment">
                <parameter param-name="paymentId"/>
            </hyperlink>
        </field>
        <!-- <field name="submitButton" title="Cancel Payment" widget-style="smallSubmit"><submit/></field> -->    	    	
    </form>
    
    <form name="NewPaymentIn" type="single" target="createPostPayment" default-map-name="payment"
        header-row-style="header-row" default-table-style="basic-table">
       <!--  <field name="statusId"><hidden value="PMNT_NOT_PAID"/></field> -->
        <!-- <field name="currencyUomId"><hidden value="${defaultOrganizationPartyCurrencyUomId}"/></field> -->
        <field position="1" name="organizationPartyId">
            <drop-down allow-empty="false" no-current-selected-key="${defaultOrganizationPartyId}">
                <entity-options description="${groupName}" entity-name="PartyAcctgPrefAndGroup" key-field-name="partyId">
                	<entity-constraint name="partyId" operator="equals" value="Company"/>
                    <entity-order-by field-name="groupName"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="partyIdFrom" position="2" required-field="true"><lookup target-form-name="LookupPartyName"/></field>
        <field name="paymentTypeId" title="${uiLabelMap.AccountingPaymentType}" position="1">
            <drop-down allow-empty="false">
                <entity-options description="${description}" entity-name="PaymentType">
                    <entity-constraint name="parentTypeId" value="RECEIPT"/>
                    <entity-order-by field-name="description"/>
                </entity-options>
            </drop-down>
        </field>
        <field position="2" name="paymentMethodTypeId" event="onchange" action="javascript:paymentFieldsOnchange();">
            <drop-down allow-empty="false">
                <entity-options entity-name="PaymentMethodType"  description="${description}">
                	<entity-constraint name="paymentMethodTypeId" operator="like" value="%_PAYIN%"/>
                    <entity-order-by field-name="description"/>                   
                </entity-options>
            </drop-down>
        </field>
        <!-- <field name="paymentRefNum" position="1" title="${uiLabelMap.paymentRefNum}" required-field="true"><text/></field>
        <field name="effectiveDate" position="2" title="${uiLabelMap.effectiveDate}"><date-time type="timestamp"></date-time></field>
        <field name="issuingAuthority" position="2" title="${uiLabelMap.issuingAuthority}" required-field="true"><text></text></field>  -->       
        <field name="amount" position="1" required-field="true"><text/></field>
        <!-- <field name="comments" position="2"><text size="70"/></field>
        <field name="isDepositWithDrawPayment"><hidden value="Y"/></field>
        <field name="finAccountTransTypeId"><hidden value="DEPOSIT"/></field> -->
        <field position="1" name="createButton" widget-style="smallSubmit">
            <submit button-type="button"/>
        </field>
    </form>
    <form name="FindReceipts" type="single" target="Receipts" header-row-style="header-row" default-table-style="basic-table">
        <!-- <actions>
            <service service-name="performFind" result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="parameters"/>
                <field-map field-name="entityName" value="OrderHeaderAndRoles"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
            </service>
        </actions> -->
        <field name="productCategoryId" ><hidden/></field>
        <field name="noConditionFind"><hidden value="Y"/></field>
        <field name="productId" required-field="false" >
            <lookup target-form-name="lookupProductByCategory" target-parameter="productCategoryId">
                <sub-hyperlink target="/catalog/control/EditProduct" target-type="inter-app" description="${uiLabelMap.ProductEditProduct} [${productId}]">
                    <parameter param-name="productId"/>
                </sub-hyperlink>
            </lookup>
        </field>
        <field name="productDescription" title="Product Description">
            <text/>
        </field>
        <field name="productGroup" title="Product Group">
            <text/>
        </field>
        <!-- <field name="BatchNo" title="Batch Number">
            <text/>
        </field> -->
        <field name="searchButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
        
    </form>
    <form name="ListInventory" type="list" separate-columns="true" default-entity-name="ProductInventoryItem" list-name="listIt" paginate-target="Receipts" paginate="true"
        odd-row-style="alternate-row" default-table-style="basic-table hover-bar">
        <actions>
            <service service-name="performFind" result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="parameters"/>
                <field-map field-name="entityName" value="ProductInventoryItem"/>
                <field-map field-name="orderBy" value="productId"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
            </service>
            <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/inventoryProductSearch.groovy"/>
        </actions>
        <field name="productId" title="Product Id"><display/></field>
        <field name="brandName" title="Product Name"><display/></field>
        <field name="primaryProductCategoryId" title="Sub Group"><display/></field>
        <field name="QOH" title="QOH"><display/></field>
        <field name="ATP" title="ATP"><display/></field>
        <!-- <field name="accountingQuantityTotal" title="AQT"><display/></field> -->
        
       <!--  <field name="statusId" title="${uiLabelMap.CommonStatus}"><display-entity entity-name="StatusItem"/></field>
        <field name="comments"><display/></field>
        <field name="partyIdFrom" title="${uiLabelMap.AccountingFromParty}">
            <display-entity entity-name="PartyNameView" key-field-name="partyId" description="${groupName}${lastName},${firstName}">
                <sub-hyperlink target="/partymgr/control/viewprofile" target-type="inter-app" description="[${partyIdFrom}]" >
                    <parameter param-name="partyId" from-field="partyIdFrom"/>
                </sub-hyperlink>
            </display-entity>
        </field>
        <field name="partyIdTo" title="${uiLabelMap.AccountingToParty}">
            <display-entity entity-name="PartyNameView" key-field-name="partyId" description="${groupName}${lastName},${firstName}">
                <sub-hyperlink target="/partymgr/control/viewprofile" target-type="inter-app" description="[${partyIdTo}]" >
                    <parameter param-name="partyId" from-field="partyIdTo"/>
                </sub-hyperlink>
            </display-entity>
        </field>        
        <field name="effectiveDate"><display/></field>
        <field name="currencyUomId"><hidden/></field>
        <field name="amount"><display also-hidden="false" type="currency" currency="${currencyUomId}"/></field> -->
<!--        <field name="amountToApply"><display also-hidden="false" type="currency" currency="${currencyUomId}"/></field>-->
    </form>
    <!-- <form name="ListInventory" type="list" target="" title="" list-name="inventoryItemTotals"
        odd-row-style="alternate-row" default-table-style="basic-table hover-bar"
        paginate-target="InventoryItemTotals" override-list-size="${overrideListSize}">

        <field name="productId" title="${uiLabelMap.ProductProductId}"><display/></field>
        <field name="quantityOnHand" title="${uiLabelMap.ProductQoh}"><display/></field>
        <field name="availableToPromise" title="${uiLabelMap.ProductAtp}"><display/></field>
    </form> -->
    <form name="EditInventoryItem" type="single" target="UpdateInventoryItem" title=""
        header-row-style="header-row" default-table-style="basic-table">
        <actions>
            <set field="inventoryItemTypeId" from-field="inventoryItem.inventoryItemTypeId"/>
            <set field="productId" from-field="inventoryItem.productId"/>
            <set field="facilityId" from-field="inventoryItem.facilityId"/>
            <set field="locationSeqId" from-field="inventoryItem.locationSeqId"/>
            <set field="statusId" from-field="inventoryItem.statusId"/>
            <entity-one entity-name="FacilityLocation" value-field="facilityLocation">
                <field-map field-name="locationSeqId" from-field="locationSeqId"/>
                <field-map field-name="facilityId" from-field="facilityId"/>
            </entity-one>
        </actions>
        <alt-target use-when="inventoryItemId==null" target="CreateInventoryItem"/>
        <auto-fields-service service-name="updateInventoryItem" map-name="inventoryItem"/>

        <!-- ignored fields -->
        <field name="oldAvailableToPromise"><ignored/></field>
        <field name="oldQuantityOnHand"><ignored/></field>

        <!-- custom formatted fields -->
        <field use-when="inventoryItem!=null" name="inventoryItemId" tooltip="${uiLabelMap.ProductNotModificationRecrationInventoryItem}"><display/></field>
        <field use-when="inventoryItem==null" name="inventoryItemId"><text/></field>
        <field name="inventoryItemTypeId" title="${uiLabelMap.ProductInventoryItemTypeId}">
            <drop-down allow-empty="false">
                <entity-options entity-name="InventoryItemType" description="${description}" key-field-name="inventoryItemTypeId"/>
            </drop-down>
        </field>
        <field name="productId" required-field="true" position="1">
            <lookup target-form-name="LookupProduct">
                <sub-hyperlink target="/catalog/control/EditProduct" target-type="inter-app" description="${uiLabelMap.ProductEditProduct} [${productId}]">
                    <parameter param-name="productId"/>
                </sub-hyperlink>
            </lookup>
        </field>
        <field name="statusId" use-when="inventoryItem==null">
            <drop-down allow-empty="true">
                <entity-options entity-name="StatusItem" description="${description}" key-field-name="statusId">
                    <entity-constraint name="statusTypeId" operator="equals" value="INV_NON_SER_STTS"/>
                </entity-options>
                <entity-options entity-name="StatusItem" description="${description}" key-field-name="statusId">
                    <entity-constraint name="statusTypeId" operator="equals" value="INV_SERIALIZED_STTS"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="statusId" use-when="inventoryItem!=null&amp;&amp;&quot;SERIALIZED_INV_ITEM&quot;.equals(inventoryItem.getString(&quot;inventoryItemTypeId&quot;))">
            <drop-down allow-empty="false">
                <entity-options entity-name="StatusItem" description="${description}" key-field-name="statusId">
                    <entity-constraint name="statusTypeId" operator="equals" value="INV_SERIALIZED_STTS"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="statusId" use-when="inventoryItem!=null&amp;&amp;&quot;NON_SERIAL_INV_ITEM&quot;.equals(inventoryItem.getString(&quot;inventoryItemTypeId&quot;))">
            <drop-down allow-empty="true">
                <entity-options entity-name="StatusItem" description="${description}" key-field-name="statusId">
                    <entity-constraint name="statusTypeId" operator="equals" value="INV_NON_SER_STTS"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="expireDate" title="${uiLabelMap.ProductExpireDate}"/>
        <field name="facilityId">
            <drop-down allow-empty="true">
                <entity-options entity-name="Facility" description="${facilityName}" key-field-name="facilityId">
                    <entity-order-by field-name="facilityName"/>
                </entity-options>
                <sub-hyperlink use-when="facilityId!=null" target="EditFacility" description="${uiLabelMap.ProductEditFacility} [${facilityId}]">
                <parameter param-name="facilityId"/>
            </sub-hyperlink>
            </drop-down>
        </field>
        <field name="lotId" title="${uiLabelMap.ProductLotId}"/>
        <field name="uomId" title="${uiLabelMap.ProductUomId}"/>
        <field name="binNumber" title="${uiLabelMap.ProductBinNumber}"/>
        <field name="locationSeqId" title="${uiLabelMap.ProductFacilityLocation}">
            <lookup target-form-name="LookupFacilityLocation">
                <sub-hyperlink use-when="locationSeqId!=null" target="EditFacilityLocation">
                <parameter param-name="facilityId"/>
                <parameter param-name="locationSeqId"/>
            </sub-hyperlink>
            </lookup>
        </field>
        <field name="partyId">
            <lookup target-form-name="LookupPartyName"/>
        </field>
        <field name="ownerPartyId">
            <lookup target-form-name="LookupPartyName"/>
        </field>
        <field name="unitCost"><text/></field>

        <field name="accountingQuantityTotal">
            <display/>
        </field>
        <field name="totals" use-when="inventoryItem!=null" title="${uiLabelMap.ProductAvailablePromiseQuantityHand}">
            <display description="${inventoryItem.availableToPromiseTotal} / ${inventoryItem.quantityOnHandTotal}"/>
        </field>

        <field use-when="inventoryItem!=null" name="submit" title="${uiLabelMap.CommonUpdate}">
            <submit/>
        </field>
        <field use-when="inventoryItem==null" name="submit" title="${uiLabelMap.CommonCreate}">
            <submit/>
        </field>
        <sort-order>
            <sort-field name="inventoryItemId"/>
            <sort-field name="inventoryItemTypeId"/>
            <sort-field name="productId"/>
            <sort-field name="partyId"/>
            <sort-field name="ownerPartyId"/>
            <sort-field name="statusId"/>
            <sort-field name="datetimeReceived"/>
            <sort-field name="datetimeManufactured"/>
            <sort-field name="expireDate"/>
            <sort-field name="facilityId"/>
            <sort-field name="containerId"/>
            <sort-field name="lotId"/>
            <sort-field name="uomId"/>
            <sort-field name="binNumber"/>
            <sort-field name="locationSeqId"/>
            <sort-field name="comments"/>
            <sort-field name="accountingQuantityTotal"/>
            <sort-field name="serialNumber"/>
            <sort-field name="softIdentifier"/>
            <sort-field name="activationNumber"/>
            <sort-field name="activationValidThru"/>
            <sort-field name="unitCost"/>
            <sort-field name="currencyUomId"/>
            <sort-field name="totals"/>
            <sort-field name="submit"/>
        </sort-order>
    </form>
    <form name="lookupByProduct" target="LookupByProduct" title="" type="single"
        header-row-style="header-row" default-table-style="basic-table">
        <!-- <auto-fields-entity entity-name="Product" default-field-type="hidden"/> -->
        <field name="productId" title="${uiLabelMap.ProductProductId}"><text-find/></field>
        <field name="brandName" title="${uiLabelMap.ProductBrandName}"><text-find/></field>
        <field name="internalName" title="${uiLabelMap.ProductInternalName}"><text-find/></field>
        <field name="productTypeId" title="${uiLabelMap.ProductProductType}">
            <drop-down allow-empty="true">
                <entity-options entity-name="ProductType" description="${description}">
                    <entity-order-by field-name="description"/>
                </entity-options>
            </drop-down>
        </field>
        <!-- <field name="primaryProductCategoryId" title="${uiLabelMap.ProductPrimaryCategory}">
            <drop-down allow-empty="false">
                <list-options list-name="productCategoryIds"
                    key-name="productCategoryId"  
                    />
            </drop-down>
        </field> -->
        
        
        <field name="primaryProductCategoryId" title="${uiLabelMap.ProductPrimaryCategory}">
            <drop-down allow-empty="true">
                <entity-options description="${description}" entity-name="ProductCategory" key-field-name="productCategoryId">
                    <entity-order-by field-name="description"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="noConditionFind"><hidden value="Y"/></field>
        <!-- NOTE DEJ20070829 not sure why this is here, but it doesn't seem applicable for a general product lookup, also doesn't handle case where isVariant is null <field name="isVariant"><hidden value="N"/></field> -->
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    <form name="listLookupByProduct" list-name="listIt" title="" type="list" paginate-target="LookupByProduct"
        odd-row-style="alternate-row" default-table-style="basic-table" view-size="20">
        <actions>
            <service service-name="performFind" result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="parameters"/>
                <field-map field-name="entityName" value="Product"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
            </service>
        </actions>
        <row-actions>            
            <set field="hasVariants" value="${groovy: org.ofbiz.entity.util.EntityUtil.filterByDate(delegator.findByAndCache('ProductAssoc', org.ofbiz.base.util.UtilMisc.toMap('productId', productId, 'productAssocTypeId', 'PRODUCT_VARIANT'))).size() > 0}" type="Boolean"/>
        </row-actions>
        <field name="productId" title="${uiLabelMap.ProductProductId}" widget-style="buttontext">
            <hyperlink also-hidden="false" target-type="plain" description="${productId}" target="javascript:set_value('${productId}')"/>
        </field>
        <field name="brandName" title="${uiLabelMap.ProductBrandName}"><display/></field>
        <field name="internalName" title="${uiLabelMap.ProductInternalName}"><display/></field>
        <field name="productTypeId" title="${uiLabelMap.ProductProductType}"><display-entity entity-name="ProductType"/></field>
        <field name="searchVariants" title="${uiLabelMap.CommonEmptyHeader}" widget-style="buttontext" use-when="hasVariants">
            <hyperlink also-hidden="false" target-type="plain" description="${uiLabelMap.ProductVariants}" target="LookupVariantProduct">
                <parameter param-name="productId"/>
            </hyperlink>
        </field>
    </form>
   
   <form name="createVariance" type="single" target="createPhysicalInventoryAndStockVariance" title=""
        default-table-style="basic-table">
        <field name="facilityId" title="Party Code" required-field="true"><lookup target-form-name="LookupParlour"></lookup></field>
        <field name="productId" title="Product Code" required-field="true"><lookup target-form-name="LookupProduct"/></field>
        <field name="quantity" title="Variance Quantity" required-field="true"><text/></field>
        <field name="varianceReasonId" title="Variance Type" required-field="true">
            <drop-down>
                <entity-options entity-name="VarianceReason" description="${description}">
                    <entity-order-by field-name="description"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="effectiveDate" title="Effective Date"><date-time/></field>
        <field name="comments" title="Reason"><textarea/></field>
        <field name="submitButton" title="${uiLabelMap.CommonSubmit}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    <form name="ViewInventoryAndVariance" type="list" target="" title="" list-name="inventoryItemVarianceList"
        header-row-style="header-row-2" odd-row-style="alternate-row" default-table-style="basic-table hover-bar" view-size="10" paginate-target="StockVariance">
       <!--  <auto-fields-entity entity-name="PhysicalInventoryAndVariance" map-name="physicalInventoryAndVariance" default-field-type="display"/> -->
        <field name="inventoryItemId" title="Inventory Id"><display/></field>
        <field name="physicalInventoryId"><hidden/></field>
        <field name="date" title="Date"><display type="date-time"/></field>
        <field name="productId" title="Product Code"><display-entity entity-name="Product" key-field-name="productId" description="${internalName}"/></field>
        <field name="quantity" title="Quantity"><display/></field>
        <field name="varianceReasonId" title="Reason Id"><display/></field>
        <field name="comments" title="General Comments"><display/></field>
    </form> 
    
   <form name="FindFacilityInventoryByProduct" type="single" target="FindInventoryDetails" title=""
        header-row-style="header-row" default-table-style="basic-table">
        
        <field name="facilityId" title="Party Code">
            <drop-down allow-empty="true">
            	<list-options list-name="storesList" key-name="inventoryFacilityId" description="${inventoryFacilityId}" />
            </drop-down>
        </field>
        <!-- <field name="facilityId" title="Facility Id"><lookup target-form-name="LookupParlour"></lookup></field> -->
        <field name="action"><hidden value="SEARCH"/></field>
       <!--  <field name="productTypeId"><hidden value="FINISHED_GOOD"/></field> -->
        
        <field name="productId" title="Product Code">
            <lookup target-form-name="LookupProduct"></lookup>
        </field>
        <field name="salesDate" title="Stock Date"><date-time/></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit">
            <submit button-type="button"/>
        </field>
    </form>
    <form name="ListFacilityInventoryByProduct" type="list" target="" title="" list-name="inventoryFinalList"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar"
        paginate-target="FindInventoryDetails" override-list-size="${overrideListSize}">
        <field name="facilityId" title="Party Code"><display-entity entity-name="Facility" description="${facilityId} [${facilityName}]"/>
        </field> 
        <field name="productId" title="Product Code"><display-entity entity-name="Product" description="${productId} [${internalName}]"/></field>
        <field name="saleDate" title="Stock Date"><display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(saleDate, &quot;dd/MM/yyyy hh:mm a&quot;);}"/></field>
        <field name="openingBalQty" title="Opening Balance"><display/></field>
        <field name="receipts" title="Receipts"><display/></field>
        <field name="salesQty" title="Sales"><display/></field>
        <field name="xferIn" title="Transfer In"><display/></field>
        <field name="xferOut" title="Transfer Out"><display/></field>
        <field name="adjustments" title="Adjustments"><display/></field>
        <field name="quantityOnHandTotal" title="Closing Balance"><display/></field>
        <field name="totalValue" title="Total Value"><display/></field>
    </form>
    <form name="itemPriority" type="list" list-name="itemWiseList" default-entity-name="custRequestItem" default-table-style="basic-table hover-bar" odd-row-style="alternate-row" paginate-target="IndentItemListing" >
       <field name="custRequestId" title="Indent Id" >
          <display-entity entity-name="CustRequest"  key-field-name="custRequestId" description="${custRequestName}" also-hidden="true">
            <sub-hyperlink target="ViewRequest" description="[${custRequestId}]">
              <parameter param-name="custRequestId" from-field="custRequestId"/>
            </sub-hyperlink>
          </display-entity>
       </field>
       <field name="custRequestItemSeqId" title="Item Seq Id" widget-style="buttontext">
       <hyperlink target="ViewRequestItem" description="${custRequestItemSeqId}">
        <parameter param-name="custRequestId"/>
        <parameter param-name="custRequestItemSeqId"/>
       </hyperlink>
       </field>
       <!-- <field use-when="priority==1" name="priority" ><display description="High"/></field>
       <field use-when="priority==2" name="priority" ><display description="Medium"/></field>
       <field use-when="priority==3" name="priority" ><display description="Low"/></field> -->
       <field name="statusId" title="status"><display-entity entity-name="StatusItem" description="${description}"/></field>
       <field name="quantity" title="Qty"> <display/></field>
       <field name="productId" title="Product" sort-field="true">
        <display-entity entity-name="Product" key-field-name="productId"  description="${productName}">
          <sub-hyperlink  description="[${productId}]" target="EditProduct">
                    <parameter param-name="productId"/>
          </sub-hyperlink>
        </display-entity>
        </field>
        <field name="requiredByDate" title="RequiredDate(mm/dd/yy)" ><display type="date" /></field>
        <field use-when="statusId.equals(&quot;CRQ_SUBMITTED&quot;)" name="delete" title="delete" widget-style="buttontext"> 
         <hyperlink target="deleteItem" description="Delete" request-confirmation="true" confirmation-message="Are you want to delete this item permanently">
         <parameter param-name="custRequestId"/>
         <parameter param-name="custRequestItemSeqId"/>
        </hyperlink></field>
       <sort-order>
         <sort-field name="custRequestId"/>
         <sort-field name="custRequestItemSeqId"/>
         <sort-field name="productId"/>
         <sort-field name="quantity"/>
         <sort-field name="requiredByDate"/>
         <sort-field name="priority"/>
         <sort-field name="statusId"/>
       </sort-order>
    </form>
        
    <form name="EditIndent" type="single" target="updateRequest" title="Indent" default-map-name="custRequest"
        header-row-style="header-row" default-table-style="basic-table">
        <actions>
        	<set field="defaultRoleTypeList" value="true" type="Boolean"/>
        </actions>
        <alt-target use-when="custRequest==null" target="createRequestOrder"/>
        <field use-when="custRequest==null" name="custRequestTypeId"><hidden value="${custRequestTypeId}" /></field>
        <field name="custRequestName" tooltip="${uiLabelMap.CommonRequired}" widget-style="required" title="Indent Name"><text/></field>
        <!-- <field name="custRequestDate" title="${uiLabelMap.ProcurementIndentDate}"><date-time type="timestamp"/></field> -->
        <field name="custRequestDate"><ignored/></field>
        <field use-when="custRequest==null" name="statusId"><hidden value="CRQ_SUBMITTED"/> </field>
        <field name="productStoreId" title="Request To Store" required-field="true">
			<lookup target-form-name="LookupFacility"></lookup>
		</field>
		<field name="roleTypeId"><hidden value="STOCKIST"/></field> 
        <field name="form"><hidden value="list"/></field>
        <field name="custRequestId"><hidden/></field>
        
        <field name="responseRequiredDate" title="Required Date" tooltip="${uiLabelMap.CommonRequired}" widget-style="required"><date-time type="timestamp"/></field>
        <field name="fromPartyId" tooltip="${uiLabelMap.CommonRequired}" widget-style="required" title="Requesting Party">
            <lookup target-form-name="LookupPartyName" target-parameter="roleTypeId" default-value="${communicationEvent.partyIdFrom}"/>
        </field>
        
        <field name="submitButton" title="${uiLabelMap.CommonSubmit}" widget-style="smallSubmit"><submit button-type="button"/></field>
        <sort-order>
	        <sort-field name="custRequestName"/>
	        <sort-field name="productStoreId"/>
	        <sort-field name="fromPartyId"/>
	        <sort-field name="priority"/>
	        <sort-field name="custRequestId"/>
	        <sort-field name="custRequestDate"/>
            <sort-field name="responseRequiredDate"/>
            <!-- <sort-field name="reason"/> -->
            <!-- <sort-field name="budgetId"/> -->
        </sort-order>
    </form>
    <form name="ListRequestItems" type="list" use-row-submit="true"  title="" list-name="indentItemList"
        odd-row-style="alternate-row" default-table-style="basic-table hover-bar" paginate-target="RequestItems">
       <actions>
        	<set field="unitPrice"  default-value="Not Available"/>
        	<set field="createdStamp" default-value="Not Available"/>
        	<!-- <entity-and entity-name="CustRequest">
        		<field-map field-name="statusId" from-field="parameters.statusId" />
        		<select-field field-name="statusId" />
        	</entity-and> -->
        	<set field="statusId" from-field="parameters.statusId"/>
       </actions>
       <field name="custRequestItemSeqId" widget-style="buttontext" title="S.No"><display/>
       </field>
       <field name="productId" title="Product Name(ID)"><display-entity entity-name="Product" key-field-name="productId" description="${internalName} (${productId})"/></field>
       <field name="quantity" title="Qty"><display/></field>
        <field name="ATP" title="ATP"><display/></field>
        <!-- <field name="statusId" title="Item Status"><display-entity also-hidden="false" entity-name="StatusItem"/></field> -->
        <field name="unitPrice" title="Unit Price" ><display/></field>
        <field name="itemCreatedTime" title="Created Date" ><display type="date-time" /></field>
        <field use-when="indent_status.equals(&quot;CRQ_SUBMITTED&quot;)" name="editItem" title="Edit Item" widget-style="buttontext">
        	<hyperlink  target-type="plain" description="Edit Item"  target="javascript:editIndentItems('${custRequestId}', '${productId}', '${custRequestItemSeqId}');">
        	</hyperlink>
        </field>
         <field use-when="indent_status.equals(&quot;CRQ_SUBMITTED&quot;)" name="delete" title="Delete Item" widget-style="buttontext"> 
         <hyperlink target="deleteIndentItem" description="Delete" request-confirmation="true" confirmation-message="Do you want to delete this item permanently">
         	<parameter param-name="custRequestId"/>
         	<parameter param-name="custRequestItemSeqId"/>
        </hyperlink></field>
   </form>
   <form name="OverviewRequestItems" extends="ListRequestItems"  >
        <field name="priority"><ignored/></field>
        <field name="sequenceNum"><ignored/></field>
        <field name="sequenceNumber"><ignored/></field>
        <field name="requiredByDate"><ignored/></field>
        <field name="selectedAmount"><ignored/></field>
        <field name="maximumAmount"><ignored/></field>
        <field name="reservStart"><ignored/></field>
        <field name="reservLength"><ignored/></field>
        <field name="reservPersons"><ignored/></field>
        <field name="configId"><ignored/></field>
    </form> 
    <form name="requestInfo" type="single" title="request information" default-map-name="custRequest"
        header-row-style="header-row" default-table-style="basic-table">
        <actions>
            <set field="lookupPartyId" from-field="custRequest.fromPartyId" default-value="_NA_"/>
            <service service-name="getPartyNameForDate" result-map="partyNameResultTo">
                <field-map field-name="partyId" from-field="lookupPartyId"/>
                <field-map field-name="compareDate" from-field="custRequest.custRequestDate"/>
                <field-map field-name="lastNameFirst" value="Y"/>
            </service>
        </actions>
        <field name="custRequestId"><hidden/></field>
        <field name="fromPartyId" title="${uiLabelMap.PartyPartyId}">
            <hyperlink target="/partymgr/control/viewprofile" target-type="inter-app" description="${partyNameResultTo.fullName} [${custRequest.fromPartyId}]">
                <parameter param-name="partyId" from-field="custRequest.fromPartyId"/>
            </hyperlink>
        </field>
        <field name="custRequestName" title="Name" encode-output="false"><display/></field>
        <field name="custRequestTypeId" title="${uiLabelMap.CommonType}"><display-entity entity-name="CustRequestType" description="${description}"/></field>
        <field name="statusId" title="${uiLabelMap.CommonStatus}"><display-entity entity-name="StatusItem" description="${description}"/></field> 
        <field name="description" title="${uiLabelMap.CommonDescription}"><ignored/></field>
        <field name="productStoreId" title="${uiLabelMap.ProductProductStore}"><display-entity entity-name="ProductStore" description="${storeName}"/></field>
        <field name="reason" title="Remarks"><ignored/></field>
        <field name="custRequestDate" title="Created Date"><display/></field>
        <field name="lastModifiedDate" title="${uiLabelMap.OrderRequestLastModifiedDate}"><display/></field>
    </form>
    <form name="ViewRequestStatus" type="list"
        odd-row-style="alternate-row" default-table-style="basic-table hover-bar">
        <actions>
            <entity-and entity-name="CustRequestStatus">
                <field-map field-name="custRequestId" from-field="parameters.custRequestId"/>
               <!--  <order-by field-name="custRequestStatusId"/> -->
            </entity-and>
        </actions>
        <auto-fields-entity entity-name="CustRequestStatus" default-field-type="display"/>
        <field name="custRequestId"><hidden/></field>
        <field name="custRequestStatusId"><hidden/></field>
        <field name="statusId" title="Status"><display-entity entity-name="StatusItem" description="${description}"/></field>
        <field name="statusDatetime" title="Status Modified"><display type="date-time"/></field>
        <field name="custRequestItemSeqId"><ignored/></field>
    </form>
    
    <form name="ViewOrderStatus" type="list" list-name="orderStatusList"
        odd-row-style="alternate-row" default-table-style="basic-table hover-bar">
        <actions>
        	<set field="productId" from-field="orderStatusList.productId"/>
        </actions>        
        <field name="productId" title="Item"><display-entity entity-name="Product" key-field-name="productId" description="${description} (${custRequestItemSeqId})"></display-entity>
        </field>
        <field name="orderId" widget-style="buttontext" title="Order No.">
        <hyperlink target="OrderOverview" description="${orderId}">
        	<parameter param-name="orderId"/>
        </hyperlink></field>
        <field name="statusId" title="Status"><display-entity entity-name="StatusItem" description="${description}"/></field>
    </form>
    <form name="OverviewRequestItems" extends="ListRequestItems"  >
        <field name="priority"><ignored/></field>
        <field name="sequenceNum"><ignored/></field>
        <field name="sequenceNumber"><ignored/></field>
        <field name="requiredByDate"><ignored/></field>
        <field name="selectedAmount"><ignored/></field>
        <field name="maximumAmount"><ignored/></field>
        <field name="reservStart"><ignored/></field>
        <field name="reservLength"><ignored/></field>
        <field name="reservPersons"><ignored/></field>
        <field name="configId"><ignored/></field>
    </form>
    <form name="FindIndents" target="findIndentEntry" title="" type="single" default-map-name="parameters"
        header-row-style="header-row" default-table-style="basic-table">
        <field name="custRequestId" title="Indent Id"><text-find/></field>        
        <field name="custRequestName" title="Indent Name"><text-find/></field>                
        <field name="custRequestTypeId"><hidden value="REQ_ORDER"/></field>
        <field name="fromPartyId" title="Customer Id"><lookup target-form-name="LookupPartyName"/></field>
        <field name="statusId">
            <drop-down allow-empty="true">
            	<list-options list-name="indentStatus" key-name="statusId" description="${description}" />
            </drop-down>
        </field>
        
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit">
            <submit button-type="button"/>
        </field>
        <field name="noConditionFind">
        <hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
    </form>
	<form name="FindRequests" target="findRequestEntry" title="" type="single" default-map-name="parameters"
        header-row-style="header-row" default-table-style="basic-table">
        <field name="custRequestId" title="Indent Id"><text-find/></field>        
        <field name="custRequestName" title="Indent Name"><text-find/></field>                
        <field name="custRequestTypeId"><hidden value="STOCK_XFER_REQUEST"/></field>
       <!--  <field name="fromPartyId"><lookup target-form-name="LookupPartyName"/></field> -->
        <!-- <field name="statusId"><text-find/></field> -->
        <field name="facilityId" title="From Facility">
        	<lookup target-form-name="LookupParlour"></lookup>
        </field>
        <field name="statusId">
            <drop-down allow-empty="true">
            	<list-options list-name="indentStatus" key-name="statusId" description="${description}" />
            </drop-down>
        </field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit">
            <submit button-type="button"/>
        </field>
        <field name="noConditionFind">
        <hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
    </form>
    <form name="ListIndents" type="list" extends="ListIndentList" list-name="listIt">
        <actions>
          <service service-name="performFind" result-map="result" result-map-list="listIt">
            <field-map field-name="inputFields" from-field="parameters"/>
            <field-map field-name="entityName" from-field="entityName"/>
            <field-map field-name="orderBy" from-field="parameters.sortField"/>
            <field-map field-name="viewIndex" from-field="viewIndex"/>
            <field-map field-name="viewSize" from-field="viewSize"/>
          </service>          
        </actions>
    </form>
    <form name="ListIndentList" type="list" use-row-submit="true" list-name="custRequests" title="List of indents"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <field name="custRequestId"  sort-field="true"  sort-field-style="true" title="Indent/Order">
          <display-entity entity-name="CustRequest"  key-field-name="custRequestId" description="${custRequestName}" also-hidden="true">
            <sub-hyperlink target="ViewOrderRequest" description="[${custRequestId}]">
             <parameter param-name="custRequestId" from-field="custRequestId"/>
             <parameter param-name="statusId" from-field="statusId"/>
            </sub-hyperlink>
          </display-entity>
        </field>
        <field name="viewButton" title="View Details" widget-style="buttontext"><hyperlink  target-type="plain" description="View Details"  target="javascript:showCustRequestItems(${custRequestId});"></hyperlink></field>
        <field name="custRequestDate" title="Indent Date"><display type="date-time"/></field>
        <field name="fromPartyId" title="Customer">
            <display-entity entity-name="PartyNameView" key-field-name="partyId" description="${firstName} ${middleName} ${lastName} ${groupName}">
                <sub-hyperlink description="[${fromPartyId}]" target="/partymgr/control/viewprofile" target-type="inter-app">
                    <parameter param-name="partyId" from-field="fromPartyId"/>
                </sub-hyperlink>
            </display-entity>
        </field>
        <field name="statusId" sort-field="true">
            <display-entity also-hidden="false" entity-name="StatusItem"/>
        </field>
        <field name="lastModifiedDate" sort-field="true"><display type="date-time"/></field>
        <field use-when="statusId.equals(&quot;CRQ_SUBMITTED&quot;)" name="rejectButton" title="Reject" widget-style="buttontext">
        	<hyperlink target="setCustRequestStatus" description="${uiLabelMap.FormFieldTitle_rejectButton}">
                <parameter param-name="custRequestId"/>
                <parameter param-name="statusId" value="CRQ_REJECTED"/>
            </hyperlink>
        </field>
    </form>
    <form name="ListRequests" type="list" extends="ListRequestList" list-name="listIt">
        <actions>
          <service service-name="performFind" result-map="result" result-map-list="listIt">
            <field-map field-name="inputFields" from-field="parameters"/>
            <field-map field-name="entityName" from-field="entityName"/>
            <field-map field-name="orderBy" from-field="parameters.sortField"/>
            <field-map field-name="viewIndex" from-field="viewIndex"/>
            <field-map field-name="viewSize" from-field="viewSize"/>
          </service>
        </actions>
    </form>
    <form name="ListRequestList" type="list" use-row-submit="true" list-name="listIt" title="List of indents"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar" view-size="10">
        <field name="custRequestId"  sort-field="true"  sort-field-style="true" title="Indent/Order">
          <display-entity entity-name="CustRequest"  key-field-name="custRequestId" description="${custRequestName}" also-hidden="true">
            <sub-hyperlink target="ViewRequest" description="[${custRequestId}]">
             <parameter param-name="custRequestId" from-field="custRequestId"/>
             <parameter param-name="statusId" from-field="statusId"/>
            </sub-hyperlink>
          </display-entity>
        </field>
        <field name="viewButton" title="View Details" widget-style="buttontext"><hyperlink  target-type="plain" description="View Details"  target="javascript:showCustRequestItems(${custRequestId});"></hyperlink></field>
        <field name="custRequestDate" title="Indent Date"><display type="date-time"/></field>
        <field name="fromPartyId" title="Customer">
            <display-entity entity-name="PartyNameView" key-field-name="partyId" description="${firstName} ${middleName} ${lastName} ${groupName}">
                <sub-hyperlink description="[${fromPartyId}]" target="/partymgr/control/viewprofile" target-type="inter-app">
                    <parameter param-name="partyId" from-field="fromPartyId"/>
                </sub-hyperlink>
            </display-entity>
        </field>
        <field name="statusId" sort-field="true">
            <display-entity also-hidden="false" entity-name="StatusItem"/>
        </field>
        <field name="lastModifiedDate" sort-field="true"><display type="date-time"/></field>
        <field name="rejectButton" title="Reject" widget-style="buttontext">
        	<hyperlink target="setCustRequestStatus" description="${uiLabelMap.FormFieldTitle_rejectButton}">
                <parameter param-name="custRequestId"/>
                <parameter param-name="statusId" value="CRQ_REJECTED"/>
            </hyperlink>
        </field>
    </form>
    <form name="FindReceivedInventory" target="ViewReceivedInventory" title="" type="single" default-map-name="parameters"
        header-row-style="header-row" default-table-style="basic-table">
        <field name="action"><hidden value="SEARCH"/></field>
        <field name="facilityId" title="Party Code">
        	<lookup target-form-name="LookupParlour"></lookup>
        </field>
        <field name="productId" title="Product Code"><lookup target-form-name="LookupByProduct"></lookup></field>
        <field name="stockMovement" title="Stock Movement">
            <drop-down allow-empty="true">
            	<option key="IN" description="IN"/>
            	<option key="OUT" description="OUT"/>
            </drop-down>
        </field>
        <field name="noConditionFind"><hidden value="Y"/></field>
        <field name="searchButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    <form name="FindIssuedInventory" target="ViewIssuedInventory" title="" type="single" default-map-name="parameters"
        header-row-style="header-row" default-table-style="basic-table">
        <field name="facilityId" title="Facility">
            <drop-down allow-empty="false">
            	<list-options list-name="facilityList" key-name="facilityId"
					description="${facilityId}" />
            </drop-down>
        </field>
        <!-- <field name="facilityId" title="Facility Id">
        	<lookup target-form-name="lookupFacility"></lookup>
        </field> -->
        <field name="noConditionFind"><hidden value="Y"/></field>
        <field name="searchButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    <form name="InventoryForm" type="list" use-row-submit="true" title="" list-name="facProdInvList" odd-row-style="alternate-row" header-row-style="header-row"
    	default-table-style="basic-table hover-bar" separate-columns="true" target="EditFacility" >
    	<field name="facilityId" title="Facility Name">
        	 <display/>
        </field> 
        <field name="productId" title="Product">
        	  <display/>
        </field> 
        <field name="quantityOnHandTotal" title="Quantity On Hand">
        	  <display/>
        </field> 
        <field name="availableToPromiseTotal" title="Available To Promise">
        	  <display/>
        </field>
    </form>
    <form name="ToFacilityTransfers" type="list"  target="" title="" list-name="toTransfers"
        odd-row-style="alternate-row" default-table-style="basic-table hover-bar">
        <row-actions>
            <entity-one entity-name="InventoryItem" value-field="inventoryItem">
                <field-map field-name="inventoryItemId"/>
            </entity-one>
            <entity-one entity-name="Product" value-field="product">
                <field-map field-name="productId" from-field="inventoryItem.productId"/>
            </entity-one>
        </row-actions>

        <field name="inventoryTransferId" title="${uiLabelMap.ProductInventoryTransfer}" widget-style="buttontext">
            <hyperlink target="TransferInventoryItem" description="${inventoryTransferId}">
                <parameter param-name="inventoryTransferId"/>
            </hyperlink>
        </field>
        <field name="inventoryItemId" widget-style="buttontext">
            <hyperlink target="EditInventoryItem" description="${inventoryItemId}">
                <parameter param-name="inventoryItemId"/>
            </hyperlink>
        </field>
        <field name="facilityName" title="From Party Code" entry-name="fromFacilityId">
            <display-entity entity-name="Facility" key-field-name="facilityId" description="${facilityId} [${facilityName}]"/>
        </field>
        <field name="toFacilityName" title="To Party Code" entry-name="toFacilityId">
            <display-entity entity-name="Facility" key-field-name="facilityId" description="${facilityId} [${facilityName}]"/>
        </field>
        <!-- <field name="fromFacilityId" title="From Facility Id" widget-style="buttontext">
            <hyperlink target="EditFacility" description="${fromFacilityId}">
                <parameter param-name="facilityId"/>
            </hyperlink>
        </field> -->
        <!-- <field name="fromFacilityId" title="From Facility Id">
           <display/>
        </field>
        <field name="toFacilityId" title="To Facility">
           <display/>
        </field> -->
        <!-- <field name="locationSeqId"><display/></field> -->
        <field name="productId" title="Product Code" entry-name="product.productId" widget-style="buttontext">
            <hyperlink target="/catalog/control/EditProduct" target-type="inter-app" description="${product.productId}">
                <parameter param-name="productId" from-field="product.productId"/>
            </hyperlink>
        </field>
        <field name="productName" title="${uiLabelMap.ProductProductName}" entry-name="product.internalName"><display/></field>
        <!-- <field name="serialNumber" entry-name="inventoryItem.serialNumber"><display/></field> -->
        <field name="atpQoh" title="Quantity"><display description="${inventoryItem.availableToPromiseTotal}"/></field>
        <!-- <field name="locationSeqIdTo"><display/></field> -->
        <!-- <field name="sendDate"><display/></field> -->
        <field name="receiveDate"><display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(receiveDate, &quot;dd/MM/yyyy&quot;);}"/></field>
        <!-- <field name="statusId">
            <display-entity entity-name="StatusItem"/>
        </field> -->
    </form>
    <!-- <form name="FromFacilityTransfers" type="list" target="" title="" list-name="fromTransfers"
        odd-row-style="alternate-row" default-table-style="basic-table hover-bar">
        <row-actions>
            <entity-one entity-name="InventoryItem" value-field="inventoryItem">
                <field-map field-name="inventoryItemId"/>
            </entity-one>
            <entity-one entity-name="Product" value-field="product">
                <field-map field-name="productId" from-field="inventoryItem.productId"/>
            </entity-one>
        </row-actions>
        <field name="inventoryTransferId" title="${uiLabelMap.ProductInventoryTransfer}" widget-style="buttontext">
            <hyperlink target="TransferInventoryItem" description="${inventoryTransferId}">
                <parameter param-name="inventoryTransferId"/>
            </hyperlink>
        </field>
        <field name="inventoryItemId" widget-style="buttontext">
            <hyperlink target="EditInventoryItem" description="${inventoryItemId}">
                <parameter param-name="inventoryItemId"/>
            </hyperlink>
        </field>
        <field name="facilityId" title="From Facility">
           <display/>
        </field>
        <field name="facilityIdTo" title="To Facility" widget-style="buttontext">
            <hyperlink target="EditFacility" description="${facilityIdTo}">
                <parameter param-name="facilityId" from-field="facilityIdTo"/>
            </hyperlink>
        </field>
        <field name="facilityName" entry-name="facilityIdTo">
            <display-entity entity-name="Facility" key-field-name="facilityId" description="${facilityName}"/>
        </field>
        <field name="locationSeqIdTo"><display/></field>
        <field name="productId" entry-name="product.productId" widget-style="buttontext">
            <hyperlink target="/catalog/control/EditProduct" target-type="inter-app" description="${product.productId}">
                <parameter param-name="productId" from-field="product.productId"/>
            </hyperlink>
        </field>
        <field name="productName" title="${uiLabelMap.ProductProductName}" entry-name="product.internalName"><display/></field>
        <field name="serialNumber" entry-name="inventoryItem.serialNumber"><display/></field>
        <field name="atpQoh" title="Quantity"><display description="${inventoryItem.availableToPromiseTotal}"/></field>
        <field name="locationSeqId"><display/></field>
        <field name="sendDate"><display/></field>
        <field name="receiveDate" title="Dispatch Date"><display/></field>
        <field name="statusId">
            <display-entity entity-name="StatusItem"/>
        </field>
    </form> -->
    <form name="DeliveryScheduleList" list-name="listDeliverySchedule" title="" type="list" paginate-target="DeliverySchedule"
        odd-row-style="alternate-row" default-table-style="basic-table hover-bar">
    	<row-actions>
    		<entity-condition entity-name="Shipment" list="routeList">
    			<condition-list combine="and">
                		<condition-expr field-name="estimatedShipDate" value="${estimatedShipDate}"/>
                		<condition-expr field-name="statusId" operator="equals" value="GENERATED"/>
                		<condition-expr field-name="shipmentTypeId" operator="equals" value="BYPRODUCTS"/>
                </condition-list>
                <order-by field-name="routeId"/>  
    		</entity-condition>
    		<set field="scheduleDate" 
					value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(estimatedShipDate, &quot;dd MMMMM, yyyy&quot;);}" /> 
    	</row-actions>
    	<field name="estimatedShipDate" title="${uiLabelMap.SupplyDate}" ><display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(estimatedShipDate, &quot;dd MMMMM, yyyy&quot;);}" /></field>    
    	<!-- <field name="createdDate" title="Created Date" ><display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(createdStamp, &quot;dd MMMMM, yyyy&quot;);}" /></field> -->   
        <field name="shipmentTypeId" title="Shipment Type"><display-entity entity-name="ShipmentType"/></field>
        <!-- <field name="originFacilityId" title="Dairy Name"><display-entity entity-name="Facility"  key-field-name="facilityId" description="${facilityName}"/></field> -->
        <field name="statusId" title="Status"><display-entity entity-name="StatusItem" description="${description}"/></field>
       <!-- <field name="facilityId" title="Route Id" >
            <drop-down allow-empty="false">
                <option key="allRoutes" description="All-Routes"/>
                <entity-options description="${routeId}" entity-name="Shipment" key-field-name="routeId">
                   <entity-constraint name="estimatedShipDate" value="${estimatedShipDate}"/>
                   <entity-constraint name="statusId" operator="equals" value="GENERATED"/>
                </entity-options> 
            </drop-down>
        </field> -->
        <!-- <field name="shipmentId" title="Route Id" >
            <drop-down allow-empty="false">
                <option key="allRoutes" description="All-Routes"/>
                 <list-options list-name="routeList" key-name="shipmentId" description="${routeId}"/>
            </drop-down>
        </field> -->
        <field use-when="shipmentTypeId.equals(&quot;BYPRODUCTS&quot;) &amp;&amp; &quot;${statusId}&quot;==&quot;GENERATED&quot;" name="shipmentId" id-name = "shipmentId">
            <drop-down allow-empty="false">
                <option key="allRoutes" description="All-Routes"/>
                 <list-options list-name="routeList" key-name="shipmentId" description="${routeId}"/>
            </drop-down>
        </field>
       	<field use-when="shipmentTypeId.equals(&quot;BYPRODUCTS&quot;) &amp;&amp; &quot;${statusId}&quot;==&quot;GENERATED&quot;" name="U_GatePass" widget-style="buttontext" event="onclick" action="javascript:setSelectedRoute(this);" id-name = "UnionGatePass">
            <hyperlink target="AavinGatePassReport" description="UnionGtPass" target-window="_blank">
               <parameter param-name="shipmentTypeId" from-field="shipmentTypeId"/> 
               <parameter param-name="estimatedShipDate" from-field="estimatedShipDate"/> 
               <parameter param-name="reportTypeFlag"  value="GATE_PASS_UNION"/>                                  
            </hyperlink>
        </field>
        	<field name="D_GatePass" widget-style="buttontext" use-when="shipmentTypeId.equals(&quot;BYPRODUCTS&quot;) &amp;&amp; &quot;${statusId}&quot;==&quot;GENERATED&quot;" event="onclick" action="javascript:setSelectedRoute(this);" id-name = "DairyGatePass">
            <hyperlink target="AavinGatePassReport" description="DryGtPass" target-window="_blank">
               <parameter param-name="shipmentTypeId" from-field="shipmentTypeId"/> 
               <parameter param-name="estimatedShipDate" from-field="estimatedShipDate"/> 
               <parameter param-name="reportTypeFlag"  value="GATE_PASS_DAIRY"/>                                  
            </hyperlink>
        </field>
       	<!--<field name="unionReport" widget-style="buttontext" use-when="shipmentTypeId.equals(&quot;BYPRODUCTS&quot;) &amp;&amp; &quot;${statusId}&quot;==&quot;GENERATED&quot;" event="onclick" action="javascript:setSelectedRoute(this);" id-name = "unionReport">
            <hyperlink target="DeliveryScheduleReport" description="CD-15 UNION" target-window="_blank">
               <parameter param-name="shipmentTypeId" from-field="shipmentTypeId"/> 
               <parameter param-name="estimatedShipDate" from-field="estimatedShipDate"/>  
               <parameter param-name="reportTypeFlag"  value="CD-15_UNION"/>                                  
            </hyperlink>
        </field>
        <field name="dairyReport" widget-style="buttontext" use-when="shipmentTypeId.equals(&quot;BYPRODUCTS&quot;) &amp;&amp; &quot;${statusId}&quot;==&quot;GENERATED&quot;" event="onclick" action="javascript:setSelectedRoute(this);" id-name = "dairyReport">
            <hyperlink target="DeliveryScheduleReport" description="CD-15 DAIRY" target-window="_blank">
               <parameter param-name="shipmentTypeId" from-field="shipmentTypeId"/> 
               <parameter param-name="estimatedShipDate" from-field="estimatedShipDate"/>  
               <parameter param-name="reportTypeFlag"  value="CD-15_DAIRY"/>                                  
            </hyperlink>
        </field>
        --><field name="invoiceReport" widget-style="buttontext" use-when="&quot;${statusId}&quot;==&quot;GENERATED&quot;" event="onclick" action="javascript:setSelectedRoute(this);" id-name = "invoiceReport">
            <hyperlink target="invoiceDeliveryNote" description="Invoice/Delivery Note" target-window="_blank">
               <parameter param-name="shipmentTypeId" from-field="shipmentTypeId"/> 
               <parameter param-name="estimatedShipDate" from-field="estimatedShipDate"/>  
               <parameter param-name="reportTypeFlag"  value="invoiceDeliveryNote"/>                                  
            </hyperlink>
        </field>
        <field name="exciseInvoice" widget-style="buttontext" use-when="shipmentTypeId.equals(&quot;BYPRODUCTS&quot;) &amp;&amp; &quot;${statusId}&quot;==&quot;GENERATED&quot;" event="onclick" action="javascript:setSelectedRoute(this);" id-name = "exciseInvoice">
            <hyperlink target="ExciseInvoiceReport" description="Excise Invoice" target-window="_blank">
               <parameter param-name="shipmentTypeId" from-field="shipmentTypeId"/> 
               <parameter param-name="estimatedShipDate" from-field="estimatedShipDate"/>  
               <parameter param-name="reportTypeFlag"  value="exciseInvoice"/>                                  
            </hyperlink>
        </field>
         <field name="cancelShipment" widget-style="buttontext" use-when="shipmentTypeId.equals(&quot;BYPRODUCTS&quot;) &amp;&amp; (&quot;${statusId}&quot;==&quot;GENERATED&quot;)&amp;&amp; ${groovy:((security.hasEntityPermission(&quot;FACILITY&quot;, &quot;_ADMIN&quot;, session)))}" title="${uiLabelMap.CommonCancel}">
            <hyperlink target-type="plain" target="javascript:showCancelTruckSheetGenerate('${estimatedShipDate}','${scheduleDate}');" description="${uiLabelMap.CommonCancel}">
            </hyperlink>
        </field>
    </form>
    <form name="FindQuotaListing" odd-row-style="alternate-row" header-row-style="header-row" type="single" target="QuotaListing"
    	default-table-style="basic-table hover-bar" separate-columns="true"> 
    	<field name="hideSearch"><hidden value="N"/></field>
    	<!--  <field  name="custRdisplayDateequestDate" id-name="date" widget-style="h3" title="${uiLabelMap.SupplyDate}"><text size="15" default-value="${supplyDate}" /></field> -->
    	<field name="supplyDate" title="${uiLabelMap.SupplyDate}" id-name="date" widget-style="h3"><text  default-value="${supplyDate}" />
    	</field>
        <field name="facilityId" title="Party Code"><lookup target-form-name="LookupFacility"></lookup></field>
        <field name="productId" title="Product Code"> <lookup target-form-name="LookupProduct"></lookup></field>    
        <field name="routeId" title="Route"><text/></field>
       <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit/></field>       
    </form>
    <form name="StockXferForm" type="single" target="processStockXfer" title="Indent" default-map-name="custRequest"
        header-row-style="header-row" default-table-style="basic-table">
       
        <field name="fromFacility" title="From Party Code" required-field="true">
        	<lookup target-form-name="LookupParlour"></lookup>
        </field>
        <field name="toFacility" title="To Party Code" required-field="true">
        	<lookup target-form-name="LookupParlour"></lookup>
        </field>
        <field name="productId" title="Product Code" required-field="true"><lookup target-form-name="LookupByProduct"></lookup></field>
        <field name="quantity" title="${uiLabelMap.quantity}" required-field="true"><text size="10"></text></field>
        <field name="effectiveDate" title="Transfer Date"><date-time/></field> 
        <field name="submitButton" title="${uiLabelMap.CommonSubmit}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>    
    <form name="FindParlorSalesOrder" title="" type="single" target="FindParlorSalesOrder" header-row-style="header-row" default-table-style="basic-table">
        <field name="orderId"><text-find/></field>
        <field name="orderDate"><date-find/></field>
        <field name="orderType"><hidden value="SALES_ORDER"/></field>
        <field name="salesChannelEnumId"><hidden value="PARLOR_SALES_CHANNEL"/></field>
        <field name="statusId">
        	<drop-down>
        		<option key="ORDER_APPROVED" description="Approved"/>
        		<option key="ORDER_CANCELLED" description="Cancelled"/>
        	</drop-down>
        	<!-- <drop-down>
        		<entity-options description="${statusCode}" entity-name="StatusItem" key-field-name="statusId" >
        			<entity-constraint name="statusTypeId" operator="equals" value="ORDER_STATUS"/>
s        		</entity-options>
        	</drop-down> -->
        </field>
        <field name="productStoreId" title="Party Code"><text-find/></field>
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form> 
    <form name="listParlorSalesOrders" type="list" list-name="listIt" paginate-target="FindParlorSalesOrder"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
            <service service-name="performFind" result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="parameters"/>
                <field-map field-name="entityName" value="OrderHeader"/>
                <field-map field-name="orderBy" from-field="parameters.sortField" value="-lastUpdatedStamp"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
            </service>
        </actions>
        <row-actions>
            <entity-and entity-name="OrderItemBilling" list="invoices">
                <field-map field-name="orderId"/>
            </entity-and>
            <set field="invoiceId" from-field="invoices[0].invoiceId"/>  
            <set field="invTotal" value="${bsh:org.ofbiz.accounting.invoice.InvoiceWorker.getInvoiceTotal(delegator,invoiceId)}"></set>         
        </row-actions>
        <field name="productStoreId" title="Party Code"><display/></field>
        <field name="orderId" title="Order Id"><display/></field>
        <field name="invoiceId" title="Invoice Id" widget-style="buttontext"><hyperlink target="invoiceOverview" target-window="_blank" description="${invoiceId}"> <parameter param-name="invoiceId"/></hyperlink>        </field>
        <field name="invTotal" title="Invoice Amt (Rs)"><display/></field>
        <field name="statusId" title="Status Id" ><display-entity key-field-name="statusId" description="${description}" entity-name="StatusItem"/></field>
        <field name="orderDate" title="Order Date"><display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(orderDate, &quot;dd/MM/yyyy&quot;);}"/></field>
        <field name="createdBy" title="Created By"><display/></field>
        <field name="lastUpdatedStamp" title="Last Update"><display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(lastUpdatedStamp, &quot;dd/MM/yyyy HH:mm:ss&quot;);}" /></field>
        <field use-when="statusId.equals(&quot;ORDER_APPROVED&quot;)" name="cancelOrder" widget-style="buttontext">
            <hyperlink target="cancelParlorSalesOrder" description="Cancel Order">
                <parameter param-name="orderId"/>
                <parameter param-name="statusId"/>
                <parameter param-name="productStoreId"/>
            </hyperlink>
        </field>
    </form>
    <form name="ListParlourSalesCSV" type="list" list-name="listIt" paginate="false"
    		odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
    	<actions>
            <service service-name="performFind" result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="parameters"/>
                <field-map field-name="entityName" value="OrderHeader"/>
                <field-map field-name="orderBy" from-field="parameters.sortField" value="-lastUpdatedStamp"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
            </service>
        </actions>
        <row-actions>
            <entity-and entity-name="OrderItemBilling" list="invoices">
                <field-map field-name="orderId"/>
            </entity-and>
            <set field="invoiceId" from-field="invoices[0].invoiceId"/>  
            <set field="invTotal" value="${bsh:org.ofbiz.accounting.invoice.InvoiceWorker.getInvoiceTotal(delegator,invoiceId)}"></set>         
        </row-actions>
    	<field name="productStoreId" title="Party Code"><display/></field>
        <field name="orderId" title="Order Id"><display/></field>
        <field name="invoiceId" title="Invoice Id"><display/></field>
        <field name="invTotal" title="Invoice Amt (Rs)"><display/></field>
        <field name="statusId" title="Status Id" ><display/></field>
        <field name="orderDate" title="Order Date"><display/></field>
        <field name="createdBy" title="Created By"><display/></field>
        <field name="lastUpdatedStamp" title="Last Update"><display/></field>
     </form>
 </forms>