<?xml version="1.0" encoding="UTF-8"?>
<forms xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
        xsi:noNamespaceSchemaLocation="http://ofbiz.apache.org/dtds/widget-form.xsd">

    <form name="ViewFacilityGeoPointSearch" odd-row-style="alternate-row" header-row-style="header-row" type="single" 
    	default-table-style="basic-table hover-bar" separate-columns="true" target="ViewFacilityGeoPoint">
    	<field name="hideSearch"><hidden value="Y" /></field>
		<field name="noConditionFind"><hidden value="N"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="facilityId" title="${uiLabelMap.BoothRoute}" position="1"><lookup target-form-name="LookupFacility"/></field>
        <field name="routeId2" title="Addtl. Route Id (Optional)" position="2"><lookup target-form-name="LookupFacility"/></field>
        <field name="categoryTypeEnum" title="${uiLabelMap.ProductFacilityCategoryType}">
            <drop-down allow-empty="true">
                <entity-options entity-name="Enumeration" description="${description}" key-field-name="enumId">
                    <entity-constraint name="enumTypeId" value="BOOTH_CAT_TYPE"/>
                    <entity-order-by field-name="sequenceId"/>
                </entity-options>
            </drop-down>
        </field> 
       	<field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit/></field>       
    </form>
    	
	 <form name="ListTruckSheets"   id="ListTruckSheetId" list-name="listDeliverySchedule" title="" type="list" paginate-target="TruckSheetMotherDairy"
        odd-row-style="alternate-row" default-table-style="basic-table hover-bar">
    	<row-actions>
    		<entity-condition entity-name="Shipment" list="shipmentRouteList">
    			<condition-list combine="and">
                		<condition-expr field-name="estimatedShipDate" value="${estimatedShipDate}"/>
                		<condition-expr field-name="statusId" operator="equals" value="GENERATED"/>
                		<condition-expr field-name="shipmentTypeId" operator="equals" value="${shipmentTypeId}"/>
                </condition-list>
               <order-by field-name="routeId"/>
    		</entity-condition>
    		<set field="scheduleDate" 
					value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(estimatedShipDate, &quot;dd MMMMM, yyyy&quot;);}" /> 
    	</row-actions>
    	<field name="estimatedShipDate" title="${uiLabelMap.SupplyDate}" ><display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(estimatedShipDate, &quot;dd MMMMM, yyyy&quot;);}" /></field>    
    	<!-- <field name="createdDate" title="Created Date" ><display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(createdStamp, &quot;dd MMMMM, yyyy&quot;);}" /></field> -->   
        <field name="shipmentTypeId" title="Shipment Type"><display-entity entity-name="ShipmentType"/></field>
        <!-- <field name="originFacilityId" title="Dairy Name"><display-entity entity-name="Facility"  key-field-name="facilityId" description="${facilityName}"/></field> -->
        <field name="statusId" title="Status"><display-entity entity-name="StatusItem" description="${description}"/></field>
     <!--   <field name="facilityId" title="Route Id"  id-name="facilityId">
            <drop-down allow-empty="false">
                <option key="allRoutes" description="All-Routes"/>
                <entity-options description="${routeId}" entity-name="Shipment" key-field-name="routeId" >
                   <entity-constraint name="estimatedShipDate" value="${estimatedShipDate}"/>
                    <entity-constraint name="shipmentTypeId" value="${shipmentTypeId}"/>
                   <entity-constraint name="statusId" operator="equals" value="GENERATED"/>
                </entity-options> 
            </drop-down>
        </field> -->
        <field name="shipmentId" title="Route" id-name="shipmentId" use-when="&quot;${statusId}&quot;==&quot;GENERATED&quot;">
            <drop-down allow-empty="false">
                <option key="allRoutes" description="All-Routes"/>
                <list-options list-name="shipmentRouteList" key-name="shipmentId" description="${groovy: routes.get(routeId);} "/>
            </drop-down>
        </field>
        <!-- <field name="tripId" title="Trip" id-name="tripId" use-when="&quot;${statusId}&quot;==&quot;GENERATED&quot;" separate-column="true">
            <drop-down allow-empty="false">
                <option key="allTrips" description="All-Trips"/>
                <list-options list-name="trips" key-name="tripId" description="${tripId}"/>
            </drop-down>
        </field> -->
        <!-- <field use-when="&quot;${statusId}&quot;==&quot;GENERATED&quot;" name="shipmentId" id-name = "shipmentId">
            <drop-down allow-empty="false">
                <option key="allRoutes" description="All-Routes"/>
                 <list-options list-name="shipmentRouteList" key-name="shipmentId" description="${routeId}"/>
            </drop-down>
        </field> -->
         <field name="TruckSheet" widget-style="buttontext" use-when="&quot;${statusId}&quot;==&quot;GENERATED&quot;" event="onclick" action="javascript:appendRoute(this);" id-name = "truckSheet">
            <hyperlink target="truckSheetReport.txt" description="Truck Sheet Report" target-window="_blank" >
              	 <parameter param-name="shipmentTypeId" from-field="shipmentTypeId"/> 
               	 <parameter param-name="estimatedShipDate" from-field="estimatedShipDate"/>
            </hyperlink>
        </field>
          <!-- <field name="gatePass" widget-style="buttontext" use-when="&quot;${statusId}&quot;==&quot;GENERATED&quot;" event="onclick" action="javascript:appendRoute(this);" id-name = "truckSheet">
            <hyperlink target="MLDGenerateTruckSheet.txt" description="Gate Pass" target-window="_blank" >
              	  <parameter param-name="shipmentTypeId" from-field="shipmentTypeId"/> 
               	  <parameter param-name="estimatedShipDate" from-field="estimatedShipDate"/> 
              	  <parameter param-name="reportTypeFlag" value="trucksheet"/>   
            </hyperlink>
        </field> -->
       <!--  <field name="abstractReport" widget-style="buttontext" use-when="&quot;${statusId}&quot;==&quot;GENERATED&quot;" event="onclick" action="javascript:appendRoute(this);" id-name="routeAbstract">
            <hyperlink target="RouteAbstractReport.txt" description="Route Abstract Report" target-window="_blank" >
                <parameter param-name="shipmentTypeId" from-field="shipmentTypeId"/> 
               	  <parameter param-name="estimatedShipDate" from-field="estimatedShipDate"/>
               	  <parameter param-name="reportTypeFlag" value="abstract"/>                                                   
            </hyperlink>
        </field> -->
         <field name="bankChallan" widget-style="buttontext" use-when="&quot;${statusId}&quot;==&quot;GENERATED&quot;" event="onclick" action="javascript:appendRoute(this);" id-name="bankChallan">
            <hyperlink target="DealerBankChallan.txt" description="BankChallan" target-window="_blank" >
               	  <parameter param-name="supplyDate"  value="${groovy: return org.ofbiz.base.util.UtilDateTime.toDateString(estimatedShipDate,&quot;MMMM dd, yyyy&quot;)}"/>
               	  <parameter param-name="shipmentTypeId" from-field="shipmentTypeId"/>
            </hyperlink>
        </field>
        <field name="InvoiceSlips" widget-style="buttontext" use-when="&quot;${statusId}&quot;==&quot;GENERATED&quot;" event="onclick" action="javascript:appendRoute(this);" id-name = "invoiceSlips">
            <hyperlink target="orderSlip.txt" description="Invoice Slips" target-window="_blank"> 	
                  <parameter param-name="shipmentTypeId" from-field="shipmentTypeId"/> 
               	  <parameter param-name="estimatedShipDate" from-field="estimatedShipDate"/>
               	  <parameter param-name="reportTypeFlag" value="invoiceSlips"/> 
            </hyperlink>
        </field>
         <!-- 
        <field name="FinalizeOrder" widget-style="buttontext" use-when="&quot;${statusId}&quot;==&quot;GENERATED&quot;" event="onclick" action="javascript:finalizeFormSubmit(this);" id-name="FinalizeOrder">
            <hyperlink target="FinalizeOrders"  description="Finalize Orders" > 	
                  <parameter param-name="shipmentTypeId" from-field="shipmentTypeId"/> 
               	  <parameter param-name="estimatedShipDate" from-field="estimatedShipDate"/>
            </hyperlink>
        </field>
         <field name="Route Dispatch  Sheet" widget-style="buttontext" use-when="&quot;${statusId}&quot;==&quot;GENERATED&quot;" event="onclick" action="javascript:appendRoute(this);" id-name="deliverySchedule">
            <hyperlink target="MilkDeliveryScheduleReport.pdf" description="Route Dispatch  Sheet" target-window="_blank">
                <parameter param-name="shipmentId"  from-field="shipmentId" /> 
                <parameter param-name="reportTypeFlag" value="RouteDispatchSheet"/>                                                           
            </hyperlink>
        </field>
        <field name="Route Collection Sheet" widget-style="buttontext" use-when="&quot;${statusId}&quot;==&quot;GENERATED&quot;" event="onclick" action="javascript:appendRoute(this);" id-name="deliverySchedule">
            <hyperlink target="MilkDeliveryScheduleReport.pdf" description="Route Collection Sheet" target-window="_blank">
                <parameter param-name="shipmentId"  from-field="shipmentId" /> 
                <parameter param-name="reportTypeFlag" value="RouteCollectionSheet"/>                                                           
            </hyperlink>
        </field>
         <field name="Main Truck Sheet" widget-style="buttontext" use-when="&quot;${statusId}&quot;==&quot;GENERATED&quot;" event="onclick" action="javascript:appendRoute(this);" id-name="loadingStatement">
            <hyperlink target="MLDGenerateTruckSheet.txt" description="Main Truck Sheet"   target-window="_blank">
                <parameter param-name="shipmentId"  from-field="shipmentId" /> 
                <parameter param-name="reportTypeFlag" value="consolidatedLoadingStatement"/>                                                           
            </hyperlink>
        </field>
        <field name="DeliveryChallan" widget-style="buttontext" use-when="&quot;${statusId}&quot;==&quot;GENERATED&quot;" event="onclick" action="javascript:appendRoute(this);" id-name="crDeliveryChallan">
            <hyperlink target="MilkDeliveryScheduleReport.txt" description="DeliveryChalan"   target-window="_blank">
                <parameter param-name="shipmentId"  from-field="shipmentId" /> 
                <parameter param-name="reportTypeFlag" value="crInstDeliveryChalan"/>                                                           
            </hyperlink>
        </field> -->
        <field name="cancelShipment" widget-style="buttontext" event="onclick" action="javascript:setCancelDomObj(this);" use-when="(&quot;${statusId}&quot;==&quot;GENERATED&quot;)&amp;&amp; ${groovy:((security.hasEntityPermission(&quot;FACILITY&quot;, &quot;_TRUCKSHEETCANCEL&quot;, session)))}" title="${uiLabelMap.CommonCancel}">
            <hyperlink target-type="plain" target="javascript:showCancelTruckSheetGenerate('${estimatedShipDate}','${scheduleDate}' ,'${shipmentTypeId}', '${shipmentRouteList}');" description="${uiLabelMap.CommonCancel}">
            </hyperlink>
        </field>
    </form>
    <form name="FindAbsenteeBooths" odd-row-style="alternate-row" header-row-style="header-row" type="single" target="AbsenteeList"
    	default-table-style="basic-table hover-bar" separate-columns="true">    	   	
    	<field name="hideSearch"><hidden value="N"/></field>
    	<field name="paymentDate" title="${uiLabelMap.SupplyDate}" ><hidden/></field>       
        <field name="facilityId" title="${uiLabelMap.BoothRouteZone}"><text/></field>        
       	<field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit/></field>       
    </form>
    <form name="ListAbsenteeBooths" odd-row-style="alternate-row" header-row-style="header-row" type="list"
    	default-table-style="basic-table hover-bar" separate-columns="true" list-name="boothPaymentsList" target="absenteeOverrideForBooth">   
    	<row-actions>
    		<set field="supplyDate" value="${bsh:org.ofbiz.base.util.UtilDateTime.getNextDayStart(org.ofbiz.base.util.UtilDateTime.nowTimestamp())}" type="Timestamp"/>
    	</row-actions>
    	<field name="supplyDate"><hidden value="${supplyDate}"/></field>        
        <field name="facilityId" title="${uiLabelMap.OrderFacilityBooth}"><display description="${facilityId}"/></field>
        <field name="routeId" title="${uiLabelMap.Route}"><display description="${routeId}" /></field>
        <field name="grandTotal" parameter-name="dueAmount" title="${uiLabelMap.ToDayDueAmount}"><display type="currency" currency="${currencyUomId}"/></field>
        <field name="totalDueAmount" title="${uiLabelMap.TotalDueAmount}"><display type="currency" currency="${currencyUomId}" description="${totalDue}"/></field> 
        <field name="viewButton" title=" " widget-style="buttontext"><hyperlink  target-type="plain" description="View Details"  target="javascript:showPaymentHistory('${facilityId}');" ></hyperlink></field>
        <field name="overrideAmount" title="Override Amount"><text/></field>
        <field name="Override" widget-style="buttontext">
        <!-- <hyperlink target="absenteeOverrideForBooth" description="Override" confirmation-message="Are You Sure You Want To Override">
        	<parameter param-name="facilityId" from-field="originFacilityId"/>
        	<parameter param-name="supplyDate" from-field="supplyDate"/>
        	<parameter param-name="overrideAmount"/>
        </hyperlink> -->
        <submit confirmation-message="Are You Sure You Want To Override" />
        </field>
    </form>
    <form name="ListAbsenteeOverride" odd-row-style="alternate-row" header-row-style="header-row" type="list"
    	default-table-style="basic-table hover-bar" separate-columns="true" list-name="absenteeOverrideList">   
    	<row-actions>
    		<set field="supplyDate" value="${bsh:org.ofbiz.base.util.UtilDateTime.getNextDayStart(org.ofbiz.base.util.UtilDateTime.nowTimestamp())}" type="Timestamp"/>
    	</row-actions>
    	<field name="shipListType"><hidden value="overrideList"/></field>
    	<field name="supplyDate" title="${uiLabelMap.SupplyDate}"><display description="${bsh:org.ofbiz.base.util.UtilDateTime.toDateString(supplyDate,&quot;yyyy-MM-dd&quot;)}"/></field>        
        <field name="createdByUserLogin" title="User Name"><display/></field>
        <field name="facilityId" title="${uiLabelMap.OrderFacilityBooth}"><display description="${facilityId}"/></field>
         <field name="routeId" title="${uiLabelMap.Route}"><display description="${parentFacilityId}"/></field>
        <field name="facilityName"  title="${uiLabelMap.BoothName}"><display/></field>
        <field name="Delete" widget-style="buttontext delete">
        <hyperlink target="removeAbsenteeOverride" description="Delete" confirmation-message="Are You Sure You Want To Delete">
        	<parameter param-name="facilityId" from-field="facilityId"/>
        	<parameter param-name="supplyDate" from-field="supplyDate"/>
        	<parameter param-name="shipListType" value="overrideList"/>
        </hyperlink>
        </field>
    </form>
    <form name="FindReturns" type="single"  target="FindReturns" title=""
        header-row-style="header-row" default-table-style="basic-table">
        <field name="returnHeaderTypeId">
            <drop-down allow-empty="true">
                <entity-options entity-name="ReturnHeaderType" description="${description}"/>
            </drop-down>
        </field>
        <field name="returnId" title="${uiLabelMap.OrderReturnId}"><text-find/></field>
        <field name="fromPartyId" title="${uiLabelMap.OrderReturnFromParty}">
            <lookup target-form-name="LookupPartyName"/>
        </field>
        <!-- <field name="billingAccountId" title="${uiLabelMap.AccountingBillingAccount}">
            <text-find/>
        </field> -->
        <field name="statusId" title="${uiLabelMap.CommonStatus}">
            <drop-down allow-empty="true">
                <entity-options entity-name="StatusItem" description="${description}">
                    <entity-constraint name="statusTypeId" operator="equals" value="ORDER_RETURN_STTS"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="entryDate" title="${uiLabelMap.OrderEntryDate}">
            <date-find/>
        </field>
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit">
            <submit button-type="button"/>
        </field>
    </form>
    <form name="ListReturns" type="list"  target="findreturn" title="" list-name="listIt"
        odd-row-style="alternate-row" default-table-style="basic-table hover-bar" paginate-target="findreturn">
        <actions>
            <service service-name="performFind"  result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="requestParameters"/>
                <field-map field-name="entityName" value="ReturnHeader"/>
                <field-map field-name="orderBy" value="entryDate DESC"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
            </service>
        </actions>
        <row-actions>
        	<entity-one entity-name="Shipment">
        		<field-map field-name="shipmentId" from-field="shipmentId"/>
        		<select-field field-name="routeId"/>
        		<select-field field-name="tripNum"/>
        	</entity-one>
        	<set field="routeId" from-field="routeId"/>
        	<set field="tripId" from-field="tripNum"/>
        </row-actions>
        <field name="returnId"  widget-style="buttontext" title="${uiLabelMap.OrderReturnId}">
            <hyperlink description="${returnId}" target="returnHeaderItems">
                <parameter param-name="returnId"/>
            </hyperlink>
        </field>
        <field name="fromPartyId" title="${uiLabelMap.OrderReturnFromParty}">
            <display-entity entity-name="PartyNameView" key-field-name="partyId" description="${groupName} ${firstName} ${lastName}">
                <sub-hyperlink link-style="buttontext" target-type="inter-app" description="${fromPartyId}" target="/partymgr/control/viewprofile">
                    <parameter param-name="partyId" from-field="fromPartyId"/>
                </sub-hyperlink>
            </display-entity>
        </field>
        <field name="statusId" title="${uiLabelMap.CommonStatus}">
            <display-entity entity-name="StatusItem" key-field-name="statusId" description="${description}"/>
        </field>
        
        <field name="shipmentId" title="Ship Date">
        	<display-entity entity-name="Shipment" key-field-name="shipmentId" description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(estimatedShipDate, &quot;dd MMMMM, yyyy&quot;);}"></display-entity>
        </field>
        <field name="routeId" title="Route">
        	<display-entity entity-name="Facility" key-field-name="facilityId" description="${facilityName}[${facilityId}]"></display-entity>
        </field>
        <field name="tripId" title="Trip">
        	<display description="${tripId}"></display>
        </field>
        <field name="entryDate" title="${uiLabelMap.OrderEntryDate}">
            <display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(entryDate, &quot;dd/MM/yyyy HH:mm:ss&quot;);}"/>
        </field>
        <field name="cancelReturn" widget-style="buttontext" use-when="!(&quot;${statusId}&quot;==&quot;RETURN_CANCELLED&quot;)" title="${uiLabelMap.CommonCancel}" >
            <hyperlink target-type="plain" target="cancelReturn" description="${uiLabelMap.CommonCancel}" link-type="hidden-form">
            	<parameter param-name="returnId"/>
            </hyperlink>
        </field>
    </form>
    <form name="EditReturn" type="single" target="updateReturn" default-map-name="returnHeader" id="editReturn"
        header-row-style="header-row" default-table-style="basic-table">
        <actions>
            <entity-one entity-name="StatusItem" value-field="currentStatus" auto-field-map="false">
                <field-map field-name="statusId" from-field="returnHeader.statusId"/>
            </entity-one>
        </actions>
        <alt-target use-when="returnHeader==null" target="createReturn"/>
       <!--  <auto-fields-service service-name="updateReturnHeader"/> -->
        <field use-when="returnHeader!=null" name="returnId" tooltip="${uiLabelMap.OrderReturnCannotBeChanged}"><display/></field>
        <field use-when="returnHeader==null&amp;&amp;returnId!=null" name="returnId" tooltip="${uiLabelMap.OrderReturnCannotBeFound} ${returnId}"><text size="20" maxlength="20"/></field>
        <field use-when="returnHeader==null&amp;&amp;returnId==null" name="returnId"><ignored/></field>
        <field name="returnHeaderTypeId" id-name="returnHeaderTypeId">
            <drop-down allow-empty="false">
                <entity-options entity-name="ReturnHeaderType" description="${description}"/>
            </drop-down>
        </field>
        <field name="statusId" use-when="returnHeader==null" id-name="statusId">
            <drop-down>
                <entity-options entity-name="StatusItem" description="${description}">
                    <entity-constraint name="statusTypeId" value="ORDER_RETURN_STTS"/>
                    <entity-order-by field-name="sequenceId"/>
                </entity-options>
                <list-options key-name="statusIdTo" list-name="returnStatus" description="${transitionName}"/>
            </drop-down>
        </field>
        <field name="statusId" use-when="returnHeader!=null">
            <drop-down current-description="${currentStatus.description}">
                <entity-options entity-name="StatusValidChangeToDetail" key-field-name="statusIdTo" description="${transitionName} (${description})">
                    <entity-constraint name="statusId" env-name="returnHeader.statusId"/>
                    <entity-order-by field-name="sequenceId"/>
                </entity-options>
            </drop-down>
        </field>
        <!-- <field name="currencyUomId" use-when="returnHeader==null">
            <drop-down no-current-selected-key="${defaultOrganizationPartyCurrencyUomId}">
                <entity-options key-field-name="uomId" description="${description} - ${abbreviation}" entity-name="Uom">
                    <entity-constraint name="uomTypeId" operator="equals" value="CURRENCY_MEASURE"/>
                    <entity-order-by field-name="description"/>
                </entity-options>
            </drop-down>
        </field> -->
        <field name="currencyUomId" use-when="returnHeader!=null">
            <display-entity entity-name="Uom" key-field-name="uomId" description="${abbreviation} - ${description}"/>
        </field>
        <field name="destinationFacilityId">
            <drop-down allow-empty="true">
                <entity-options entity-name="Facility" key-field-name="facilityId" description="${facilityName}">
                    <entity-order-by field-name="facilityName"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="fromPartyId"><lookup target-form-name="LookupPartyName"/></field>
        <field name="toPartyId"><lookup target-form-name="LookupPartyName"/></field>
        <field name="originContactMechId" use-when="returnHeader!=null">
            <display-entity entity-name="PostalAddress" key-field-name="contactMechId" description="${toName} ${attnName} ${address1} ${address2} ${city} ${stateProvinceGeoId} ${postalCode} ${countryGeoId}"/>
        </field>
        <field name="originContactMechId" use-when="returnHeader!=null&amp;&amp;&quot;RETURN_REQUESTED&quot;.equals(returnHeader.getString(&quot;statusId&quot;))">
            <drop-down allow-empty="true">
                <list-options key-name="postalAddress.contactMechId" list-name="addresses" description="${postalAddress.toName} ${postalAddress.attnName} ${postalAddress.address1} ${postalAddress.address2} ${postalAddress.city} ${postalAddress.stateProvinceGeoId} ${postalAddress.postalCode} ${postalAddress.countryGeoId}"/>
            </drop-down>
        </field>
        <!-- <field name="billingAccountId" use-when="billingAccountList!=null&amp;&amp;billingAccountList.size()&gt;0">
            <drop-down allow-empty="true">
                <list-options key-name="billingAccountId" list-name="billingAccountList" description="${billingAccountId}: ${description}"/>
            </drop-down>
        </field>
        <field name="finAccountId" use-when="finAccounts!=null&amp;&amp;finAccounts.size()&gt;0">
            <drop-down allow-empty="true">
                <list-options key-name="finAccountId" list-name="finAccounts" description="${finAccountId}: ${finAccountName}"/>
            </drop-down>
        </field>
        <field name="paymentMethodId" use-when="creditCardList!=null&amp;&amp;creditCardList.size()&gt;0">
            <drop-down allow-empty="true">
                <list-options list-name="creditCardList" list-entry-name="creditCardPm" key-name="creditCardPm.paymentMethodId" description="${bsh:org.ofbiz.party.contact.ContactHelper.formatCreditCard(creditCardPm.getRelatedOne(&quot;CreditCard&quot;))}"/>
            </drop-down>
        </field> -->
        <!-- <field name="newCreditCard" widget-style="buttontext" use-when="returnHeader!=null&amp;&amp;returnHeader.getString(&quot;fromPartyId&quot;)!=null">
            <hyperlink also-hidden="false" target="/partymgr/control/editcreditcard" target-window="partymgr" description="${uiLabelMap.AccountingCreateNewCreditCard}" target-type="inter-app">
                <parameter param-name="partyId" from-field="returnHeader.fromPartyId"/>
            </hyperlink>
        </field> -->
        <field name="needsInventoryReceive" tooltip="${uiLabelMap.OrderReturnNecessaryReceiveInventoryMessage}">
            <drop-down no-current-selected-key="N"><option key="N"/><option key="Y"/></drop-down>
        </field>
        <field name="createdBy"><display/></field>
        <field name="submitButton" title="${uiLabelMap.CommonSubmit}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    <form name="FindByProduct" type="single" target="FindByProduct" title="" default-map-name="product"
        header-row-style="header-row" default-table-style="basic-table">
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="productId" title="${uiLabelMap.ProductProductId}"><text-find/></field>
        <field name="productName" title="Product Name"><text-find/></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit">
            <submit button-type="button"/>
        </field>
    </form>
    <form name="ListByProducts" list-name="productList" target="" title="" type="list" paginate-target="FindByProduct"
        odd-row-style="alternate-row" default-table-style="basic-table hover-bar" header-row-style="header-row-2">
       <!--  <actions>
            <set field="entityName" value="Product"/>
            <service service-name="performFind" result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="requestParameters"/>
                <field-map field-name="entityName" from-field="entityName"/>
                <field-map field-name="orderBy" from-field="parameters.sortField"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
            </service>
        </actions> -->
        <field name="productId" sort-field="true">
            <hyperlink also-hidden="false" description="${productId}" target="EditByProduct">
                <parameter param-name="productId"/>
                <parameter param-name="subMenuItem" value="EditProduct"/>
            </hyperlink>
        </field>
        <field name="productName" sort-field="true"><display/></field>
        <field name="primaryProductCategoryId" sort-field="true"><display/></field>
        <field name="description" sort-field="true"><display/></field>
    </form>
    <form name="EditByProduct" type="single" target="updateByProduct" title="" default-map-name="product"
        header-row-style="header-row" default-table-style="basic-table">

        <alt-target use-when="product==null" target="createByProduct"/>

        <field use-when="product==null" name="isCreate"><hidden value="true"/></field>

        <field position="1" use-when="product!=null" name="productId" required-field="true" title="${uiLabelMap.ProductProductId}" tooltip="${uiLabelMap.ProductNotModificationRecreatingProduct}"><display/></field>
        <field position="1" use-when="product==null&amp;&amp;productId==null" name="productId" required-field="true" title="${uiLabelMap.ProductProductId}"><text size="20" maxlength="20"/></field>
        <field position="1" use-when="product==null&amp;&amp;productId!=null" name="productId" required-field="true" title="${uiLabelMap.ProductProductId}" tooltip="${uiLabelMap.ProductNotFindProductId} [${productId}]" ><text size="20" maxlength="20"/></field>
		
		<field name="productTypeId"><hidden value="FINISHED_GOOD"/></field>
		
        <field position="1" name="primaryProductCategoryId" title="${uiLabelMap.ProductPrimaryCategory}">
            <drop-down allow-empty="true">
                <entity-options entity-name="ProductCategory" key-field-name="productCategoryId" description="${productCategoryId}">
                    <entity-constraint name="productCategoryTypeId" value="BYPROD_CAT"/>
                    <entity-order-by field-name="productCategoryId"/>
                </entity-options>
            </drop-down>
        </field>
		<field position="1" name="productName" title="Product Name" required-field="true" event="onBlur" action="javascript:autofillProdNames()"><text size="20" maxlength="20"/></field>
		<field name="internalName"><text size="20" maxlength="20"/></field>
        <field name="brandName"><text size="20" maxlength="20"/></field>
        <field name="description"><text size="30" maxlength="255"/></field>
        <field position="1" name="introductionDate" title="${uiLabelMap.CommonIntroductionDate}" red-when="after-now"><date-time/></field>
        <field position="1" name="salesDiscontinuationDate" title="${uiLabelMap.ProductSalesThruDate}" red-when="before-now"><date-time/></field>
        <field position="1" name="quantityIncluded" title="${uiLabelMap.ProductQuantityIncluded}"><text size="10" maxlength="20"/></field>
        <field position="1" name="quantityUomId" title="${uiLabelMap.ProductQuantityUomId}">
            <drop-down allow-empty="false">
                <entity-options key-field-name="uomId" description="${description} - ${abbreviation}" entity-name="Uom" >
                    <entity-constraint name="uomId" operator="in" value="VLIQ_N,VLIQ_K,VLIQ_L"/>                                      
                    <entity-order-by field-name="description"/>
                </entity-options>
            </drop-down>
        </field>
        <!-- <field position="1" name="piecesIncluded" title="${uiLabelMap.ProductPiecesIncluded}"><text size="10" maxlength="20" default-value="1"/></field> -->
        <field name="piecesIncluded"><hidden value="1"/></field>
        <!-- <field position="1" name="isVirtual" title="${uiLabelMap.ProductVirtualProduct}">
            <drop-down><option key="N" description="${uiLabelMap.CommonN}"/><option key="Y" description="${uiLabelMap.CommonY}"/></drop-down>
        </field>
        <field position="1" name="isVariant" title="${uiLabelMap.ProductVariantProduct}">
            <drop-down><option key="Y" description="${uiLabelMap.CommonY}"/><option key="N" description="${uiLabelMap.CommonN}"/></drop-down>
        </field> -->
       <!--  <field position="1" name="mfgLocation" title="Mfg Location">
            <drop-down><option key="UNION" description="UNION"/><option key="DAIRY" description="DAIRY"/></drop-down>
        </field>
        <field position="1" name="disLocation" title="Dispatch Location">
            <drop-down><option key="UNION" description="UNION"/><option key="DAIRY" description="DAIRY"/></drop-down>
        </field> -->
        <field position="1" name="isActive" title="Is Active">
            <drop-down><option key="Y" description="Y"/><option key="N" description="N"/></drop-down>
        </field>
        <field name="isVirtual"><hidden value="N"/></field>
		<field name="isVariant"><hidden value="Y"/></field>
		<field name="taxable"><hidden value="Y"/></field>
		<field name="chargeShipping"><hidden value="N"/></field>
		<field name="autoCreateKeywords"><hidden value="Y"/></field>
		<field position="1" use-when="product==null&amp;&amp;productId==null" name="pricesEffectiveDate" red-when="after-now" tooltip="Default Prices are Automatically Created. If Left blank, Today's date is taken"><date-time/></field>
        <field name="submitButton" title="${uiLabelMap.ProductUpdateProduct}" use-when="product!=null" widget-style="smallSubmit"><submit button-type="button"/></field>
        <field name="submitButton" title="${uiLabelMap.ProductCreateProduct}" use-when="product==null" widget-style="smallSubmit"><submit button-type="button"/></field>

        <field use-when="product!=null" position="1" name="lastUpdatedByText" title="${uiLabelMap.ProductLastModifiedBy}:">
            <display description="[${product.lastModifiedByUserLogin}] ${uiLabelMap.CommonOn} ${product.lastModifiedDate}" also-hidden="false"/>
        </field>
        <field use-when="product!=null" position="2" name="createdByText" title="${uiLabelMap.CommonCreatedBy}:">
            <display description="[${product.createdByUserLogin}] ${uiLabelMap.CommonOn} ${product.createdDate}" also-hidden="false"/>
        </field>
    </form>
    <form name="UpdateByProductPrice" type="list" target="updateByProductPrice" title="" list-name="productPrices"
        odd-row-style="alternate-row" separate-columns="true" default-table-style="basic-table">
        <auto-fields-service service-name="updateByProductPrice" map-name="productPrice"/>
        <field name="customPriceCalcService"><ignored/></field>    
        <!-- <field name="taxPercentage" ><ignored/></field> -->    
        <field name="taxAuthPartyId"><ignored/></field>    
        <field name="taxAuthGeoId"><ignored/></field>    
        <field name="taxInPrice" ><ignored/></field>   
        <field name="termUomId" ><ignored/></field> 
        <field name="tenantId" ><ignored/></field> 
        <field name="taxPercentage" ><ignored/></field>   
        <!-- <field name="currencyUomId"><ignored/></field> 
        <field name="productPricePurposeId"><ignored/></field> -->
         
        <field name="productId"><hidden/></field>
        <field name="currencyUomId"><hidden value="INR"/></field>
        <field name="productPricePurposeId"><hidden/></field>
        <field name="productPriceTypeId" title="${uiLabelMap.ProductPriceType}"><display-entity entity-name="ProductPriceType"/></field>
        <!-- <field name="productPricePurposeId" title="${uiLabelMap.CommonPurpose}"><display-entity entity-name="ProductPricePurpose"/></field> -->
        <field name="fromDate" title="${uiLabelMap.CommonFromDate}"><display type="date"/></field>
        <field name="thruDate" title="${uiLabelMap.CommonThruDate}"><display type="date"/></field>
        <!-- <field name="currencyUomId" title="${uiLabelMap.ProductCurrency}" ><display-entity entity-name="Uom" key-field-name="uomId" description="${uomId}"/></field> -->
        <field name="currencyUomId" ><hidden value="INR"/> </field>
        <field name="productStoreGroupId" ><hidden value="_NA_"/> </field>
        
		<field name="price"><text size="7"/></field>
		<field name="VAT_SALE_Price" title="Vat"><hidden/></field>
		<field name="VAT_SALE_Rate" title="Vat%"><text size="4"/></field>
		<field name="BED_SALE_Price" title="Bed"><hidden /></field>
		<field name="BED_SALE_Rate" title="Bed%"><hidden /></field>
		<field name="BEDCESS_SALE_Price" title="Bedcess"><hidden /></field>
		<field name="BEDCESS_SALE_Rate" title="BedCess%"><hidden /></field>
		<field name="BEDSECCESS_SALE_Price" title="SecCess"><hidden /></field>
		<field name="BEDSECCESS_SALE_Rate" title="SecCess%"><hidden /></field>
		<!-- <field name="taxAmount"><text size="10"/></field>
		<field name="taxPercentage"><text size="10"/></field> -->
		<field name="lastUpdatedByText" title="${uiLabelMap.ProductLastModifiedBy}:">
            <display description="[${lastModifiedByUserLogin}] ${uiLabelMap.CommonOn} ${lastModifiedDate}" also-hidden="false"/>
        </field>

        <field use-when="&quot;${thruDate}&quot; == &quot;&quot;" name="submitButton" title="${uiLabelMap.CommonUpdate}"><submit button-type="button"/></field>

        <!-- <field name="viewHistoryLink" title="${uiLabelMap.CommonEmptyHeader}" widget-style="buttontext">
            <hyperlink target="ProductPriceHistory" description="${uiLabelMap.ProductHistory}" also-hidden="false">
                <parameter param-name="productId"/>
                <parameter param-name="productPriceTypeId"/>
                <parameter param-name="fromDate"/>
            </hyperlink>
        </field> -->

       <!--  <field use-when="&quot;${thruDate}&quot; == &quot;&quot;" name="deleteLink" title="Delete" widget-style="buttontext">
            <hyperlink target="deleteByProductPrice" description="${uiLabelMap.CommonDelete}" also-hidden="false">
                <parameter param-name="productId"/><parameter param-name="productPriceTypeId"/><parameter param-name="productPricePurposeId"/>
                <parameter param-name="currencyUomId"/><parameter param-name="productStoreGroupId"/><parameter param-name="fromDate"/>
            </hyperlink>
        </field> -->
    </form>
    
    <form name="instituionBillingPeriod" odd-row-style="alternate-row" header-row-style="header-row" type="single" target="createInstConfig"
    	default-table-style="basic-table hover-bar" separate-columns="true">
    	<field name="facilityId" title="Institution"><lookup target-form-name="LookupFacility"></lookup></field>
        <field name="periodTypeId" title="Period Type" >
        	<drop-down>
        		<list-options key-name="periodTypeId" list-name="periodTypes" description="${description}"/>
        	</drop-down>
        </field>
        <field name="fromDate"><date-time/></field>
	    <field name="submitButton" title="${uiLabelMap.CommonUpdate}" widget-style="smallSubmit" ><submit/></field>       
    </form>
    <form name="configCrates" odd-row-style="alternate-row" header-row-style="header-row" type="single" target="updateCrateQtyConfig"
    	default-table-style="basic-table hover-bar" separate-columns="true">
    	<field name="uomId"><hidden value="VLIQ_CRT"/></field>
        <field name="crate" title="CRATE:" widget-style="h3" position="1"><display description="1"/></field>
        <field name="uomIdTo"><hidden value="VLIQ_L"/></field>
        <field name="liters" title="LITERS:" widget-style="h3;" position="2"><text/></field>
	    <field name="submitButton" title="${uiLabelMap.CommonUpdate}" widget-style="smallSubmit" position="3"><submit/></field>       
    </form>
     <form name="FindQuotaListing" odd-row-style="alternate-row" header-row-style="header-row" type="single" target="QuotaListing"
    	default-table-style="basic-table hover-bar" separate-columns="true"> 
    	<field name="hideSearch"><hidden value="N"/></field>
    	<!--  <field  name="custRdisplayDateequestDate" id-name="date" widget-style="h3" title="${uiLabelMap.SupplyDate}"><text size="15" default-value="${supplyDate}" /></field> -->
    	<field name="supplyDate" title="${uiLabelMap.SupplyDate}" id-name="date" widget-style="h3"><text  default-value="${supplyDate}" />
    	</field>
    	<field name="subscriptionTypeId" title="${uiLabelMap.SupplyTime}">
        	<drop-down allow-empty="true">
        		<entity-options description="${description}" entity-name="SubscriptionType" key-field-name="subscriptionTypeId">
        			<entity-constraint name="parentTypeId" operator="equals" value="LMS"/>
        		</entity-options>
        	</drop-down>
        </field>
        <field name="productSubscriptionTypeId" title="${uiLabelMap.productSubscriptionType}">
        	<drop-down allow-empty="true">
        		<entity-options description="${description}" entity-name="Enumeration" key-field-name="enumId">
        			<entity-constraint name="enumTypeId" operator="equals" value="SUB_PROD_TYPE"/>
        		</entity-options>
        	</drop-down>
        </field>
           
        <field name="facilityId" title="Retailer"><lookup target-form-name="LookupFacility"></lookup></field>
        <field name="productId" title="Product"> <lookup target-form-name="LookupProduct"></lookup></field>   
        <field name="routeId" title="Route"><lookup target-form-name="LookupFacility"/></field>
      <!--   <field name="tripId" title="Trip" widget-style="h3">
        	<drop-down allow-empty="true">
        		<entity-options description="${description}" entity-name="Enumeration" key-field-name="enumId">
        			<entity-constraint name="enumTypeId" operator="equals" value="MULTI_TRIP"/>
        		</entity-options>
        	</drop-down>
        </field> -->
       <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit/></field>       
    </form>
    <form name="FindDealerPayments" odd-row-style="alternate-row" header-row-style="header-row" type="single" target="FindDealerPayments"
    	default-table-style="basic-table hover-bar" separate-columns="true"> 
    	<field name="hideSearch"><hidden value="N"/></field>
    	<field name="onlyCurrentDues"><hidden value="false"/></field>     	   	
    	<field name="paymentDate" title="${uiLabelMap.SupplyDate}"><hidden value="${bsh:org.ofbiz.base.util.UtilDateTime.nowDateString(&quot;yyyy-MM-dd&quot;)}"/></field>    	
        <field name="facilityId" title="Dealer / Route" required-field="true"><lookup target-form-name="LookupFacility"/></field>
        <field name="statusId" title="${uiLabelMap.CommonStatus}" position="1">
            <drop-down allow-empty="false">
            	<option key="NOT_PAID" description="Not Paid"/>
            	<option key="PAID" description="Paid"/>                
            </drop-down>
        </field>
       	<field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit/></field>       
    </form>
    
        <form name="returnCrates" odd-row-style="alternate-row" header-row-style="header-row" type="single" target="createReturnCrate"
    	default-table-style="basic-table hover-bar" separate-columns="true"> 
    	<field name="productStoreId"><hidden value="9004"/></field>
    	<field name="routeId" title="Route"><lookup target-form-name="LookupFacility"/></field>
    	<field name="tripId" title="Trip">
    		<drop-down>
    			<list-options key-name="enumId" list-name="prodSubTrips" description="${description}"/>
    		</drop-down>
    	</field>
    	<field name="shipDate" title="Shipment Date"><date-time/></field>
    	<field name="quantity" title="Return Quantity"><text/></field>
    	<field name="productId"><hidden value="CRATE"/></field>     	   	
       	<field name="submitButton" title="${uiLabelMap.CommonSubmit}" widget-style="smallSubmit"><submit/></field>       
    </form>
    <form name="institutionBilling" odd-row-style="alternate-row" header-row-style="header-row" type="single" target="CreateInstitutionBilling"
    	default-table-style="basic-table hover-bar" separate-columns="true"> 
    	<field name="facilityId" title="Retailer"><lookup target-form-name="LookupFacility"/></field>
    	<field name="customTimePeriodId" title="Billing Period"><text/></field>
    	<field name="periodTypeId" title="Period Type"><text/></field>
       	<field name="submitButton" title="${uiLabelMap.CommonSubmit}" widget-style="smallSubmit"><submit/></field>       
    </form>
	<form name="FindAdhocSalesOrder" title="" type="single" target="${targetRequest}" header-row-style="header-row" default-table-style="basic-table">
        
        <field use-when="&quot;${ChannalType}&quot; == &quot;RM_DIRECT_CHANNEL&quot;" name="originFacilityId" title="Booth Code"><text-find/></field>
        <field title="Delivery Date" name="estimatedDeliveryDate"><date-find/></field>
        <field name="orderId"><text-find/></field>
        <field name="orderType"><hidden value="SALES_ORDER"/></field>
        <field name="salesChannelEnumId"><hidden value="${ChannalType}"  /></field>
        <field use-when="&quot;${ChannalType}&quot; == &quot;RM_DIRECT_CHANNEL&quot;" name="productSubscriptionTypeId" title="Supply Type">
        	<drop-down><option key="CASH" description="CASH"/>
       		 <option key="SPECIAL_ORDER" description="SPL ORDER"/></drop-down>
        </field>
        <field name="statusId">
        	<drop-down>
        		<option key="ORDER_APPROVED" description="Approved"/>
        		<option key="ORDER_CANCELLED" description="Cancelled"/>
        	</drop-down>
        	<!-- <drop-down>
        		<entity-options description="${statusCode}" entity-name="StatusItem" key-field-name="statusId" >
        			<entity-constraint name="statusTypeId" operator="equals" value="ORDER_STATUS"/>
        		</entity-options>
        	</drop-down> -->
        </field>
        <field name="noConditionFind"><hidden value="Y"/><!-- if this isn't there then with all fields empty no query will be done --></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    <form name="FindICPShipment" title="" type="single" target="${targetRequest}" header-row-style="header-row" default-table-style="basic-table">
        
        <field title="shipment Date" name="estimatedShipDate"><date-find/></field>
        <field name="shipmentId"><text-find/></field>
        <field name="invoiceId" title="Invoice ID"><text/></field>
        <field name="roleTypeId"><hidden value="BILL_TO_CUSTOMER"/></field>
        <field name="partyIdTo" parameter-name="partyId"><lookup target-form-name="LookupPartyName"/></field> 
        <field name="shipmentTypeId"><hidden value="${shipmentTypeId}"/></field>
        <field name="shipStatusId"><hidden value="GENERATED"/></field>
        <field name="vehicleId" title="Vehicle Number"><text-find/></field>
        <field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit button-type="button"/></field>
    </form>
    
    <form name="listICPNandiniShipments" type="list" list-name="listIt" paginate-target="FindICPNandiniShipment"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
           <!-- filter orderId based on invoiceId -->
            <script	location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/filterInterUnitShipmentInvoices.groovy" />
            <service service-name="performFind" result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="parameters"/>
                <field-map field-name="entityName" value="OrderHeaderAndRolesAndShipment"/>
                <field-map field-name="orderBy" from-field="parameters.sortField" value="-estimatedShipDate"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
            </service>
        </actions>
        <field name="shipmentId" ><display/></field>
        <field name="estimatedShipDate" title="Ship Date"><display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(estimatedShipDate, &quot;dd/MM/yyyy&quot;);}"/></field>
        <field name="vehicleId" title="Vehicle Number"><display/></field>
        <field name="GatePass" widget-style="buttontext" >
            <hyperlink target="nonRouteGatePass.pdf" description="GatePass" target-window="_blank">
               	  <parameter param-name="shipmentId" />
               	  <parameter param-name="screenFlag" /> 
            </hyperlink>
        </field> 
        <field name="buyerInvoice" widget-style="buttontext" id-name = "invoiceSlips">
            <hyperlink target="buyerInvoice.pdf" description="Invoice Slips" target-window="_blank"> 	
               	  <parameter param-name="shipmentId" /> 
            </hyperlink>
        </field>
        <field use-when="${groovy:((security.hasEntityPermission(&quot;ICPSALE_SHIP&quot;, &quot;_CANCEL&quot;, session)))}" name="cancelShipment" widget-style="buttontext">
            <hyperlink target="cancelICPNandiniShipment" description="Cancel Shipment">
	            <parameter param-name="shipmentId"/>
            </hyperlink>
        </field> 
    </form>
    <form name="listICPBellaryShipments" type="list" list-name="listIt" paginate-target="FindICPBellaryShipment"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
             <!-- filter orderId based on invoiceId -->
            <script	location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/filterInterUnitShipmentInvoices.groovy" />
            <service service-name="performFind" result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="parameters"/>
                <field-map field-name="entityName" value="OrderHeaderAndRolesAndShipment"/>
                <field-map field-name="orderBy" from-field="parameters.sortField" value="-estimatedShipDate"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
            </service>
        </actions>
        <field name="shipmentId" ><display/></field>
        <field name="estimatedShipDate" title="Ship Date"><display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(estimatedShipDate, &quot;dd/MM/yyyy&quot;);}"/></field>
        <field name="vehicleId" title="Vehicle Number"><display/></field>
        <field name="GatePass" widget-style="buttontext" >
            <hyperlink target="nonRouteGatePass.pdf" description="GatePass" target-window="_blank">
               	  <parameter param-name="shipmentId" />
               	  <parameter param-name="screenFlag" /> 
            </hyperlink>
        </field> 
        <field name="buyerInvoice" widget-style="buttontext" id-name = "invoiceSlips">
            <hyperlink target="buyerInvoice.pdf" description="Invoice Slips" target-window="_blank"> 	
               	  <parameter param-name="shipmentId" /> 
            </hyperlink>
        </field>
      
        <field use-when="${groovy:((security.hasEntityPermission(&quot;ICPSALE_SHIP&quot;, &quot;_CANCEL&quot;, session)))}" name="cancelShipment" widget-style="buttontext">
            <hyperlink target="cancelICPBellaryShipment" description="Cancel Shipment">
	            <parameter param-name="shipmentId"/>
            </hyperlink>
        </field> 
    </form>
    <form name="listICPAmulShipments" type="list" list-name="listIt" paginate-target="FindICPAmulShipment"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
             <!-- filter orderId based on invoiceId -->
            <script	location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/filterInterUnitShipmentInvoices.groovy" />
            <service service-name="performFind" result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="parameters"/>
                <field-map field-name="entityName" value="OrderHeaderAndRolesAndShipment"/>
                <field-map field-name="orderBy" from-field="parameters.sortField" value="-estimatedShipDate"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
            </service>
        </actions>
        <field name="shipmentId" ><display/></field>
        <field name="estimatedShipDate" title="Ship Date"><display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(estimatedShipDate, &quot;dd/MM/yyyy&quot;);}"/></field>
        <field name="vehicleId" title="Vehicle Number"><display/></field>
        <field name="GatePass" widget-style="buttontext" >
            <hyperlink target="nonRouteGatePass.pdf" description="GatePass" target-window="_blank">
               	  <parameter param-name="shipmentId" />
               	  <parameter param-name="screenFlag" /> 
            </hyperlink>
        </field> 
        <field name="buyerInvoice" widget-style="buttontext" id-name = "invoiceSlips">
            <hyperlink target="buyerInvoice.pdf" description="Invoice Slips" target-window="_blank"> 	
               	  <parameter param-name="shipmentId" /> 
            </hyperlink>
        </field>
      
        <field use-when="${groovy:((security.hasEntityPermission(&quot;ICPSALE_SHIP&quot;, &quot;_CANCEL&quot;, session)))}" name="cancelShipment" widget-style="buttontext">
            <hyperlink target="cancelICPAmulShipment" description="Cancel Shipment">
	            <parameter param-name="shipmentId"/>
            </hyperlink>
        </field> 
    </form>
    
    <form name="listInterUnitShipments" type="list" list-name="listIt" paginate-target="FindStockTranferShipment" 
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
            <!-- filter orderId based on invoiceId -->
            <script	location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/filterInterUnitShipmentInvoices.groovy" />
            <service service-name="performFind" result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="parameters"/>
                <field-map field-name="entityName" value="OrderHeaderAndRolesAndShipment"/>
                <field-map field-name="orderBy" from-field="parameters.sortField" value="-estimatedShipDate"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
            </service>
            
        </actions>
        <field name="shipmentId" ><display/></field>
        <field name="estimatedShipDate" title="Ship Date"><display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(estimatedShipDate, &quot;dd/MM/yyyy&quot;);}"/></field>
        <field name="vehicleId" title="Vehicle Number"><display/></field>
        <field name="GatePass" widget-style="buttontext" >
            <hyperlink target="nonRouteGatePass.pdf" description="GatePass" target-window="_blank">
               	  <parameter param-name="shipmentId" />
               	  <parameter param-name="screenFlag" /> 
            </hyperlink>
        </field> 
        <field name="buyerInvoice" widget-style="buttontext" id-name = "invoiceSlips">
            <hyperlink target="buyerInvoice.pdf" description="Invoice Slips" target-window="_blank"> 	
               	  <parameter param-name="shipmentId" /> 
            </hyperlink>
        </field>
        <field name="taxInvoice" widget-style="buttontext" id-name = "taxInvoice">
            <hyperlink target="taxInvoice.pdf" description="Tax Invoice" target-window="_blank"> 	
               	  <parameter param-name="shipmentId" /> 
            </hyperlink>
        </field>
        <field name="debitNote" title="Debit/Credit Note" widget-style="buttontext" id-name = "DebitNote">
            <hyperlink target="DebitNote" description="Debit/Credit Note" target-window="_blank"> 	
               	  <parameter param-name="shipmentId" /> 
               	  <parameter param-name="reportTypeFlag" value="debitNote"/> 
            </hyperlink>
        </field>
        <field use-when="${groovy:((security.hasEntityPermission(&quot;FGSSALE_SHIP&quot;, &quot;_CANCEL&quot;, session)))}" name="cancelShipment" widget-style="buttontext">
            <hyperlink target="cancelInterUnitShipment" description="Cancel Shipment">
	            <parameter param-name="shipmentId"/>
            </hyperlink>
        </field> 
    </form>
    <form name="listICPTransferShipments" type="list" list-name="listIt" paginate-target="FindICPTranferShipment" 
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
            <service service-name="performFind" result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="parameters"/>
                <field-map field-name="entityName" value="OrderHeaderAndRolesAndShipment"/>
                <field-map field-name="orderBy" from-field="parameters.sortField" value="-estimatedShipDate"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
            </service>
        </actions>
        <field name="shipmentId" ><display/></field>
        <field name="estimatedShipDate" title="Ship Date"><display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(estimatedShipDate, &quot;dd/MM/yyyy&quot;);}"/></field>
        <field name="vehicleId" title="Vehicle Number"><display/></field>
        <field name="GatePass" widget-style="buttontext" >
            <hyperlink target="nonRouteGatePass.pdf" description="GatePass" target-window="_blank">
               	  <parameter param-name="shipmentId" />
               	  <parameter param-name="screenFlag" /> 
            </hyperlink>
        </field> 
        <field name="buyerInvoice" widget-style="buttontext" id-name = "invoiceSlips">
            <hyperlink target="buyerInvoice.pdf" description="Invoice Slips" target-window="_blank"> 	
               	  <parameter param-name="shipmentId" /> 
            </hyperlink>
        </field>
        <field name="taxInvoice" widget-style="buttontext" id-name = "taxInvoice">
            <hyperlink target="taxInvoice.pdf" description="Tax Invoice" target-window="_blank"> 	
               	  <parameter param-name="shipmentId" /> 
            </hyperlink>
        </field>
        <field name="debitNote" title="Debit/Credit Note" widget-style="buttontext" id-name = "DebitNote">
            <hyperlink target="DebitNote" description="Debit/Credit Note" target-window="_blank"> 	
               	  <parameter param-name="shipmentId" /> 
               	  <parameter param-name="reportTypeFlag" value="debitNote"/> 
            </hyperlink>
        </field>
        <field use-when="${groovy:((security.hasEntityPermission(&quot;ICPSALE_SHIP&quot;, &quot;_CANCEL&quot;, session)))}" name="cancelShipment" widget-style="buttontext">
            <hyperlink target="cancelICPTransferShipment" description="Cancel Shipment">
	            <parameter param-name="shipmentId"/>
            </hyperlink>
        </field> 
    </form>
    <form name="listDepotShipments" type="list" list-name="listIt" paginate-target="${targetRequest}" 
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
             <!-- filter orderId based on invoiceId -->
            <script	location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/filterInterUnitShipmentInvoices.groovy" />
            <service service-name="performFind" result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="parameters"/>
                <field-map field-name="entityName" value="OrderHeaderAndRolesAndShipment"/>
                <field-map field-name="orderBy" from-field="parameters.sortField" value="-estimatedShipDate"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
            </service>
        </actions>
        <field name="shipmentId" ><display/></field>
        <field name="estimatedShipDate" title="Ship Date"><display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(estimatedShipDate, &quot;dd/MM/yyyy&quot;);}"/></field>
        <field name="vehicleId" title="Vehicle Number"><display/></field>
        <field name="GatePass" widget-style="buttontext" >
            <hyperlink target="nonRouteGatePass.pdf" description="GatePass" target-window="_blank">
               	  <parameter param-name="shipmentId" /> 
               	  <parameter param-name="screenFlag" />
            </hyperlink>
        </field> 
        <field name="buyerInvoice" widget-style="buttontext" id-name = "invoiceSlips">
            <hyperlink target="buyerInvoice.pdf" description="Invoice Slips" target-window="_blank"> 	
               	  <parameter param-name="shipmentId" /> 
            </hyperlink>
        </field>
        <field name="taxInvoice" widget-style="buttontext" id-name = "taxInvoice">
            <hyperlink target="taxInvoice.pdf" description="Tax Invoice" target-window="_blank"> 	
               	  <parameter param-name="shipmentId" /> 
            </hyperlink>
        </field>
        <field use-when="${groovy:((security.hasEntityPermission(&quot;FGSSALE_SHIP&quot;, &quot;_CANCEL&quot;, session)))}" name="cancelShipment" widget-style="buttontext">
            <hyperlink target="cancelInterUnitShipment" description="Cancel Shipment">
	            <parameter param-name="shipmentId"/>
            </hyperlink>
        </field> 
    </form>
    <form name="listFGSShipments" type="list" list-name="listIt" paginate-target="FindFGSShipment"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
            <service service-name="performFind" result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="parameters"/>
                <field-map field-name="entityName" value="OrderHeaderAndRolesAndShipment"/>
                <field-map field-name="orderBy" from-field="parameters.sortField" value="-estimatedShipDate"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
            </service>
        </actions>
        <field name="shipmentId" ><display/></field>
        <field name="estimatedShipDate" title="Ship Date"><display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(estimatedShipDate, &quot;dd/MM/yyyy&quot;);}"/></field>
        <field name="vehicleId" title="Vehicle Number"><display/></field>
        <field name="GatePass" widget-style="buttontext" >
            <hyperlink target="nonRouteGatePass.pdf" description="GatePass" target-window="_blank">
               	  <parameter param-name="shipmentId" />
               	  <parameter param-name="screenFlag" /> 
            </hyperlink>
        </field> 
        <field name="buyerInvoice" widget-style="buttontext" id-name = "invoiceSlips">
            <hyperlink target="buyerInvoice.pdf" description="Invoice Slips" target-window="_blank"> 	
               	  <parameter param-name="shipmentId" /> 
            </hyperlink>
        </field>
      	<field name="taxInvoice" widget-style="buttontext" id-name = "taxInvoice">
            <hyperlink target="taxInvoice.pdf" description="Tax Invoice" target-window="_blank"> 	
               	  <parameter param-name="shipmentId" /> 
            </hyperlink>
        </field>
        <field use-when="${groovy:((security.hasEntityPermission(&quot;FGSSALE_SHIP&quot;, &quot;_CANCEL&quot;, session)))}" name="cancelShipment" widget-style="buttontext">
            <hyperlink target="cancelFGSShipment" description="Cancel Shipment">
	            <parameter param-name="shipmentId"/>
            </hyperlink>
        </field> 
    </form> 
     <form name="listAdhocSalesOrders" type="list" list-name="listIt" paginate-target="FindAdhocSalesOrder"
        odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar">
        <actions>
            <service service-name="performFind" result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="parameters"/>
                <field-map field-name="entityName" value="OrderHeader"/>
                <field-map field-name="orderBy" from-field="parameters.sortField" value="-estimatedShipDate"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
            </service>
        </actions>
        <row-actions>
            <entity-and entity-name="OrderItemBilling" list="invoices">
                <field-map field-name="orderId"/>
            </entity-and>
            <set field="invoiceId" from-field="invoices[0].invoiceId"/>  
            <set field="invTotal" value="${bsh:org.ofbiz.accounting.invoice.InvoiceWorker.getInvoiceTotal(delegator,invoiceId)}"></set>  
           
              <entity-and entity-name="PaymentApplication" list="paymentApplications">
                <field-map field-name="invoiceId"/>
            </entity-and>
           <set field="paymentApplicationId" from-field="paymentApplications[0].paymentApplicationId"/>
           
           <entity-one entity-name="Invoice" value-field="invoice">
        		<field-map field-name="invoiceId" from-field="invoiceId" />
        	</entity-one>
        	<set field="invStatusId" from-field="invoice.statusId"/>
        </row-actions>
        <field name="originFacilityId" title="Retailer Code"><display/></field>
         <field name="shipmentId" ><hidden></hidden></field>
        <field name="invoiceId" title="Invoice Id" widget-style="buttontext"><hyperlink target="invoiceOverview" target-window="_blank" description="${invoiceId}"> <parameter param-name="invoiceId"/></hyperlink>        </field>
        <field name="invTotal" title="Invoice Amt (Rs)"><display/></field>
        <field name="invStatusId" title="Status Id" ><display-entity key-field-name="statusId" description="${description}" entity-name="StatusItem"/></field>
        <field name="estimatedDeliveryDate" title="Delivery Date"><display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(estimatedDeliveryDate, &quot;dd/MM/yyyy&quot;);}"/></field>
        <field name="createdBy" title="Created By"><display/></field>
        <field name="lastUpdatedStamp" title="Last Update"><display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(lastUpdatedStamp, &quot;dd/MM/yyyy HH:mm:ss&quot;);}" /></field>
        <!--  <field use-when="statusId.equals(&quot;ORDER_APPROVED&quot;)" name="Order" widget-style="buttontext" >
            <hyperlink target="printAdhocOrder" description="Print Order" target-window="_blank">
             <parameter param-name="estimatedDeliveryDate"/>
                <parameter param-name="orderId"/>
                <parameter param-name="statusId"/>
                <parameter param-name="originFacilityId"/>
                  <parameter param-name="shipmentId"/>
            </hyperlink>
        </field> -->
         <field use-when="statusId.equals(&quot;ORDER_APPROVED&quot;)" name="GatePass" widget-style="buttontext" >
            <hyperlink target="AdhocTruckSheetReport.txt" description="GatePass" target-window="_blank">
                 <parameter param-name="shipmentTypeId" from-field="shipmentTypeId"/> 
               	  <parameter param-name="estimatedShipDate" from-field="estimatedDeliveryDate"/>
               	  <parameter param-name="shipmentId" /> 
            </hyperlink>
        </field> 
        <field name="InvoiceSlips" widget-style="buttontext" use-when="&quot;${statusId}&quot;==&quot;ORDER_APPROVED&quot;"  id-name = "invoiceSlips">
            <hyperlink target="Invoice.txt" description="Invoice Slips" target-window="_blank"> 	
                  <parameter param-name="shipmentTypeId" from-field="shipmentTypeId"/> 
               	  <parameter param-name="estimatedShipDate" from-field="estimatedDeliveryDate"/>
               	  <parameter param-name="reportTypeFlag" value="invoiceSlips"/> 
               	   <parameter param-name="shipmentId" /> 
            </hyperlink>
        </field>
        <field use-when="&quot;${statusId}&quot;==&quot;ORDER_APPROVED&quot;" name="buyerInvoice" widget-style="buttontext" id-name = "invoiceSlips">
            <hyperlink target="buyerInvoice.pdf" description="New Invoice Format" target-window="_blank"> 	
                  <parameter param-name="shipmentTypeId" from-field="shipmentTypeId"/> 
               	  <parameter param-name="estimatedShipDate" from-field="estimatedDeliveryDate"/>
               	  <parameter param-name="invoiceId" from-field="invoiceId"/>
               	  <parameter param-name="shipmentId" /> 
            </hyperlink>
        </field>
         <field use-when="statusId.equals(&quot;ORDER_APPROVED&quot;) &amp;&amp; paymentApplicationId==null" name="PayAmount" widget-style="buttontext"  >
            <hyperlink target="createAdhocSalePayment" description="Pay Order" target-window="_blank" >
             <parameter param-name="estimatedDeliveryDate"/>
                <parameter param-name="orderId"/>
                  <parameter param-name="invoiceId"/>
                   <parameter param-name="amount" value="${invTotal}"/>
                <parameter param-name="statusId"/>
                <parameter param-name="facilityId"  from-field="originFacilityId"/>
                  <parameter param-name="shipmentId"/>
            </hyperlink>
        </field> 
       <!--  <field use-when="statusId.equals(&quot;ORDER_APPROVED&quot;)" name="EditOrder" widget-style="buttontext" >
            <hyperlink target="AdhocOrderCorrection" description="Edit Order" target-window="_blank">
             <parameter param-name="estimatedDeliveryDate"/>
                <parameter param-name="orderId"/>
                <parameter param-name="statusId"/>
                <parameter param-name="originFacilityId"/>
                  <parameter param-name="shipmentId"/>
            </hyperlink>
        </field> -->
        <field use-when="statusId.equals(&quot;ORDER_APPROVED&quot;) &amp;&amp; paymentApplicationId==null" name="cancelOrder" widget-style="buttontext">
            <hyperlink target="cancelAdhocSalesOrder" description="Cancel Order">
                <parameter param-name="orderId"/>
                <parameter param-name="statusId"/>
                <parameter param-name="originFacilityId"/>
                 <parameter param-name="shipmentId"/>
                
            </hyperlink>
        </field> 
    </form>
       
    <form name="listAdhocOrdersAlt" type="list" list-name="listIt" paginate-target="findAdhocSalePayment"
        odd-row-style="alternate-row" header-row-style="header-row-2" target="createAdhocSalePaymentAlt" default-table-style="basic-table hover-bar">
        <actions>
            <service service-name="performFind" result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="parameters"/>
                <field-map field-name="entityName" value="OrderHeader"/>
                <field-map field-name="orderBy" from-field="parameters.sortField" value="-lastUpdatedStamp"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
            </service>
        </actions>
        <row-actions>
            <entity-and entity-name="OrderItemBilling" list="invoices">
                <field-map field-name="orderId"/>
            </entity-and>
            <set field="invoiceId" from-field="invoices[0].invoiceId"/>  
            <set field="invTotal" value="${bsh:org.ofbiz.accounting.invoice.InvoiceWorker.getInvoiceTotal(delegator,invoiceId)}"></set>  
              <entity-and entity-name="PaymentApplication" list="paymentApplications">
                <field-map field-name="invoiceId"/>
            </entity-and>
            <set field="paymentApplicationId" from-field="paymentApplications[0].paymentApplicationId"/>
            <set field="paymentIds" from-field="paymentApplications[0].paymentId"/>
            <set field="paymentId" from-field="paymentApplications[0].paymentId"/>
            <set field="paymentStatusId" from-field="paymentApplications[0].statusId"/>
           
           <entity-one entity-name="Invoice" value-field="invoice">
        		<field-map field-name="invoiceId" from-field="invoiceId" />
        	</entity-one>
        	<set field="invStatusId" from-field="invoice.statusId"/>
        </row-actions>
        <field name="originFacilityId" title="Retailer Code"><display></display></field>
        <field name="facilityId"   ><hidden value="${originFacilityId}" /></field>
        <!-- <field name="orderId" title="Order Id"><display/></field> -->
         <field name="shipmentId" ><hidden></hidden></field>
        <field name="invoiceId" title="Invoice Id" widget-style="buttontext"><hyperlink target="invoiceOverview" target-window="_blank" description="${invoiceId}"> <parameter param-name="invoiceId"/></hyperlink>        </field>
        <field name="invTotal" title="Invoice Amt (Rs)"><display/></field>
        <field name="invStatusId" title="Status Id" ><display-entity key-field-name="statusId" description="${description}" entity-name="StatusItem"/></field>
        <field name="estimatedDeliveryDate" title="Delivery Date"><display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(estimatedDeliveryDate, &quot;dd/MM/yyyy&quot;);}"/></field>
        <field name="createdBy" title="Created By"><display/></field>
        <field name="lastUpdatedStamp" title="Last Update"><display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(lastUpdatedStamp, &quot;dd/MM/yyyy HH:mm:ss&quot;);}" /></field>
        <field name="amount" title="Amount"><text  default-value="${invTotal}"></text></field>
       <field name="PayAmount"   use-when="!invStatusId.equals(&quot;INVOICE_PAID&quot;)"  widget-style="buttontext"> 
           <submit button-type="button" />
        </field>
       <!--  <field use-when="statusId.equals(&quot;ORDER_APPROVED&quot;) &amp;&amp; paymentApplicationId==null" name="PayAmount" widget-style="buttontext"  >
            <hyperlink target="createAdhocSalePayment" description="Pay Order" target-window="_blank" >
             <parameter param-name="estimatedDeliveryDate"/>
                <parameter param-name="orderId"/>
                  <parameter param-name="invoiceId"/>
                   <parameter param-name="amount" value="${invTotal}"/>
                <parameter param-name="statusId"/>
                <parameter param-name="facilityId"  from-field="originFacilityId"/>
                  <parameter param-name="shipmentId"/>
            </hyperlink>
        </field>  -->
        <field use-when="invStatusId.equals(&quot;INVOICE_PAID&quot;)" name="Print Receipt" widget-style="buttontext" >
            <hyperlink target="cashReceiptReport.pdf" description="Print Receipt" target-window="_blank">
             <parameter param-name="paymentIds"/>
            </hyperlink>
        </field> 
        
        <!--  <field use-when="statusId.equals(&quot;ORDER_APPROVED&quot;)" name="GatePass" widget-style="buttontext" >
            <hyperlink target="AdhocTruckSheetReport.txt" description="GatePass" target-window="_blank">
                 <parameter param-name="shipmentTypeId" from-field="shipmentTypeId"/> 
               	  <parameter param-name="estimatedShipDate" from-field="estimatedDeliveryDate"/>
               	  <parameter param-name="shipmentId" /> 
            </hyperlink>
        </field>  -->
       <!--  <field use-when="statusId.equals(&quot;ORDER_APPROVED&quot;)" name="EditOrder" widget-style="buttontext" >
            <hyperlink target="AdhocOrderCorrection" description="Edit Order" target-window="_blank">
             <parameter param-name="estimatedDeliveryDate"/>
                <parameter param-name="orderId"/>
                <parameter param-name="statusId"/>
                <parameter param-name="originFacilityId"/>
                  <parameter param-name="shipmentId"/>
            </hyperlink>
        </field> -->
        <field use-when="invStatusId.equals(&quot;INVOICE_PAID&quot;)" name="CancePayment" widget-style="buttontext" >
            <hyperlink target="cancelAdhocSalePayment" description="Cancel Payment" target-window="_blank">
             <parameter param-name="paymentId"/>
            </hyperlink>
        </field> 
    </form>
    <form name="FindInstitutionPayment" odd-row-style="alternate-row" header-row-style="header-row" type="single" target="FindInstitutionPayment"
    	default-table-style="basic-table hover-bar" separate-columns="true"> 
    	<field name="hideSearch"><hidden value="N"/></field>
    	<field name="onlyCurrentDues"><hidden value="false"/></field>
        <field name="facilityId" title="Institution" action="javascript:this.value=this.value.toUpperCase();" event="onblur" required-field="true"><lookup target-form-name="LookupFacility"/></field>
       <!--  <field name="periodTypeId" title="Period Type">
        	<drop-down >
        		<option key="AllTypes" description="All Types"/>
        		<list-options key-name="periodType.periodTypeId" list-name="instPeriodTypeList" description="${periodType.description}" list-entry-name="periodType"/>
        	</drop-down>
        </field> -->
        <field name="statusId" title="${uiLabelMap.CommonStatus}" position="1">
            <drop-down allow-empty="false">
            	<option key="NOT_PAID" description="Not Paid"/>
            	<option key="PAID" description="Paid"/>                
            </drop-down>
        </field>
       	<field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit/></field>       
    </form>
    
    
    <form name="FindPaymentsByMethod" odd-row-style="alternate-row" header-row-style="header-row" type="single" target="${targetValue}"
    	default-table-style="basic-table hover-bar" separate-columns="true"> 
    	<field name="hideSearch"><hidden value="N"/></field>
    	<field name="onlyCurrentDues"><hidden value="true"/></field>
    	<field name="subTabItem"><hidden value="${parameters.subTabItem}"/></field>   	   	
    	<!--<field name="paymentDate" title="${uiLabelMap.SupplyDate}"><hidden value="${bsh:org.ofbiz.base.util.UtilDateTime.nowDateString(&quot;yyyy-MM-dd&quot;)}"/></field>
    	<field name="displayDate" title="${uiLabelMap.SupplyDate}" widget-style="h3"><display default-value="${defaultEffectiveDate}"/></field>       
        -->
        <field name="facilityId" title="${uiLabelMap.BoothRoute}" action="javascript:this.value=this.value.toUpperCase();" event="onblur"><lookup target-form-name="LookupFacility"/></field>
        <field name="paymentMethodTypeId"> <hidden value="${parameters.paymentMethodTypeId}"/></field>
        <field use-when="&quot;${paymentMethodTypeId}&quot;==&quot;CHALLAN_PAYIN&quot;" name="finAccountCode" title="Bank">
        	<drop-down >
        		<option key="AllBanks" description="All Banks"/>
        		<list-options key-name="finAccountEntry.finAccountCode" list-name="accountNameList" description="${finAccountEntry.finAccountName}" list-entry-name="finAccountEntry"/>
        	</drop-down>
        </field>
        <field name="statusId" title="${uiLabelMap.CommonStatus}" position="1">
            <drop-down allow-empty="false">
            	<option key="NOT_PAID" description="Not Paid"/>
            	<option key="PAID" description="Paid"/>                
            </drop-down>
        </field>
       	<field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit/></field>       
    </form>
    <form name="FindChequePayments" odd-row-style="alternate-row" header-row-style="header-row" type="single" target="FindChequeReturns"
    	default-table-style="basic-table hover-bar" separate-columns="true"> 
    	
        <field name="facilityId" title="Retailer" action="javascript:this.value=this.value.toUpperCase();" event="onblur"><lookup target-form-name="LookupFacility"/></field>
        <field name="paymentRefNum" title="Cheque No."> <text/></field>
       	<field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit/></field>       
    </form>
    <form name="ListChequePayments" type="list" list-name="paymentList" target=""  paginate-target="FindChequeReturns"
    		odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar" separate-columns="true">
    	<field name="paymentId"><hidden value="${paymentId}"/></field>
    	<field name="facilityId" title="Retailer"><display-entity entity-name="Facility" key-field-name="facilityId" description="${facilityName} [${facilityId}]"/></field>
    	<field name="paymentDate"><display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(paymentDate, &quot;dd MMM, yyyy&quot;);}"/></field>
    	<field name="amount"><display/></field>
    	<field name="paymentRefNum" title="Cheque No."><display/></field>
    	<field name="issuingAuthority" title="Bank"><display/></field>
        <field name="cancelPayment" title="" widget-style="buttontext">
        	<hyperlink  target-type="plain" description="${uiLabelMap.cancelPayment}"  target="javascript:chequeReturns('${paymentId}', 0);"></hyperlink>
        </field>         	    	
    </form>
    <form name="ListCashPayments" type="list" list-name="boothPaymentsList" target="createPastDuePaymentForBooth"  paginate-target="FindPastBoothPayments"
    		odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar" separate-columns="true">
    	<actions>
    		<entity-condition entity-name="FacilityParty" list="facilityParty" filter-by-date="true">
    			<condition-list>
    				<condition-expr field-name="partyId" value="${userLogin.partyId}"/>
    				<condition-expr field-name="roleTypeId" value="FACILITY_CASHIER"/>
    			</condition-list>
    		</entity-condition>
    		<set field="paymentLocationId" value="${facilityParty[0].facilityId}"/>
    		<set field="defaultPaymentMethodId" value="CASH_${facilityParty[0].facilityId}_PAYIN"/>
    	</actions>
    	<row-actions>    		
    		<set field="supplyDate" value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(org.ofbiz.base.util.UtilDateTime.nowTimestamp(), &quot;yyyy-MM-dd&quot;);}"/>
    		<set field="paymentLocationId" value="${paymentLocationId}"/>
    	</row-actions>    	
    	<field name="supplyDate"><hidden value="${supplyDate}"/></field>
    	<field name="statusId"><hidden value="PAID"/></field>
    	<field name="hideSearch"><hidden value="N"/></field>
    	<field name="useFifo"><hidden value="true"/></field>
    	<field name="paymentLocationId"><hidden value="${paymentLocationId}"/></field>    	 	 	
        <field name="facilityId" title="Retailer"><display-entity entity-name="Facility" key-field-name="facilityId" description="${facilityName} [${facilityId}]"/></field>
        <field name="routeId" title="${uiLabelMap.Route}" sort-field="true"><display description="${routeId}"/></field>
        <field name="paymentMethodTypeDesc" title="PaymentMethod"><display/></field>
        <field name="grandTotal" parameter-name="dueAmount" title="${uiLabelMap.ToDayDueAmount}"><display type="currency" currency="${currencyUomId}" description="${grandTotal}"/></field>
        <field name="totalDueAmount" title="${uiLabelMap.TotalDueAmount}"><display type="currency" currency="${currencyUomId}" description="${totalDue}"/></field> 
        <field name="viewButton" title=" " widget-style="buttontext"><hyperlink  target-type="plain" description="View Details"  target="javascript:showPaymentHistory('${facilityId}');"></hyperlink></field>
       <!--  <field name="paymentMethodTypeId" required-field="true">
    		<drop-down allow-empty="true" no-current-selected-key="${defaultPaymentMethodId}">
         		<entity-options description="${description}" entity-name="PaymentMethodType">
         		</entity-options>
         	</drop-down>
        </field>  
       
       <field name="amount" required-field="true"><text/></field>
        <field name="submitButton" title="${uiLabelMap.makePayment}" widget-style="smallSubmit"><submit/></field>     -->
          <field name="makePayment" title="" widget-style="buttontext">
        <hyperlink  target-type="plain" description="${uiLabelMap.makePayment}"  target="javascript:showPaymentEntryQTip('${facilityId}', 0);"></hyperlink>
        </field>         	    	
    </form>
    <form name="FindBoothPayments" odd-row-style="alternate-row" header-row-style="header-row" type="single" target="FindBoothPayments"
    	default-table-style="basic-table hover-bar" separate-columns="true"> 
    	<field name="hideSearch"><hidden value="N"/></field>
    	<field name="onlyCurrentDues"><hidden value="true"/></field>   	   	
    	<field name="paymentDate" title="${uiLabelMap.SupplyDate}"><hidden value="${bsh:org.ofbiz.base.util.UtilDateTime.nowDateString(&quot;yyyy-MM-dd&quot;)}"/></field>
    	<field name="displayDate" title="${uiLabelMap.SupplyDate}" widget-style="h3"><display default-value="${defaultEffectiveDate}"/></field>       
        <field name="facilityId" title="${uiLabelMap.BoothRoute}"><lookup target-form-name="LookupFacility"/></field>
        <field name="finAccountName">
         	<drop-down allow-empty="true" >
         		<list-options key-name="finAccountName" list-name="accountNameList" description="${finAccountName}"/>
         	</drop-down>
         </field>  
         <field name="paymentMethodTypeId">
         	<drop-down allow-empty="true">
         		<list-options key-name="paymentMethodTypeId" list-name="paymentMethodType" description="${description}"/>
         	</drop-down>
         </field>        
       	<field name="statusId" title="${uiLabelMap.CommonStatus}" position="1">
            <drop-down allow-empty="false">
            	<option key="NOT_PAID" description="Not Paid"/>
            	<option key="PAID" description="Paid"/>                
            </drop-down>
        </field>
       	<field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit/></field>       
    </form>
    <form name="FindPastBoothPayments" odd-row-style="alternate-row" header-row-style="header-row" type="single" target="FindPastBoothPayments"
    	default-table-style="basic-table hover-bar" separate-columns="true"> 
    	<field name="hideSearch"><hidden value="N"/></field>
    	<field name="onlyCurrentDues"><hidden value="false"/></field>     	   	
    	<field name="paymentDate" title="${uiLabelMap.SupplyDate}"><hidden value="${bsh:org.ofbiz.base.util.UtilDateTime.nowDateString(&quot;yyyy-MM-dd&quot;)}"/></field>    	
        <field name="facilityId" title="${uiLabelMap.BoothRouteZone}" required-field="true"><lookup target-form-name="LookupFacility"/></field>
        <field name="finAccountName">
         	<drop-down allow-empty="true" >
         		<list-options key-name="finAccountName" list-name="accountNameList" description="${finAccountName}"/>
         	</drop-down>
        </field>
        <field name="paymentMethodTypeId">
         	<drop-down allow-empty="true">
         		<list-options key-name="paymentMethodTypeId" list-name="paymentMethodType" description="${description}"/>
         	</drop-down>
         </field>        
       	<field name="statusId" title="${uiLabelMap.CommonStatus}" position="1">
            <drop-down allow-empty="false">
            	<option key="NOT_PAID" description="Not Paid"/>
            	<option key="PAID" description="Paid"/>                
            </drop-down>
        </field>
       	<field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit/></field>       
    </form>
     <form name="ListPastBoothPayments" type="list" list-name="boothPaymentsList" target="createPastDuePaymentForBooth"  paginate-target="FindPastBoothPayments"
    		odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar" separate-columns="true">
    	<actions>
    		<entity-condition entity-name="FacilityParty" list="facilityParty" filter-by-date="true">
    			<condition-list>
    				<condition-expr field-name="partyId" value="${userLogin.partyId}"/>
    				<condition-expr field-name="roleTypeId" value="FACILITY_CASHIER"/>
    			</condition-list>
    		</entity-condition>
    		<set field="paymentLocationId" value="${facilityParty[0].facilityId}"/>
    		<set field="defaultPaymentMethodId" value="CASH_${facilityParty[0].facilityId}_PAYIN"/>
    	</actions>
    	<row-actions>    		
    		<set field="supplyDate" value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(org.ofbiz.base.util.UtilDateTime.nowTimestamp(), &quot;yyyy-MM-dd&quot;);}"/>
    		<set field="paymentLocationId" value="${paymentLocationId}"/>
    	</row-actions>    	
    	<field name="supplyDate"><hidden value="${supplyDate}"/></field>
    	<field name="statusId"><hidden value="PAID"/></field>
    	<field name="hideSearch"><hidden value="N"/></field>
    	<field name="useFifo"><hidden value="true"/></field>
    	<field name="paymentLocationId"><hidden value="${paymentLocationId}"/></field>    	 	 	
        <field name="facilityId" title="Retailer"><display-entity entity-name="Facility" key-field-name="facilityId" description="${facilityName} [${facilityId}]"/></field>
        <field name="routeId" title="${uiLabelMap.Route}" sort-field="true"><display description="${routeId}"/></field>
        <field name="paymentMethodTypeDesc" title="PaymentMethod"><display/></field>
        <field name="grandTotal" parameter-name="dueAmount" title="${uiLabelMap.ToDayDueAmount}"><display type="currency" currency="${currencyUomId}" description="${grandTotal}"/></field>
        <field name="totalDueAmount" title="${uiLabelMap.TotalDueAmount}"><display type="currency" currency="${currencyUomId}" description="${totalDue}"/></field> 
        <field name="viewButton" title=" " widget-style="buttontext"><hyperlink  target-type="plain" description="View Details"  target="javascript:showPaymentHistory('${facilityId}');"></hyperlink></field>
       <!--  <field name="paymentMethodTypeId" required-field="true">
    		<drop-down allow-empty="true" no-current-selected-key="${defaultPaymentMethodId}">
         		<entity-options description="${description}" entity-name="PaymentMethodType">
         		</entity-options>
         	</drop-down>
        </field>  
       
       <field name="amount" required-field="true"><text/></field>
        <field name="submitButton" title="${uiLabelMap.makePayment}" widget-style="smallSubmit"><submit/></field>     -->
          <field name="makePayment" title="" widget-style="buttontext">
        <hyperlink  target-type="plain" description="${uiLabelMap.makePayment}"  target="javascript:showPaymentEntryQTip('${facilityId}', 0);"></hyperlink>
        </field>         	    	
    </form>
   <form name="ListPaidBoothPayments"  type="list" list-name="boothPaymentsList"  paginate-target="FindBoothPayments"
    		odd-row-style="alternate-row" header-row-style="header-row-2" default-table-style="basic-table hover-bar" separate-columns="true">    	   	        	
    	<field name="paymentDate" title="Payment Time" sort-field="true"><display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(paymentDate, &quot;dd/MM/yyyy HH:mm:ss&quot;);}"/></field>        
        <field name="facilityId" title="${uiLabelMap.OrderFacilityBooth}" sort-field="true"><display description="${facilityId}"/></field>
        <field name="paymentLocation" title="${uiLabelMap.paymentLocation}" sort-field="true" use-when="&quot;${paymentLocation}&quot;!=&quot;S01&quot;"><display description="${paymentLocation}"/></field>
        <field name="paidAmount" sort-field-style="true"><display description="${amount}" /></field>
        <field name="paymentMethodTypeId" sort-field="true"><display-entity  entity-name="PaymentMethodType" description="${description}"/></field>
        <field name="paymentId" widget-style="buttontext">
        	<hyperlink target="massPrintReceipt" description="Print Receipt" target-window="_blank">
	        	<parameter param-name="paymentId" from-field="paymentId"/>	        	
        	</hyperlink>
        </field>
        <field name="cancelLink" title="${uiLabelMap.CommonCancel}" widget-style="smallSubmit">
            <hyperlink target="cancelPayment" also-hidden="false" description="${uiLabelMap.CommonCancel}" target-type="intra-app">
                <parameter param-name="paymentId" from-field="paymentId"/>
            </hyperlink>
        </field>
    </form>
    <form name="ListFacilityTimePeriod" id="ListFacilityTimePeriod" list-name="generatedPeriods" title="" type="list" paginate-target="facilityCustomTimePeriod"
        odd-row-style="alternate-row" default-table-style="basic-table hover-bar">
    	<row-actions>
    		<entity-condition entity-name="PeriodBilling" list="facilityBillingList">
    			<condition-list combine="and">
                		<condition-expr field-name="statusId" operator="equals" value="GENERATED"/>
                		<condition-expr field-name="customTimePeriodId" operator="equals" value="${customTimePeriodId}"/>
                </condition-list>
                <order-by field-name="facilityId"/>
    		</entity-condition>
    	</row-actions>
        <field name="customTimePeriodId"><hidden/></field>
        <field name="periodTypeId" title="PeriodType"><display-entity key-field-name="periodTypeId" entity-name="PeriodType" description="${description}"/></field>
        <field name="periodName" title="TimePeriod"><display/></field>
        <field name="periodBillingId" title="Institution" id-name="periodBillingId">
            <drop-down allow-empty="false">
                <option key="allInstitutions" description="All-Institutions"/>
                <list-options list-name="facilityBillingList" key-name="periodBillingId" description="${facilityId}"/>
            </drop-down>
        </field>
        <field name="billOfSale" title="Bill of Sale" widget-style="buttontext" id-name="billOfSale" event="onclick" action="javascript:appendBillingParam(this);">
            <hyperlink target="instBillOfSaleReport.pdf" description="Encl 2: Exempt Goods" target-window="_blank" >
                <parameter param-name="customTimePeriodId" from-field="customTimePeriodId"/> 
               	<parameter param-name="periodTypeId" from-field="periodTypeId"/>
               	<parameter param-name="BOS" value="billOfSale"/>
            </hyperlink>
        </field>
         <field name="enclosureOfTaxInvoice" title="Enclosure OF Tax Invoice" widget-style="buttontext" id-name="enclosureOfTaxInvoice" event="onclick" action="javascript:appendBillingParam(this);">
            <hyperlink target="enclosureOfTaxInvoice.pdf" description="Encl 1: Taxable Goods" target-window="_blank" >
                <parameter param-name="customTimePeriodId" from-field="customTimePeriodId"/> 
               	<parameter param-name="periodTypeId" from-field="periodTypeId"/>
            </hyperlink>
        </field>
        <!-- field name="relianceBill" title="Reliance Bill Report" widget-style="buttontext" id-name="relianceBill" event="onclick" action="javascript:appendBillingParam(this);">
            <hyperlink target="relianceBillReport.txt" description="Reliance Bill Report" target-window="_blank" >
                <parameter param-name="customTimePeriodId" from-field="customTimePeriodId"/> 
               	<parameter param-name="periodTypeId" from-field="periodTypeId"/>
            </hyperlink>
        </field-->
        <field name="taxInvoice" title="Tax Invoice" widget-style="buttontext" id-name="taxInvoice" event="onclick" action="javascript:appendBillingParam(this);">
            <hyperlink target="taxInvoiceReport.pdf" description="Tax Invoice Report" target-window="_blank" >
                <parameter param-name="customTimePeriodId" from-field="customTimePeriodId"/> 
               	<parameter param-name="periodTypeId" from-field="periodTypeId"/>
            </hyperlink>
        </field>
        <field name="cancelBilling" widget-style="buttontext" event="onclick" action="javascript:setCancelDomObj(this);" use-when="${groovy:((security.hasEntityPermission(&quot;FACILITY&quot;, &quot;_ADMIN&quot;, session)))}" title="${uiLabelMap.CommonCancel}">
            <hyperlink target-type="plain" target="javascript:showCancelBilling('${customTimePeriodId}', '${periodTypeId}', '${facilityBillingList}');" description="${uiLabelMap.CommonCancel}">
            </hyperlink>
        </field>
    </form>
    <form name="CreateInstBillingPeriodSearchForm" odd-row-style="alternate-row" header-row-style="header-row" type="single" 
    	default-table-style="basic-table hover-bar" separate-columns="true" target="InstBillingPeriodSearch">
    	<field name="hideSearch"><hidden value="Y" /></field>
		<field name="noConditionFind"><hidden value="N"/><!-- if this isn't there then with all fields empty no query will be done --></field>
    	<field name="facilityId" title="Institution"><lookup target-form-name="LookupFacility"></lookup></field>    	
       <field name="periodTypeId" title="Period Type" >
        	<drop-down>
        	    <option key="" description="- Select -"/>
        		<list-options key-name="periodTypeId" list-name="periodTypes" description="${description}"/>
        	</drop-down>
        </field>
       	<field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit/></field>       
    </form>
    <form name="InstBillingPeriodSearchResultForm" type="list" list-name="listIt" odd-row-style="alternate-row" 
      default-entity-name="FacilityCustomBilling" default-table-style="basic-table hover-bar" >
    	<actions>    	
    	   <service service-name="performFind" result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="parameters"/>
                <field-map field-name="entityName" value="FacilityCustomBilling"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
            </service> 
        </actions>
    	<field name="facilityId" title="Institution"><display/></field>    	
        <field name="periodTypeId" title="Period Type" ><display/></field>
        <field name="fromDate" title="${uiLabelMap.CommonFromDate}"><display/></field>
    	<field name="thruDate" title="${uiLabelMap.CommonThruDate}"><display/></field>
    </form>
   
    <form name="FacilityRateSearchForm" odd-row-style="alternate-row" header-row-style="header-row" type="single" 
    	default-table-style="basic-table hover-bar" separate-columns="true" target="FacilityRate">
    	<field name="hideSearch"><hidden value="Y" /></field>
		<field name="noConditionFind"><hidden value="N"/><!-- if this isn't there then with all fields empty no query will be done --></field>
    	<field name="facilityId" title="Retailer Id"><text/></field>    	
        <field name="rateTypeId" title="Rate type Id" >
         <drop-down>
                <entity-options description="${description}" key-field-name="rateTypeId" entity-name="RateType">
                 	<entity-constraint name="rateTypeId" operator="like" value="%_RENT%"/>
                    <entity-order-by field-name="description"/>
                </entity-options>
            </drop-down>
        </field>
       	<field name="submitButton" title="${uiLabelMap.CommonFind}" widget-style="smallSubmit"><submit/></field>       
    </form>
     <form name="FacilityRateSearchResultForm" type="list" list-name="listIt" odd-row-style="alternate-row" 
      default-entity-name="FacilityRate" default-table-style="basic-table hover-bar" >
    	<actions>    	
    	   <service service-name="performFind" result-map="result" result-map-list="listIt">
                <field-map field-name="inputFields" from-field="parameters"/>
                <field-map field-name="entityName" value="FacilityRate"/>
                <field-map field-name="viewIndex" from-field="viewIndex"/>
                <field-map field-name="viewSize" from-field="viewSize"/>
            </service> 
        </actions>
    	<field name="facilityId" title="Retailer Id"><display/></field>    	
        <field name="rateTypeId" title="Rate type" ><display description="${rateTypeId}"></display><!-- <display-entity entity-name="RateType" key-field-name="ratetypeId" description="${description} "/> --></field>
        <field name="supplyTypeEnumId" title="SupplyType"><display/></field>
        <field name="rateAmount" title="Amount"><display/></field>
        <field name="fromDate" title="${uiLabelMap.CommonFromDate}"><display/></field>
    	<field name="thruDate" title="${uiLabelMap.CommonThruDate}"><display/></field>
    </form>
    <form name="createFacilityRate" odd-row-style="alternate-row" header-row-style="header-row" type="single" target="createOrUpdateFacilityRate"
    	default-table-style="basic-table hover-bar" separate-columns="true">
    	<field name="facilityId" title="Retailer Id" required-field="true"><lookup target-form-name="LookupFacility"></lookup></field>
    	
        <field name="rateTypeId" title="Rate type Id">
         <drop-down>
                <entity-options description="${description}" key-field-name="rateTypeId" entity-name="RateType">
               	    <entity-constraint name="rateTypeId" operator="like" value="%_RENT%"/>
                    <entity-order-by field-name="description"/>
                </entity-options>
            </drop-down>
        </field>
        <field name="productId" title="product Id" ><lookup target-form-name="LookupProduct"/></field>
        <field name="supplyTypeEnumId" title="supplyTypeEnumId">
			<drop-down allow-empty="false" no-current-selected-key="N">
				<option key="AM"></option>
			</drop-down>
        </field>
        <field name="rateAmount" title="Amount"><text/></field>
        <field name="productId" title="Product"><hidden value="_NA_"></hidden></field>
        <field name="rateCurrencyUomId" ><hidden value="INR"></hidden></field>
        <field name="fromDate"><date-time/></field>
        <field name="thruDate"><date-time/></field>
	    <field name="submitButton" title="${uiLabelMap.CommonUpdate}" widget-style="smallSubmit" ><submit/></field>       
    </form>
    <form name="ListVehicleStatus" type="list" list-name="vehicleTripStatusList"    paginate-target="VehicleStatus" id="VehicleStatusListId"
    		 header-row-style="header-row-2"  default-table-style="basic-table hover-bar" separate-columns="true" paginate="false" >
         <row-actions>
            <entity-one entity-name="Shipment" value-field="shipment">
        		<field-map field-name="shipmentId" value="${shipmentId}" />
        	</entity-one>
        	<set field="estimatedShipDate" type="Timestamp" from-field="shipment.estimatedShipDate"/>
        	<set field="shipmentId"  from-field="shipment.shipmentId"/>
        </row-actions>
        
        <field name="SupplyDate" title="Supply Date" ><display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(estimatedShipDate, &quot;dd MMMMM, yyyy&quot;);}" /></field>
    	<field name="facilityId" title="${uiLabelMap.Route}" sort-field="true"><display description="${originFacilityId}"/></field>
    	<field name="vehicleId"><display></display></field>  
    	<field name="crateStatus" title="Crates Entered"><display></display></field>  
    	
    	<field name="statusId" title="${uiLabelMap.CommonStatus}">
            <display-entity entity-name="StatusItem" key-field-name="statusId" description="${description}"/>
        </field>
        <field name="dispatchTime" title="DispatchedTime">
            <display></display>
        </field>
         <field name="changedDate" title="createdDate" ><display description="${estimatedStartDate}" /></field>
          <field name="UpdateStatus"  use-when="&quot;${statusId}&quot;!=&quot;VEHICLE_RETURNED&quot;"    widget-style="buttontext">
            <hyperlink target="VehicleStatusChange"  description="Update Status" target-window="_blank">
                <parameter param-name="statusId"  />
                <parameter param-name="facilityId" value="${originFacilityId}"/>
                 <parameter param-name="shipmentId"/>
                 <parameter param-name="vehicleId"/>
            </hyperlink>
        </field>
        <field name="bulkStatusChange"  title="Select"  use-when="&quot;${statusId}&quot;==&quot;VEHICLE_CRATE_RTN&quot;" > <check all-checked="false" > <option key="${shipmentId}" description=" "  ></option></check> </field>
    </form>
    
     <form name="ListVehicleCratesReturn" type="list" list-name="routeVehicleCratesList"  paginate="false"  id="VehicleStatusListId"  
    		 header-row-style="header-row-2"  default-table-style="basic-table hover-bar"  separate-columns="true" target="createReturnCrate"  use-row-submit="true" >
         <row-actions>
             <entity-one entity-name="Shipment" value-field="shipment">
        		<field-map field-name="shipmentId" value="${shipmentId}" />
        	</entity-one>
        	<set field="estimatedShipDate" type="Timestamp" from-field="shipment.estimatedShipDate"/>
        	<set field="shipmentId"  from-field="shipment.shipmentId"/>
        </row-actions>
        <field name="supplyDate" title="Supply Date" ><display description="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(estimatedShipDate, &quot;dd MMMMM, yyyy&quot;);}" /></field>
    	<field name="routeId" title="${uiLabelMap.Route}" sort-field="true"><display description="${facilityId}"/></field>
    	<field name="vehicleId"><display></display></field>  
    	<field name="statusId" title="${uiLabelMap.CommonStatus}">
            <display-entity entity-name="StatusItem" key-field-name="statusId" description="${description}"/>
        </field>
        <field name="dispatchedTime" title="DispatchTime">
            <display></display>
        </field>
        <field name="shipmentId"><hidden/></field>
        <field name="cratesSent" title="Crates Sent"><display></display></field>
        <field name="cansSent" title="Cans Sent"><display></display></field>
        <field name="returnCrQuantity" title="Crates Received" ><text default-value="${cratesReceived}"  size="10"/></field>
        <field name="returnCnQuantity" title="Cans Received"  ><text default-value="${cansReceived}"  size="9"/></field>
        <field name="UpdateCrates"  use-when="&quot;${statusId}&quot;==&quot;VEHICLE_CRATE_RTN&quot; || &quot;${statusId}&quot;==&quot;VEHICLE_DISPACHED&quot;"    widget-style="buttontext"> 
           <submit button-type="button" />
        </field>
         <field name="DispatchVehicle" title="Dispatch" use-when="&quot;${statusId}&quot;==&quot;VEHICLE_OUT&quot;"    widget-style="buttontext">
            <hyperlink target="createReturnCrate"  description="Dispatch" target-window="_blank">
                <parameter param-name="statusIdTo" value="VEHICLE_DISPACHED"  />
                <parameter param-name="facilityId" value="${originFacilityId}"/>
                 <parameter param-name="shipmentId"/>
                 <parameter param-name="vehicleId"/>
                 <parameter param-name="returnCrQuantity" value="0"/>
                 <parameter param-name="returnCnQuantity" value="0"></parameter>
                 <parameter param-name="supplyDate" value="${supplyDate}"></parameter>
            </hyperlink>
        </field>
    </form>
    <form name="ListTimePeriods" type="list" list-name="TimePeriods"
        odd-row-style="alternate-row" default-table-style="basic-table hover-bar">
        <field name="customTimePeriodId" title="custom Time Period Id"><display/></field>
        <field name="periodTypeId">
          <display-entity entity-name="PeriodType"/>
        </field>
        <field name="periodName" title="period Name"><display/></field>
        <field name="fromDate" title="${uiLabelMap.CommonFromDate}"><display/></field>
    	<field name="thruDate" title="${uiLabelMap.CommonThruDate}"><display/></field>
    </form>
     <form name="CreateTimePeriod" type="single" title="Create Time Period" target="createCustomTimePeriod"
        header-row-style="header-row" default-table-style="basic-table">
        <field name="organizationPartyId"><hidden value="Company"/></field>
        <field name="isClosed"><hidden value="N"/></field>
          <field name="periodTypeId" title="Period Type" >
        	  	<drop-down>
        		<list-options key-name="periodTypeId" list-name="periodTypes" description="${description}"/>
        	</drop-down>
        </field>
        <field name="periodName" title="period Name"><text/></field>
        <field name="fromDate" required-field="true"><date-time/></field>
        <field name="thruDate" required-field="true"><date-time/></field>
        <field name="submitButton" title="${uiLabelMap.CommonCreate}"><submit/></field>
    </form>
</forms>