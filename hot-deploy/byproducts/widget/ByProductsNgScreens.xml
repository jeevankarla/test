<?xml version="1.0" encoding="UTF-8"?>
<screens xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="http://ofbiz.apache.org/dtds/widget-screen.xsd">

    <screen name="mainNg">
        <section>
            <actions>
                <set field="headerItem" value="main"/><!-- this highlights the selected menu-item with name "main" -->
            </actions>
            <widgets>
                <decorator-screen name="ByProductsNgCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
	<screen name="FacilityTree">
	
        <section>
            <actions>
                <property-map resource="HumanResUiLabels" map-name="uiLabelMap" global="true"/>               
                <set field="titleProperty" value="ProductFacilityMain"/>
         
                <set field="headerItem" value="facility"/>
                <set field="tabButtonItem" value="main"/>
<!--                <set field="facilityId" from-field="parameters.facilityId"/>-->
<!--                <set field="isTreeRoot" value="Y"/>-->
				<script  
					location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/facilityTreeNetwork.groovy" />                                
            </actions>          
            <widgets>
            <section>
            <condition>
                <if-empty field="parameters.ajaxLookup"/>
            </condition> 
            <widgets>
            	<decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">
                        <section>
                            <widgets>
                                <container style="lefthalf"> 
                                	<screenlet title="${uiLabelMap.FormFieldTitle_company}">    
   										<platform-specific><html><html-template location="component://byproducts/webapp/byproducts/byproducts/facilityTree.ftl"></html-template></html></platform-specific>
									</screenlet>
								</container>
							</widgets>
						</section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
            <fail-widgets>
   				<platform-specific><html><html-template location="component://byproducts/webapp/byproducts/reports/facilityTree.ftl"></html-template></html></platform-specific>
            </fail-widgets>
        </section>         
        </widgets>     
		</section>
    </screen>
    <screen name="ViewFacilityGeoPoint">
        <section>
            <actions>
                <set field="tabButtonItem" value="ViewFacilityGeoPoint"/>
                <set field="titleProperty" value="Location Map"/>
                <set field="facilityId" from-field="parameters.facilityId"/>
                <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/viewFacilityGeoPoint.groovy"/>                         
                <property-map resource="ProductUiLabels" map-name="uiLabelMap"/>
                <set field="title" value="${uiLabelMap.PageTitleFacilityGeoLocation}"/> 
                <set field="parameters.hideSearch" value="${parameters.hideSearch}"></set>
            	<set field="parameters.noConditionFind" value="${parameters.noConditionFind}"></set>                 
            </actions>
            <widgets>
            	<decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">
                        <container>
                            <label style="h1">Location Map</label>
                        </container>
                        <screenlet title="Location Search">
                        	<include-form name="ViewFacilityGeoPointSearch" location="component://byproducts/widget/ByProductsNgForms.xml"/>
                        </screenlet>
                        <include-screen name="geoChart" location="component://common/widget/CommonScreens.xml"/>
                    </decorator-section>
                </decorator-screen>
            </widgets>        
        </section>
    </screen>      
    <screen name="EmployeeSearch">
        <section>
            <actions>
            <set field="tabButtonItem" value="EmployeeSearch"/>
            <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/EmployeeSubsidy.groovy"/>
            </actions>
            <widgets>
                <decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                      <decorator-section name="body">
                      	<section>
                        	<widgets>
                        	<container style="button-bar">
                        	<link target="EmployeeSubsidy" text="Create" style="buttontext"></link>
                        	</container>
                        		<screenlet title="Employee Search">
                        			<include-form name="CreateEmployeeSubsidyForm" location="component://byproducts/widget/EmployeeSubsidyForm.xml"/>
                        		</screenlet>
                        		<screenlet title="Employee Search Result">
	                        		<link target="employeeReport.csv" text="Export As CSV" style="buttontext create">
										<parameter param-name="facilityId" from-field="parameters.facilityId"/>
										<parameter param-name="partyId" from-field="parameters.partyId"/>
										<parameter param-name="unionCode" from-field="parameters.unionCode"/>
					  	        	</link>
                        			<include-form name="EmployeeSearchResultForm" location="component://byproducts/widget/EmployeeSubsidyForm.xml"/>
                        		</screenlet>
                            </widgets>
                    	</section>
                    </decorator-section>                                       
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="InstitutionBillingConfig">
        <section>
            <actions>
            <set field="tabButtonItem" value="InstitutionBillingConfig"/>
            <set field="parameters.hideSearch" value="${parameters.hideSearch}"></set>
            <set field="parameters.noConditionFind" value="${parameters.noConditionFind}"></set> 
            <entity-condition list="periodTypes" entity-name="PeriodType">
            	<condition-expr field-name="periodTypeId" operator="like" value="INST%"/>
            </entity-condition>
            <set field="periodTypes" from-field="periodTypes"/>
            </actions>
            <widgets>
                <decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                      <decorator-section name="body">
                      	<section>
                        	<widgets>
                        		<screenlet title="Create Institution Billing Period ${periodTypes.get()}">
                        			<include-form name="instituionBillingPeriod" location="component://byproducts/widget/ByProductsNgForms.xml"/>
                        		</screenlet>
                            </widgets>
                    	</section>
                    </decorator-section>                                       
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
     <screen name="EmployeeSubsidy">
        <section>
            <actions>
            	<set field="tabButtonItem" value="EmployeeSearch"/>
            </actions>
            <widgets>
                <decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                      <decorator-section name="body">
                      	<section>
                        	<widgets>
                        		 <screenlet title="Employee Subsidy Form">
                        			<include-form name="EmployeeSubsidyForm" location="component://byproducts/widget/EmployeeSubsidyForm.xml"/>
                        		</screenlet>
                            	                   
                            </widgets>
                    	</section>
                    </decorator-section>                                       
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="ReturnCrates">
      <section>
			<actions>
                <set field="titleProperty" value="Crates Return"/>	            
               <set field="tabButtonItem" value="ReturnCrates"/>     
               <property-map resource="ProductUiLabels" map-name="uiLabelMap" global="true"/>
               <property-map resource="AccountingUiLabels" map-name="uiLabelMap" global="true"/>
               <property-map resource="OrderUiLabels" map-name="uiLabelMap" global="true"/>
               <set field="actionUrl" value="ReturnCrates"/>
               <set field="formHeading" value="Find RouteVehicle Crates"/>
                      
                <set field="layoutSettings.javaScripts[]" value="/byproducts/images/date.js" global="true"/>   
                <set field="layoutSettings.javaScripts[]" value="/byproducts/images/autoCompleteFacility.js" global="true"/>   
                 <entity-one value-field="showBoothAutoSuggestConf" entity-name="TenantConfiguration">
               		<field-map field-name="propertyTypeEnumId" value="FACILITY_AUTOSUGGEST"/>
               		<field-map field-name="propertyName" value="showBoothAutoSuggest"/>
               		<select-field field-name="propertyValue"/>
                 </entity-one>
                <set field="showBoothAutoSuggest" value="${showBoothAutoSuggestConf.propertyValue}"/> 
                <set field="defaultEffectiveDateTime" value="${bsh:org.ofbiz.base.util.UtilDateTime.getDayStart(org.ofbiz.base.util.UtilDateTime.nowTimestamp())}"/>
			    <set field="defaultEffectiveDate" 
					value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(defaultEffectiveDateTime, &quot;dd MMMMM, yyyy&quot;);}" />
			   <set field="supplyDate" from-field="parameters.supplyDate"/>
                  <entity-condition entity-name="SubscriptionType" list="subscriptionTypeList" use-cache="true">
                	<condition-list>
                    	<condition-expr field-name="parentTypeId" value="LMS"/>                    	
                    </condition-list>                    
                </entity-condition>
               <set field="enableLmsPmSales" value="${groovy:session.getAttribute(&quot;enableLmsPmSales&quot;)}"/>
                <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/enableBoothAutoComplete.groovy"/>
			   <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/VehicleStatus.groovy" />		
			</actions>
			<widgets>
            	<decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">  
 							<platform-specific><html><html-template location="component://byproducts/webapp/byproducts/facility/vehicleStatusFind.ftl"></html-template></html></platform-specific>
						<screenlet title="List RouteVehicle Crates">				
						<include-form name="ListVehicleCratesReturn" location="component://byproducts/widget/ByProductsNgForms.xml" />
						</screenlet>		
					</decorator-section>	
				</decorator-screen>
			</widgets>
		</section>
    </screen>
    <screen name="CreditInstitutionBilling">
        <section>
            <actions>
            	<set field="tabButtonItem" value="CreditInstitutionBilling"/>
            	<script location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/institutionBillingDetails.groovy"/>
            </actions>
            <widgets>
                <decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                      <decorator-section name="body">
                      	<section>
                        	<widgets>
                        		 <screenlet title="Credit Institution Billing">
                        			<include-form name="institutionBilling" location="component://byproducts/widget/ByProductsNgForms.xml"/>
                        		</screenlet>
                        		<screenlet title="Testing Tabs">
                        			<platform-specific><html><html-template location="component://byproducts/webapp/byproducts/byproducts/testingTabs.ftl"/></html></platform-specific>							  	        					
                        		</screenlet>
                            </widgets>
                    	</section>
                    </decorator-section>                                       
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="CreateEmployee">
        <section>
            <actions>
            <set field="tabButtonItem" value="EmployeeSearch"/>
            </actions>
            <widgets>
                <decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                      <decorator-section name="body">
                      	<section>
                        	<widgets>
                        		<screenlet title="EmployeeSubsidyForm">
                        			<include-form name="EmployeeSubsidyForm" location="component://byproducts/widget/EmployeeSubsidyForm.xml"/>
                        		</screenlet>
                            </widgets>
                    	</section>
                    </decorator-section>                                       
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="TruckSheet">
		<section>
			<actions>
				<set field="titleProperty" value="Delivery Schedule"/> 
				<set field="tabButtonItem" value="TruckSheet" />
				<set field="layoutSettings.javaScripts[]" value="/byproducts/images/appendRoute.js" global="true"/> 
				<set field="tabButtonItem2" value="TruckSheet" />		
				<script location="component://byproducts/webapp/byproducts/WEB-INF/actions/shipmentList.groovy"/>          
				<script	location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/SeperateRoutesList.groovy" />
                 <entity-condition list="lmsShipTypeList" entity-name="ShipmentType">
               		<condition-expr field-name="parentTypeId" operator="equals" value="LMS_SHIPMENT"/>
               </entity-condition>
               <entity-condition entity-name="Enumeration" list="prodSubTrips" use-cache="true">
                	<condition-list>
                    	<condition-expr field-name="enumTypeId" value="MULTI_TRIP"/>
                    </condition-list>
                    <order-by field-name="sequenceId"/>
                </entity-condition>								
			</actions>
			<widgets>
				<decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
					<decorator-section name="body">
						<!-- <include-menu location="component://byproducts/widget/ByProductsMenus.xml" name="DeliveryScheduleTabBar"/> -->
						<section>
							<!-- <condition>
								<or>
									<if-has-permission permission="TRUCKSHEET" action="_ADMIN"/>
									<if-has-permission permission="FACILITY" action="_ADMIN"/>	
								</or>
							</condition> -->
							<widgets>
								<container style="button-bar">
									<platform-specific><html><html-template location="component://byproducts/webapp/byproducts/byproducts/NewDeliverySchedule.ftl"/></html></platform-specific>							  	        					
									<link url-mode="plain" target="javascript:showTruckSheetGenerateForm();" text="Generate Delivery Schedule" style="buttontext create"  link-type="anchor"/>
								</container>
							 	<platform-specific><html><html-template location="component://byproducts/webapp/byproducts/byproducts/trucksheetStatus.ftl"></html-template></html></platform-specific>
								<include-screen name="TruckSheetInternal"/>
							</widgets>
						</section>						
					</decorator-section>	
				</decorator-screen>
			</widgets>
		</section>
	</screen>
  
    <screen name="TruckSheetInternal">
		<section>
			<actions>
			   <property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
			   <property-map resource="ProductUiLabels" map-name="uiLabelMap" global="true"/>
               <property-map resource="AccountingUiLabels" map-name="uiLabelMap" global="true"/>
               <property-map resource="OrderUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="viewIndex" from-field="parameters.VIEW_INDEX" type="Integer" default-value="0"/>
                <set field="viewSize" from-field="parameters.VIEW_SIZE" type="Integer" default-value="20"/> 
                <entity-condition list="listTruckSheets" entity-name="Shipment">
                	<order-by field-name="-estimatedShipDate"/>
                	<order-by field-name="statusId"/>
                </entity-condition>  
				<script location="component://byproducts/webapp/byproducts/WEB-INF/actions/shipmentList.groovy"/>          
				<script	location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/SeperateRoutesList.groovy" />
                 <entity-condition list="lmsShipTypeList" entity-name="ShipmentType">
               		<condition-expr field-name="parentTypeId" operator="equals" value="LMS_SHIPMENT"/>
               </entity-condition>
               <entity-condition entity-name="Enumeration" list="prodSubTrips" use-cache="true">
                	<condition-list>
                    	<condition-expr field-name="enumTypeId" value="MULTI_TRIP"/>
                    </condition-list>
                    <order-by field-name="sequenceId"/>
                </entity-condition>	 

			</actions>
			<widgets>	
				<screenlet title="Trucksheet List">				
					<include-form name="ListTruckSheets" location="component://byproducts/widget/ByProductsNgForms.xml" />
				</screenlet>
			</widgets>
		</section>
	</screen>  
  
	<screen name="MilkDeliveryScheduleReport">
		<section>
			<actions>
				<property-map resource="OrderUiLabels" map-name="uiLabelMap" global="true"/>
				<property-map resource="ProductUiLabels" map-name="uiLabelMap" global="true"/>
				<property-map resource="PartyUiLabels" map-name="uiLabelMap" global="true"/>
				<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
				<property-map resource="KkdmpcuUiLabels" map-name="uiLabelMap" global="true"/>
				<set field="reportTypeFlag" from-field="parameters.reportTypeFlag"/>				
				<script	location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/MilkDeliverySchedule.groovy" />
			</actions>
			<widgets>				
				<platform-specific>
					<xsl-fo>
						<html-template
							location="component://byproducts/webapp/byproducts/reports/MilkDeliverySchedule.fo.ftl" />
					</xsl-fo>
				</platform-specific>					
			</widgets>
		</section>
	</screen>	
		
	<screen name="ConfigChange">
		<section>
			<actions>
               <set field="titleProperty" value="Config"/>	            
               <set field="tabButtonItem" value="config"/>            
               <property-map resource="ProductUiLabels" map-name="uiLabelMap" global="true"/>
               <property-map resource="AccountingUiLabels" map-name="uiLabelMap" global="true"/>
               <property-map resource="OrderUiLabels" map-name="uiLabelMap" global="true"/>
			   <!-- <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/quotaListing.groovy" /> -->	
			   <entity-one value-field="conversionFac" entity-name="UomConversion">
			   		<field-map field-name="uomId" value="VLIQ_CRT"/>
			   		<field-map field-name="uomIdTo" value="VLIQ_L"/>
			   		<select-field field-name="conversionFactor"/>
			   </entity-one>
			   <set field="liters" type="Double" value="${conversionFac.conversionFactor}"/>
			</actions>
			<widgets>
            	<decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">
                    	<container style="lefthalf">
                    		<screenlet title="Crates Configuration" >
								<include-form name="configCrates" location="component://byproducts/widget/ByProductsNgForms.xml" />
							</screenlet>
                    	</container>  							  	
														
					</decorator-section>	
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="FindReturns">
		<section>
			<actions>
               <set field="titleProperty" value="FindReturns"/>	            
               <set field="tabButtonItem" value="Returns"/>
               <set field="tabButtonItem2" value="findReturn"/>            
               <property-map resource="OrderUiLabels" map-name="uiLabelMap" global="true"/>
               <set field="viewIndex" from-field="parameters.VIEW_INDEX" type="Integer"/>
                <set field="viewSize" from-field="parameters.VIEW_SIZE" type="Integer" default-value="20"/>
			</actions>
			<widgets>
            	<decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">
                    	<include-menu location="component://byproducts/widget/ByProductsMenus.xml" name="ReturnSubTabBar"/>
                   		<screenlet title="${uiLabelMap.PageTitleFindReturn}">
                            <container>
                                <link style="buttontext" target="returnHeaderItems" text="${uiLabelMap.OrderCreateNewReturn}"/>
                            </container>
                            <include-form name="FindReturns" location="component://byproducts/widget/ByProductsNgForms.xml"/>
                            
                            
                        </screenlet>
                        <screenlet title="List Returns">
                        	<include-form name="ListReturns" location="component://byproducts/widget/ByProductsNgForms.xml"/>
                        </screenlet>
					</decorator-section>	
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<!-- <screen name="ReturnHeader">
        <section>
            <actions>
                <set field="titleProperty" value="PageTitleReturnHeader"/>
                <set field="headerItem" value="return"/>
                <set field="tabButtonItem" value="Returns"/>
                <set field="tabButtonItem2" value="returnItems"/>
                <set field="returnId" from-field="parameters.returnId"></set>
                <set field="layoutSettings.javaScripts[+0]" value="/ordermgr/images/js/return.js" global="true"/>
                <property-to-field field="defaultCurrencyUomId" resource="general" property="currency.uom.id.default" default="USD"/>
                <script location="component://order/webapp/ordermgr/WEB-INF/actions/return/ReturnHeader.groovy"/>
            </actions>
            <widgets>
                <decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">
                        <include-menu location="component://byproducts/widget/ByProductsMenus.xml" name="ReturnSubTabBar"/>
                        <section>
                        	<widgets>
                            	<include-form name="EditReturn" location="component://byproducts/widget/ByProductsNgForms.xml"/>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen> -->
    <screen name="ReturnItems">
        <section>
            <actions>
                <set field="titleProperty" value="PageTitleReturnItems"/>
                <set field="headerItem" value="return"/>
                <set field="tabButtonItem" value="Returns"/>
                <set field="tabButtonItem2" value="returnItems"/>
                <set field="returnId" from-field="parameters.returnId"/>
                <set field="screenFlag" value="returns"/>
                <entity-one value-field="showBoothAutoSuggestConf" entity-name="TenantConfiguration">
               		<field-map field-name="propertyTypeEnumId" value="FACILITY_AUTOSUGGEST"/>
               		<field-map field-name="propertyName" value="showBoothAutoSuggest"/>
               		<select-field field-name="propertyValue"/>
               </entity-one>
                <set field="showBoothAutoSuggest" value="${showBoothAutoSuggestConf.propertyValue}"/>
               	<set field="defaultEffectiveDateTime" value="${bsh:org.ofbiz.base.util.UtilDateTime.getDayStart(org.ofbiz.base.util.UtilDateTime.nowTimestamp())}"/>
			    <set field="defaultEffectiveDate" 
					value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(defaultEffectiveDateTime, &quot;dd MMMMM, yyyy&quot;);}" />
				<entity-condition entity-name="Enumeration" list="prodSubTrips" use-cache="true">
                	<condition-list>
                    	<condition-expr field-name="enumTypeId" value="MULTI_TRIP"/>
                    </condition-list>
                    <order-by field-name="sequenceId"/>
                </entity-condition>
               <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/getReturnItems.groovy"/>
               <set field="shipDate" 
					value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(shipmentDate, &quot;dd MMMMM, yyyy&quot;);}" />
               <entity-one entity-name="StatusItem" value-field="currentStatus" auto-field-map="false">
                	<field-map field-name="statusId" from-field="returnHeader.statusId"/>
            	</entity-one>
            	<entity-condition list="headerType" entity-name="ReturnHeaderType"/>
            	<entity-one value-field="returnHeaderTypeId" entity-name="ReturnHeaderType" >
            		<field-map field-name="returnHeaderTypeId" />
            	</entity-one>               
              <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/enableBoothAutoComplete.groovy"/>
               <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/newIndentJsons.groovy"/> 
                <!-- <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/getReturnItems.groovy"/> -->
                <set field="layoutSettings.javaScripts[]" value="/byproducts/images/dispatchReconcilAjaxSubmit.js" global="true"/>
            </actions>
            <widgets>
                <decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">
                    	<include-menu location="component://byproducts/widget/ByProductsMenus.xml" name="ReturnSubTabBar"/>
                        <section>
                            <widgets>
                                <platform-specific>
                                	<html><html-template location="component://byproducts/webapp/byproducts/byproducts/returnEntryNew.ftl"/></html>
                                </platform-specific>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
	<screen name="AbsenteeList">
		<section>
			<actions>
               <set field="titleProperty" value="AbsenteeList"/>	            
               <set field="tabButtonItem" value="AbsenteeList"/>
               <set field="subTabButtonItem" value="AbsenteeList"/>            
               <property-map resource="ProductUiLabels" map-name="uiLabelMap" global="true"/>
               <property-map resource="AccountingUiLabels" map-name="uiLabelMap" global="true"/>
               <property-map resource="OrderUiLabels" map-name="uiLabelMap" global="true"/>
              <!--  <entity-condition entity-name="Enumeration" list="prodSubTrips" use-cache="true">
                	<condition-list>
                    	<condition-expr field-name="enumTypeId" value="MULTI_TRIP"/>
                    </condition-list>
                    <order-by field-name="sequenceId"/>
                </entity-condition>
               <set field="layoutSettings.javaScripts[]" value="/byproducts/images/dispatchReconcilAjaxSubmit.js" global="true"/> -->
               <set field="supplyDate" value="${bsh:org.ofbiz.base.util.UtilDateTime.getNextDayStart(org.ofbiz.base.util.UtilDateTime.nowTimestamp())}" type="Timestamp"/>
				<script location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/getAbsenteeOverride.groovy" />
			</actions>
			<widgets>
            	<decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">
                    	<include-menu name="AbsenteeOverrideTabBar"	location="component://byproducts/widget/ByProductsMenus.xml"/>
                   		<section>
                   			<condition>
	               				<or>
	          						<if-has-permission permission="INDENT" action="_ADMIN"/>
	          						<if-has-permission permission="FACILITY" action="_ADMIN"/>	
	                   			</or>
           				 	</condition>
                      		<widgets>
                           		<!-- <label style="h3">Coming Soon ...!</label> -->
                        		        <screenlet title="${uiLabelMap.CommonSearchOptions}">				
									        <include-form name="FindAbsenteeBooths" location="component://byproducts/widget/ByProductsNgForms.xml" />
								        </screenlet>
							  	        <screenlet>				
							  	        	<link target="stopShipList.csv" text="Export As CSV" style="buttontext create" >
							  	        		<parameter param-name="paymentDate" from-field="parameters.paymentDate"/>
												<parameter param-name="hideSearch" from-field="parameters.hideSearch"/>
											</link>		
										    <platform-specific><html><html-template location="component://byproducts/webapp/byproducts/reports/DuesHistory.ftl"/></html></platform-specific>							  	        														
									        <include-form name="ListAbsenteeBooths" location="component://byproducts/widget/ByProductsNgForms.xml" />
								        </screenlet>
								    </widgets> 
						</section>  							  	
					</decorator-section>	
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="AbsenteeOverride">
		<section>
			<actions>
				<set field="titleProperty" value="PageTitleAbsenteeOverride"/>
				<set field="tabButtonItem" value="AbsenteeList" />
				<set field="subTabButtonItem" value="OverrideList" />
				<set field="paymentDate" value="${bsh:org.ofbiz.base.util.UtilDateTime.nowDateString(&quot;yyyy-MM-dd&quot;)}" type="String"/>
				<set field="supplyDate" value="${bsh:org.ofbiz.base.util.UtilDateTime.getNextDayStart(org.ofbiz.base.util.UtilDateTime.nowTimestamp())}" type="Timestamp"/>
				<script location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/getAbsenteeOverride.groovy" />				
			</actions> 
			<widgets>
				<decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
					<decorator-section name="body">
					<include-menu name="AbsenteeOverrideTabBar"	location="component://byproducts/widget/ByProductsMenus.xml"/>
						<section>
							<condition>
								<and>
									<or>
										<if-has-permission permission="CASH" action="_ADMIN"/>
										<if-has-permission permission="FACILITY" action="_ADMIN"/>	
									</or>
									<or>
										<if-empty field="parameters.shipListType"/>
										<if-compare operator="equals"  field="parameters.shipListType" value="absenteeList"/>
									</or>	
								</and>	
							</condition>
							<widgets>
									   <section>
									        <widgets>
									         <screenlet title="Vendor ${uiLabelMap.PaymentSearchResults} :(${invoicesTotalAmount})">				
											        <include-form name="ListAbsenteeOverride" location="component://byproducts/widget/ByProductsNgForms.xml" />
										        </screenlet>
										    </widgets> 
										   </section>
								<!-- 	</widgets>
							<widgets> -->
							   <section>
							        <widgets> 		
								        <screenlet title="${uiLabelMap.CommonSearchOptions}">				
									        <include-form name="FindAbsenteeBooths" location="component://byproducts/widget/ByProductsNgForms.xml" />
								        </screenlet>
							  	        <screenlet>				
							  	        	<link target="stopShipList.csv" text="Export As CSV" style="buttontext create" >
							  	        		<parameter param-name="paymentDate" from-field="parameters.paymentDate"/>
												<parameter param-name="hideSearch" from-field="parameters.hideSearch"/>
											</link>		
										    <platform-specific><html><html-template location="component://byproducts/webapp/byproducts/reports/DuesHistory.ftl"/></html></platform-specific>							  	        														
									        <include-form name="ListAbsenteeBooths" location="component://byproducts/widget/ByProductsNgForms.xml" />
								        </screenlet>
								    </widgets> 
								   </section>
							</widgets>
							<fail-widgets>
								<section>
									<condition>
										<and>
											<or>
												<if-has-permission permission="CASH" action="_ADMIN"/>
												<if-has-permission permission="FACILITY" action="_ADMIN"/>	
											</or>											
											<if-compare operator="equals" field="parameters.shipListType" value="overrideList" />																				
										</and>	
									</condition>
									<actions>
										<set field="subTabButtonItem" value="OverrideList" />
										<set field="tabButtonItem" value="AbsenteeOverride" />
									</actions>
									<widgets>
									   <section>
									        <widgets>
									         <screenlet title="Vendor ${uiLabelMap.PaymentSearchResults} :(${invoicesTotalAmount})">				
											        <include-form name="ListAbsenteeOverride" location="component://byproducts/widget/ByProductsNgForms.xml" />
										        </screenlet>
										    </widgets> 
										   </section>
									</widgets>
								</section>
							</fail-widgets>
						</section>						
					</decorator-section>	
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="GatePassShipment">
		<section>
			<actions>
               <set field="titleProperty" value="GatePassShipment"/>	            
               <set field="tabButtonItem" value="GatePassShipment"/>            
               <property-map resource="ProductUiLabels" map-name="uiLabelMap" global="true"/>
               <property-map resource="AccountingUiLabels" map-name="uiLabelMap" global="true"/>
               <property-map resource="OrderUiLabels" map-name="uiLabelMap" global="true"/>
              <!--  <entity-condition entity-name="Enumeration" list="prodSubTrips" use-cache="true">
                	<condition-list>
                    	<condition-expr field-name="enumTypeId" value="MULTI_TRIP"/>
                    </condition-list>
                    <order-by field-name="sequenceId"/>
                </entity-condition>
               <set field="layoutSettings.javaScripts[]" value="/byproducts/images/dispatchReconcilAjaxSubmit.js" global="true"/> -->
			</actions>
			<widgets>
            	<decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">
                   		<section>
                   			<condition>
	               				<or>
	          						<if-has-permission permission="INDENT" action="_ADMIN"/>
	          						<if-has-permission permission="FACILITY" action="_ADMIN"/>	
	                   			</or>
           				 	</condition>
                      		<widgets>
                           		<label style="h3">Coming Soon ...!</label>                      
                           	</widgets>
                    	</section>  							  	
					</decorator-section>	
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="DispatchReconciliation">
		<section>
			<actions>
               <set field="titleProperty" value="DispatchReconciliation"/>	            
               <set field="tabButtonItem" value="dispatchReconciliation"/>            
               <property-map resource="ProductUiLabels" map-name="uiLabelMap" global="true"/>
               <property-map resource="AccountingUiLabels" map-name="uiLabelMap" global="true"/>
               <property-map resource="OrderUiLabels" map-name="uiLabelMap" global="true"/>
               <set field="screenFlag" value="reconcil"/>
               <entity-condition entity-name="Enumeration" list="prodSubTrips" use-cache="true">
                	<condition-list>
                    	<condition-expr field-name="enumTypeId" value="MULTI_TRIP"/>
                    </condition-list>
                    <order-by field-name="sequenceId"/>
                </entity-condition>
               <set field="layoutSettings.javaScripts[]" value="/byproducts/images/dispatchReconcilAjaxSubmit.js" global="true"/>
			</actions>
			<widgets>
            	<decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">
                   		<section>
                   			<condition>
	               				<or>
	          						<if-has-permission permission="INDENT" action="_ADMIN"/>
	          						<if-has-permission permission="FACILITY" action="_ADMIN"/>	
	                   			</or>
           				 	</condition>
                      		<widgets>
                           		<include-screen name="DispatchReconciliationInner"/>                        
                           	</widgets>
                    	</section>  							  	
					</decorator-section>	
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="DispatchReconciliationInner">
         <section>
            <actions>
               <set field="titleProperty" value="Change Indent MIS"/>	
               <set field="tabButtonItem" value="ChangeIndentInit"/>
               <set field="productSubscriptionTypeId" value="${parameters.productSubscriptionTypeId}"/>
               <set field="subscriptionTypeId" from-field="parameters.subscriptionTypeId"/>
               <entity-one value-field="showBoothAutoSuggestConf" entity-name="TenantConfiguration">
               		<field-map field-name="propertyTypeEnumId" value="FACILITY_AUTOSUGGEST"/>
               		<field-map field-name="propertyName" value="showBoothAutoSuggest"/>
               		<select-field field-name="propertyValue"/>
               </entity-one>
               <set field="showBoothAutoSuggest" value="${showBoothAutoSuggestConf.propertyValue}"/>
               <set field="defaultEffectiveDateTime" value="${bsh:org.ofbiz.base.util.UtilDateTime.getDayStart(org.ofbiz.base.util.UtilDateTime.nowTimestamp())}"/>
			    <set field="defaultEffectiveDate" 
					value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(defaultEffectiveDateTime, &quot;dd MMMMM, yyyy&quot;);}" />               
               <set field="enableLmsPmSales" value="${groovy:session.getAttribute(&quot;enableLmsPmSales&quot;)}"/>
               <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/enableBoothAutoComplete.groovy"/>
               <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/newIndentJsons.groovy"/> 
              <!--  <set field="layoutSettings.javaScripts[]" value="/byproducts/images/dispatchReconcilAjaxSubmit.js" global="true"/>  -->
               <!-- <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/newIndentJsons.groovy"/>
                --><!-- <set field="layoutSettings.javaScripts[]" value="/facility/images/changeIndentAjaxSubmit.js" global="true"/> -->          
            </actions>
            <widgets>	            
               	<section>
               		<condition>
               			<or>
          					<if-has-permission permission="INDENT" action="_ADMIN"/>
          					<if-has-permission permission="FACILITY" action="_ADMIN"/>	
                   		</or>
               		</condition>
                 	<widgets>
          					<platform-specific><html><html-template location="component://byproducts/webapp/byproducts/byproducts/reconcilEntryNew.ftl"/></html></platform-specific>
                     </widgets>
                     <fail-widgets>
						<label style="h3">${uiLabelMap.ProductFacilityViewPermissionError}
						</label>
					</fail-widgets>
             	</section>                  
            </widgets>
        </section>
    </screen>
	
	<screen name="TruckSheetReportTXT">
		<section>
			<actions>
				<property-map resource="OrderUiLabels" map-name="uiLabelMap" global="true"/>
				<property-map resource="ProductUiLabels" map-name="uiLabelMap" global="true"/>
				<property-map resource="PartyUiLabels" map-name="uiLabelMap" global="true"/>
				<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
				<property-map resource="KkdmpcuUiLabels" map-name="uiLabelMap" global="true"/>
				<set field="reportTypeFlag" from-field="parameters.reportTypeFlag"/>
				<set field="logoImageUrl" value="/images/apddcf_logo.gif"/>
				<script	location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/TruckSheetReport.groovy" />
			</actions>
			<widgets>
				<section>
					<condition>
						<if-compare operator="equals" value="abstract" field="reportTypeFlag" />
					</condition>
					<widgets>
						<platform-specific>
							<xsl-fo>
								<html-template
									location="component://byproducts/webapp/byproducts/reports/TruckSheetAbstractReport.fo.ftl" />
							</xsl-fo>
						</platform-specific>
					</widgets>
				</section>
				<section>
					<condition>
						<if-compare operator="equals" value="trucksheet" field="reportTypeFlag" />
					</condition>
					<widgets>
						<platform-specific>
							<xsl-fo>
								<html-template
									location="component://byproducts/webapp/byproducts/reports/GatePassCumDistribution.fo.ftl" />
							</xsl-fo>
						</platform-specific>
					</widgets>
				</section>
				<section>
					<condition>
						<if-compare operator="equals" value="milkDeliverySchedule" field="reportTypeFlag" />
					</condition>
					<widgets>
						<platform-specific>
							<xsl-fo>
								<html-template	location="component://byproducts/webapp/byproducts/reports/MilkDeliverySchedule.fo.ftl" />
							</xsl-fo>
						</platform-specific>
					</widgets>
				</section>
			</widgets>
		</section>
	</screen>
	<screen name="IndentAdjustmentEntryInit">
        <section>
            <actions>
               <set field="titleProperty" value="Product Change"/>	
               <set field="tabButtonItem" value="indentEntryInit"/>
               <set field="tabButtonItem2" value="IndentAdjustment"/>
               <set field="changeFlag" value="IndentAdjustment"/>
               <set field="supplyDate" from-field="parameters.supplyDate"/>
               <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/dateFormatter.groovy"/>  
               <set field="defaultEffectiveDateTime" value="${supDate}" default-value="${bsh:org.ofbiz.base.util.UtilDateTime.getDayStart(org.ofbiz.base.util.UtilDateTime.nowTimestamp())}"/>
    		   <set field="defaultEffectiveDate" 
					value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(defaultEffectiveDateTime, &quot;dd MMMMM, yyyy&quot;);}" />
				<!--<script location="component://byproducts/webapp/byproducts/WEB-INF/actions/recentProductChange.groovy"/>
            --></actions>
            <widgets>
                <decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                      <decorator-section name="body">
                      <!--<include-menu location="component://byproducts/widget/ByProductsMenus.xml" name="ByProductsIndentTabBar"/>
                      	--><section>
                        	<widgets>
                            	<include-screen name="IndentAdjustEntryInitInner"/>                        
                            </widgets>
                    	</section>
                    </decorator-section>                                       
                </decorator-screen>
            </widgets>
        </section>
    </screen>	
	<screen name="IndentAdjustEntryInitInner">
        <section>
            <actions>
               <set field="titleProperty" value="Product Change"/>	
               <set field="tabButtonItem" value="indentEntryInit"/> 
               <set field="tabButtonItem2" value="IndentAdjustment"/>       
                <set field="changeFlag" value="IndentAdjustment"/>         
			   <set field="productSubscriptionTypeId" from-field="parameters.productSubscriptionTypeId"/>
               <set field="subscriptionTypeId" from-field="parameters.subscriptionTypeId"/>
               <set field="effectiveDate" value="${parameters.effectiveDate}"/>
               <entity-condition entity-name="Enumeration" list="prodSubTypes" use-cache="true">
                	<condition-list>
                    	<condition-expr field-name="enumTypeId" value="SUB_BY_PROD_TYPE"/>                    	
                    </condition-list>
                    <order-by field-name="sequenceId"/>
                </entity-condition>
                <entity-condition entity-name="Product" list="productList" use-cache="true">
                </entity-condition>                
                <!--<script location="component://byproducts/webapp/byproducts/WEB-INF/actions/recentProductChange.groovy"/>
                --><entity-condition entity-name="SubscriptionType" list="subscriptionTypeList" use-cache="true">
                	<condition-list>
                    	<condition-expr field-name="parentTypeId" value="LMS"/>                    	
                    </condition-list>                    
                </entity-condition>
            </actions>
            <widgets>	            
               	<section>
               		<!-- <condition>
               			<or>
          					<if-has-permission permission="INDENT" action="_ADMIN"/>
          					<if-has-permission permission="FACILITY" action="_ADMIN"/>	
                   		</or>
               		</condition> -->
                 	<widgets>
          					<platform-specific><html><html-template location="component://byproducts/webapp/byproducts/byproducts/IndentAdjustEntryNew.ftl"/></html></platform-specific>
                     </widgets>
                     <fail-widgets>
						<label style="h3">${uiLabelMap.ProductFacilityViewPermissionError}
						</label>
					</fail-widgets>
             	</section>                  
            </widgets>
        </section>
    </screen>
    <screen name="IndentAdjustEntryNew">
        <section>
            <actions>
               <set field="titleProperty" value="Product Change"/>
               <set field="tabButtonItem" value="indentEntryInit"/>	
               <set field="tabButtonItem2" value="IndentAdjustment"/>        
                <set field="changeFlag" value="IndentAdjustment"/>         
               <set field="productSubscriptionTypeId" from-field="parameters.productSubscriptionTypeId"/>
               <set field="subscriptionTypeId" from-field="parameters.subscriptionTypeId"/>  
               <set field="screenFlag" value="IndentAdjust"/> 
               <set field="productId" from-field="parameters.productId"/>
               <set field="routeId" from-field="parameters.routeId"/>
                <entity-condition entity-name="Enumeration" list="prodSubTypes" use-cache="true">
                    <condition-expr field-name="enumTypeId" value="SUB_BY_PROD_TYPE"/>
                    <order-by field-name="sequenceId"/>
                </entity-condition>
                 <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/IndentAdjustment.groovy"/>
                <!-- <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/recentDSCorrection.groovy"/>   -->
            </actions>
            <widgets>
                <decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                      <decorator-section name="body">
                      <include-menu location="component://byproducts/widget/ByProductsMenus.xml" name="IndentSubTabBar"/>
                        <section>
                    		<condition>
                    			<and>
                    				<!-- <or>
          								<if-has-permission permission="INDENT" action="_ADMIN"/>
          								<if-has-permission permission="FACILITY" action="_ADMIN"/>	
                   					</or> -->
                   					<not><if-empty field="booth"/></not>
                    			</and>
                        		
                    		</condition>
                            	<widgets>
	            						<platform-specific><html><html-template location="component://byproducts/webapp/byproducts/byproducts/IndentAdjustEntryNew.ftl"/></html></platform-specific>
                                </widgets>
                            <fail-widgets>
                                <include-screen name="IndentAdjustEntryInitInner"/>								                           
                            </fail-widgets>
                        </section>
                    </decorator-section>                                       
                </decorator-screen>
            </widgets>
        </section>
    </screen> 
	  <screen name="ChangeIndentInit">
        <section>
            <actions>
               <set field="titleProperty" value="Indent Entry"/>	
               <set field="tabButtonItem" value="${parameters.tabButtonItem}"/>
               <set field="ChangeIndentTitle" from-field="parameters.ChangeIndentTitle"/> 
               <set field="tabButtonItem2" value="${parameters.tabButtonItem2}"/>
               <set field="supplyDate" from-field="parameters.supplyDate"/>
               <set field="screenFlag" from-field="parameters.screenFlag"/>
               <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/dateFormatter.groovy"/>
               <set field="changeFlag" value="newIndent"/>               
                <set field="defaultEffectiveDateTime" value="${supDate}" default-value="${bsh:org.ofbiz.base.util.UtilDateTime.getNextDayStart(org.ofbiz.base.util.UtilDateTime.nowTimestamp())}"/>
			    <set field="defaultEffectiveDate" 
					value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(defaultEffectiveDateTime, &quot;dd MMMMM, yyyy&quot;);}" />
				 <set field="layoutSettings.javaScripts[]" value="/byproducts/images/changeIndentAjaxSubmit.js" global="true"/>  
				<!--  <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/newIndentJsons.groovy"/>   -->                            	    
            </actions>
            <widgets>
               <decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                      <decorator-section name="body">
                      <include-menu location="component://byproducts/widget/ByProductsMenus.xml" name="IndentSubTabBar"/>
                      	<section>
                      		<condition>
		               			<or>
		          					<if-has-permission permission="INDENT" action="_ADMIN"/>
		          					<if-has-permission permission="FACILITY" action="_ADMIN"/>	
		                   		</or>
               				 </condition>
                        	<widgets>
                            	<include-screen name="ChangeIndentInitInner"/>                        
                            </widgets>
                    	</section>
                    </decorator-section>                                       
                </decorator-screen>
            </widgets>
        </section>
    </screen>	
	<screen name="ChangeIndentInitInner">
         <section>
            <actions>
               <set field="titleProperty" value="Change Indent MIS"/>	
               <set field="tabButtonItem" value="${parameters.tabButtonItem}"/>
               <set field="productSubscriptionTypeId" value="${parameters.productSubscriptionTypeId}"/>
               <set field="subscriptionTypeId" from-field="parameters.subscriptionTypeId"/>
               <entity-one value-field="showBoothAutoSuggestConf" entity-name="TenantConfiguration">
               		<field-map field-name="propertyTypeEnumId" value="FACILITY_AUTOSUGGEST"/>
               		<field-map field-name="propertyName" value="showBoothAutoSuggest"/>
               		<select-field field-name="propertyValue"/>
               </entity-one>
               <!-- <set field="screenFlag" value="tempRoute" /> -->
               <set field="showBoothAutoSuggest" value="${showBoothAutoSuggestConf.propertyValue}"/>
               <!-- <set field="defaultEffectiveDateTime" value="${bsh:org.ofbiz.base.util.UtilDateTime.getNextDayStart(org.ofbiz.base.util.UtilDateTime.nowTimestamp())}"/>
			     -->
			   <set field="defaultEffectiveDate" 
					value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(defaultEffectiveDateTime, &quot;dd MMMMM, yyyy&quot;);}" />               
                <entity-condition entity-name="Enumeration" list="prodSubTypes" use-cache="true">
                	<condition-list>
                    	<condition-expr field-name="enumTypeId" value="SUB_PROD_TYPE"/>
                    	<!-- <condition-expr field-name="enumId" operator="not-equals" value="CARD"/> -->
                    </condition-list>
                    <order-by field-name="sequenceId"/>
                </entity-condition>
                <entity-condition entity-name="Enumeration" list="prodSubTrips" use-cache="true">
                	<condition-list>
                    	<condition-expr field-name="enumTypeId" value="MULTI_TRIP"/>
                    </condition-list>
                    <order-by field-name="sequenceId"/>
                </entity-condition>
                <set field="productList" value="${groovy:import org.ofbiz.base.util.*; return in.vasista.vbiz.byproducts.ByProductNetworkServices.getAllLmsAndByProdProducts(dispatcher.getDispatchContext(),UtilMisc.toMap());}" type="List"/>
                <!-- <script location="component://product/webapp/facility/WEB-INF/actions/facility/recentChangeIndents.groovy"/> -->
                <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/newIndentJsons.groovy"/>
                <entity-condition entity-name="SubscriptionType" list="subscriptionTypeList" use-cache="true">
                	<condition-list>
                    	<condition-expr field-name="parentTypeId" value="LMS"/>                    	
                    </condition-list>                    
                </entity-condition>
            
               <set field="enableLmsPmSales" value="${groovy:session.getAttribute(&quot;enableLmsPmSales&quot;)}"/>
               <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/enableBoothAutoComplete.groovy"/> 
               <set field="layoutSettings.javaScripts[]" value="/byproducts/images/changeIndentAjaxSubmit.js" global="true"/>          
               <set field="routeId" from-field="parameters.routeId"/>                       
            </actions>
            <widgets>	            
               	<section>
               		<condition>
               			<or>
          					<if-has-permission permission="INDENT" action="_ADMIN"/>
          					<if-has-permission permission="FACILITY" action="_ADMIN"/>	
                   		</or>
               		</condition>
                 	<widgets>
          					<platform-specific><html><html-template location="component://byproducts/webapp/byproducts/byproducts/indentEntryNew.ftl"/></html></platform-specific>
                     </widgets>
                     <fail-widgets>
						<label style="h3">${uiLabelMap.ProductFacilityViewPermissionError}
						</label>
					</fail-widgets>
             	</section>                  
            </widgets>
        </section>
    </screen>
    
    
	<screen name="FindFacilityQuotaListing">
		<section>
			<actions>
               <set field="titleProperty" value="Indent History"/>	            
               <set field="tabButtonItem" value="QuotaList"/>            
                 <set field="layoutSettings.javaScripts[]" value="/byproducts/images/date.js" global="true"/>         
               <property-map resource="ProductUiLabels" map-name="uiLabelMap" global="true"/>
               <property-map resource="AccountingUiLabels" map-name="uiLabelMap" global="true"/>
               <property-map resource="OrderUiLabels" map-name="uiLabelMap" global="true"/>
			   <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/quotaListing.groovy" />		
			</actions>
			<widgets>
            	<decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">  							  	
						<screenlet title="Indent History">
							<include-form name="FindQuotaListing" location="component://byproducts/widget/ByProductsNgForms.xml" />
								<platform-specific>
	                            	<html><html-template location="component://byproducts/webapp/byproducts/byproducts/byProdQuotaList.ftl"/></html>
	                            </platform-specific>
						</screenlet>								
					</decorator-section>	
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	 <screen name="ChannelWiseSalesChart">
        <section>
            <actions>
                <set field="titleProperty" value="Analytics"/>
                <set field="tabButtonItem" value="analytics"/>
 				<set field="tabButtonItem2" value="channelSalesChart" />                                           
                <set field="headerItem" value="charts"/>
				<!-- <set field="ajaxUrl" value="ProductWiseSalesVolumeTotalsInternal" type="String"/>    -->
				<set field="chartType" value="SalesMix"/>
				<script location="component://byproducts/webapp/byproducts/WEB-INF/actions/ChannelWiseSales.groovy"/>                             
            </actions>            
            <widgets>
            	<decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">     
                        <include-menu location="component://byproducts/widget/ByProductsMenus.xml" name="AnalyticsTabBar"/>                                                        
                        	<platform-specific> 
                            	<html><html-template location="component://byproducts/webapp/byproducts/byproducts/salesMixedTrend.ftl"/></html>
                        	</platform-specific>   
                            <platform-specific> 
                				<html><html-template location="component://byproducts/webapp/byproducts/byproducts/channelWiseSalesCharts.ftl"/></html>
                			</platform-specific>  
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen> 
	 <screen name="ChannelWiseSalesChart">
        <section>
            <actions>
                <set field="titleProperty" value="Analytics"/>
                <set field="tabButtonItem" value="analytics"/>
 				<set field="tabButtonItem2" value="channelSalesChart" />                                           
                <set field="headerItem" value="charts"/>
				<!-- <set field="ajaxUrl" value="ProductWiseSalesVolumeTotalsInternal" type="String"/>    -->
				<set field="chartType" value="SalesMix"/>
				<script location="component://byproducts/webapp/byproducts/WEB-INF/actions/ChannelWiseSales.groovy"/>                             
            </actions>            
            <widgets>
            	<decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">     
                        <include-menu location="component://byproducts/widget/ByProductsMenus.xml" name="AnalyticsTabBar"/>                                                        
                        	<platform-specific> 
                            	<html><html-template location="component://byproducts/webapp/byproducts/byproducts/salesMixedTrend.ftl"/></html>
                        	</platform-specific>   
                            <platform-specific> 
                				<html><html-template location="component://byproducts/webapp/byproducts/byproducts/channelWiseSalesCharts.ftl"/></html>
                			</platform-specific>  
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>     
    
    
	 <screen name="ChannelWiseSalesChartNew">
        <section>
            <actions>
                <set field="titleProperty" value="Analytics"/>
                <set field="tabButtonItem" value="analytics"/>
 				<set field="tabButtonItem2" value="channelSalesChart" />
 				<entity-condition list="categoryTypeList" entity-name="Enumeration" use-cache="true">
                	<condition-list combine="or">
               		 	<condition-expr field-name="enumId" operator="equals" value="SHP_RTLR"/>
               			<condition-expr field-name="enumId" operator="equals" value="CR_INST"/>   
               			<condition-expr field-name="enumId" operator="equals" value="SCT_RTLR"/>  
               		</condition-list>
         		</entity-condition>		                                           
                <set field="headerItem" value="charts"/>
				<set field="ajaxUrl" value="ChannelWiseSalesChartInternal" type="String"/>
            </actions>            
            <widgets>
            	<decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">     
                        <include-menu location="component://byproducts/widget/ByProductsMenus.xml" name="AnalyticsTabBar"/>                                                        
                        	<platform-specific> 
                            	<html><html-template location="component://byproducts/webapp/byproducts/byproducts/salesMixedTrend.ftl"/></html>
                        	</platform-specific>   
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>   
    
	 <screen name="ChannelWiseSalesChartNewInternal">
        <section>
            <actions>
				<script location="component://byproducts/webapp/byproducts/WEB-INF/actions/ChannelWiseSales.groovy"/>  
				<set field="chartType" value="SalesMix"/>                           
            </actions>            
            <widgets>
                        	<platform-specific> 
                            	<html><html-template location="component://byproducts/webapp/byproducts/byproducts/channelWiseSalesCharts.ftl"/></html>
                        	</platform-specific>   
            </widgets>
        </section>
    </screen>        
    
     <screen name="DailySalesRevenueTrend">
        <section>
            <actions>
                <set field="titleProperty" value="Analytics"/>
                <set field="tabButtonItem" value="analytics"/>  
 		<set field="tabButtonItem2" value="salesRevenueTrend" />                                                                                    
                <set field="headerItem" value="charts"/>
                <set field="dailySalesRevenueTrend" value="true"></set>
               <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/ChannelWiseSales.groovy"/>                                                 
            </actions>            
            <widgets>
            	<decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">
                   	 <include-menu location="component://byproducts/widget/ByProductsMenus.xml" name="AnalyticsTabBar"/>
                        <container>
                        	<!-- <platform-specific> 
                            	<html><html-template location="component://byproducts/webapp/byproducts/byproducts/analyticsRevenueDateSelection.ftl"/></html>
                        	</platform-specific> --> 
                        	<platform-specific> 
                            	<html><html-template location="component://byproducts/webapp/byproducts/byproducts/daySalesRevenueGraph.ftl"/></html>
                        	</platform-specific>                        
                        </container>                      
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="ShopeeComparison">
        <section>
            <actions>
                <set field="titleProperty" value="Analytics"/>
                <set field="tabButtonItem" value="analytics"/>  
 				<set field="tabButtonItem2" value="ShopeeDespatchChart" />   
 				<set field="reportTarget" value="ShopeeComparison"/>                                                                               
                <set field="headerItem" value="charts"/>
                <set field="parlourComparison" value="true"></set>
               <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/parlourComparison.groovy"/>                                                 
            </actions>            
            <widgets>
            	<decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">
                   	 <include-menu location="component://byproducts/widget/ByProductsMenus.xml" name="AnalyticsTabBar"/>
                        <container>
                        	<platform-specific> 
                            	<html><html-template location="component://byproducts/webapp/byproducts/byproducts/parlourComparisonSelection.ftl"/></html>
                        	</platform-specific>                         
                        	<platform-specific> 
                            	<html><html-template location="component://byproducts/webapp/byproducts/byproducts/parlourComparison.ftl"/></html>
                        	</platform-specific>                        
                        </container>                      
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
     <screen name="RouteComparison">
        <section>
            <actions>
                <set field="titleProperty" value="Analytics"/>
                <set field="tabButtonItem" value="analytics"/>  
 				<set field="tabButtonItem2" value="RouteComparison" />   
                <set field="parlourComparison" value="true"></set>
                <set field="reportTarget" value="RouteComparison"/>
               <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/routeComparison.groovy"/>                                                 
            </actions>            
            <widgets>
            	<decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">
                   	 <include-menu location="component://byproducts/widget/ByProductsMenus.xml" name="AnalyticsTabBar"/>
                        <container>
                        	<platform-specific> 
                            	<html><html-template location="component://byproducts/webapp/byproducts/byproducts/parlourComparisonSelection.ftl"/></html>
                        	</platform-specific>                         
                        	<platform-specific> 
                            	<html><html-template location="component://byproducts/webapp/byproducts/byproducts/parlourComparison.ftl"/></html>
                        	</platform-specific>                        
                        </container>                      
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="FieldStaffComparison">
        <section>
            <actions>
                <set field="titleProperty" value="Analytics"/>
                <set field="tabButtonItem" value="analytics"/>  
 				<set field="tabButtonItem2" value="FieldStaffComparison" />   
 				                                                                                
                <set field="headerItem" value="charts"/>
                <set field="parlourComparison" value="true"></set>
               <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/FieldStaffComparison.groovy"/>                                                 
            </actions>            
            <widgets>
            	<decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">
                   	 <include-menu location="component://byproducts/widget/ByProductsMenus.xml" name="AnalyticsTabBar"/>
                   	     <!-- <label text="Coming Soon....." ></label> -->
                        <container>
                        	<platform-specific> 
                            	<html><html-template location="component://byproducts/webapp/byproducts/reports/fieldStaffComparisonSelection.ftl"/></html>
                        	</platform-specific>                         
                        	<platform-specific> 
                            	<html><html-template location="component://byproducts/webapp/byproducts/reports/fieldStaffComparison.ftl"/></html>
                        	</platform-specific>                        
                        </container>                
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="LMSChartsDayCashReceivables">
        <section>
            <actions>
                <set field="titleProperty" value="Analytics"/>
                <set field="tabButtonItem" value="analytics"/>
 				<set field="tabButtonItem2" value="LMSChartsDayCashReceivables" />                                           
                <set field="headerItem" value="charts"/>
				<set field="ajaxUrl" value="LMSChartsDayCashReceivablesInternal" type="String"/>                                
            </actions>            
            <widgets>
            	<decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">     
                        <include-menu location="component://byproducts/widget/ByProductsMenus.xml" name="AnalyticsTabBar"/>                                                        
                        	<platform-specific> 
                            	<html><html-template location="component://order/webapp/ordermgr/order/dayTotalsDateSelection.ftl"/></html>
                        	</platform-specific>             
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>  
    <screen name="LMSChartsDayCashReceivablesInternal">
        <section>      
    		<actions>
                <script location="component://order/webapp/ordermgr/WEB-INF/actions/reports/CashReceivablesChart.groovy"/>                                              
    		</actions>          
            <widgets>
            	<platform-specific> 
                	<html><html-template location="component://order/webapp/ordermgr/order/CashReceivablesChart.ftl"/></html>
                </platform-specific>                 
            </widgets>
        </section>
    </screen>
   
    <screen name="DSCorrectionEntryInit">
    	<section>
            <actions>
               <set field="titleProperty" value="Trucksheet Correction"/>	
               <set field="tabButtonItem" value="DSCorrectionEntryInit"/>
               <set field="ChangeIndentTitle" from-field="parameters.ChangeIndentTitle"/> 
               <set field="supplyDate" from-field="parameters.supplyDate"/>
               <set field="screenFlag" from-field="parameters.screenFlag"/>
               <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/dateFormatter.groovy"/>
               <set field="changeFlag" value="newIndent"/>               
                <set field="defaultEffectiveDateTime" value="${supDate}" default-value="${bsh:org.ofbiz.base.util.UtilDateTime.getDayStart(org.ofbiz.base.util.UtilDateTime.nowTimestamp())}"/>
			    <set field="defaultEffectiveDate" 
					value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(defaultEffectiveDateTime, &quot;dd MMMMM, yyyy&quot;);}" />
				<set field="layoutSettings.javaScripts[]" value="/byproducts/images/changeIndentAjaxSubmit.js" global="true"/>  
				<!--  <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/newIndentJsons.groovy"/>   -->                            	    
            </actions>
            <widgets>
               <decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                      <decorator-section name="body">
                      <section>
                      	<condition>
                      		<if-compare operator="not-equals" value="DSCorrection" field="screenFlag"/>
                      	</condition>
                      	<widgets>
                      		<include-menu location="component://byproducts/widget/ByProductsMenus.xml" name="IndentSubTabBar"/>	
                      	</widgets>
                      </section>
                      	<section>
                      		<condition>
		               			<or>
		          					<if-has-permission permission="INDENT" action="_ADMIN"/>
		          					<if-has-permission permission="FACILITY" action="_ADMIN"/>	
		                   		</or>
               				 </condition>
                        	<widgets>
                            	<include-screen name="ChangeIndentInitInner"/>                        
                            </widgets>
                    	</section>
                    </decorator-section>                                       
                </decorator-screen>
            </widgets>
        </section>
    </screen>	
    <screen name="FindDealerPayments">
		<section>
			<actions>
				<set field="titleProperty" value="pageTitleFindPayments" />
				<set field="tabButtonItem" value="PastPayments" />
				<set field="paymentDate" value="${bsh:org.ofbiz.base.util.UtilDateTime.nowDateString(&quot;yyyy-MM-dd&quot;)}" type="String"/>
			    <set field="defaultEffectiveDate" 
					value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(org.ofbiz.base.util.UtilDateTime.nowTimestamp(), &quot;dd MMMMM, yyyy&quot;);}" /> 				
				<script
					location="component://byproducts/webapp/byproducts/WEB-INF/actions/getDealerPayments.groovy" />
				<entity-condition list="paymentMethodList" entity-name="PaymentMethodType">
					<condition-list combine="or">
                		<condition-expr field-name="paymentMethodTypeId" operator="equals" value="CHEQUE_PAYIN"/>
                		<condition-expr field-name="paymentMethodTypeId" operator="equals" value="CASH_PAYIN"/>
                	</condition-list>
                	<select-field field-name="paymentMethodTypeId"/>
                	<select-field field-name="description"/>
                 	<order-by field-name="-description"/>
           		</entity-condition>	
			</actions>
			<widgets>
				<section>					
					<widgets>
						<decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
							<decorator-section name="body">
								<section>
									<condition>
										<and>
											<or>
												<if-has-permission permission="CASH" action="_ADMIN"/>
												<if-has-permission permission="FACILITY" action="_ADMIN"/>	
											</or>
											<or>
												<if-empty field="statusId"/>
												<if-compare operator="equals" value="NOT_PAID" field="statusId"/>
											</or>																
										</and>
									</condition>
									<widgets>							  
									   <section>
									        <widgets> 		
										        <screenlet title="Find Dues Payments">
												        	<platform-specific><html><html-template location="component://byproducts/webapp/byproducts/reports/PaymentCheckList.ftl"/></html></platform-specific>
												        	<include-form name="FindDealerPayments" location="component://byproducts/widget/ByProductsNgForms.xml" />
												        </screenlet>
												<screenlet title="Total ${uiLabelMap.PaymentSearchResults} :(${invoicesTotalDueAmount})">				
									  	        	<link target="boothPayments.csv" text="Export As CSV" style="buttontext create">
									  	        		<parameter param-name="paymentDate" from-field="parameters.paymentDate"/>
														<parameter param-name="hideSearch" from-field="parameters.hideSearch"/>
														<parameter param-name="facilityId" from-field="parameters.facilityId"/>
														<parameter param-name="onlyCurrentDues" value="false"/>
														<parameter param-name="paymentMethodTypeId" from-field="parameters.paymentMethodTypeId"/>
														<parameter param-name="statusId" from-field="parameters.statusId"/>	
									  	        	</link>	
												    <platform-specific><html><html-template location="component://byproducts/webapp/byproducts/reports/DuesHistory.ftl"/></html></platform-specific>
												  						  	        		
									  	        	<platform-specific>
                            							<html><html-template location="component://byproducts/webapp/byproducts/byproducts/ListPayments.ftl"/></html>
                        							</platform-specific>
										        </screenlet>
										    </widgets> 
										   </section>
									</widgets>
									<fail-widgets>
										<section>
											<condition>
												<and>
													<or>
														<if-has-permission permission="CASH" action="_ADMIN"/>
														<if-has-permission permission="FACILITY" action="_ADMIN"/>	
													</or>
													<if-compare operator="equals" value="PAID" field="statusId"/>
												</and>
											</condition>
											<widgets>															  	
										        <screenlet title="Dues Payments">
												        	<platform-specific><html><html-template location="component://byproducts/webapp/byproducts/reports/PaymentCheckList.ftl"/></html></platform-specific>
												        	<include-form name="FindPastBoothPayments" location="component://product/widget/facility/FacilityForms.xml" />
												        </screenlet>
												<screenlet title="Vendor ${uiLabelMap.PaymentSearchResults} :(${invoicesTotalAmount})">
									  	       		<link target="boothPayments.csv" text="Export As CSV" style="buttontext create">
									  	        		<parameter param-name="paymentDate" from-field="parameters.paymentDate"/>
														<parameter param-name="hideSearch" from-field="parameters.hideSearch"/>
														<parameter param-name="facilityId" from-field="parameters.facilityId"/>
														<parameter param-name="paymentMethodTypeId" from-field="parameters.paymentMethodTypeId"/>
														<parameter param-name="statusId" from-field="parameters.statusId"/>												
									  	        	</link>	
									  	        	<include-form name="ListPaidBoothPayments" location="component://product/widget/facility/FacilityForms.xml" />
										        </screenlet>								    
											</widgets>
										</section>
									</fail-widgets>
								</section>						
							</decorator-section>	
						</decorator-screen>
					</widgets>
				</section>
			</widgets>
		</section>
	</screen>
	<screen name="FindByProduct">
        <section>
        	<actions>
                <set field="titleProperty" value="Prouducts"/>
                <set field="tabButtonItem" value="Product"/>
 				<set field="productTabButtonItem" value="FindProduct" />                                           
                <set field="headerItem" value="byProductsOrderEntry"/>
                <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/ByProductsList.groovy"/>
            </actions>
            <widgets>
                <decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">
                    	<!-- <include-menu name="ProductSubTabBar" location="component://byproducts/widget/ByProductsMenus.xml"/> -->
                        <section>
                            <condition>
                            	<or>
                            		<if-service-permission service-name="acctgAgreementPermissionCheck" main-action="VIEW"/>
                            		<if-has-permission permission="CATALOG" action="_VIEW"/>
                            	</or>
                            </condition>
                            <widgets>
                                <decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
                                	<decorator-section name="menu-bar">
                                    	<section>
                                    		<widgets>
                                               <container style="button-bar">
                                                  <link target="EditByProduct" text="New Product" style="buttontext">
                                                  	 <parameter param-name="showEditProduct" value="true"/>
                                                  </link>
                                                  <!-- <link target="boothMaster.csv" text="Export As CSV" style="buttontext create" /> -->		
                                               </container>
                                            </widgets>
                                    	</section>
                                    </decorator-section>
                                    <decorator-section name="search-options">
                                        <include-form name="FindByProduct" location="component://byproducts/widget/ByProductsNgForms.xml"/>
                                    </decorator-section>
                                    <decorator-section name="search-results">
                                        <include-form name="ListByProducts" location="component://byproducts/widget/ByProductsNgForms.xml"/>
                                    </decorator-section>
                                </decorator-screen>
                            </widgets>
                            <fail-widgets>
                                <label style="h3">${uiLabelMap.AccountingViewPermissionError}</label>
                            </fail-widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
         </section>
    </screen>

	<screen name="EditByProduct">
        <section>
            <actions>
                <set field="titleProperty" value="Facilities"/>
                <set field="tabButtonItem" value="Product"/>
 				<!-- <set field="productTabButtonItem" value="EditProduct" /> -->
 				<set field="productTabButtonItem" value="EditProduct" />
 				<set field="productEditTabButtonItem" value="EditProductDetails" />                                           
                <set field="headerItem" value="byProductsOrderEntry"/>

                <set field="productId" from-field="parameters.productId"/>
                <entity-one entity-name="Product" value-field="product"/>
                <set field="parameters.bypassIfNoProduct" value="true"/>
                <set field="layoutSettings.javaScripts[]" value="/facility/images/autofillProdName.js" global="true"/>
            </actions>
            <widgets>
                <decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">
                    	<include-menu name="ProductSubTabBar" location="component://byproducts/widget/ByProductsMenus.xml"/>
                    	<include-menu name="prodEditSubTabBar" location="component://byproducts/widget/ByProductsMenus.xml"/>
                        <screenlet title="${uiLabelMap.PageTitleEditProduct}">
                            <include-form name="EditByProduct" location="component://byproducts/widget/ByProductsNgForms.xml"/>
                        </screenlet>
                        <section>
                            <condition>
                                <not><if-empty field="product"/></not>
                            </condition>
                            <widgets>
                                <section>
                                    <condition>
                                        <if-compare field="product.isVirtual" operator="equals" type="String" value="Y"/>
                                    </condition>
                                    <widgets>
                                        <screenlet title="${uiLabelMap.ProductUpdateProductVariants}">
                                            <include-form name="UpdateProductVariants" location="component://product/widget/catalog/ProductForms.xml"/>
                                        </screenlet>
                                    </widgets>
                                </section>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="EditByProductPrices">
        <section>
            <actions>
            	<set field="titleProperty" value="Facilities"/>
                <set field="tabButtonItem" value="Product"/>
 				<!-- <set field="productTabButtonItem" value="EditProduct" /> -->
 				<set field="productTabButtonItem" value="EditProduct" />
 				<set field="productEditTabButtonItem" value="EditProductPrices" />                                           
                <set field="headerItem" value="byProductsOrderEntry"/>
                
                <set field="productId" from-field="parameters.productId"/>
                <entity-one entity-name="Product" value-field="product"/>
                <property-to-field field="defaultCurrencyUomId" resource="general" property="currency.uom.id.default" default="USD"/>
                <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/productPricesList.groovy"/>
            </actions>
            <widgets>
                <decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">
                    	<include-menu name="ProductSubTabBar" location="component://byproducts/widget/ByProductsMenus.xml"/>
                    	<include-menu name="prodEditSubTabBar" location="component://byproducts/widget/ByProductsMenus.xml"/>
                    	<!-- <container style="button-bar">
							<platform-specific><html><html-template location="component://byproducts/webapp/byproducts/byproducts/NewPrice.ftl"/></html></platform-specific>							  	        					
							<link url-mode="plain" target="javascript:showNewPriceForm('${productId}');" text="Create New Price" style="buttontext create"/>
						</container> -->
                    	<!-- <container>                 
	                        <screenlet title="${uiLabelMap.PageTitleAddProductPrices}">
	                            <label style="h3" text="${uiLabelMap.ProductPricesWarning}"/>
	                            <include-form name="AddProductPrice" location="component://byproducts/widget/ByProductsForms.xml"/>
	                        </screenlet>
                        </container> -->
                        <screenlet title="Edit Prices for Product: [${product.productName}]">
                            <include-form name="UpdateByProductPrice" location="component://byproducts/widget/ByProductsNgForms.xml"/>
                        </screenlet>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="EditByProductCategories">
        <section>
            <actions>
            	<set field="titleProperty" value="Facilities"/>
                <set field="tabButtonItem" value="Product"/>
 				<!-- <set field="productTabButtonItem" value="EditProduct" /> -->
 				<set field="productTabButtonItem" value="EditProduct" />
 				<set field="productEditTabButtonItem" value="EditProductCategories" />                                           
                <set field="headerItem" value="byProductsOrderEntry"/>
                
                <set field="productId" from-field="parameters.productId"/>
                <entity-one entity-name="Product" value-field="product"/>
               <entity-condition entity-name="ProductCategoryAndMember" list="productCategoryMembers">
                    <condition-expr field-name="productId" from-field="productId"/>
                    <order-by field-name="sequenceNum"/>
                    <order-by field-name="productCategoryId"/>
                </entity-condition>
                <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/productCategoriesList.groovy"/>
            </actions>
            <widgets>
                <decorator-screen name="ByProductsCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">
                    	<include-menu name="ProductSubTabBar" location="component://byproducts/widget/ByProductsMenus.xml"/>
                    	<include-menu name="prodEditSubTabBar" location="component://byproducts/widget/ByProductsMenus.xml"/>
                    	<screenlet title="${uiLabelMap.PageTitleAddProductCategories}">
                            <include-form name="AddProductCategoryMember" location="component://byproducts/widget/ByProductsForms.xml"/>
                        </screenlet>
                    	<screenlet title="${uiLabelMap.PageTitleEditProductCategories}">
                            <include-form name="UpdateProductCategoryMember" location="component://byproducts/widget/ByProductsForms.xml"/>
                        </screenlet>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
	<screen name="InvoiceTXT">
            <section>
                <actions>
                   <property-map resource="AccountingUiLabels" map-name="uiLabelMap" global="true"/>
                    <property-map resource="ProductUiLabels" map-name="uiLabelMap" global="true"/>
                    <property-map resource="PartyUiLabels" map-name="uiLabelMap" global="true"/>
                    <property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
                   <!-- <set field="invoiceIds" from-field="parameters.invoiceIds" type="List"/> -->
                   <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/invoiceSlips.groovy"/>
                   <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/printInvoices.groovy"/> 
                </actions>           
                <widgets>
                    	<platform-specific><html><html-template location="component://byproducts/webapp/byproducts/byproducts/invoiceSlips.fo.ftl"/></html></platform-specific>                 
                </widgets>
            </section>
   </screen>
   <screen name="BuyerInvoicePDF">
            <section>
                <actions>
                   <property-map resource="AccountingUiLabels" map-name="uiLabelMap" global="true"/>
                    <property-map resource="ProductUiLabels" map-name="uiLabelMap" global="true"/>
                    <property-map resource="PartyUiLabels" map-name="uiLabelMap" global="true"/>
                    <property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
                   <!-- <set field="invoiceIds" from-field="parameters.invoiceIds" type="List"/> -->
                   <!-- <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/printInvoices.groovy"/>  -->
                   <!-- <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/invoiceSlips.groovy"/> -->
                   <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/buyerInvoicePrint.groovy"/>
                </actions>           
                <widgets>
                    	<platform-specific><html><html-template location="component://byproducts/webapp/byproducts/reports/buyerInvoiceSlips.fo.ftl"/></html></platform-specific>                 
                </widgets>
            </section>
   </screen>
   <screen name="TaxInvoicePDF">
            <section>
                <actions>
                   <property-map resource="AccountingUiLabels" map-name="uiLabelMap" global="true"/>
                    <property-map resource="ProductUiLabels" map-name="uiLabelMap" global="true"/>
                    <property-map resource="PartyUiLabels" map-name="uiLabelMap" global="true"/>
                    <property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
                   <!-- <set field="invoiceIds" from-field="parameters.invoiceIds" type="List"/> -->
                   <!-- <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/printInvoices.groovy"/>  -->
                   <!-- <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/invoiceSlips.groovy"/> -->
                   <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/buyerInvoicePrint.groovy"/>
                </actions>           
                <widgets>
                    	<platform-specific><html><html-template location="component://byproducts/webapp/byproducts/reports/TaxInvoicePDF.fo.ftl"/></html></platform-specific>                 
                </widgets>
            </section>
   </screen> 
   
   <screen name="orderSlipTXT">
            <section>
                <actions>
                   <property-map resource="AccountingUiLabels" map-name="uiLabelMap" global="true"/>
                    <property-map resource="ProductUiLabels" map-name="uiLabelMap" global="true"/>
                    <property-map resource="PartyUiLabels" map-name="uiLabelMap" global="true"/>
                    <property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
                   <!-- <set field="invoiceIds" from-field="parameters.invoiceIds" type="List"/> -->
                   <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/reports/orderSlips.groovy"/>
                </actions>           
                <widgets>
                    	<platform-specific><html><html-template location="component://byproducts/webapp/byproducts/reports/orderSlips.fo.ftl"/></html></platform-specific>                 
                </widgets>
            </section>
   </screen>  
   <screen name="AdhocSale">
        <section>
            <actions>
               <set field="titleProperty" value="Ad Hoc Sales"/>              
			   <set field="tabButtonItem" value="AdhocSale" />	
			   <set field="tabButtonItem2" value="AdhocSale"/>  
			    <set field="changeFlag" value="AdhocSaleNew"/>  
               <set field="priceTypeId" from-field="parameters.priceTypeId"/>
               <set field="orderStatus" from-field="parameters.orderStatus"/> 
               <set field="orderId" from-field="parameters.orderId"/>
               <set field="orderFacility" from-field="parameters.orderFacility"/> 
               <set field="orderRoute" from-field="parameters.orderRoute"/> 
               <set field="supplyDate" from-field="parameters.supplyDate"/>
               <set field="defaultEffectiveDateTime" value="${supplyDate}" default-value="${bsh:org.ofbiz.base.util.UtilDateTime.nowTimestamp()}"/>
			   <set field="defaultEffectiveDate" 
					value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(defaultEffectiveDateTime, &quot;dd MMMMM, yyyy&quot;);}" />
										  					  
            </actions>
            <widgets>
              <decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                      <decorator-section name="body">   
                      <include-menu name="AdhocSaleTabBar" location="component://byproducts/widget/ByProductsMenus.xml"/>
                      	<section>
                      		<widgets>
           						<include-screen name="AdhocSaleInnerOld"/>
                      		</widgets>
                      	</section>
                    </decorator-section>                                       
                </decorator-screen>
            </widgets>
        </section>
    </screen> 
      <screen name="AdhocSaleInnerOld">
        <section>
            <actions>
               <set field="changeFlag" from-field="changeFlag"/> 
               <set field="productSubscriptionTypeId" value="${parameters.productSubscriptionTypeId}"/>
               <set field="subscriptionTypeId" from-field="parameters.subscriptionTypeId"/>
               <entity-one value-field="showBoothAutoSuggestConf" entity-name="TenantConfiguration">
               		<field-map field-name="propertyTypeEnumId" value="FACILITY_AUTOSUGGEST"/>
               		<field-map field-name="propertyName" value="showBoothAutoSuggest"/>
               		<select-field field-name="propertyValue"/>
               </entity-one>
              
            
               <set field="showBoothAutoSuggest" value="${showBoothAutoSuggestConf.propertyValue}"/>
               <set field="supplyDate" from-field="parameters.supplyDate"/>
               <set field="effectiveDate" value="${parameters.effectiveDate}"/>
               <set field="checkListType" value="indentEntry"/>
               <set field="shipmentTypeId" value="${parameters.shipmentTypeId}"/>
                <entity-condition entity-name="Enumeration" list="prodSubTypes" use-cache="true">
                	<condition-list>
                    	<condition-expr field-name="enumTypeId" value="SUB_PROD_TYPE"/>  
                    	<condition-expr field-name="enumId" operator="not-equals" value="CARD"/> 
                    	 <condition-expr field-name="enumId" operator="not-equals" value="LEAK"/>  
                    </condition-list>
                    <order-by field-name="sequenceId"/>
                </entity-condition>
              
                <entity-condition entity-name="Product" list="productList" use-cache="true">
                </entity-condition>                
                <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/recentChangeIndents.groovy"/>
              <!--   <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/indentCheckListReport.groovy"/>  --> 
                <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/enableBoothAutoComplete.groovy"/>
              <!--   <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/enablePartyAutoComplete.groovy"/> -->
               <set field="routeId" from-field="parameters.routeId"/>            
            </actions>
            <widgets>
               	<section>
                 	 <widgets>
          					<platform-specific><html><html-template location="component://byproducts/webapp/byproducts/byproducts/indentAdhocSale.ftl"/></html></platform-specific>
                     </widgets>
                     <fail-widgets>
						<label style="h3">${uiLabelMap.ProductFacilityViewPermissionError}
						</label>
					</fail-widgets>
             	</section>                  
            </widgets>
        </section>
    </screen> 
    <screen name="AdhocSaleInner">
        <section>
            <actions>
               <set field="changeFlag" from-field="changeFlag"/> 
               <set field="productSubscriptionTypeId" value="${parameters.productSubscriptionTypeId}"/>
               <set field="subscriptionTypeId" from-field="parameters.subscriptionTypeId"/>
               <entity-one value-field="showBoothAutoSuggestConf" entity-name="TenantConfiguration">
               		<field-map field-name="propertyTypeEnumId" value="FACILITY_AUTOSUGGEST"/>
               		<field-map field-name="propertyName" value="showBoothAutoSuggest"/>
               		<select-field field-name="propertyValue"/>
               </entity-one>
              
            
               <set field="showBoothAutoSuggest" value="${showBoothAutoSuggestConf.propertyValue}"/>
               <set field="supplyDate" from-field="parameters.supplyDate"/>
               <set field="effectiveDate" value="${parameters.effectiveDate}"/>
               <set field="checkListType" value="indentEntry"/>
               <set field="shipmentTypeId" value="${parameters.shipmentTypeId}"/>
                <entity-condition entity-name="Enumeration" list="prodSubTypes" use-cache="true">
                	<condition-list>
                    	<condition-expr field-name="enumTypeId" value="SUB_PROD_TYPE"/>  
                    	<condition-expr field-name="enumId" operator="not-equals" value="CARD"/> 
                    	 <condition-expr field-name="enumId" operator="not-equals" value="LEAK"/>  
                    </condition-list>
                    <order-by field-name="sequenceId"/>
                </entity-condition>
              
                <entity-condition entity-name="Product" list="productList" use-cache="true">
                </entity-condition>                
                <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/recentChangeIndents.groovy"/>
              <!--   <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/indentCheckListReport.groovy"/>  --> 
              <!--   <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/enableBoothAutoComplete.groovy"/> -->
                <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/enablePartyAutoComplete.groovy"/>
               <set field="routeId" from-field="parameters.routeId"/>            
            </actions>
            <widgets>
               	<section>
                 	 <widgets>
          					<platform-specific><html><html-template location="component://byproducts/webapp/byproducts/byproducts/indentAdhocSale.ftl"/></html></platform-specific>
                     </widgets>
                     <fail-widgets>
						<label style="h3">${uiLabelMap.ProductFacilityViewPermissionError}
						</label>
					</fail-widgets>
             	</section>                  
            </widgets>
        </section>
    </screen>     
       <screen name="AdhocSaleNew">
        <section>
            <actions>
               <set field="titleProperty" value="Ad Hoc Sales"/>              
			   <set field="tabButtonItem" value="AdhocSale" />	
			   <set field="tabButtonItem2" value="AdhocSale"/> 
               <set field="changeFlag" value="AdhocSaleNew"/>  
               <set field="productSubscriptionTypeId" from-field="parameters.productSubscriptionTypeId"/>
               <set field="subscriptionTypeId" from-field="parameters.subscriptionTypeId"/> 
               <set field="boothId" from-field="parameters.boothId"/>
                <entity-condition entity-name="Enumeration" list="prodSubTypes" use-cache="true">
                    <condition-expr field-name="enumTypeId" value="SUB_PROD_TYPE"/>
                    <order-by field-name="sequenceId"/>
                </entity-condition>
                <set field="checkListType" value="indentEntry"/>
                <set field="effectiveDate" value="${parameters.effectiveDate}"/>
                 <set field="shipmentTypeId" value="${parameters.shipmentTypeId}"/>
                  <set field="priceTypeId" from-field="parameters.priceTypeId"/>
                    <set field="productCatageoryId" from-field="parameters.productCatageoryId"/>
                     <set field="vehicleId" from-field="parameters.vehicleId"/>
                <!-- <set field="defaultEffectiveDateTime" value="${bsh:org.ofbiz.base.util.UtilDateTime.getNextDayStart(org.ofbiz.base.util.UtilDateTime.nowTimestamp())}"/>
			    <set field="defaultEffectiveDate" 
					value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(defaultEffectiveDateTime, &quot;dd MMMMM, yyyy&quot;);}" />  -->              
                <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/AdhocIndentForm.groovy"/>
                <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/recentChangeIndents.groovy"/>                
                <!-- <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/indentCheckListReport.groovy"/>  -->               
            </actions>
            <widgets>
               <decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                      <decorator-section name="body">   
                      <include-menu name="AdhocSaleTabBar" location="component://byproducts/widget/ByProductsMenus.xml"/>                   
                        <section>
                    	   <condition>
                    			<and>                     		
	              					<if-has-permission permission="BYPRODUCTS" action="_INDENT"/>
                   					<not><if-empty field="booth"/></not>
                    			</and>
                    		</condition> 
                            	<widgets>
                            	    <platform-specific><html><html-template location="component://byproducts/webapp/byproducts/byproducts/indentAdhocSale.ftl"/></html></platform-specific>
                                </widgets>
                            <fail-widgets>
                                <platform-specific><html><html-template location="component://byproducts/webapp/byproducts/byproducts/indentAdhocSale.ftl"/></html></platform-specific>								                           
                            </fail-widgets>
                        </section>
                    </decorator-section>                                       
                </decorator-screen>
            </widgets>
        </section>
    </screen> 
     <screen name="FindAdhocSalesOrder">
        <section>
            <actions>
                <set field="titleProperty" value="Find AdHoc Sales"/>              
			    <set field="tabButtonItem" value="AdhocSale" />	
			   <set field="tabButtonItem2" value="FindAdhocSalesOrder"/>       
               <set field="headerItem" value="byProductsOrderEntry"/>
               <set field="viewSize" from-field="parameters.VIEW_SIZE"/>
               <set field="targetRequest" value="FindAdhocSalesOrder"/>
                 <set field="ChannalType" value="RM_DIRECT_CHANNEL"/>
               
            </actions>
            <widgets>
                   <decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                      <decorator-section name="body">  
                       
                      <include-menu name="AdhocSaleTabBar" location="component://byproducts/widget/ByProductsMenus.xml"/> 
                        <section>
                            <widgets>
                                <decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
                                    <decorator-section name="search-options">
                            			<include-form name="FindAdhocSalesOrder" location="component://byproducts/widget/ByProductsNgForms.xml"/>
                      				</decorator-section>
                      				<decorator-section name="search-results">
                      					<screenlet title="">
                      						<!-- <link target="parlourSalesOrders.csv" text="Export As CSV" style="buttontext create">
									  	 		<parameter param-name="orderId" from-field="parameters.orderId"/>
												<parameter param-name="hideSearch" from-field="parameters.hideSearch"/>
												<parameter param-name="orderDate" from-field="parameters.orderDate"/>
												<parameter param-name="orderType" from-field="parameters.orderType"/>
												<parameter param-name="salesChannelEnumId" from-field="parameters.salesChannelEnumId"/>
												<parameter param-name="statusId" from-field="parameters.statusId"/>
												<parameter param-name="productStoreId" from-field="parameters.productStoreId"/>
												<parameter param-name="noConditionFind" from-field="parameters.noConditionFind"/>
									  	 	</link> -->
                          					<include-form name="listAdhocSalesOrders" location="component://byproducts/widget/ByProductsNgForms.xml"/>
                      					</screenlet>
                      				</decorator-section>
                                </decorator-screen>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>            
        </section>
    </screen> 
     <screen name="FindAdhocSalesOrderAlt">
        <section>
            <actions>
                <set field="titleProperty" value="Find AdHoc Sales"/>              
			    <set field="tabButtonItem" value="AdhocSale" />	
			   <set field="tabButtonItem2" value="FindAdhocSalesOrder"/>       
               <set field="headerItem" value="byProductsOrderEntry"/>
               <set field="viewSize" from-field="parameters.VIEW_SIZE"/>
                <set field="targetRequest" value="findAdhocSalePayment"/>
                 <set field="ChannalType" value="RM_DIRECT_CHANNEL"/>
            </actions>
            <widgets>
                        <section>
                            <widgets>
                                <decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
                                    <decorator-section name="search-options">
                            			<include-form name="FindAdhocSalesOrder" location="component://byproducts/widget/ByProductsNgForms.xml"/>
                      				</decorator-section>
                      				<decorator-section name="search-results">
                      					<screenlet title="">
                          					<include-form name="listAdhocOrdersAlt" location="component://byproducts/widget/ByProductsNgForms.xml"/>
                      					</screenlet>
                      				</decorator-section>
                                </decorator-screen>
                            </widgets>
                        </section>
            </widgets>            
        </section>
    </screen> 
    <screen name="printAdhocOrderPDF">
		<section>
			<actions>
				 <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/AdhocOrderFind.groovy" />				
			</actions>
			<widgets>	
				<platform-specific>
	            	<html><html-template location="component://byproducts/webapp/byproducts/reports/AdhocOrderPrint.fo.ftl"/></html>
	            </platform-specific>					
	        </widgets>								
		</section>
	</screen>
	<screen name="AdhocOrderCorrection">
		<section>
			<actions>
			   <set field="titleProperty" value="AdHoc Sale Correction"/>              
			    <set field="tabButtonItem" value="AdhocSale" />	
               <set field="changeFlag" value="AdhocOrderCorrection"/>  
				 <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/AdhocOrderFind.groovy" />	
			</actions>
			<widgets>	
			 <decorator-screen name="nelloreDairyCommonDecorator" location="component://nelloredairy/widget/CommonScreens.xml">
                      <decorator-section name="body">                     
                        <section>
                    	   <condition>
                    			<and>                     		
	              					<if-has-permission permission="BYPRODUCTS" action="_INDENT"/>
                   					<not><if-empty field="booth"/></not>
                    			</and>
                    		</condition> 
                            	<widgets>
                            	    <platform-specific><html><html-template location="component://byproducts/webapp/byproducts/byproducts/DirectOrderCorrection.ftl"/></html></platform-specific>
                                </widgets>
                            <fail-widgets>
                                <include-screen name="AdhocSaleInner"/>								                           
                            </fail-widgets>
                        </section>
                    </decorator-section>                                       
                </decorator-screen>
	        </widgets>								
		</section>
	</screen>
	<screen name="FindChequeReturns">
		<section>
			<actions>
				<set field="titleProperty" value="pageTitleFindPayments" />
				<set field="tabButtonItem" value="CustomPayments" />
				<set field="subTabButtonItem" value="ChequeReturn"/>
				<set field="paymentDate" value="${bsh:org.ofbiz.base.util.UtilDateTime.nowDateString(&quot;yyyy-MM-dd&quot;)}" type="String"/>
			    <set field="defaultEffectiveDate" 
					value="${groovy:org.ofbiz.base.util.UtilDateTime.nowDateString(&quot;dd MMMMM, yyyy&quot;)}" type="String" /> 				
				<entity-condition entity-name="FacilityParty" list="facilityParty" filter-by-date="true">
	    			<condition-list>
	    				<condition-expr field-name="partyId" value="${userLogin.partyId}"/>
	    				<condition-expr field-name="roleTypeId" value="FACILITY_CASHIER"/>
	    			</condition-list>
    			</entity-condition>
    			<service service-name="acctgInvoicePermissionCheck" result-map="permResult">
                    <field-map field-name="mainAction" value="PAYMENTSTATUS_CANCEL"/>
                </service>
                <set field="hasPaymentCancelPermission" value="true" type="Boolean"/><!--from-field="permResult.hasPermission"	-->
    			<set field="paymentLocationId" value="${facilityParty[0].facilityId}"/>		
    			<set field="targetValue" value="FindPaymentByMethod"/>										
    			<set field="layoutSettings.javaScripts[]" value="/byproducts//images/paymentMethodType.js" global="true"/>
    			<script	location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/getChequePayments.groovy" />
			</actions>
			<widgets>
				<decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
					<decorator-section name="body">
						<include-menu location="component://byproducts/widget/ByProductsMenus.xml" name="PaymentSubTabBar"/>
						<section>
							<condition>
								<or>
									<not><if-empty field="facilityParty"/></not>
									<if-has-permission permission="BYPRODUCTS" action="_CHEQUE"/>
								</or>		
							</condition>
							<widgets>
								<section>
									<condition>
										<and>
											<or>
												<if-has-permission permission="BYPRODUCTS" action="_CASH"/>
												<if-has-permission permission="BYPRODUCTS" action="_CHEQUE"/>
												<if-has-permission permission="BYPRODUCTS" action="_CHALLAN"/>
											</or>
											<or>
												<if-empty field="statusId"/>
												<if-compare operator="equals" value="NOT_PAID" field="statusId"/>
											</or>
										</and>
									</condition>
									<widgets>
									   <section>
									        <widgets> 		
										        <screenlet title="Find Cheques Payments">
										        	<include-form name="FindChequePayments" location="component://byproducts/widget/ByProductsNgForms.xml" />
										        </screenlet>
									  	        <screenlet title="List Cheque Payments">
									  	        	<platform-specific>
	                                     					<html><html-template location="component://byproducts/webapp/byproducts/byproducts/ChequeReturnsCancel.ftl"/></html>
	                                				</platform-specific>				
									  	        	<include-form name="ListChequePayments" location="component://byproducts/widget/ByProductsNgForms.xml" />
										        </screenlet>
										     </widgets> 
										 </section>
									</widgets>
								</section>			
							</widgets>
						</section>									
					</decorator-section>	
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="FindPaymentByMethod">
		<section>
			<actions>
				<set field="titleProperty" value="pageTitleFindPayments" />
				<set field="tabButtonItem" value="CustomPayments" />
				<set field="subTabButtonItem" value="${parameters.subTabItem}" default-value="${context.subTabItem}"/>
				<set field="paymentDate" value="${bsh:org.ofbiz.base.util.UtilDateTime.nowDateString(&quot;yyyy-MM-dd&quot;)}" type="String"/>
			    <set field="defaultEffectiveDate" 
					value="${groovy:org.ofbiz.base.util.UtilDateTime.nowDateString(&quot;dd MMMMM, yyyy&quot;)}" type="String" /> 				
				<entity-condition entity-name="FacilityParty" list="facilityParty" filter-by-date="true">
	    			<condition-list>
	    				<condition-expr field-name="partyId" value="${userLogin.partyId}"/>
	    				<condition-expr field-name="roleTypeId" value="FACILITY_CASHIER"/>
	    			</condition-list>
    			</entity-condition>
    			<service service-name="acctgInvoicePermissionCheck" result-map="permResult">
                    <field-map field-name="mainAction" value="PAYMENTSTATUS_CANCEL"/>
                </service>
                <set field="hasPaymentCancelPermission" value="true" type="Boolean"/><!--from-field="permResult.hasPermission"	-->
    			<set field="paymentLocationId" value="${facilityParty[0].facilityId}"/>		
    			<set field="targetValue" value="FindPaymentByMethod"/>										
    			<set field="layoutSettings.javaScripts[]" value="/byproducts//images/paymentMethodType.js" global="true"/>
    			<set field="paymentMethodTypeId" from-field="parameters.paymentMethodTypeId" default-value="${paymentMethodTypeId}"/>
    			<set field="parameters.onlyCurrentDues" value="true"/>
    			<!--<entity-condition list="companyBankList" entity-name="FinAccount" distinct="true" >
    				<condition-list combine="and">
    					<condition-expr field-name="statusId" operator="equals" value="FNACT_ACTIVE"/>
    					<condition-expr field-name="finAccountTypeId" operator="equals" value="BANK_ACCOUNT"/>
    					<condition-expr field-name="finAccountTypeId" operator="equals" value="BANK_ACCOUNT"/>
    				</condition-list>
    				<select-field field-name="finAccountName"/>
    				<order-by field-name="finAccountName"/>
    			</entity-condition>
    			--><script	location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/getRetailerPayments.groovy" />
			</actions>
			<widgets>
				<decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
					<decorator-section name="body">
						<include-menu location="component://byproducts/widget/ByProductsMenus.xml" name="PaymentSubTabBar"/>
						<section>
							<condition>
								<or>
									<not><if-empty field="facilityParty"/></not>
									<if-has-permission permission="BYPRODUCTS" action="_CASH"/>
									<if-has-permission permission="BYPRODUCTS" action="_CHEQUE"/>
									<if-has-permission permission="BYPRODUCTS" action="_CHALLAN"/>	
								</or>		
							</condition>
							<widgets>
								<section>
									<condition>
										<and>
											<or>
												<if-has-permission permission="BYPRODUCTS" action="_CASH"/>
												<if-has-permission permission="BYPRODUCTS" action="_CHEQUE"/>
												<if-has-permission permission="BYPRODUCTS" action="_CHALLAN"/>
											</or>
											<or>
												<if-empty field="statusId"/>
												<if-compare operator="equals" value="NOT_PAID" field="statusId"/>
											</or>
										</and>
									</condition>
									<widgets>
									   <section>
									        <widgets> 		
										        <screenlet>
										        	<platform-specific><html><html-template location="component://byproducts/webapp/byproducts/reports/PaymentCheckList.ftl"/></html></platform-specific>
										        	<include-form name="FindPaymentsByMethod" location="component://byproducts/widget/ByProductsNgForms.xml" />
										        </screenlet>
									  	        <screenlet title="Retailers ${uiLabelMap.PaymentSearchResults} :${invoicesTotalAmount} (${groovy: boothPaymentsList.size()})">				
									  	        	<!--<link target="boothPayments.csv" text="Export As CSV" style="buttontext create">
									  	        		<parameter param-name="paymentDate" from-field="parameters.paymentDate"/>
														<parameter param-name="hideSearch" from-field="parameters.hideSearch"/>
														<parameter param-name="facilityId" from-field="parameters.facilityId"/>
														<parameter param-name="paymentMethodTypeId" from-field="parameters.paymentMethodTypeId"/>
														<parameter param-name="statusId" from-field="parameters.statusId"/>	
									  	        	</link>
									  	        	-->
									  	        	<platform-specific><html><html-template location="component://byproducts/webapp/byproducts/reports/DuesHistory.ftl"/></html></platform-specific>
									  	        	<platform-specific><html>
												  		<html-template location="component://byproducts/webapp/byproducts/byproducts/DuePayment.ftl"/>
												  		</html>
												  	</platform-specific>	
									  	        	<platform-specific>
                                            			<html><html-template location="component://byproducts/webapp/byproducts/reports/ListSearchRetailerDues.ftl"/></html>
                                        			</platform-specific>
										        </screenlet>
										     </widgets> 
										 </section>
									</widgets>
									<fail-widgets>
										<section>
											<condition>
												<and>
													<or>
														<if-has-permission permission="BYPRODUCTS" action="_CASH"/>
														<if-has-permission permission="BYPRODUCTS" action="_CHEQUE"/>
														<if-has-permission permission="BYPRODUCTS" action="_CHALLAN"/>
													</or>
													<if-compare operator="equals" value="PAID" field="statusId"/>
												</and>
											</condition>
											<widgets>
													<screenlet>
										        		<platform-specific><html><html-template location="component://byproducts/webapp/byproducts/reports/PaymentCheckList.ftl"/></html></platform-specific>
										        		<include-form name="FindPaymentsByMethod" location="component://byproducts/widget/ByProductsNgForms.xml" />
										        	</screenlet>
									  	       		 <screenlet title="Retailers Receipts :${invoicesTotalAmount} (${groovy: boothPaymentsList.size()})">
									  	       		<!--<link target="boothPayments.csv" text="Export As CSV" style="buttontext create">
									  	        		<parameter param-name="paymentDate" from-field="parameters.paymentDate"/>
														<parameter param-name="hideSearch" from-field="parameters.hideSearch"/>
														<parameter param-name="facilityId" from-field="parameters.facilityId"/>
														<parameter param-name="paymentMethodTypeId" from-field="parameters.paymentMethodTypeId"/>
														<parameter param-name="statusId" from-field="parameters.statusId"/>												
									  	        	</link>	
									  	        	-->
									  	        	
									  	        	<platform-specific>
	                                     					<html><html-template location="component://byproducts/webapp/byproducts/byproducts/ChequeReturnsCancel.ftl"/></html>
	                                				</platform-specific>
									  	        	<platform-specific>
	                                     					<html><html-template location="component://byproducts/webapp/byproducts/reports/printBoothPayments.ftl"/></html>
	                                				</platform-specific>
										        </screenlet>								    
											</widgets>
										</section>
									</fail-widgets>
								</section>			
							</widgets>
						</section>									
					</decorator-section>	
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	 <screen name="FindInstitutionPayment">
		<section>
			<actions>
				<set field="titleProperty" value="pageTitleFindPayments" />
				<set field="tabButtonItem" value="CustomPayments" />
				<set field="subTabButtonItem" value="institutionPayment"/>
				<set field="paymentDate" value="${bsh:org.ofbiz.base.util.UtilDateTime.nowDateString(&quot;yyyy-MM-dd&quot;)}" type="String"/>
			    <set field="defaultEffectiveDate" 
					value="${groovy:org.ofbiz.base.util.UtilDateTime.nowDateString(&quot;dd MMMMM, yyyy&quot;)}" type="String" /> 				
				<entity-condition entity-name="FacilityParty" list="facilityParty" filter-by-date="true">
	    			<condition-list>
	    				<condition-expr field-name="partyId" value="${userLogin.partyId}"/>
	    				<condition-expr field-name="roleTypeId" value="FACILITY_CASHIER"/>
	    			</condition-list>
    			</entity-condition>
    			<service service-name="acctgInvoicePermissionCheck" result-map="permResult">
                    <field-map field-name="mainAction" value="PAYMENTSTATUS_CANCEL"/>
                </service>
                <set field="hasPaymentCancelPermission" value="true" type="Boolean"/>
    			<set field="paymentLocationId" value="${facilityParty[0].facilityId}"/>		
    			<set field="targetValue" value="FindPaymentByMethod"/>										
    			<set field="layoutSettings.javaScripts[]" value="/byproducts//images/paymentMethodType.js" global="true"/>
    			<set field="paymentMethodTypeId" from-field="parameters.paymentMethodTypeId" default-value="${paymentMethodTypeId}"/>
    			<set field="parameters.onlyCurrentDues" value="false"/>
    			
    			<entity-condition list="paymentMethodList" entity-name="PaymentMethodType">
    				<condition-list combine="or">
    					<condition-expr field-name="paymentMethodTypeId" operator="equals"  value="FT_PAYIN"/>
    					<condition-expr field-name="paymentMethodTypeId" operator="equals"  value="CHEQUE_PAYIN"/>
    				</condition-list>
    			</entity-condition>
    			<script	location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/getInstitutionPayments.groovy" />
			</actions>
			<widgets>
				<decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
					<decorator-section name="body">
						<include-menu location="component://byproducts/widget/ByProductsMenus.xml" name="PaymentSubTabBar"/>
						<section>
							<condition>
								<or>
									<not><if-empty field="facilityParty"/></not>
									<if-has-permission permission="BYPRODUCTS" action="_CASH"/>
									<if-has-permission permission="BYPRODUCTS" action="_CHEQUE"/>
									<if-has-permission permission="BYPRODUCTS" action="_CHALLAN"/>	
								</or>		
							</condition>
							<widgets>
								<section>
									<condition>
										<and>
											<or>
												<if-has-permission permission="BYPRODUCTS" action="_CASH"/>
												<if-has-permission permission="BYPRODUCTS" action="_CHEQUE"/>
												<if-has-permission permission="BYPRODUCTS" action="_CHALLAN"/>
											</or>
											<or>
												<if-empty field="statusId"/>
												<if-compare operator="equals" value="NOT_PAID" field="statusId"/>
											</or>
										</and>
									</condition>
									<widgets>
									   <section>
									        <widgets> 		
										        <screenlet title="Credit Institution Payments">
										        	<include-form name="FindInstitutionPayment" location="component://byproducts/widget/ByProductsNgForms.xml" />
										        </screenlet>
									  	        <screenlet title="Institution Dues Details">				
									  	        	<platform-specific><html><html-template location="component://byproducts/webapp/byproducts/reports/DuesHistory.ftl"/></html></platform-specific>
									  	        	<platform-specific><html>
												  		<html-template location="component://byproducts/webapp/byproducts/byproducts/InstitutionDuePayment.ftl"/>
												  		</html>
												  	</platform-specific>	
									  	        	<platform-specific>
                                            			<html><html-template location="component://byproducts/webapp/byproducts/reports/ListSearchInstitutionDues.ftl"/></html>
                                        			</platform-specific> 
										        </screenlet>
										     </widgets> 
										 </section>
									</widgets>
									<fail-widgets>
										<section>
											<condition>
												<and>
													<or>
														<if-has-permission permission="BYPRODUCTS" action="_CASH"/>
														<if-has-permission permission="BYPRODUCTS" action="_CHEQUE"/>
														<if-has-permission permission="BYPRODUCTS" action="_CHALLAN"/>
													</or>
													<if-compare operator="equals" value="PAID" field="statusId"/>
												</and>
											</condition>
											<widgets>
										        <screenlet title="Search Options">
										        	<include-form name="FindInstitutionPayment" location="component://byproducts/widget/ByProductsNgForms.xml" />
										        </screenlet>
									  	        <screenlet title="Credit Institution Receipts">
									  	        	
									  	        	<platform-specific>
	                                     					<html><html-template location="component://byproducts/webapp/byproducts/reports/printInstitutionPayments.ftl"/></html>
	                                				</platform-specific>
										        </screenlet>								    
											</widgets>
										</section>
									</fail-widgets>
								</section>			
							</widgets>
						</section>									
					</decorator-section>	
				</decorator-screen>
			</widgets>
		</section>
	</screen> 
	
	<screen name="FindBoothPayments">
		<section>
			<actions>
				<set field="titleProperty" value="pageTitleFindPayments" />
				<set field="tabButtonItem" value="Payments" />
				<set field="subTabButtonItem" value="FindPayments" />
				<set field="paymentDate" value="${bsh:org.ofbiz.base.util.UtilDateTime.nowDateString(&quot;yyyy-MM-dd&quot;)}" type="String"/>
			    <set field="defaultEffectiveDate" 
					value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(org.ofbiz.base.util.UtilDateTime.nowTimestamp(), &quot;dd MMMMM, yyyy&quot;);}" /> 				
				<script
					location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/getBoothPayments.groovy" />
				<entity-condition entity-name="FacilityParty" list="facilityParty" filter-by-date="true">
	    			<condition-list>
	    				<condition-expr field-name="partyId" value="${userLogin.partyId}"/>
	    				<condition-expr field-name="roleTypeId" value="FACILITY_CASHIER"/>
	    			</condition-list>
    			</entity-condition>
    			<service service-name="acctgInvoicePermissionCheck" result-map="permResult">
                    <field-map field-name="mainAction" value="PAYMENTSTATUS_CANCEL"/>
                </service>
                <set field="hasPaymentCancelPermission" from-field="permResult.hasPermission"/>	
    			<set field="paymentLocationId" value="${facilityParty[0].facilityId}"/>										
    			<set field="paymentLocationId" value="${facilityParty[0].facilityId}"/>
    			<set field="layoutSettings.javaScripts[]" value="/byproducts//images/paymentMethodType.js" global="true"/>
    			<entity-condition list="paymentMethodList" entity-name="PaymentMethodType">
					<condition-list combine="or">
                		<condition-expr field-name="paymentMethodTypeId" operator="equals" value="CHEQUE_PAYIN"/>
                		<condition-expr field-name="paymentMethodTypeId" operator="equals" value="CASH_PAYIN"/>
                		<condition-expr field-name="paymentMethodTypeId" operator="equals" value="CHALLAN_PAYIN"/>
                	</condition-list>
                 	<order-by field-name="-description"/>
           		</entity-condition>
           		<!-- <entity-condition entity-name="PaymentMethodType" list="paymentMethodType">
                	<order-by field-name="paymentMethodTypeId"/>
                </entity-condition>		 -->		
			</actions>
			<widgets>
				<decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
					<decorator-section name="body">
						<section>
							<condition>
								<or>
									<not><if-empty field="facilityParty"/></not>
									<if-has-permission permission="FACILITY" action="_ADMIN"/>
									<if-has-permission permission="CASH" action="_ADMIN"/>	
								</or>		
							</condition>
							<widgets>
								<section>
									<condition>
										<and>
											<or>
												<if-has-permission permission="CASH" action="_ADMIN"/>
												<if-has-permission permission="FACILITY" action="_ADMIN"/>	
											</or>
											<or>
												<if-empty field="statusId"/>
												<if-compare operator="equals" value="NOT_PAID" field="statusId"/>
											</or>
										</and>
									</condition>
									<widgets>
									   <section>
									        <widgets> 		
										        <screenlet title="Dues Payments">
										        	<platform-specific><html><html-template location="component://byproducts/webapp/byproducts/reports/PaymentCheckList.ftl"/></html></platform-specific>
										        	<include-form name="FindBoothPayments" location="component://byproducts/widget/ByProductsNgForms.xml" />
										        </screenlet>
									  	        <screenlet title="Vendor ${uiLabelMap.PaymentSearchResults} :${invoicesTotalAmount} (${groovy: boothPaymentsList.size()})">				
									  	        	<link target="boothPayments.csv" text="Export As CSV" style="buttontext create">
									  	        		<parameter param-name="paymentDate" from-field="parameters.paymentDate"/>
														<parameter param-name="hideSearch" from-field="parameters.hideSearch"/>
														<parameter param-name="facilityId" from-field="parameters.facilityId"/>
														<parameter param-name="paymentMethodTypeId" from-field="parameters.paymentMethodTypeId"/>
														<parameter param-name="statusId" from-field="parameters.statusId"/>	
									  	        	</link>
									  	        	<platform-specific><html>
												  		<html-template location="component://byproducts/webapp/byproducts/byproducts/DuePayment.ftl"/>
												  		</html>
												  	</platform-specific>	
									  	        	<platform-specific>
                                            			<html><html-template location="component://byproducts/webapp/byproducts/reports/ListSearchBoothDues.ftl"/></html>
                                        			</platform-specific>
										        </screenlet>
										     </widgets> 
										 </section>
									</widgets>
									<fail-widgets>
										<section>
											<condition>
												<and>
													<or>
														<if-has-permission permission="CASH" action="_ADMIN"/>
														<if-has-permission permission="FACILITY" action="_ADMIN"/>	
													</or>
													<if-compare operator="equals" value="PAID" field="statusId"/>
												</and>
											</condition>
											<widgets>
										        <screenlet title="Dues Payments">
										        	<platform-specific><html><html-template location="component://byproducts/webapp/byproducts/reports/PaymentCheckList.ftl"/></html></platform-specific>
										        	<include-form name="FindBoothPayments" location="component://byproducts/widget/ByProductsNgForms.xml" />
										        </screenlet>
									  	        <screenlet title="Vendor ${uiLabelMap.PaymentSearchResults} :${invoicesTotalAmount} (${groovy: boothPaymentsList.size()})">
									  	       		<link target="boothPayments.csv" text="Export As CSV" style="buttontext create">
									  	        		<parameter param-name="paymentDate" from-field="parameters.paymentDate"/>
														<parameter param-name="hideSearch" from-field="parameters.hideSearch"/>
														<parameter param-name="facilityId" from-field="parameters.facilityId"/>
														<parameter param-name="paymentMethodTypeId" from-field="parameters.paymentMethodTypeId"/>
														<parameter param-name="statusId" from-field="parameters.statusId"/>												
									  	        	</link>	
									  	        	<platform-specific>
	                                     					<html><html-template location="component://byproducts/webapp/byproducts/reports/printBoothPayments.ftl"/></html>
	                                				</platform-specific>
										        </screenlet>								    
											</widgets>
										</section>
									</fail-widgets>
								</section>			
							</widgets>
						</section>									
					</decorator-section>	
				</decorator-screen>
			</widgets>
		</section>
	</screen>
  	 <screen name="FindPastBoothPayments">
		<section>
			<actions>
				<set field="titleProperty" value="pageTitleFindPayments" />
				<set field="tabButtonItem" value="PastPayments" />
				<set field="subTabButtonItem" value="FindPayments" />
				<set field="statusId" value="${parameters.statusFlag}"/>
				<set field="hideSearch" value="${parameters.hideSearch}"/>
				<set field="enablePastPaymentService" value="${groovy:session.getAttribute(&quot;enablePastPaymentService&quot;)}"/>
				<set field="paymentDate" value="${bsh:org.ofbiz.base.util.UtilDateTime.nowDateString(&quot;yyyy-MM-dd&quot;)}" type="String"/>
			    <set field="defaultEffectiveDate" 
					value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(org.ofbiz.base.util.UtilDateTime.nowTimestamp(), &quot;dd MMMMM, yyyy&quot;);}" /> 				
				<script
					location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/getBoothPayments.groovy" />
				<set field="hasPastPaymentAdmin" value="${groovy:security.hasEntityPermission(&quot;PASTDUE&quot;, &quot;_ADMIN&quot;, session) || ((security.hasEntityPermission(&quot;FACILITY&quot;, &quot;_ADMIN&quot;, session)))}"/>
				<set field="layoutSettings.javaScripts[]" value="/byproducts/images/paymentMethodType.js" global="true"/>
				 <entity-condition list="paymentMethodList" entity-name="PaymentMethodType">
					<condition-list combine="or">
                		<condition-expr field-name="paymentMethodTypeId" operator="equals" value="CHEQUE_PAYIN"/>
                		<condition-expr field-name="paymentMethodTypeId" operator="equals" value="CASH_PAYIN"/>
                		<condition-expr field-name="paymentMethodTypeId" operator="equals" value="CHALLAN_PAYIN"/>
                	</condition-list>
                 	<order-by field-name="-description"/>
           		</entity-condition>
           		<!--<entity-condition entity-name="PaymentMethodType" list="paymentMethodType">
                	<order-by field-name="paymentMethodTypeId"/>
               </entity-condition> -->						
			</actions>
			<widgets>
				<section>					
					<condition>
						<or>
							<if-has-permission permission="PASTDUE"  action="_PAYMENT"/>
							<if-compare field="enablePastPaymentService" operator="equals" value="true"/>
						</or>
					</condition>
					<widgets>
						<decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
							<decorator-section name="body">
								<section>
									<condition>
										<and>
											<or>
												<if-has-permission permission="CASH" action="_ADMIN"/>
												<if-has-permission permission="FACILITY" action="_ADMIN"/>	
											</or>
											<or>
												<if-empty field="statusId"/>
												<if-compare operator="equals" value="NOT_PAID" field="statusId"/>
											</or>																
										</and>
									</condition>
									<widgets>							  
									   <section>
									        <widgets> 		
										        <screenlet title="Dues Payments">
												        	<platform-specific><html><html-template location="component://byproducts/webapp/byproducts/reports/PaymentCheckList.ftl"/></html></platform-specific>
												        	<include-form name="FindPastBoothPayments" location="component://byproducts/widget/ByProductsNgForms.xml" />
												        </screenlet>
												<screenlet title="Vendor ${uiLabelMap.PaymentSearchResults} :(${invoicesTotalDueAmount})">				
									  	        	<link target="boothPayments.csv" text="Export As CSV" style="buttontext create">
									  	        		<parameter param-name="paymentDate" from-field="parameters.paymentDate"/>
														<parameter param-name="hideSearch" from-field="parameters.hideSearch"/>
														<parameter param-name="facilityId" from-field="parameters.facilityId"/>
														<parameter param-name="onlyCurrentDues" value="false"/>
														<parameter param-name="paymentMethodTypeId" from-field="parameters.paymentMethodTypeId"/>
														<parameter param-name="statusId" from-field="parameters.statusId"/>	
									  	        	</link>	
												    <platform-specific><html><html-template location="component://byproducts/webapp/byproducts/reports/DuesHistory.ftl"/></html></platform-specific>
												      <platform-specific><html>
												  			<html-template location="component://byproducts/webapp/byproducts/byproducts/DuePayment.ftl"/>
												  		</html>
												  	 </platform-specific>									  	        		
									  	        	<include-form name="ListPastBoothPayments" location="component://byproducts/widget/ByProductsNgForms.xml" />
										        </screenlet>
										    </widgets> 
										   </section>
									</widgets>
									<fail-widgets>
										<section>
											<condition>
												<and>
													<or>
														<if-has-permission permission="CASH" action="_ADMIN"/>
														<if-has-permission permission="FACILITY" action="_ADMIN"/>	
													</or>
													<if-compare operator="equals" value="PAID" field="statusId"/>
												</and>
											</condition>
											<widgets>															  	
										        <screenlet title="Dues Payments">
												        	<platform-specific><html><html-template location="component://byproducts/webapp/byproducts/reports/PaymentCheckList.ftl"/></html></platform-specific>
												        	<include-form name="FindPastBoothPayments" location="component://byproducts/widget/ByProductsNgForms.xml" />
												        </screenlet>
												<screenlet title="Vendor ${uiLabelMap.PaymentSearchResults} :(${invoicesTotalAmount})">
									  	       		<link target="boothPayments.csv" text="Export As CSV" style="buttontext create">
									  	        		<parameter param-name="paymentDate" from-field="parameters.paymentDate"/>
														<parameter param-name="hideSearch" from-field="parameters.hideSearch"/>
														<parameter param-name="facilityId" from-field="parameters.facilityId"/>
														<parameter param-name="paymentMethodTypeId" from-field="parameters.paymentMethodTypeId"/>
														<parameter param-name="statusId" from-field="parameters.statusId"/>												
									  	        	</link>	
									  	        	<include-form name="ListPaidBoothPayments" location="component://byproducts/widget/ByProductsNgForms.xml" />
										        </screenlet>								    
											</widgets>
										</section>
									</fail-widgets>
								</section>						
							</decorator-section>	
						</decorator-screen>
					</widgets>
				</section>
			</widgets>
		</section>
	</screen>  
	<screen name="facilityCustomTimePeriod">
        <section>
           	<actions>
				<set field="titleProperty" value="facilityCustomTimePeriod"/> 
				<set field="tabButtonItem" value="facilityCustomTimePeriod" />
				<set field="layoutSettings.javaScripts[]" value="/byproducts/images/appendRoute.js" global="true"/> 
				<set field="tabButtonItem2" value="facilityCustomTimePeriod" />				
                <set field="viewIndex" from-field="parameters.VIEW_INDEX" type="Integer" default-value="0"/>
                <set field="viewSize" from-field="parameters.VIEW_SIZE" type="Integer" default-value="20"/>
                <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/customPeriodBilling.groovy"/>
                <entity-condition list="periodTypes" entity-name="PeriodType">
                	<condition-list combine="and">
                	<condition-expr field-name="periodTypeId" operator="like" value="INST_%"/>
                	<condition-expr field-name="periodTypeId" operator="not-equals" value="INST_DAILY_BILL"/>	
                	</condition-list>
                </entity-condition>
			</actions>
            <widgets>
                <decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                      <decorator-section name="body">
                      <include-menu name="CreditInstBillingTabBar" location="component://byproducts/widget/ByProductsMenus.xml"/>
                      	<section>
                        	<widgets>
								<container style="button-bar">
									<platform-specific><html><html-template location="component://byproducts/webapp/byproducts/byproducts/NewCustomBilling.ftl"/></html></platform-specific>							  	        					
									<link url-mode="plain" target="javascript:showBillingGenerateForm();" text="Generate Institution Billing" style="buttontext create"  link-type="anchor"/>
								</container>	
								<screenlet title="Billing List">				
									<include-form name="ListFacilityTimePeriod" location="component://byproducts/widget/ByProductsNgForms.xml" />
								</screenlet>
							</widgets>
                    	</section>
                    </decorator-section>                                       
                </decorator-screen>
            </widgets>
        </section>
    </screen>  
    
    <screen name="InstBillingPeriodSearch">
        <section>
            <actions>
            <set field="tabButtonItem" value="facilityCustomTimePeriod"/>
            <set field="titleProperty" value="InstBillingPeriodSearch"/> 
			<set field="tabButtonItem2" value="InstBillingPeriodSearch" />
            <set field="parameters.hideSearch" value="${parameters.hideSearch}"></set>
            <set field="parameters.noConditionFind" value="${parameters.noConditionFind}"></set> 
            <entity-condition list="periodTypes" entity-name="PeriodType">
            	<condition-expr field-name="periodTypeId" operator="like" value="INST%"/>
            </entity-condition>
            <set field="periodTypes" from-field="periodTypes"/>
            </actions>
            <widgets>
                <decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                      <decorator-section name="body">
                       <include-menu name="CreditInstBillingTabBar" location="component://byproducts/widget/ByProductsMenus.xml"/>
                      	<section>
                        	<widgets>
                        	<link target="createInstBillingConfig" text="Create" style="buttontext"></link>
                        		<screenlet title="Inst Billing Period Search">
                        			<include-form name="CreateInstBillingPeriodSearchForm" location="component://byproducts/widget/ByProductsNgForms.xml"/>
                        		</screenlet>
                        		<screenlet title="Inst Billing Period Search Result">
                        			<include-form name="InstBillingPeriodSearchResultForm" location="component://byproducts/widget/ByProductsNgForms.xml"/>
                        		</screenlet>
                            </widgets>
                    	</section>
                    </decorator-section>                                       
                </decorator-screen>
            </widgets>
        </section>
    </screen>   
    <screen name="createInstBillingConfig">
        <section>
            <actions>
            <set field="tabButtonItem" value="facilityCustomTimePeriod"/>
            <set field="titleProperty" value="InstBillingPeriodSearch"/> 
            <set field="tabButtonItem2" value="InstBillingPeriodSearch" />
            <set field="parameters.hideSearch" value="${parameters.hideSearch}"></set>
            <set field="parameters.noConditionFind" value="${parameters.noConditionFind}"></set> 
            <entity-condition list="periodTypes" entity-name="PeriodType">
            	<condition-expr field-name="periodTypeId" operator="like" value="INST%"/>
            </entity-condition>
            <set field="periodTypes" from-field="periodTypes"/>
            </actions>
            <widgets>
                <decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                      <decorator-section name="body">
                       <include-menu name="CreditInstBillingTabBar" location="component://byproducts/widget/ByProductsMenus.xml"/>
                      	<section>
                        	<widgets>
                        		
                        		<screenlet title="Inst Billing Period Create">
                        			<include-form name="instituionBillingPeriod" location="component://byproducts/widget/ByProductsNgForms.xml"/>
                        		</screenlet>
                            </widgets>
                    	</section>
                    </decorator-section>                                       
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="FacilityRateSearchForm">
        <section>
            <actions>
            <set field="tabButtonItem" value="FacilityRate"/>
            <set field="parameters.hideSearch" value="${parameters.hideSearch}"></set>
            <set field="parameters.noConditionFind" value="${parameters.noConditionFind}"></set> 
            </actions>
            <widgets>
                <decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                      <decorator-section name="body">
                      	<section>
                        	<widgets>
                        	<link target="createFacilityRate" text="Create" style="buttontext"></link>
                        		<screenlet title="Facility Rate Search Form">
                        			<include-form name="FacilityRateSearchForm" location="component://byproducts/widget/ByProductsNgForms.xml"/>
                        		</screenlet>
                        		<screenlet title="Facility Rate Search Result">
                        			<include-form name="FacilityRateSearchResultForm" location="component://byproducts/widget/ByProductsNgForms.xml"/>
                        		</screenlet>
                            </widgets>
                    	</section>
                    </decorator-section>                                       
                </decorator-screen>
            </widgets>
        </section>
    </screen>   
    <screen name="createFacilityRate">
        <section>
            <actions>
            <set field="tabButtonItem" value="FacilityRate"/>
            <set field="parameters.hideSearch" value="${parameters.hideSearch}"></set>
            <set field="parameters.noConditionFind" value="${parameters.noConditionFind}"></set> 
            </actions>
            <widgets>
                <decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                      <decorator-section name="body">
                      	<section>
                        	<widgets>
                        		
                        		<screenlet title="Facility Rate">
                        			<include-form name="createFacilityRate" location="component://byproducts/widget/ByProductsNgForms.xml"/>
                        		</screenlet>
                            </widgets>
                    	</section>
                    </decorator-section>                                       
                </decorator-screen>
            </widgets>
        </section>
    </screen>
	<screen name="VehicleStatus">
		<section>
			<actions>
                <set field="titleProperty" value="Vehicle Status"/>	            
               <set field="tabButtonItem" value="VehicleStatus"/>     
               <property-map resource="ProductUiLabels" map-name="uiLabelMap" global="true"/>
               <property-map resource="AccountingUiLabels" map-name="uiLabelMap" global="true"/>
               <property-map resource="OrderUiLabels" map-name="uiLabelMap" global="true"/> 
                <set field="actionUrl" value="VehicleStatus"/>
               <set field="formHeading" value="Find VehicleStatus"/> 
                      
                <set field="layoutSettings.javaScripts[]" value="/byproducts/images/date.js" global="true"/>   
                <set field="layoutSettings.javaScripts[]" value="/byproducts/images/autoCompleteFacility.js" global="true"/>   
                 <entity-one value-field="showBoothAutoSuggestConf" entity-name="TenantConfiguration">
               		<field-map field-name="propertyTypeEnumId" value="FACILITY_AUTOSUGGEST"/>
               		<field-map field-name="propertyName" value="showBoothAutoSuggest"/>
               		<select-field field-name="propertyValue"/>
                 </entity-one>
                <set field="showBoothAutoSuggest" value="${showBoothAutoSuggestConf.propertyValue}"/> 
                <set field="defaultEffectiveDateTime" value="${bsh:org.ofbiz.base.util.UtilDateTime.getDayStart(org.ofbiz.base.util.UtilDateTime.nowTimestamp())}"/>
			    <set field="defaultEffectiveDate" 
					value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(defaultEffectiveDateTime, &quot;dd MMMMM, yyyy&quot;);}" />
                  <set field="supplyDate" from-field="parameters.supplyDate"/>
                  <entity-condition entity-name="SubscriptionType" list="subscriptionTypeList" use-cache="true">
                	<condition-list>
                    	<condition-expr field-name="parentTypeId" value="LMS"/>                    	
                    </condition-list>                    
                </entity-condition>
               <set field="enableLmsPmSales" value="${groovy:session.getAttribute(&quot;enableLmsPmSales&quot;)}"/>
                <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/enableBoothAutoComplete.groovy"/>
			   <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/VehicleStatus.groovy" />		
			</actions>
			<widgets>
            	<decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">  
 							<platform-specific><html><html-template location="component://byproducts/webapp/byproducts/facility/vehicleStatusFind.ftl"></html-template></html></platform-specific>
						<screenlet title="VehicleStatus List">				
						<platform-specific><html><html-template location="component://byproducts/webapp/byproducts/facility/vehicleBulkSubmitForm.ftl"></html-template></html></platform-specific>
						<!-- 	<include-form name="submitBulkStatus" location="component://byproducts/widget/ByProductsNgForms.xml" />	 -->	
						<include-form name="ListVehicleStatus" location="component://byproducts/widget/ByProductsNgForms.xml" />
						</screenlet>		
												
					</decorator-section>	
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	 <screen name="VehicleStatusChange">
		<section>
			<actions>
                <set field="titleProperty" value="PageTitleReturnItems"/>
                <set field="headerItem" value="return"/>
                <set field="titleProperty" value="VehicleStatus"/>	            
               <set field="tabButtonItem" value="VehicleStatus"/>   
              
                <set field="returnId" from-field="parameters.returnId"/>
                <set field="screenFlag" value="returns"/>
                 <entity-one value-field="showBoothAutoSuggestConf" entity-name="TenantConfiguration">
               		<field-map field-name="propertyTypeEnumId" value="FACILITY_AUTOSUGGEST"/>
               		<field-map field-name="propertyName" value="showBoothAutoSuggest"/>
               		<select-field field-name="propertyValue"/>
                 </entity-one>
                <set field="showBoothAutoSuggest" value="${showBoothAutoSuggestConf.propertyValue}"/>
               	<set field="defaultEffectiveDateTime" value="${bsh:org.ofbiz.base.util.UtilDateTime.getDayStart(org.ofbiz.base.util.UtilDateTime.nowTimestamp())}"/>
			    <set field="defaultEffectiveDate" 
					value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(defaultEffectiveDateTime, &quot;dd MMMMM, yyyy&quot;);}" />
				<entity-condition entity-name="Enumeration" list="prodSubTrips" use-cache="true">
                	<condition-list>
                    	<condition-expr field-name="enumTypeId" value="MULTI_TRIP"/>
                    </condition-list>
                    <order-by field-name="sequenceId"/>
                </entity-condition>
               <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/getReturnItems.groovy"/>
               <set field="shipDate" 
					value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(shipmentDate, &quot;dd MMMMM, yyyy&quot;);}" />
               <entity-one entity-name="StatusItem" value-field="currentStatus" auto-field-map="false">
                	<field-map field-name="statusId" from-field="returnHeader.statusId"/>
            	</entity-one>
            	<entity-condition list="headerType" entity-name="ReturnHeaderType"/>
            	<entity-one value-field="returnHeaderTypeId" entity-name="ReturnHeaderType" >
            		<field-map field-name="returnHeaderTypeId" />
            	</entity-one>               
              <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/enableBoothAutoComplete.groovy"/>
               <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/newIndentJsons.groovy"/> 
                <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/getReturnItems.groovy"/>
                <set field="layoutSettings.javaScripts[]" value="/byproducts/images/vehicleStatusAjaxSubmit.js" global="true"/>
            </actions>
            
            <widgets>
            	<decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">
                        <section>
                            <widgets>
                                <screenlet title="Vehicle Status">  
   									<platform-specific><html><html-template location="component://byproducts/webapp/byproducts/facility/vehicleStatus.ftl"></html-template></html></platform-specific>
								</screenlet>
							</widgets>
						</section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>         
	</screen>	 
	<screen name="CategoryWiseSalesTXT">
		<section>
			<actions>
				 <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/CategoryWiseSalesReport.groovy" />
			</actions>
			<widgets>	
			<platform-specific>
				<xsl-fo>
					<html-template	location="component://byproducts/webapp/byproducts/reports/boothWiseSalesReport.fo.ftl" />
				</xsl-fo>
			</platform-specific>			
		    </widgets>								
		</section>
	</screen>
	<screen name="FindRouteCashPayment">
		<section>
			<actions>
				<set field="titleProperty" value="pageTitleFindPayments" />
				<set field="tabButtonItem" value="CustomPayments" />
				<set field="subTabButtonItem" value="${parameters.subTabItem}" default-value="${context.subTabItem}"/>
				<set field="paymentDate" value="${bsh:org.ofbiz.base.util.UtilDateTime.nowDateString(&quot;yyyy-MM-dd&quot;)}" type="String"/>
			    <set field="defaultEffectiveDate" 
					value="${groovy:org.ofbiz.base.util.UtilDateTime.nowDateString(&quot;dd MMMMM, yyyy&quot;)}" type="String" /> 				
				<entity-condition entity-name="FacilityParty" list="facilityParty" filter-by-date="true">
	    			<condition-list>
	    				<condition-expr field-name="partyId" value="${userLogin.partyId}"/>
	    				<condition-expr field-name="roleTypeId" value="FACILITY_CASHIER"/>
	    			</condition-list>
    			</entity-condition>
    			<service service-name="acctgInvoicePermissionCheck" result-map="permResult">
                    <field-map field-name="mainAction" value="PAYMENTSTATUS_CANCEL"/>
                </service>
                <set field="hasPaymentCancelPermission" value="true" type="Boolean"/><!--from-field="permResult.hasPermission"	-->
                <set field="targetValue" value="FindPaymentCashier"/>	
    			<set field="paymentLocationId" value="${facilityParty[0].facilityId}"/>										
    			<set field="layoutSettings.javaScripts[]" value="/byproducts//images/paymentMethodType.js" global="true"/>
    			<set field="paymentMethodTypeId" from-field="parameters.paymentMethodTypeId" default-value="${paymentMethodTypeId}"/>
    			<set field="parameters.onlyCurrentDues" value="true"/>
    			<set field="screenFlag" value="MyPortalCashierScreen"/>
    			<!--<entity-condition list="companyBankList" entity-name="FinAccount" distinct="true" >
    				<condition-list combine="and">
    					<condition-expr field-name="statusId" operator="equals" value="FNACT_ACTIVE"/>
    					<condition-expr field-name="finAccountTypeId" operator="equals" value="BANK_ACCOUNT"/>
    					<condition-expr field-name="finAccountTypeId" operator="equals" value="BANK_ACCOUNT"/>
    				</condition-list>
    				<select-field field-name="finAccountName"/>
    				<order-by field-name="finAccountName"/>
    			</entity-condition>
    			--><script	location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/getRetailerPayments.groovy" />
			</actions>
			<widgets>
				<include-menu location="component://byproducts/widget/ByProductsMenus.xml" name="PaymentSubTabBar"/>
						<section>
							<condition>
								<or>
									 <not><if-empty field="facilityParty"/></not> 
									<if-has-permission permission="BYPRODUCTS" action="_CASH"/>
									<if-has-permission permission="BYPRODUCTS" action="_CHEQUE"/>
									<if-has-permission permission="BYPRODUCTS" action="_CHALLAN"/>	
								</or>		
							</condition>
							<widgets>
								<section>
									<condition>
										<and>
											<or>
												<if-has-permission permission="BYPRODUCTS" action="_CASH"/>
												<if-has-permission permission="BYPRODUCTS" action="_CHEQUE"/>
												<if-has-permission permission="BYPRODUCTS" action="_CHALLAN"/>
											</or>
											<or>
												<if-empty field="statusId"/>
												<if-compare operator="equals" value="NOT_PAID" field="statusId"/>
											</or>
										</and>
									</condition>
									<widgets>
									   <section>
									        <widgets> 		
										        <screenlet>
										        	<platform-specific><html><html-template location="component://byproducts/webapp/byproducts/reports/PaymentCheckList.ftl"/></html></platform-specific>
										        	<include-form name="FindPaymentsByMethod" location="component://byproducts/widget/ByProductsNgForms.xml" />
										        </screenlet>
									  	        <screenlet title="Retailers ${uiLabelMap.PaymentSearchResults} :${invoicesTotalAmount} (${groovy: boothPaymentsList.size()})">				
									  	        	<!--<link target="boothPayments.csv" text="Export As CSV" style="buttontext create">
									  	        		<parameter param-name="paymentDate" from-field="parameters.paymentDate"/>
														<parameter param-name="hideSearch" from-field="parameters.hideSearch"/>
														<parameter param-name="facilityId" from-field="parameters.facilityId"/>
														<parameter param-name="paymentMethodTypeId" from-field="parameters.paymentMethodTypeId"/>
														<parameter param-name="statusId" from-field="parameters.statusId"/>	
									  	        	</link>
									  	        	-->
									  	        	<platform-specific><html><html-template location="component://byproducts/webapp/byproducts/reports/DuesHistory.ftl"/></html></platform-specific>
									  	        	<platform-specific><html>
												  		<html-template location="component://byproducts/webapp/byproducts/byproducts/DuePayment.ftl"/>
												  		</html>
												  	</platform-specific>	
									  	        	<platform-specific>
                                            			<html><html-template location="component://byproducts/webapp/byproducts/reports/ListSearchRetailerDues.ftl"/></html>
                                        			</platform-specific>
										        </screenlet>
										     </widgets> 
										 </section>
									</widgets>
									<fail-widgets>
										<section>
											<condition>
												<and>
													<or>
														<if-has-permission permission="BYPRODUCTS" action="_CASH"/>
														<if-has-permission permission="BYPRODUCTS" action="_CHEQUE"/>
														<if-has-permission permission="BYPRODUCTS" action="_CHALLAN"/>
													</or>
													<if-compare operator="equals" value="PAID" field="statusId"/>
												</and>
											</condition>
											<widgets>
										        <screenlet title="Cash Payments">
										        	<platform-specific><html><html-template location="component://byproducts/webapp/byproducts/reports/PaymentCheckList.ftl"/></html></platform-specific>
										        	<include-form name="FindPaymentsByMethod" location="component://byproducts/widget/ByProductsNgForms.xml" />
										        </screenlet>
									  	        <screenlet title="Retailers Receipts :${invoicesTotalAmount} (${groovy: boothPaymentsList.size()})">
									  	       		<!--<link target="boothPayments.csv" text="Export As CSV" style="buttontext create">
									  	        		<parameter param-name="paymentDate" from-field="parameters.paymentDate"/>
														<parameter param-name="hideSearch" from-field="parameters.hideSearch"/>
														<parameter param-name="facilityId" from-field="parameters.facilityId"/>
														<parameter param-name="paymentMethodTypeId" from-field="parameters.paymentMethodTypeId"/>
														<parameter param-name="statusId" from-field="parameters.statusId"/>												
									  	        	</link>	
									  	        	-->
									  	        	<platform-specific>
	                                     					<html><html-template location="component://byproducts/webapp/byproducts/reports/printBoothPayments.ftl"/></html>
	                                				</platform-specific>
										        </screenlet>								    
											</widgets>
										</section>
									</fail-widgets>
								</section>			
							</widgets>
						</section>									
			</widgets>
		</section>
	</screen>
	<screen name="FindPaymentNonRoute">
        <section>
            <actions>
               <set field="titleProperty" value="Non Route Recipts Search"/>
                <set field="tabButtonItem" value="NonRouteCustomPayments"/>
                <set field="subTabButtonItem" value="${parameters.subTabItem}" default-value="${context.subTabItem}"/>
                <set field="paymentMethodTypeId" value="${parameters.paymentMethodTypeId}" default-value="${context.paymentMethodTypeId}"/>
                 <set field="subTabItem" value="${parameters.subTabItem}" default-value="${context.subTabItem}"/>
                <set field="viewSize" from-field="parameters.VIEW_SIZE" type="Integer" default-value="1000"/>
                <service service-name="acctgInvoicePermissionCheck" result-map="permResult">
                    <field-map field-name="mainAction" value="PAYMENT_EDIT"/>
                </service>
                <set field="nowDate" value="${bsh:org.ofbiz.base.util.UtilDateTime.nowDateString(&quot;yyyy-MM-dd&quot;)}" type="String"/>
                <set field="hasPaymentEditPermission" from-field="permResult.hasPermission"/>
                 <set field="isCashierPortalScreen" value="YES"/>
                <service service-name="acctgInvoicePermissionCheck" result-map="permResult">
                    <field-map field-name="mainAction" value="PAYMENTSTATUS_CANCEL"/>
                </service>
                <set field="hasPaymentCancelPermission" value="true" type="Boolean"/><!--from-field="permResult.hasPermission"	-->
            </actions>
            <widgets>
                  <decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">
                    <include-menu location="component://byproducts/widget/ByProductsMenus.xml" name="NonRoutePaymentSubTabBar"/>
                        <section>
                            <widgets>
                               <include-screen name="FindPaymentNonRouteInner" />
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
     <screen name="FindPaymentNonRouteInner">
      <section>
            <actions>
                <set field="viewSize" from-field="parameters.VIEW_SIZE" type="Integer" default-value="1000"/>
                <service service-name="acctgInvoicePermissionCheck" result-map="permResult">
                    <field-map field-name="mainAction" value="PAYMENT_EDIT"/>
                </service>
                <set field="nowDate" value="${bsh:org.ofbiz.base.util.UtilDateTime.nowDateString(&quot;yyyy-MM-dd&quot;)}" type="String"/>
                <set field="hasPaymentEditPermission" from-field="permResult.hasPermission"/>
                 <set field="isCashierPortalScreen" value="YES"/>
                <service service-name="acctgInvoicePermissionCheck" result-map="permResult">
                    <field-map field-name="mainAction" value="PAYMENTSTATUS_CANCEL"/>
                </service>
                <set field="hasPaymentCancelPermission" value="true" type="Boolean"/><!--from-field="permResult.hasPermission"	-->
                
                <service service-name="performFind" result-map="result">
	                <field-map field-name="inputFields" from-field="parameters"/>
	                <field-map field-name="entityName" value="PaymentAndTypeAndCreditCard"/>
	                <field-map field-name="orderBy" value="effectiveDate DESC"/>
	                <field-map field-name="viewIndex" from-field="viewIndex"/>
	                <field-map field-name="viewSize" from-field="viewSize"/>
	            </service>
	            <set field="payments" from-field="result.listIt"/>
            </actions>
            <widgets>
                        <section>
                            <widgets>
                                <decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
                                    <decorator-section name="menu-bar">
                                        <container style="button-bar" >
                                            <link target="NewNonRouteReceipt"  text="Create New Receipt" style="buttontext create" > 
                                            <parameter param-name="paymentMethodTypeId" value="${parameters.paymentMethodTypeId}" />
                                             <parameter param-name="subTabItem" value="${parameters.subTabItem}" />
                                            </link>
                                        </container>
                                    </decorator-section>
                                    <decorator-section name="search-options" > 
                                        <include-form name="FindPaymentNonRoute" location="component://accounting/widget/PaymentForms.xml"/>
                                    </decorator-section>
                                    <decorator-section name="search-results">
                                    	<platform-specific>
                                           	<html><html-template location="component://accounting/webapp/accounting/payment/ListSearchPayments.ftl"/></html>
                                       	</platform-specific>
                                    </decorator-section>
                                </decorator-screen>
                            </widgets>
                        </section>
            </widgets>
        </section>
    </screen>     
    	<screen name="NewNonRouteReceipt">
        <section>
            <actions>
               <set field="titleProperty" value="Cash Recipts Search"/>
                <set field="tabButtonItem" value="NonRouteCustomPayments"/>
                <set field="subTabButtonItem" value="${parameters.subTabItem}" default-value="${context.subTabItem}"/>
                <set field="paymentMethodTypeId" value="${parameters.paymentMethodTypeId}" default-value="${context.subTabItem}"/>
                <set field="viewSize" from-field="parameters.VIEW_SIZE" type="Integer" default-value="1000"/>
                <service service-name="acctgInvoicePermissionCheck" result-map="permResult">
                    <field-map field-name="mainAction" value="PAYMENT_EDIT"/>
                </service>
                <set field="nowDate" value="${bsh:org.ofbiz.base.util.UtilDateTime.nowDateString(&quot;yyyy-MM-dd&quot;)}" type="String"/>
                <set field="hasPaymentEditPermission" from-field="permResult.hasPermission"/>
                 <set field="isCashierPortalScreen" value="YES"/>
                <service service-name="acctgInvoicePermissionCheck" result-map="permResult">
                    <field-map field-name="mainAction" value="PAYMENTSTATUS_CANCEL"/>
                </service>
                <set field="hasPaymentCancelPermission" value="true" type="Boolean"/><!--from-field="permResult.hasPermission"	-->
            </actions>
            <widgets>
                  <decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">
                    <include-menu location="component://byproducts/widget/ByProductsMenus.xml" name="NonRoutePaymentSubTabBar"/>
                        <section>
                            <widgets>
                               <include-screen name="NewNonRouteReceiptInner" />
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="NewNonRouteReceiptInner">
        <section>
            <actions>
                <entity-one entity-name="PartyNameView" value-field="currentOrganization" auto-field-map="false">
                    <field-map field-name="partyId" from-field="organizationPartyId"/>
                </entity-one>
            </actions>
            <widgets>
                	<section>
                  	<widgets>
                  		 <screenlet title="New  Receipt">
		               <include-form name="NewNonRouteReceipt" location="component://accounting/widget/PaymentForms.xml"/>
		                 </screenlet>
                      </widgets>
              	</section>
            </widgets>
        </section>
    </screen>
    
    <screen name="FGSProductSale">
        <section>
            <actions>
               <set field="titleProperty" value="FGS Product Sales"/>              
			   <set field="tabButtonItem" value="FGSProductSale" />	
			   <set field="tabButtonItem2" value="FGSProductSale"/>  
			    <set field="changeFlag" value="FgsSales"/>  
               <set field="priceTypeId" from-field="parameters.priceTypeId"/>
               <set field="orderStatus" from-field="parameters.orderStatus"/> 
               <set field="orderId" from-field="parameters.orderId"/>
               <set field="supplyDate" from-field="parameters.supplyDate"/>
                <set field="isFormSubmitted" from-field="parameters.isFormSubmitted"/>
               <set field="defaultEffectiveDateTime" value="${supplyDate}" default-value="${bsh:org.ofbiz.base.util.UtilDateTime.nowTimestamp()}"/>
			   <set field="defaultEffectiveDate" 
					value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(defaultEffectiveDateTime, &quot;dd MMMMM, yyyy&quot;);}" />	
				 <set field="parameters.roleTypeId" value="FGS_WHOLESALE"/>
				 <set field="productStoreResult"	value="${groovy:in.vasista.vbiz.byproducts.icp.ICPServices.getProductStoreByGroupId(delegator, 'FG_STORE')}" />
				<set field="productStoreId" value="${productStoreResult.factoryStoreId}"/>
            </actions>
            <widgets>
              <decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                      <decorator-section name="body">   
                      <include-menu name="FGSSaleTabBar" location="component://byproducts/widget/ByProductsMenus.xml"/>
                      	<section>
	                    	<condition>
	                        	<if-compare operator="equals" field="isFormSubmitted" value=""/>
	                        </condition>
                      		<widgets>
           						<include-screen name="AdhocSaleInner"/>
                      		</widgets>
                      	</section>
                      <section>
                      <condition>
                      <if-compare operator="equals" field="isFormSubmitted" value="YES"/>
                      </condition>
                          <widgets>
      						 <include-screen name="SalesInnerScreen"/>
                 		</widgets>
                      </section>
                    </decorator-section>                                       
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="IcpSales">
        <section>
            <actions>
               <set field="titleProperty" value="Ice Cream Sales"/>              
			   <set field="tabButtonItem" value="IcpSales" />	
			   <set field="tabButtonItem2" value="IcpSalesTab"/>  
			    <set field="changeFlag" value="IcpSales"/>  
               <set field="priceTypeId" from-field="parameters.priceTypeId"/>
               <set field="orderStatus" from-field="parameters.orderStatus"/> 
               <set field="orderId" from-field="parameters.orderId"/>
               <set field="orderFacility" from-field="parameters.orderFacility"/> 
               <set field="orderRoute" from-field="parameters.orderRoute"/> 
               <set field="supplyDate" from-field="parameters.supplyDate"/>
                <set field="isFormSubmitted" from-field="parameters.isFormSubmitted"/>
                <set field="productStoreResult"	value="${groovy:in.vasista.vbiz.byproducts.icp.ICPServices.getProductStoreByGroupId(delegator, 'ICECREAM_PRODUCTS')}" />
				<set field="productStoreId" value="${productStoreResult.factoryStoreId}"/>
               <set field="defaultEffectiveDateTime" value="${supplyDate}" default-value="${bsh:org.ofbiz.base.util.UtilDateTime.nowTimestamp()}"/>
			   <set field="defaultEffectiveDate" 
					value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(defaultEffectiveDateTime, &quot;dd MMMMM, yyyy&quot;);}" />	
				 <set field="parameters.roleTypeId" value="IC_WHOLESALE"/>
				 
            </actions>
            <widgets>
            	<decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                      <decorator-section name="body">   
                      <include-menu name="IcpSaleTabBar" location="component://byproducts/widget/ByProductsMenus.xml"/>
                      	<section>
	                      	  <condition>
	                             <if-compare operator="equals" field="isFormSubmitted" value=""/>
	                         </condition>
	                      		<widgets>
	           						<include-screen name="AdhocSaleInner"/>
	                      		</widgets>
                      	</section>
                      <section>
                      <condition>
                      <if-compare operator="equals" field="isFormSubmitted" value="YES"/>
                      </condition>
                                <widgets>
	           						 <include-screen name="SalesInnerScreen"/>
	                      		</widgets>
                      </section>
                    </decorator-section>                                       
                </decorator-screen>
            </widgets>
        </section>
    </screen> 
    	
    <screen name="PowderPlantSale">
        <section>
            <actions>
               <set field="titleProperty" value="Powder Product Sales"/>              
			   <set field="tabButtonItem" value="PowderPlantSale" />	
			   <set field="tabButtonItem2" value="PowderPlantSale"/>  
			    <set field="changeFlag" value="PowderSales"/>  
               <set field="priceTypeId" from-field="parameters.priceTypeId"/>
               <set field="orderStatus" from-field="parameters.orderStatus"/> 
               <set field="orderId" from-field="parameters.orderId"/>
               <set field="orderFacility" from-field="parameters.orderFacility"/> 
               <set field="orderRoute" from-field="parameters.orderRoute"/> 
               <set field="supplyDate" from-field="parameters.supplyDate"/>
                <set field="isFormSubmitted" from-field="parameters.isFormSubmitted"/>
               	<set field="defaultEffectiveDateTime" value="${supplyDate}" default-value="${bsh:org.ofbiz.base.util.UtilDateTime.nowTimestamp()}"/>
			   	<set field="defaultEffectiveDate" 
					value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(defaultEffectiveDateTime, &quot;dd MMMMM, yyyy&quot;);}" />
			   	<set field="parameters.roleTypeId" value="POWDER_CUSTOMER"/>
			   	<set field="productStoreResult"	value="${groovy:in.vasista.vbiz.byproducts.icp.ICPServices.getProductStoreByGroupId(delegator, 'POWDER_PLANT')}" />
				<set field="productStoreId" value="${productStoreResult.factoryStoreId}"/>							  					  
            </actions>
            <widgets>
              <decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                      <decorator-section name="body">   
                      <include-menu name="PowderPlantSaleTabBar" location="component://byproducts/widget/ByProductsMenus.xml"/>
                      	<section>
	                      	  <condition>
	                             <if-compare operator="equals" field="isFormSubmitted" value=""/>
	                         </condition>
	                      		<widgets>
	           						<include-screen name="AdhocSaleInner"/>
	                      		</widgets>
                      	</section>
                      <section>
                      <condition>
                      <if-compare operator="equals" field="isFormSubmitted" value="YES"/>
                      </condition>
                         <widgets>
     						 <include-screen name="SalesInnerScreen"/>
                		</widgets>
                      </section>
                      
                    </decorator-section>                                       
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
    <screen name="IcpSalesAmul">
        <section>
            <actions>
               <set field="titleProperty" value=" Amul Ice Cream Sales"/>              
			   <set field="tabButtonItem" value="IcpSalesAmul" />	
			   <set field="tabButtonItem2" value="IcpSalesAmul"/>  
			    <set field="changeFlag" value="IcpSalesAmul"/>  
               <set field="priceTypeId" from-field="parameters.priceTypeId"/>
               <set field="orderStatus" from-field="parameters.orderStatus"/> 
               <set field="orderId" from-field="parameters.orderId"/>
               <set field="orderFacility" from-field="parameters.orderFacility"/> 
               <set field="orderRoute" from-field="parameters.orderRoute"/> 
               <set field="supplyDate" from-field="parameters.supplyDate"/>
                <set field="isFormSubmitted" from-field="parameters.isFormSubmitted"/>
                  <!-- <set field="parameters.categoryTypeEnumIceCream" value="WHS_RTLR"/> -->	
               <set field="defaultEffectiveDateTime" value="${supplyDate}" default-value="${bsh:org.ofbiz.base.util.UtilDateTime.nowTimestamp()}"/>
			   <set field="defaultEffectiveDate" 
					value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(defaultEffectiveDateTime, &quot;dd MMMMM, yyyy&quot;);}" />
			   <set field="parameters.roleTypeId" value="EXCLUSIVE_CUSTOMER"/>
			   <set field="productStoreResult"	value="${groovy:in.vasista.vbiz.byproducts.icp.ICPServices.getProductStoreByGroupId(delegator, 'ICECREAM_PRODUCTS')}" />
				<set field="productStoreId" value="${productStoreResult.factoryStoreId}"/>							  					  
            </actions>
            <widgets>
              <decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                      <decorator-section name="body">   
                      <include-menu name="IcpAmulSaleTabBar" location="component://byproducts/widget/ByProductsMenus.xml"/>
                      	<section>
	                      	  <condition>
	                             <if-compare operator="equals" field="isFormSubmitted" value=""/>
	                         </condition>
	                      		<widgets>
	           						<include-screen name="AdhocSaleInner"/>
	                      		</widgets>
                      	</section>
                      <section>
                      <condition>
                      <if-compare operator="equals" field="isFormSubmitted" value="YES"/>
                      </condition>
                                <widgets>
	           						 <include-screen name="SalesInnerScreen"/>
	                      		</widgets>
                      </section>
                      
                    </decorator-section>                                       
                </decorator-screen>
            </widgets>
        </section>
    </screen> 
    <screen name="SalesInnerScreen">
        <section>
            <actions>
               <set field="changeFlag" from-field="changeFlag"/>  
               <set field="productSubscriptionTypeId" from-field="parameters.productSubscriptionTypeId"/>
               <set field="subscriptionTypeId" from-field="parameters.subscriptionTypeId"/> 
               <set field="boothId" from-field="parameters.boothId"/>
                <!-- <entity-condition entity-name="Enumeration" list="prodSubTypes" use-cache="true">
                    <condition-expr field-name="enumTypeId" value="SUB_PROD_TYPE"/>
                    <order-by field-name="sequenceId"/>
                </entity-condition> -->
                <set field="checkListType" value="indentEntry"/>
                <set field="effectiveDate" value="${parameters.effectiveDate}"/>
                 <set field="shipmentTypeId" value="${parameters.shipmentTypeId}"/>
                  <set field="priceTypeId" from-field="parameters.priceTypeId"/>
                   <set field="productCatageoryId" from-field="parameters.productCatageoryId"/>
                   <set field="vehicleId" from-field="parameters.vehicleId"/>
                <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/AdhocIndentForm.groovy"/>
              <!--   <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/recentChangeIndents.groovy"/>   -->              
               <!--  <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/indentCheckListReport.groovy"/>    -->             
            </actions>
            <widgets>
                   <section>
               	   <condition>
               			<and>                     		
          					<if-has-permission permission="BYPRODUCTS" action="_INDENT"/>
              					<not><if-empty field="booth"/></not>
               			</and>
               		</condition> 
                       	<widgets>
                       	    <platform-specific><html><html-template location="component://byproducts/webapp/byproducts/byproducts/indentAdhocSale.ftl"/></html></platform-specific>
                           </widgets>
                       <fail-widgets>
                           <platform-specific><html><html-template location="component://byproducts/webapp/byproducts/byproducts/indentAdhocSale.ftl"/></html></platform-specific>								                           
                       </fail-widgets>
                   </section>
            </widgets>
        </section>
    </screen>
    
    <screen name="ProcessFGSOrders">
        <section>
            <actions>
                <set field="titleProperty" value="PROCESS FGS Orders"/>              
			    <set field="tabButtonItem" value="FGSProductSale" />	
			   <set field="tabButtonItem2" value="ProcessFGSOrders"/>       
               <set field="headerItem" value="byProductsOrderEntry"/>
               <set field="viewSize" from-field="parameters.VIEW_SIZE"/>
               <set field="defaultEffectiveDateTime" value="${bsh:org.ofbiz.base.util.UtilDateTime.getDayStart(org.ofbiz.base.util.UtilDateTime.nowTimestamp())}"/>
			    <set field="defaultEffectiveDate" 
					value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(defaultEffectiveDateTime, &quot;dd MMMMM, yyyy&quot;);}" />
               <set field="shipmentTypeId" from-field="parameters.shipmentTypeId"/>
               <set field="salesChannelEnumId" from-field="parameters.salesChannelEnumId" />
               <set field="screenFlag" value="fgsSales"/>
               <script	location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/getIcpSalesOrder.groovy" />
            </actions>
            <widgets>
                   <decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                      <decorator-section name="body">  
                      <include-menu name="FGSSaleTabBar" location="component://byproducts/widget/ByProductsMenus.xml"/> 
                        <section>
                            <widgets>
               					<screenlet title="FGS Orders">
               						<platform-specific><html><html-template location="component://byproducts/webapp/byproducts/byproducts/ListSearchIceCreamOrders.ftl"/></html></platform-specific>
               					</screenlet>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>            
        </section>
    </screen>
    <screen name="ProcessPowderOrders">
        <section>
            <actions>
                <set field="titleProperty" value="Process Powder Orders"/>              
			    <set field="tabButtonItem" value="PowderPlantSale" />	
			   <set field="tabButtonItem2" value="ProcessPowderOrders"/>       
               <set field="headerItem" value="byProductsOrderEntry"/>
               <set field="viewSize" from-field="parameters.VIEW_SIZE"/>
               <set field="defaultEffectiveDateTime" value="${bsh:org.ofbiz.base.util.UtilDateTime.getDayStart(org.ofbiz.base.util.UtilDateTime.nowTimestamp())}"/>
			    <set field="defaultEffectiveDate" 
					value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(defaultEffectiveDateTime, &quot;dd MMMMM, yyyy&quot;);}" />
               <set field="shipmentTypeId" from-field="parameters.shipmentTypeId"/>
               <set field="salesChannelEnumId" from-field="parameters.salesChannelEnumId" />
               <set field="screenFlag" value="powderSales"/>
               <script	location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/getIcpSalesOrder.groovy" />
            </actions>
            <widgets>
                   <decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                      <decorator-section name="body">  
                      <include-menu name="PowderPlantSaleTabBar" location="component://byproducts/widget/ByProductsMenus.xml"/> 
                        <section>
                            <widgets>
               					<screenlet title="Powder Plant Orders">
               						<platform-specific><html><html-template location="component://byproducts/webapp/byproducts/byproducts/ListSearchIceCreamOrders.ftl"/></html></platform-specific>
               					</screenlet>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>            
        </section>
    </screen> 
    <screen name="ProcessNandiniOrders">
        <section>
            <actions>
                <set field="titleProperty" value="Find ICP Sales"/>              
			    <set field="tabButtonItem" value="IcpSales" />	
			   <set field="tabButtonItem2" value="ProcessNandiniOrders"/>       
               <set field="headerItem" value="byProductsOrderEntry"/>
               <set field="viewSize" from-field="parameters.VIEW_SIZE"/>
               <set field="defaultEffectiveDateTime" value="${bsh:org.ofbiz.base.util.UtilDateTime.getDayStart(org.ofbiz.base.util.UtilDateTime.nowTimestamp())}"/>
			    <set field="defaultEffectiveDate" 
					value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(defaultEffectiveDateTime, &quot;dd MMMMM, yyyy&quot;);}" />
               <set field="shipmentTypeId" from-field="parameters.shipmentTypeId"/>
               <set field="salesChannelEnumId" from-field="parameters.salesChannelEnumId" />
               <set field="screenFlag" value="icpSales"/>
               <script	location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/getIcpSalesOrder.groovy" />
            </actions>
            <widgets>
                   <decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                      <decorator-section name="body">  
                      <include-menu name="IcpSaleTabBar" location="component://byproducts/widget/ByProductsMenus.xml"/> 
                        <section>
                            <widgets>
               					<screenlet title="Ice Cream Orders">
               						<platform-specific><html><html-template location="component://byproducts/webapp/byproducts/byproducts/ListSearchIceCreamOrders.ftl"/></html></platform-specific>
               					</screenlet>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>            
        </section>
    </screen>
    <screen name="ProcessAmulOrders">
        <section>
            <actions>
                <set field="titleProperty" value="Find ICP Sales"/>              
			    <set field="tabButtonItem" value="IcpSalesAmul" />	
			   <set field="tabButtonItem2" value="ProcessAmulOrders"/>       
               <set field="headerItem" value="byProductsOrderEntry"/>
               <set field="viewSize" from-field="parameters.VIEW_SIZE"/>
               <set field="defaultEffectiveDateTime" value="${bsh:org.ofbiz.base.util.UtilDateTime.getDayStart(org.ofbiz.base.util.UtilDateTime.nowTimestamp())}"/>
			    <set field="defaultEffectiveDate" 
					value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(defaultEffectiveDateTime, &quot;dd MMMMM, yyyy&quot;);}" />
               <set field="shipmentTypeId" from-field="parameters.shipmentTypeId"/>
               <set field="salesChannelEnumId" from-field="parameters.salesChannelEnumId" />
               <set field="screenFlag" value="icpAmulSales"/>
               <script	location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/getIcpSalesOrder.groovy" />
            </actions>
            <widgets>
                   <decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                      <decorator-section name="body">  
                      <include-menu name="IcpAmulSaleTabBar" location="component://byproducts/widget/ByProductsMenus.xml"/> 
                        <section>
                            <widgets>
               					<screenlet title="Ice Cream Orders">
               						<platform-specific><html><html-template location="component://byproducts/webapp/byproducts/byproducts/ListSearchIceCreamOrders.ftl"/></html></platform-specific>
               					</screenlet>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>            
        </section>
    </screen>
     <screen name="FindIcpSalesOrder">
        <section>
            <actions>
                <set field="titleProperty" value="Find ICP Sales"/>              
			    <set field="tabButtonItem" value="IcpSales" />	
			   <set field="tabButtonItem2" value="FindIcpSalesOrder"/>       
               <set field="headerItem" value="byProductsOrderEntry"/>
               <set field="viewSize" from-field="parameters.VIEW_SIZE"/>
               <set field="targetRequest" value="FindIcpSalesOrder"/>
               <set field="ChannalType" value="ICP_NANDINI_CHANNEL"/>
            </actions>
            <widgets>
                   <decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                      <decorator-section name="body">  
                      <include-menu name="IcpSaleTabBar" location="component://byproducts/widget/ByProductsMenus.xml"/> 
                        <section>
                            <widgets>
                                <decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
                                    <decorator-section name="search-options">
                            			<include-form name="FindAdhocSalesOrder" location="component://byproducts/widget/ByProductsNgForms.xml"/>
                      				</decorator-section>
                      				<decorator-section name="search-results">
                      					<screenlet title="">
                      						<!-- <link target="parlourSalesOrders.csv" text="Export As CSV" style="buttontext create">
									  	 		<parameter param-name="orderId" from-field="parameters.orderId"/>
												<parameter param-name="hideSearch" from-field="parameters.hideSearch"/>
												<parameter param-name="orderDate" from-field="parameters.orderDate"/>
												<parameter param-name="orderType" from-field="parameters.orderType"/>
												<parameter param-name="salesChannelEnumId" from-field="parameters.salesChannelEnumId"/>
												<parameter param-name="statusId" from-field="parameters.statusId"/>
												<parameter param-name="productStoreId" from-field="parameters.productStoreId"/>
												<parameter param-name="noConditionFind" from-field="parameters.noConditionFind"/>
									  	 	</link> -->
                          					<include-form name="listAdhocSalesOrders" location="component://byproducts/widget/ByProductsNgForms.xml"/>
                      					</screenlet>
                      				</decorator-section>
                                </decorator-screen>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>            
        </section>
    </screen>
    
    <screen name="FindFGSShipment">
        <section>
            <actions>
                <set field="titleProperty" value="Find FGS Shipment"/>              
			    <set field="tabButtonItem" value="FGSProductSale" />	
			   <set field="tabButtonItem2" value="FindFGSShipment"/>       
               <set field="viewSize" from-field="parameters.VIEW_SIZE"/>
               <set field="targetRequest" value="FindFGSShipment"/>
               <set field="shipmentTypeId" value="FGS_SHIPMENT"/>
            </actions>
            <widgets>
                  <decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                      <decorator-section name="body">  
                      <include-menu name="FGSSaleTabBar" location="component://byproducts/widget/ByProductsMenus.xml"/> 
                        <section>
                            <widgets>
                                <decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
                                    <decorator-section name="search-options">
                            			<include-form name="FindICPShipment" location="component://byproducts/widget/ByProductsNgForms.xml"/>
                      				</decorator-section>
                      				<decorator-section name="search-results">
                      					<screenlet title="">
                      						<include-form name="listFGSShipments" location="component://byproducts/widget/ByProductsNgForms.xml"/>
                      					</screenlet>
                      				</decorator-section>
                                </decorator-screen>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>            
        </section>
    </screen>
    <screen name="FindPowderShipment">
        <section>
            <actions>
                <set field="titleProperty" value="Find Powder Shipment"/>              
			    <set field="tabButtonItem" value="PowderPlantSale" />	
			   <set field="tabButtonItem2" value="FindPowderShipment"/>       
               <set field="viewSize" from-field="parameters.VIEW_SIZE"/>
               <set field="targetRequest" value="FindPowderShipment"/>
               <set field="shipmentTypeId" value="POWDER_SHIPMENT"/> 
            </actions>
            <widgets>
                  <decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                      <decorator-section name="body">  
                      <include-menu name="PowderPlantSaleTabBar" location="component://byproducts/widget/ByProductsMenus.xml"/> 
                        <section>
                            <widgets>
                                <decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
                                    <decorator-section name="search-options">
                            			<include-form name="FindICPShipment" location="component://byproducts/widget/ByProductsNgForms.xml"/>
                      				</decorator-section>
                      				<decorator-section name="search-results">
                      					<screenlet title="">
                      						<include-form name="listPowderShipments" location="component://byproducts/widget/ByProductsNgForms.xml"/>
                      					</screenlet>
                      				</decorator-section>
                                </decorator-screen>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>            
        </section>
    </screen>
    <screen name="FindICPNandiniShipment">
        <section>
            <actions>
                <set field="titleProperty" value="Find ICP Shipment"/>              
			    <set field="tabButtonItem" value="IcpSales" />	
			   <set field="tabButtonItem2" value="FindICPNandiniShipment"/>       
               <set field="viewSize" from-field="parameters.VIEW_SIZE"/>
               <set field="targetRequest" value="FindICPNandiniShipment"/>
             	<set field="shipmentTypeId" value="ICP_NANDINI_SHIPMENT"/> 
            </actions>
            <widgets>
                  <decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                      <decorator-section name="body">  
                      <include-menu name="IcpSaleTabBar" location="component://byproducts/widget/ByProductsMenus.xml"/> 
                        <section>
                            <widgets>
                                <decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
                                    <decorator-section name="search-options">
                            			<include-form name="FindICPShipment" location="component://byproducts/widget/ByProductsNgForms.xml"/>
                      				</decorator-section>
                      				<decorator-section name="search-results">
                      					<screenlet title="${parameters.hideSearch}">
                      						<include-form name="listICPNandiniShipments" location="component://byproducts/widget/ByProductsNgForms.xml"/>
                      					</screenlet>
                      				</decorator-section>
                                </decorator-screen>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>            
        </section>
    </screen> 
    <screen name="FindICPAmulShipment">
        <section>
            <actions>
                <set field="titleProperty" value="Find ICP Shipment"/>              
			    <set field="tabButtonItem" value="IcpSalesAmul" />	
			   <set field="tabButtonItem2" value="FindICPAmulShipment"/>       
               <set field="viewSize" from-field="parameters.VIEW_SIZE"/>
               <set field="targetRequest" value="FindICPAmulShipment"/>
               <set field="shipmentTypeId" value="ICP_AMUL_SHIPMENT"/>
               
            </actions>
            <widgets>
                  <decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                      <decorator-section name="body">  
                      <include-menu name="IcpAmulSaleTabBar" location="component://byproducts/widget/ByProductsMenus.xml"/> 
                        <section>
                            <widgets>
                                <decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
                                    <decorator-section name="search-options">
                            			<include-form name="FindICPShipment" location="component://byproducts/widget/ByProductsNgForms.xml"/>
                      				</decorator-section>
                      				<decorator-section name="search-results">
                      					<screenlet title="">
                      						<include-form name="listICPAmulShipments" location="component://byproducts/widget/ByProductsNgForms.xml"/>
                      					</screenlet>
                      				</decorator-section>
                                </decorator-screen>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>            
        </section>
    </screen>
     <screen name="FindIcpAmulOrder">
        <section>
            <actions>
                <set field="titleProperty" value="Find ICP Sales"/>              
			    <set field="tabButtonItem" value="IcpSalesAmul" />	
			   <set field="tabButtonItem2" value="FindIcpAmulOrder"/>       
               <set field="headerItem" value="byProductsOrderEntry"/>
               <set field="viewSize" from-field="parameters.VIEW_SIZE"/>
               <set field="targetRequest" value="FindIcpAmulOrder"/>
               <set field="ChannalType" value="ICP_AMUL_CHANNEL"/>
            </actions>
            <widgets>
                   <decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                      <decorator-section name="body">  
                      <include-menu name="IcpAmulSaleTabBar" location="component://byproducts/widget/ByProductsMenus.xml"/> 
                        <section>
                            <widgets>
                                <decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
                                    <decorator-section name="search-options">
                            			<include-form name="FindAdhocSalesOrder" location="component://byproducts/widget/ByProductsNgForms.xml"/>
                      				</decorator-section>
                      				<decorator-section name="search-results">
                      					<screenlet title="">
                      						<!-- <link target="parlourSalesOrders.csv" text="Export As CSV" style="buttontext create">
									  	 		<parameter param-name="orderId" from-field="parameters.orderId"/>
												<parameter param-name="hideSearch" from-field="parameters.hideSearch"/>
												<parameter param-name="orderDate" from-field="parameters.orderDate"/>
												<parameter param-name="orderType" from-field="parameters.orderType"/>
												<parameter param-name="salesChannelEnumId" from-field="parameters.salesChannelEnumId"/>
												<parameter param-name="statusId" from-field="parameters.statusId"/>
												<parameter param-name="productStoreId" from-field="parameters.productStoreId"/>
												<parameter param-name="noConditionFind" from-field="parameters.noConditionFind"/>
									  	 	</link> -->
                          					<include-form name="listAdhocSalesOrders" location="component://byproducts/widget/ByProductsNgForms.xml"/>
                      					</screenlet>
                      				</decorator-section>
                                </decorator-screen>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>            
        </section>
    </screen> 
     <screen name="InterUnitStkTr">
        <section>
            <actions>
               <set field="titleProperty" value="Inter Unit Transfer"/>              
			   <set field="tabButtonItem" value="InterUnitStkTr" />	
			   <set field="tabButtonItem2" value="InterUnitStkTr"/>  
			    <set field="changeFlag" value="InterUnitTransferSale"/>  
               <set field="priceTypeId" from-field="parameters.priceTypeId"/>
               <set field="orderStatus" from-field="parameters.orderStatus"/> 
               <set field="orderId" from-field="parameters.orderId"/>
               <set field="orderFacility" from-field="parameters.orderFacility"/> 
               <set field="orderRoute" from-field="parameters.orderRoute"/> 
               <set field="supplyDate" from-field="parameters.supplyDate"/>
                <set field="isFormSubmitted" from-field="parameters.isFormSubmitted"/>
               <set field="defaultEffectiveDateTime" value="${supplyDate}" default-value="${bsh:org.ofbiz.base.util.UtilDateTime.nowTimestamp()}"/>
			   <set field="defaultEffectiveDate" 
					value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(defaultEffectiveDateTime, &quot;dd MMMMM, yyyy&quot;);}" />
			  <!--  <set field="parameters.roleTypeId" value="POWDER_CUSTOMER"/>	 -->
			   <set field="parameters.roleTypeId" value="UNITS"/>							  					  
            </actions>
            <widgets>
              <decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                      <decorator-section name="body">   
                      <include-menu name="InterUnitTrTabBar" location="component://byproducts/widget/ByProductsMenus.xml"/>
                      	<section>
	                      	  <condition>
	                             <if-compare operator="equals" field="isFormSubmitted" value=""/>
	                         </condition>
	                      		<widgets>
	           						<include-screen name="AdhocSaleInner"/>
	                      		</widgets>
                      	</section>
                      <section>
                      <condition>
                      <if-compare operator="equals" field="isFormSubmitted" value="YES"/>
                      </condition>
                         <widgets>
     						 <include-screen name="SalesInnerScreen"/>
                		</widgets>
                      </section>
                      
                    </decorator-section>                                       
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="ProcessInterUnitStkTr">
        <section>
            <actions>
                <set field="titleProperty" value="Inter Unit Transfer"/>              
			    <set field="tabButtonItem" value="InterUnitStkTr" />	
			   <set field="tabButtonItem2" value="ProcessInterUnitStkTr"/>       
               <set field="headerItem" value="byProductsOrderEntry"/>
               <set field="viewSize" from-field="parameters.VIEW_SIZE"/>
               <set field="defaultEffectiveDateTime" value="${bsh:org.ofbiz.base.util.UtilDateTime.getDayStart(org.ofbiz.base.util.UtilDateTime.nowTimestamp())}"/>
			    <set field="defaultEffectiveDate" 
					value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(defaultEffectiveDateTime, &quot;dd MMMMM, yyyy&quot;);}" />
               <set field="shipmentTypeId" from-field="parameters.shipmentTypeId"/>
               <set field="salesChannelEnumId" from-field="parameters.salesChannelEnumId" />
               <set field="screenFlag" value="InterUnitTransferSale"/>
               <script	location="component://byproducts/webapp/byproducts/WEB-INF/actions/facility/getIcpSalesOrder.groovy" />
            </actions>
            <widgets>
                   <decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                      <decorator-section name="body">  
                      <include-menu name="InterUnitTrTabBar" location="component://byproducts/widget/ByProductsMenus.xml"/> 
                        <section>
                            <widgets>
               					<screenlet title="Inter Unit Transfer Orders">
               						<platform-specific><html><html-template location="component://byproducts/webapp/byproducts/byproducts/ListSearchIceCreamOrders.ftl"/></html></platform-specific>
               					</screenlet>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>            
        </section>
    </screen>
     <screen name="FindStockTranferShipment">
        <section>
            <actions>
                <set field="titleProperty" value="Find Stock Transfer Shipment"/>              
			    <set field="tabButtonItem" value="InterUnitStkTr" />	
			   <set field="tabButtonItem2" value="FindStockTranferShipment"/>       
               <set field="viewSize" from-field="parameters.VIEW_SIZE"/>
               <set field="targetRequest" value="FindStockTranferShipment"/>
               <set field="shipmentTypeId" value="INTUNIT_TR_SHIPMENT"/> 
            </actions>
            <widgets>
                  <decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                      <decorator-section name="body">  
                      <include-menu name="InterUnitTrTabBar" location="component://byproducts/widget/ByProductsMenus.xml"/> 
                        <section>
                            <widgets>
                                <decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
                                    <decorator-section name="search-options">
                            			<include-form name="FindICPShipment" location="component://byproducts/widget/ByProductsNgForms.xml"/>
                      				</decorator-section>
                      				<decorator-section name="search-results">
                      					<screenlet title="Inter Unit Stock Transfrd Shipments">
                      						<include-form name="listPowderShipments" location="component://byproducts/widget/ByProductsNgForms.xml"/>
                      					</screenlet>
                      				</decorator-section>
                                </decorator-screen>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>            
        </section>
    </screen>
    
   <screen name="TimePeriod">
		<section>
			<actions>
				<set field="titleProperty" value="TimePeriod" />
				<set field="tabButtonItem" value="facilityCustomTimePeriod" />
				<set field="tabButtonItem2" value="TimePeriod" />
				<entity-condition list="TimePeriods" entity-name="CustomTimePeriod">
            	<condition-expr field-name="periodTypeId" operator="like" value="INST%"/>
               </entity-condition>
				<entity-condition list="periodTypes" entity-name="PeriodType">
            	<condition-expr field-name="periodTypeId" operator="like" value="INST%"/>
              </entity-condition>
			</actions>
			<widgets>
				<decorator-screen name="ByProductsNgCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                      <decorator-section name="body">
                       <include-menu name="CreditInstBillingTabBar" location="component://byproducts/widget/ByProductsMenus.xml"/>
              		<section>
							<widgets>
								<screenlet title="Time Periods">
									<include-form name="ListTimePeriods" location="component://byproducts/widget/ByProductsNgForms.xml" />
								</screenlet>
								<section>
									<widgets>
										<screenlet title="New Time Period">
											<include-form name="CreateTimePeriod" location="component://byproducts/widget/ByProductsNgForms.xml" />
										</screenlet>
									</widgets>
								</section>
							</widgets>
						</section>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
</screens>