<?xml version="1.0" encoding="UTF-8"?>
<screens xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="http://ofbiz.apache.org/dtds/widget-screen.xsd">

    <screen name="main">
        <section>
            <actions>
                <set field="headerItem" value="main"/><!-- this highlights the selected menu-item with name "main" -->
            </actions>
            <widgets>
                <decorator-screen name="ByProductsCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">                    	
                    	<link target="findIndentEntry">
                    		
                    		<image src="/images/aavin_products.jpg" height="400" width="700" style="center" border="2"/>
                    	</link>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="FacilityTreeNetwork">
        <section>
            <actions>
                <property-map resource="HumanResUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="titleProperty" value="Product Marketing Network"/>
         
                <set field="headerItem" value="facility"/>
                <set field="tabButtonItem" value="FacilityTreeNetwork"/>
                <!-- <set field="isTreeRoot" value="Y"/> -->
				<script location="component://byproducts/webapp/byproducts/WEB-INF/actions/facilityTreeNetwork.groovy" />
				<script location="component://byproducts/webapp/byproducts/WEB-INF/actions/RouteTreeNetwork.groovy" />
            </actions>
            <condition>
                <if-empty field="parameters.ajaxLookup"/>
            </condition> 
            <widgets>  
            	<decorator-screen name="ByProductsCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
            	 <decorator-section name="body">       
            	<container style="lefthalf">
             		<screenlet title="Zone Network">  
            			 <platform-specific><html><html-template location="component://byproducts/webapp/byproducts/byproducts/facilityTree.ftl"></html-template></html></platform-specific>
					</screenlet>
				</container>
				<container style="righthalf">
             		<screenlet title="Route Network">  
            			 <platform-specific><html><html-template location="component://byproducts/webapp/byproducts/byproducts/RouteFacilityTree.ftl"></html-template></html></platform-specific>
					</screenlet>
				</container>
				</decorator-section>
				</decorator-screen>
            </widgets>
            <fail-widgets>  
   				<platform-specific><html><html-template location="component://byproducts/webapp/byproducts/byproducts/facilityTree.ftl"></html-template></html></platform-specific>
            </fail-widgets>
        </section>
    </screen>
    <screen name="ProductWiseSalesVolumeTotals">
        <section>
            <actions>
                <set field="titleProperty" value="Analytics"/>
                <set field="tabButtonItem" value="analytics"/>
 				<set field="tabButtonItem2" value="byProductProductSalesChart" />                                           
                <set field="headerItem" value="charts"/>
				<!-- <set field="ajaxUrl" value="ProductWiseSalesVolumeTotalsInternal" type="String"/>    -->
				<script location="component://byproducts/webapp/byproducts/WEB-INF/actions/DayProdWiseSales.groovy"/>                             
            </actions>            
            <widgets>
            	<decorator-screen name="ByProductsCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">     
                        <include-menu location="component://byproducts/widget/ByProductsMenus.xml" name="ByProductsAnalyticsTabBar"/>                                                        
                        	<platform-specific> 
                            	<html><html-template location="component://byproducts/webapp/byproducts/byproducts/dayTotalsDateSelection.ftl"/></html>
                        	</platform-specific>   
                        	<platform-specific> 
                				<html><html-template location="component://byproducts/webapp/byproducts/byproducts/daySalesCharts.ftl"/></html>
                			</platform-specific>                   	               
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="ChannelWiseSalesChart">
        <section>
            <actions>
                <set field="titleProperty" value="Analytics"/>
                <set field="tabButtonItem" value="analytics"/>
 				<set field="tabButtonItem2" value="byProductChannelSalesChart" />                                           
                <set field="headerItem" value="charts"/>
				<!-- <set field="ajaxUrl" value="ProductWiseSalesVolumeTotalsInternal" type="String"/>    -->
				<set field="chartType" value="SalesMix"/>
				<script location="component://byproducts/webapp/byproducts/WEB-INF/actions/ChannelWiseSales.groovy"/>                             
            </actions>            
            <widgets>
            	<decorator-screen name="ByProductsCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">     
                        <include-menu location="component://byproducts/widget/ByProductsMenus.xml" name="ByProductsAnalyticsTabBar"/>                                                        
                        	<platform-specific> 
                            	<html><html-template location="component://byproducts/webapp/byproducts/byproducts/salesMixedTrend.ftl"/></html>
                        	</platform-specific>   
                            <platform-specific> 
                				<html><html-template location="component://byproducts/webapp/byproducts/byproducts/channelWiseSalesCharts.ftl"/></html>
                			</platform-specific>  
                			                	               
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>  
    <screen name="DailySalesRevenueTrend">
        <section>
            <actions>
                <set field="titleProperty" value="Analytics"/>
                <set field="tabButtonItem" value="analytics"/>  
 				<set field="tabButtonItem2" value="salesRevenueTrend" />                                                                                    
                <set field="headerItem" value="charts"/>
                <set field="dailySalesRevenueTrend" value="true"></set>
               <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/ChannelWiseSales.groovy"/>                                                 
            </actions>            
            <widgets>
            	<decorator-screen name="ByProductsCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">
                   	 <include-menu location="component://byproducts/widget/ByProductsMenus.xml" name="ByProductsAnalyticsTabBar"/>
                        <container>
                        	<!-- <platform-specific> 
                            	<html><html-template location="component://byproducts/webapp/byproducts/byproducts/analyticsRevenueDateSelection.ftl"/></html>
                        	</platform-specific> --> 
                        	<platform-specific> 
                            	<html><html-template location="component://byproducts/webapp/byproducts/byproducts/daySalesRevenueGraph.ftl"/></html>
                        	</platform-specific>                        
                        </container>                      
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="ParlourComparison">
        <section>
            <actions>
                <set field="titleProperty" value="Analytics"/>
                <set field="tabButtonItem" value="analytics"/>  
 				<set field="tabButtonItem2" value="parlourDespatchChart" />   
 				<set field="tabButtonItem3" value="parlourComparison" />                                                                                  
                <set field="headerItem" value="charts"/>
                <set field="parlourComparison" value="true"></set>
               <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/parlourComparison.groovy"/>                                                 
            </actions>            
            <widgets>
            	<decorator-screen name="ByProductsCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">
                   	 <include-menu location="component://byproducts/widget/ByProductsMenus.xml" name="ByProductsAnalyticsTabBar"/>
                        <container>
                        	<platform-specific> 
                            	<html><html-template location="component://byproducts/webapp/byproducts/byproducts/parlourComparisonSelection.ftl"/></html>
                        	</platform-specific>                         
                        	<platform-specific> 
                            	<html><html-template location="component://byproducts/webapp/byproducts/byproducts/parlourComparison.ftl"/></html>
                        	</platform-specific>                        
                        </container>                      
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="ParlourDespatchChart">
        <section>
            <actions>
                <set field="titleProperty" value="Analytics"/>
                <set field="tabButtonItem" value="analytics"/>  
 				<set field="tabButtonItem2" value="parlourDespatchChart" />   
 				<set field="tabButtonItem3" value="byProductParlourDespatchChart" />                                                                                  
                <set field="headerItem" value="charts"/>
                <set field="chartType" value="DespatchChart"/>
               	<script location="component://byproducts/webapp/byproducts/WEB-INF/actions/parlourDespatchChart.groovy"/>                                                 
            </actions>            
            <widgets>
            	<decorator-screen name="ByProductsCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">     
                        <include-menu location="component://byproducts/widget/ByProductsMenus.xml" name="ByProductsAnalyticsTabBar"/>  
                        <include-menu location="component://byproducts/widget/ByProductsMenus.xml" name="ByProductsAnalyticsParlourTabBar"/>                                                      
                        	<platform-specific> 
                            	<html><html-template location="component://byproducts/webapp/byproducts/byproducts/salesMixedTrend.ftl"/></html>
                        	</platform-specific>   
                        	<platform-specific> 
                				<html><html-template location="component://byproducts/webapp/byproducts/byproducts/channelWiseSalesCharts.ftl"/></html>
                			</platform-specific>   
                			                	               
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>   
     
    <screen name="ByProductsAnalytics">
        <section>
            <actions>
                <set field="titleProperty" value="OrderOrderChartsPage"/>
                <set field="tabButtonItem" value="analytics"/>
                <set field="tabButtonItem2" value="orderTrend"/>
                <set field="headerItem" value="charts"/>
                <script location="component://order/webapp/ordermgr/WEB-INF/actions/reports/CashReceivablesChart.groovy"/>                                              
            </actions>            
            <widgets>
            	<decorator-screen name="ByProductsCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">  
                    	<include-menu location="component://byproducts/widget/ByProductsMenus.xml" name="ByProductsAnalyticsTabBar"/>   
                        	<screenlet title="Order to Meet Chart">
                        		<platform-specific> 
                            		<html><html-template location="component://byproducts/webapp/byproducts/byproducts/dayTotalsDateSelection.ftl"/></html>
                        	  	</platform-specific>
                        	</screenlet>
                        	 <platform-specific> 
                            	<html><html-template location="component://order/webapp/ordermgr/order/CashReceivablesChart.ftl"/></html>
                        	</platform-specific>                 
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <!-- <screen name="FindIndentEntry">
        <section>
            <actions>
                <set field="headerItem" value="byProductsOrderEntry"/>this highlights the selected menu-item with name "main"
                <set field="titleProperty" value="ProductFacilityMain"/>               
                <set field="tabButtonItem" value="indentEntry"/>
                <entity-condition entity-name="Enumeration" list="IndentTypes">
                    <condition-list combine="or">
                        <condition-expr field-name="enumTypeId" operator="equals" value="FGS_INDENT_TYPE"/>
                    </condition-list>
                    <select-field field-name="enumId"/>
                    <order-by field-name="enumId"/>
                </entity-condition>
            </actions>
            <widgets>
                <decorator-screen name="ByProductsCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">
                    		<section>
                    			<widgets>
                    				<link target="indentEntry" style="buttontext" text="create new"/>
                    				<screenlet title="Find Indents">               				
	                    				<include-form location="component://byproducts/widget/ByProductsForms.xml" name="FindIndents"/>
	                    			</screenlet> 
	                    			<screenlet title="List Indents">  	
	                    				<include-form location="component://byproducts/widget/ByProductsForms.xml" name="ListIndents"/>
                    				</screenlet>  
                    			</widgets>
                    		</section>                 	
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen> -->
    
    <screen name="IndentEntryInit">
        <section>
            <actions>
               <set field="titleProperty" value="Indent Entry"/>	
               <set field="tabButtonItem" value="indentEntryInit"/> 
               <set field="tabButtonItem2" value="IndentEntry"/>
               <set field="supplyDate" from-field="parameters.supplyDate"/>
               <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/dateFormatter.groovy"/>
               <set field="changeFlag" value="newIndent"/>               
                <set field="defaultEffectiveDateTime" value="${supDate}" default-value="${bsh:org.ofbiz.base.util.UtilDateTime.getNextDayStart(org.ofbiz.base.util.UtilDateTime.nowTimestamp())}"/>
			    <set field="defaultEffectiveDate" 
					value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(defaultEffectiveDateTime, &quot;dd MMMMM, yyyy&quot;);}" />
				<set field="layoutSettings.javaScripts[]" value="/facility/images/changeIndentAjaxSubmit.js" global="true"/>                                	    
            </actions>
            <widgets>
                <decorator-screen name="ByProductsCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                      <decorator-section name="body">
                      <include-menu location="component://byproducts/widget/ByProductsMenus.xml" name="ByProductsIndentTabBar"/>
                      	<section>
                      		<condition>                      		
	              				<if-has-permission permission="BYPRODUCTS" action="_INDENT"/>	              					
                      		</condition>
                        	<widgets>
                            	<include-screen name="IndentEntryInitInner"/>                        
                            </widgets>
                    	</section>
                    </decorator-section>                                       
                </decorator-screen>
            </widgets>
        </section>
    </screen>	
	<screen name="IndentEntryInitInner">
         <section>
            <actions>
               <set field="titleProperty" value="Change Indent MIS"/>	
               <set field="tabButtonItem" value="ChangeIndentInit"/>
               <set field="productSubscriptionTypeId" value="${parameters.productSubscriptionTypeId}"/>
               <set field="subscriptionTypeId" from-field="parameters.subscriptionTypeId"/>
               <entity-one value-field="showBoothAutoSuggestConf" entity-name="TenantConfiguration">
               		<field-map field-name="propertyTypeEnumId" value="FACILITY_AUTOSUGGEST"/>
               		<field-map field-name="propertyName" value="showBoothAutoSuggest"/>
               		<select-field field-name="propertyValue"/>
               </entity-one>
               <set field="showBoothAutoSuggest" value="${showBoothAutoSuggestConf.propertyValue}"/>
               <set field="defaultEffectiveDateTime" value="${bsh:org.ofbiz.base.util.UtilDateTime.getNextDayStart(org.ofbiz.base.util.UtilDateTime.nowTimestamp())}"/>
			    <set field="defaultEffectiveDate" 
					value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(defaultEffectiveDateTime, &quot;dd MMMMM, yyyy&quot;);}" />               
                <entity-condition entity-name="Enumeration" list="prodSubTypes" use-cache="true">
                	<condition-list>
                    	<condition-expr field-name="enumTypeId" value="SUB_PROD_TYPE"/>
                    	<!-- <condition-expr field-name="enumId" operator="not-equals" value="CARD"/> -->
                    </condition-list>
                    <order-by field-name="sequenceId"/>
                </entity-condition>
                <set field="productList" value="${groovy:import org.ofbiz.base.util.*; return in.vasista.vbiz.byproducts.ByProductNetworkServices.getAllLmsAndByProdProducts(dispatcher.getDispatchContext(),UtilMisc.toMap());}" type="List"/>
                <script location="component://product/webapp/facility/WEB-INF/actions/facility/recentChangeIndents.groovy"/>
                <entity-condition entity-name="SubscriptionType" list="subscriptionTypeList" use-cache="true">
                	<condition-list>
                    	<condition-expr field-name="parentTypeId" value="LMS"/>                    	
                    </condition-list>                    
                </entity-condition>
            
               <set field="enableLmsPmSales" value="${groovy:session.getAttribute(&quot;enableLmsPmSales&quot;)}"/>
               <script location="component://product/webapp/facility/WEB-INF/actions/facility/enableBoothAutoComplete.groovy"/> 
               <set field="layoutSettings.javaScripts[]" value="/facility/images/changeIndentAjaxSubmit.js" global="true"/>          
               <set field="routeId" from-field="parameters.routeId"/>                       
            </actions>
            <widgets>	            
               	<section>
               		<condition>
               			<or>
          					<if-has-permission permission="INDENT" action="_ADMIN"/>
          					<if-has-permission permission="FACILITY" action="_ADMIN"/>	
                   		</or>
               		</condition>
                 	<widgets>
                         <screenlet title="${uiLabelMap.ChangeIndentMIS}">
          					<platform-specific><html><html-template location="component://byproducts/webapp/byproducts/byproducts/indentEntryNew.ftl"/></html></platform-specific>
						</screenlet>     									 
                     </widgets>
                     <fail-widgets>
						<label style="h3">${uiLabelMap.ProductFacilityViewPermissionError}
						</label>
					</fail-widgets>
             	</section>                  
            </widgets>
        </section>
    </screen>
    <screen name="IndentEntryNew">
        <section>
            <actions>
               <set field="titleProperty" value="Indent Entry"/>	
               <set field="tabButtonItem" value="indentEntryInit"/>
               <set field="tabButtonItem2" value="IndentEntry"/>
               <set field="changeFlag" value="newIndent"/>  
               <set field="productSubscriptionTypeId" from-field="parameters.productSubscriptionTypeId"/>
               <set field="subscriptionTypeId" from-field="parameters.subscriptionTypeId"/>               
               <set field="boothId" from-field="parameters.boothId"/>
               <entity-one value-field="booth" entity-name="Facility">
               		<field-map field-name="facilityId" value="${boothId}"/>
               </entity-one>
                <entity-condition entity-name="Enumeration" list="prodSubTypes" use-cache="true">
                    <condition-expr field-name="enumTypeId" value="SUB_BY_PROD_TYPE"/>
                    <order-by field-name="sequenceId"/>
                </entity-condition>
                <set field="checkListType" value="indentEntry"/>
                <set field="supplyDate" value="${parameters.supplyDate}"/>
                <set field="effectiveDate" value="${parameters.effectiveDate}"/>
                <!-- <set field="defaultEffectiveDateTime" value="${bsh:org.ofbiz.base.util.UtilDateTime.getNextDayStart(org.ofbiz.base.util.UtilDateTime.nowTimestamp())}"/>
			    <set field="defaultEffectiveDate" 
					value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(defaultEffectiveDateTime, &quot;dd MMMMM, yyyy&quot;);}" />  -->              
                <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/newIndentForm.groovy"/>
                <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/recentChangeIndents.groovy"/>                
                <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/indentCheckListReport.groovy"/>                
            </actions>
            <widgets>
                <decorator-screen name="ByProductsCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                      <decorator-section name="body">
                      <include-menu location="component://byproducts/widget/ByProductsMenus.xml" name="ByProductsIndentTabBar"/>
                        <section>
                    		<condition>
                    			<and>                     		
	              					<if-has-permission permission="BYPRODUCTS" action="_INDENT"/>
                   					<not><if-empty field="booth"/></not>
                    			</and>
                        		
                    		</condition>
                            	<widgets>
	            						<platform-specific><html><html-template location="component://byproducts/webapp/byproducts/byproducts/indentEntryNew.ftl"/></html></platform-specific>
                                    </widgets>
                            <fail-widgets>
                                <include-screen name="IndentEntryInitInner"/>								                           
                            </fail-widgets>
                        </section>
                    </decorator-section>                                       
                </decorator-screen>
            </widgets>
        </section>
    </screen>       
    <screen name="ParlourRecieptAndSalesStmt">
		<section>
			<actions>
				<property-map resource="OrderUiLabels" map-name="uiLabelMap" global="true"/>
				<property-map resource="ProductUiLabels" map-name="uiLabelMap" global="true"/>
				<property-map resource="PartyUiLabels" map-name="uiLabelMap" global="true"/>
				<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
				<set field="reportFlag" value="ParlourSales"/>
				<script	location="component://byproducts/webapp/byproducts/WEB-INF/actions/ParlourRecieptAndSalesStmt.groovy" /> 
			</actions>
			<widgets>
				<section>
					<widgets>
						<platform-specific>
							<xsl-fo>
								<html-template
									location="component://byproducts/webapp/byproducts/byproducts/ParlourRecieptAndSalesStmt.fo.ftl" />
							</xsl-fo>
						</platform-specific>
					</widgets>
				</section>
			</widgets>
		</section>
	</screen>
    

    <!-- <screen name="IndentEntry">
        <section>
            <actions>
                <set field="headerItem" value="byProductsOrderEntry"/>
                <set field="titleProperty" value="ProductFacilityMain"/>               
                <set field="tabButtonItem" value="indentEntry"/>
                <set field="indentEntryIncListSize" value="5" type="Integer"></set>
                <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/IndentEntryInc.groovy"/>                              
            </actions>
            <widgets>
                <decorator-screen name="ByProductsCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">                    	
                    		<container style="lefthalf">
                    		                  		
                    		<platform-specific> 
                    			<html><html-template location="component://byproducts/webapp/byproducts/byproducts/indentEntry.ftl"></html-template></html>
                    		</platform-specific>
                    		<include-form location="component://byproducts/widget/ByProductsForms.xml" name="IndentEntryProducts"/>	  
                    		<platform-specific>                  		                    		
                    			<html><html-template location="component://byproducts/webapp/byproducts/byproducts/addProductsForIndentEntry.ftl"></html-template></html>
                    		</platform-specific>
                    		</container>                    	
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen> -->
    <!-- <screen name="SubscriptionIndent">
        <section>
            <actions>
                <set field="headerItem" value="byProductsOrderEntry"/>
                <set field="titleProperty" value="Indent Entry"/>               
                <set field="tabButtonItem" value="indent"/>
				<set field="layoutSettings.javaScripts[]" value="/byproducts/images/subscriptionIndent.js" global="true"/>
				<script location="component://byproducts/webapp/byproducts/WEB-INF/actions/subscriptionIndent.groovy"/>
            </actions>
            <widgets>
                <decorator-screen name="ByProductsCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">
                    <section>
                    	<widgets>
                    		<container style="lefthalf">
                    			<screenlet title="Indent Entry">
                    				<include-form location="component://byproducts/widget/ByProductsForms.xml" name="subscriptionIndent"/>
                    			</screenlet>
                    			<screenlet>
                    				<platform-specific>
                            			<html><html-template location="component://byproducts/webapp/byproducts/byproducts/ScreenletMenu.ftl"/></html>
                        			</platform-specific>
                    				<include-form location="component://byproducts/widget/ByProductsForms.xml" name="listLastIndentProducts"/>
                    			</screenlet>
                    		</container>   
                    		<container style="righthalf">
                    			<screenlet title="Product Code Reference">
                    				<include-form location="component://byproducts/widget/ByProductsForms.xml" name="ProductReference"/>
                    			</screenlet>
                    		</container>
                    	</widgets>
                    </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen> -->
    <screen name="DeliveryScheduleCorrection">
        <section>
        	<condition>                      		
	          	<if-has-permission permission="BYPRODUCTS" action="_DSCORRECTION"/>	              					
            </condition>
            <actions>
                <set field="headerItem" value="byProductsDSCorrection"/>
                <set field="titleProperty" value="Delivery Schedule Correction"/>               
                <set field="tabButtonItem" value="DeliveryScheduleCorrection"/>
				<set field="layoutSettings.javaScripts[]" value="/byproducts/images/parlorIndent.js" global="true"/>
				<!-- <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/subscriptionIndent.groovy"/> -->
            </actions>
            <widgets>
                <decorator-screen name="ByProductsCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">
                    <section>
                    	<widgets>
                    		<container style="lefthalf">
                    			<screenlet title="Delivery Schedule Correction">
                    				<screenlet title="Find Entries">
                    					<include-form location="component://byproducts/widget/ByProductsForms.xml" name="DSCorrectionIndent"/>
                    				</screenlet>
                    				<screenlet title="Delivery Schedule Entry">
                    					<include-form location="component://byproducts/widget/ByProductsForms.xml" name="listDeliveryScheduleProducts"/>
                    				</screenlet>
                    			</screenlet>
                    		</container>   
                    		<!-- <container style="righthalf">
                    			<screenlet title="Product Code Reference">
                    				<include-form location="component://byproducts/widget/ByProductsForms.xml" name="ProductReference"/>
                    			</screenlet>
                    		</container> -->
                    	</widgets>
                    </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="FacilityFinHistory">
        <section>
            <actions>
                <set field="headerItem" value="byProductsOrderEntry"/>
                <set field="titleProperty" value="Fin. History"/>               
                <set field="tabButtonItem" value="Facility"/>
                <set field="subTabButtonItem4" value="FacilityFinHistory"/>
                <set field="facilityId" from-field="parameters.facilityId"/>
                <set field="partyId" from-field="parameters.partyId"/>
                <entity-one entity-name="Party" value-field="party"/>
                <entity-one entity-name="Person" value-field="lookupPerson"/>
                <entity-one entity-name="PartyGroup" value-field="lookupGroup"/>
            </actions>
            <widgets>
                <decorator-screen name="ByProductsCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">    
                    	<include-menu name="FacilitySubTabBar" location="component://byproducts/widget/ByProductsMenus.xml"/>   
                    	<section>
							<condition>
                            	<or>
                                	<not><if-empty field="lookupPerson"/></not>
                                    <not><if-empty field="lookupGroup"/></not>
                                </or>
                           </condition>
                           <widgets>
                           		<label style="h1" text="${parameters.facilityId} [${lookupPerson.personalTitle} ${lookupPerson.firstName} ${lookupPerson.middleName} ${lookupPerson.lastName} ${lookupPerson.suffix} ${lookupGroup.groupName}]"/>
                           </widgets>
                           <fail-widgets>
                           		<label style="h1" text="${uiLabelMap.PartyNewUser}"/>
                           </fail-widgets>
                        </section>                    
                        <label style="h1" text="${uiLabelMap.PartyFinancialHistory}"/>
                        <section>
                            <actions>
                                <entity-condition entity-name="InvoiceAndApplAndPayment" list="ListInvoicesApplPayments">
                                    <condition-list combine="and">
                                        <condition-list combine="or">
                                            <condition-list combine="and">
                                                <condition-expr field-name="partyId" from-field="partyId"/>
                                                <condition-expr field-name="partyIdFrom" from-field="defaultOrganizationPartyId"/>
                                            </condition-list>
                                            <condition-list combine="and">
                                                <condition-expr field-name="partyId" from-field="defaultOrganizationPartyId"/>
                                                <condition-expr field-name="partyIdFrom" from-field="partyId"/>
                                            </condition-list>
                                        </condition-list>
                                        <condition-expr field-name="statusId" operator="not-equals" value="INVOICE_IN_PROCESS"/>
                                        <condition-expr field-name="statusId" operator="not-equals" value="INVOICE_CANCELLED"/>
                                        <condition-expr field-name="statusId" operator="not-equals" value="INVOICE_WRITEOFF"/>
                                    </condition-list>
                                </entity-condition>
                            </actions>
                            <widgets>
                                <section>
                                    <condition>
                                        <not><if-empty field="ListInvoicesApplPayments"/></not>
                                    </condition>
                                    <actions>
                                        <set field="actualCurrency" value="false" type="Boolean"/>
                                        <set field="actualCurrencyUomId" from-field="defaultOrganizationPartyCurrencyUomId"/>
                                    </actions>
                                    <widgets>
                                        <screenlet title="${uiLabelMap.AccountingInvoicesApplPayments}" navigation-form-name="Invoices">
                                            <include-form name="ListInvoicesApplPayments" location="component://party/widget/partymgr/PartyForms.xml"/>
                                            <section>
                                                <condition>
                                                    <and>
                                                        <not><if-empty field="party.preferredCurrencyUomId"/></not>
                                                        <if-compare-field field="defaultOrganizationPartyCurrencyId" operator="not-equals" to-field="party.preferredCurrencyUomId"/>
                                                    </and>
                                                </condition>
                                                <actions>
                                                    <set field="actualCurrency" value="true" type="Boolean"/>
                                                    <set field="actualCurrencyUomId" from-field="party.preferredCurrencyUomId"/>
                                                </actions>
                                                <widgets>
                                                    <label style="h2" text="${uiLabelMap.PartyCurrency}"></label>
                                                    <include-form name="ListInvoicesApplPayments" location="component://party/widget/partymgr/PartyForms.xml"/>
                                                </widgets>
                                            </section>
                                        </screenlet>
                                    </widgets>
                                </section>
                            </widgets>
                        </section>
                        <section>
                            <actions>
                                <set field="actualCurrency" value="false" type="Boolean"/>
                                <set field="actualCurrencyUomId" from-field="defaultOrganizationPartyCurrencyUomId"/>
                            </actions>
                            <widgets>
                                <screenlet title="${uiLabelMap.PartyInvoicesNotApplied}" navigation-form-name="partyFinancialHistoryInvoicesN">
                                    <include-form name="ListUnAppliedInvoices" location="component://party/widget/partymgr/PartyForms.xml"/>
                                    <section>
                                        <condition>
                                            <and>
                                                <not><if-empty field="party.preferredCurrencyUomId"/></not>
                                                <if-compare-field field="defaultOrganizationPartyCurrencyUomId" operator="not-equals" to-field="party.preferredCurrencyUomId"/>
                                            </and>
                                        </condition>
                                        <actions>
                                            <set field="actualCurrency" value="true" type="Boolean"/>
                                            <set field="actualCurrencyUomId" from-field="party.preferredCurrencyUomId"/>
                                        </actions>
                                        <widgets>
                                            <label style="h2" text="${uiLabelMap.PartyCurrency}"></label>
                                            <include-form name="ListUnAppliedInvoices" location="component://party/widget/partymgr/PartyForms.xml"/>
                                        </widgets>
                                    </section>
                                </screenlet>
                            </widgets>
                        </section>
                        <section>
                            <actions>
                                <set field="actualCurrency" value="false" type="Boolean"/>
                                <set field="actualCurrencyUomId" from-field="defaultOrganizationPartyCurrencyId"/>
                            </actions>
                            <widgets>
                                <screenlet title="${uiLabelMap.PartyPaymentsNotApplied}" navigation-form-name="partyFinancialHistoryPaymentsN">
                                    <include-form name="ListUnAppliedPayments" location="component://party/widget/partymgr/PartyForms.xml"/>
                                    <section>
                                        <condition>
                                            <and>
                                                <not><if-empty field="party.preferredCurrencyUomId"/></not>
                                                <if-compare-field field="defaultOrganizationPartyCurrencyId" operator="not-equals" to-field="party.preferredCurrencyUomId"/>
                                            </and>
                                        </condition>
                                        <actions>
                                            <set field="actualCurrency" value="true" type="Boolean"/>
                                            <set field="actualCurrencyUomId" from-field="party.preferredCurrencyUomId"/>
                                        </actions>
                                        <widgets>
                                            <label style="h2" text="${uiLabelMap.PartyCurrency}"></label>
                                            <include-form name="ListUnAppliedPayments" location="component://party/widget/partymgr/PartyForms.xml"/>
                                        </widgets>
                                    </section>
                                </screenlet>
                            </widgets>
                        </section>
                        <section>
                            <actions>
                                <set field="actualCurrency" value="false" type="Boolean"/>
                                <set field="actualCurrencyUomId" from-field="defaultOrganizationPartyCurrencyUomId"/>
                            </actions>
                            <widgets>
                                <screenlet title="${uiLabelMap.PartyFinancialSummary}${defaultOrganizationPartyId}" navigation-form-name="partyFinancialSummary">
                                    <include-form name="partyFinancialSummary" location="component://party/widget/partymgr/PartyForms.xml"/>
                                    <section>
                                        <condition>
                                            <and>
                                                <not><if-empty field="party.preferredCurrencyUomId"/></not>
                                                <if-compare-field field="defaultOrganizationPartyCurrencyUomId" operator="not-equals" to-field="party.preferredCurrencyUomId"/>
                                            </and>
                                        </condition>
                                        <actions>
                                            <set field="actualCurrency" value="true" type="Boolean"/>
                                            <set field="actualCurrencyUomId" from-field="party.preferredCurrencyUomId"/>
                                        </actions>
                                        <widgets>
                                            <label style="h2" text="${uiLabelMap.PartyCurrency}"></label>
                                            <include-form name="partyFinancialSummary" location="component://party/widget/partymgr/PartyForms.xml"/>
                                        </widgets>
                                    </section>
                                </screenlet>
                            </widgets>
                        </section>
                        <section>
                            <actions>
                                <script location="component://accounting/webapp/accounting/WEB-INF/actions/payment/BillingAccounts.groovy"/>
                            </actions>
                            <widgets>
                                <screenlet title="${uiLabelMap.AccountingBillingAccount}">
                                    <include-form name="PartyBillingAccount" location="component://party/widget/partymgr/PartyForms.xml"/>
                                </screenlet>
                            </widgets>
                        </section>
                        <section>
                            <actions>
                                <script location="component://order/webapp/ordermgr/WEB-INF/actions/return/ReturnHeader.groovy"/>
                            </actions>
                            <widgets>
                                <screenlet title="${uiLabelMap.OrderOrderReturns}">
                                    <include-form name="PartyReturns" location="component://party/widget/partymgr/PartyForms.xml"/>
                                </screenlet>
                            </widgets>
                        </section>                  	
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="FindInventory">
        <section>
        	<condition>
        		<if-has-permission permission="BYPRODUCTS" action="_STOREG"/>
        	</condition>
            <actions>
                <set field="headerItem" value="byProductsOrderEntry"/><!-- this highlights the selected menu-item with name "main" -->
                <set field="titleProperty" value="ProductFacilityMain"/>               
                <set field="tabButtonItem" value="FindInventory"/>
                <set field="tabButtonItem2" value="StatusOfIndents" />  
            </actions>
            <widgets>
                <decorator-screen name="ByProductsCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">
                         <include-menu name="InventoryTabBar" location="component://byproducts/widget/ByProductsMenus.xml"/>                                                        
                        	 
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="Receipts">
        <section>
        	<condition>
        		<if-has-permission permission="BYPRODUCTS" action="_STOREG"/>
        	</condition>
            <actions>
                <set field="titleProperty" value="Find Inventory"/>
                <set field="tabButtonItem" value="FindInventory"/>
 				<set field="tabButtonItem2" value="FindInventoryDetails" />                                           
                <set field="headerItem" value="byProductsOrderEntry"/>
                <set field="productCategoryId" global="true" value="FGS_BYPROD"/>
                <set field="exprList" value="${groovy: return org.ofbiz.entity.condition.EntityCondition.makeCondition(&quot;productCategoryId&quot;, org.ofbiz.entity.condition.EntityOperator.EQUALS, productCategoryId)}"/>
            </actions>
            <widgets>
                <decorator-screen name="ByProductsCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">
                    <include-menu name="InventoryTabBar" location="component://byproducts/widget/ByProductsMenus.xml"/>
                        <section>
                            <widgets>
                                <decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
                                    <!-- <decorator-section name="menu-bar">
                                    	<section>
                                    		<widgets>
                                             <container style="button-bar">
                                            <link target="receiveInventory" text="Receive Inventory" style="buttontext create"/>
                                        </container>
                                        </widgets>
                                    </section>
                                    </decorator-section> -->
                                    <decorator-section name="search-options">
                                        <include-form name="FindReceipts" location="component://byproducts/widget/ByProductsForms.xml"/>
                                    </decorator-section>
                                    <decorator-section name="search-results">
                                        <include-form name="ListInventory" location="component://byproducts/widget/ByProductsForms.xml"/>
                                    </decorator-section>
                                </decorator-screen>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>            
        </section>
    </screen>
    <screen name="ReceiveInventory">
        <section>
        	<condition>
        		<if-has-permission permission="BYPRODUCTS" action="_STOREG"/>
        	</condition>
            <actions>
                <set field="titleProperty" value="Add Inventory"/>
                <set field="tabButtonItem" value="FindInventory"/>
 				<set field="tabButtonItem2" value="EditInventory" />                                           
                <set field="headerItem" value="byProductsOrderEntry"/>
                <script location="component://product/webapp/facility/WEB-INF/actions/inventory/ReceiveInventory.groovy"/>
                <entity-condition entity-name="Facility" list="facilityList">
                    <condition-list combine="or">
                        <condition-expr field-name="facilityTypeId" operator="equals" value="GODOWN"/>
                        <condition-expr field-name="facilityTypeId" operator="equals" value="COLD_STORAGE"/>
                        <condition-expr field-name="facilityTypeId" operator="equals" value="WAREHOUSE"/>
                        <condition-expr field-name="facilityTypeId" operator="equals" value="PLANT"/>
                    </condition-list>
                    <select-field field-name="facilityId"/>
                    <order-by field-name="facilityId"/>
                </entity-condition>
                <property-map resource="ProductUiLabels" map-name="uiLabelMap"/>
                <set field="title" value="${uiLabelMap.ProductReceiveInventory}"/>
                <set field="layoutSettings.javaScripts[+0]" value="/ordermgr/images/js/ConvertUom.js" global="true"/>
            </actions>
            <widgets>
                <decorator-screen name="ByProductsCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">
                    <include-menu name="InventoryTabBar" location="component://byproducts/widget/ByProductsMenus.xml"/>
                        <platform-specific>
                            <html><html-template location="component://byproducts/webapp/byproducts/byproducts/receiveInventory.ftl"/></html>
                        </platform-specific>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="TransferInventoryItem">
        <section>        	
        	<condition>
        		<if-has-permission permission="BYPRODUCTS" action="_STOREG"/>
        	</condition>
            <actions>
                <set field="tabButtonItem" value="FindInventory"/>
                <set field="tabButtonItem2" value="TransferInventory"/>
                <script location="component://product/webapp/facility/WEB-INF/actions/inventory/TransferInventoryItem.groovy"/>
                <set field="facilityId" from-field="parameters.facilityId" default-value="COLDCARE_WH_AT"/>
                <entity-one entity-name="Facility" value-field="facility"/>
                <property-map resource="ProductUiLabels" map-name="uiLabelMap"/>
                <set field="title" value="${uiLabelMap.PageTitleTransferInventoryItem}"/>
                <entity-condition entity-name="Facility" list="facilityList">
                    <condition-list combine="or">
                        <condition-expr field-name="facilityTypeId" operator="equals" value="GODOWN"/>
                        <condition-expr field-name="facilityTypeId" operator="equals" value="COLD_STORAGE"/>
                        <condition-expr field-name="facilityTypeId" operator="equals" value="WAREHOUSE"/>
                        <condition-expr field-name="facilityTypeId" operator="equals" value="PLANT"/>
                    </condition-list>
                    <select-field field-name="facilityId"/>
                    <order-by field-name="facilityId"/>
                </entity-condition>
                <set field="facilityList" from-field="facilityList"/>
            </actions>
            <widgets>
				<decorator-screen name="ByProductsCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">
                    <include-menu name="InventoryTabBar" location="component://byproducts/widget/ByProductsMenus.xml"/>
                        <platform-specific>
                            <html><html-template location="component://byproducts/webapp/byproducts/byproducts/TransferInventoryItem.ftl"/></html>
                        </platform-specific>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="LookupByProduct">
        <section>
            <condition>
                <if-service-permission service-name="catalogPermissionCheck" main-action="VIEW"/>
            </condition>
            <actions>
                <property-map resource="ProductUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="title" value="${uiLabelMap.PageTitleLookupProduct}"/>
                <set field="queryString" from-field="result.queryString"/>
                <set field="entityName" value="Product"/>
                <set field="searchFields" value="[productId, brandName, internalName]"/>
                <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/ConditionProductLookup.groovy"/>
            </actions>
            <widgets>
                <decorator-screen name="LookupDecorator" location="component://common/widget/CommonScreens.xml">
                    <decorator-section name="search-options">
                        <include-form name="lookupProduct" location="component://product/widget/catalog/FieldLookupForms.xml"/>
                    </decorator-section>
                    <decorator-section name="search-results">
                        <include-form name="listLookupProduct" location="component://product/widget/catalog/FieldLookupForms.xml"/>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="FindDuesToPay">
		<section>
			<actions>
				<set field="titleProperty" value="Make Payment" />
				<set field="tabButtonItem" value="FindPayments" />	
				<set field="tabButtonItem2" value="Postpaid" />
				<set field="paymentDate" value="${bsh:org.ofbiz.base.util.UtilDateTime.nowDateString(&quot;yyyy-MM-dd&quot;)}" type="String"/>
			    <set field="defaultEffectiveDate" 
					value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(org.ofbiz.base.util.UtilDateTime.nowTimestamp(), &quot;dd MMMMM, yyyy&quot;);}" /> 				
				<script	location="component://byproducts/webapp/byproducts/WEB-INF/actions/getPastDuesPayment.groovy" />	
				<set field="totalDues" from-field="PastDueInvoicestotalAmount"/>
				<set field="organizationPartyId" value="Company"/>
				<set field="partyId" from-field="parameters.partyId"/>
				<!-- <set field="facilityId" from-field="parameters.facilityId"/> -->
				<set field="facilityId" value="${groovy:parameters.facilityId.toUpperCase()}"/>
				<set field="statusId" from-field="parameters.statusId"/>
				<set field="layoutSettings.javaScripts[]" value="/accounting/images/paymentMethodType.js" global="true"/>
				<entity-condition list="paymentMethodList" entity-name="PaymentMethodType">
					<condition-list combine="or">
                		<condition-expr field-name="paymentMethodTypeId" operator="equals" value="CHEQUE_PAYIN"/>
                		<condition-expr field-name="paymentMethodTypeId" operator="equals" value="CASH_PAYIN"/>
                	</condition-list>
                 	<order-by field-name="-description"/>
           		</entity-condition>
           		<entity-condition entity-name="PaymentMethodType" list="paymentMethodType">
                	<order-by field-name="paymentMethodTypeId"/>
                </entity-condition>
			</actions>
			<widgets>
				<decorator-screen name="ByProductsCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
					<decorator-section name="body">
						<include-menu location="component://byproducts/widget/ByProductsMenus.xml" name="PaymentTabBar"/>
							<section>
								<widgets>							  
									<screenlet title="Find Payments">
										<include-form name="FindDuesPayments" location="component://byproducts/widget/ByProductsForms.xml" />
									</screenlet>
								</widgets>
							 </section>
							 <section>
							 	<condition>
							 		<if-compare operator="equals" value="NOT_PAID" field="statusId"/>
							 	</condition>
							 	<widgets>
								 	<screenlet title="Dues Payment">				
								  		<platform-specific><html>
								  			<html-template location="component://byproducts/webapp/byproducts/byproducts/DuesHistory.ftl"/>
								  		</html></platform-specific>	
								  		<platform-specific><html>
								  			<html-template location="component://byproducts/webapp/byproducts/byproducts/DuePayment.ftl"/>
								  		</html></platform-specific>							  	        		
								  	    <include-form name="ListDuesPayments" location="component://byproducts/widget/ByProductsForms.xml" />
									</screenlet>
							 	</widgets>
							 	<fail-widgets>
							 		<screenlet title="Payment Information">
							 			<!-- <platform-specific>
	                                    	<html><html-template location="component://product/webapp/facility/facility/printBoothPayments.ftl"/></html>
	                                	</platform-specific> -->
	                                	<include-form location="component://byproducts/widget/ByProductsForms.xml" name="ListPastPaymentsFromParty"/>
							 		</screenlet>
							 	</fail-widgets>
							 </section>
						</decorator-section>	
					</decorator-screen>
			</widgets>
		</section>
	</screen>
    <screen name="CreateAdvancedPayments">
		<section>
			<actions>
				<property-map resource="OrderUiLabels" map-name="uiLabelMap" global="true"/>
				<property-map resource="ProductUiLabels" map-name="uiLabelMap" global="true"/>
				<property-map resource="PartyUiLabels" map-name="uiLabelMap" global="true"/>
				<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
				<property-map resource="KkdmpcuUiLabels" map-name="uiLabelMap" global="true"/>
				<set field="tabButtonItem" value="FindPayments" />	
				<set field="tabButtonItem2" value="Prepaid" />	
				<set field="paymentDate" value="${bsh:org.ofbiz.base.util.UtilDateTime.nowDateString(&quot;yyyy-MM-dd&quot;)}" type="String"/>
			    <set field="defaultEffectiveDate" 
					value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(org.ofbiz.base.util.UtilDateTime.nowTimestamp(), &quot;dd MMMMM, yyyy&quot;);}" />
				<set field="facilityId" value="${groovy:parameters.facilityId.toUpperCase()}"/>
				<set field="statusId" from-field="parameters.statusId"/>
				<set field="layoutSettings.javaScripts[]" value="/accounting/images/paymentMethodType.js" global="true"/>
				<entity-condition list="paymentMethodList" entity-name="PaymentMethodType">
					<condition-list combine="or">
                		<condition-expr field-name="paymentMethodTypeId" operator="equals" value="CHEQUE_PAYIN"/>
                		<condition-expr field-name="paymentMethodTypeId" operator="equals" value="CASH_PAYIN"/>
                	</condition-list>
                 	<order-by field-name="-description"/>
           		</entity-condition>
                <entity-one value-field="facility" entity-name="Facility" >
                	<field-map field-name="facilityId"/>
                </entity-one>
                <set field="partyId" from-field="facility.ownerPartyId"/>
			</actions>
			<widgets>
				<decorator-screen name="ByProductsCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
					<decorator-section name="body">
					<include-menu location="component://byproducts/widget/ByProductsMenus.xml" name="PaymentTabBar"/>
						<section>
							<widgets>								
								<container style="full">
									<screenlet title="Advance Payment">
										<platform-specific><html>
								  			<html-template location="component://byproducts/webapp/byproducts/byproducts/DuePayment.ftl"/>
								  		</html></platform-specific>	
										<include-form name="CreateAdvancePayment" location="component://byproducts/widget/ByProductsForms.xml" />
									</screenlet>
									<screenlet title="Payments List">				
										<include-form name="listAdvancePayments" location="component://byproducts/widget/ByProductsForms.xml" />
									</screenlet>									
								</container>								
							</widgets>
						</section>						
					</decorator-section>	
				</decorator-screen>		
			</widgets>
		</section>
	</screen>
    <screen name="PaymentEntry">
        <section>
            <actions>
                <set field="headerItem" value="byProductsOrderEntry"/><!-- this highlights the selected menu-item with name "main" -->
                <set field="titleProperty" value="ProductFacilityMain"/>               
                <set field="tabButtonItem" value="FindPayments"/>
                <set field="indentEntryIncListSize" value="5" type="Integer"></set>
                <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/IndentEntryInc.groovy"/>                              
            </actions>
            <widgets>
                <decorator-screen name="ByProductsCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">                    	
                    		<container style="lefthalf">
                    		<platform-specific> 
                    			<html><html-template location="component://byproducts/webapp/byproducts/byproducts/indentEntry.ftl"></html-template></html>
                    		</platform-specific>                    		                    		
                    			<include-form name="IndentEntryProducts" location="component://byproducts/widget/ByProductsForms.xml"/>
                    		</container>                    	
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="CommonOrderViewDecorator">
        <section>
            <widgets>
                <decorator-screen name="main-decorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">
                        <section>
                            <widgets>
                                <decorator-section-include name="body"/>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="ByProdOrderHeaderView">
        <section>
            <actions>
                <set field="titleProperty" value="Order For Indent"/>
                <set field="headerItem" value="byProductsOrderEntry"/>
                <set field="tabButtonItem" value="parlorSales"/>
                <set field="tabButtonItem2" value="OrderOverview"/>
                <!-- <set field="tabButtonItem" value="indentEntry"/> -->
                <set field="layoutSettings.javaScripts[]" value="/ordermgr/images/js/order.js" global="true"/>
                <set field="layoutSettings.javaScripts[]" value="/ordermgr/images/js/OrderShippingInfo.js" global="true"/>
                <set field="layoutSettings.javaScripts[]" value="/ordermgr/images/js/geoAutoCompleter.js" global="true"/>
                <script location="component://order/webapp/ordermgr/WEB-INF/actions/order/OrderView.groovy"/>
                <script location="component://order/webapp/ordermgr/WEB-INF/actions/order/OrderViewWebSecure.groovy"/>
                <set field="orderId" from-field="parameters.orderId"/>
            </actions>
            <widgets>
                <decorator-screen name="ByProductsCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                
                    <decorator-section name="body">
                    	<include-menu location="component://byproducts/widget/ByProductsMenus.xml" name="ByProductsOrderTabBar"/>
                        <include-screen name="orderHeader"/>
                        <container style="clear"/>
                        <platform-specific>
                            <html><html-template location="component://byproducts/webapp/byproducts/byproducts/orderitems.ftl"/></html>
                        </platform-specific>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="orderHeader">
        <section>
            <condition>
                <not><if-empty field="orderHeader"/></not>
            </condition>
            <widgets>
                <container id="split50">
                    <container style="lefthalf">
                        <include-screen name="orderinfo"/>
                    </container>
                    <container style="righthalf">
                    	<include-screen name="orderpaymentinfo"/>
                    </container>
                </container>
            </widgets>
            <fail-widgets>
                <label style="h2" text="${uiLabelMap.OrderNoOrderFound}: [${orderId}]"></label>
            </fail-widgets>
        </section>
    </screen>
        <screen name="orderinfo">
        <section>
            <widgets>
                <platform-specific>
                    <html><html-template location="component://byproducts/webapp/byproducts/byproducts/orderinfo.ftl"/></html>
                </platform-specific>
            </widgets>
        </section>
    </screen>
    <screen name="orderpaymentinfo">
        <section>
            <widgets>
                <platform-specific>
                    <html><html-template location="component://byproducts/webapp/byproducts/byproducts/orderpaymentinfo.ftl"/></html>
                </platform-specific>
            </widgets>
        </section>
    </screen>
    
    <screen name="FindPayments">
        <section>
            <actions>
                <set field="titleProperty" value="Find Payments"/>
                <set field="headerItem" value="payments"/>
                <set field="tabButtonItem" value="FindPayments"/>
                <set field="tabButtonItem2" value="FindPayments"/>
                <service service-name="acctgInvoicePermissionCheck" result-map="permResult">
                    <field-map field-name="mainAction" value="PAYMENT_EDIT"/>
                </service>
                <set field="hasPaymentEditPermission" from-field="permResult.hasPermission"/>
            </actions>
            <widgets>
                <decorator-screen name="ByProductsCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">
                    <include-menu location="component://byproducts/widget/ByProductsMenus.xml" name="PaymentTabBar"/>
                        <section>
                            <widgets>
                                <decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
                                    <decorator-section name="menu-bar">
                                    	<section>
                                    		<condition>
                                    		<if-compare operator="equals" value="true" field="hasPaymentEditPermission"/>
                                    		</condition>
                                    		<widgets>
                                             <!-- <container style="button-bar">
                                            <link target="newPayment" text="${uiLabelMap.CommonCreateNew}" style="buttontext create"/>
                                        </container> -->
                                        </widgets>
                                    </section>
                                    </decorator-section>
                                    <decorator-section name="search-options">
                                        <include-form name="FindArPayments" location="component://byproducts/widget/ByProductsForms.xml"/>
                                    </decorator-section>
                                    <decorator-section name="search-results">
                                        <include-form name="ListPayments" location="component://byproducts/widget/ByProductsForms.xml"/>
                                    </decorator-section>
                                </decorator-screen>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="NewIncomingPayment">
       <section>
            <actions>
                <set field="titleProperty" value="AccountingNewPaymentIncoming"/>
                <set field="tabButtonItem" value="FindPayments"/>
                <service service-name="acctgInvoicePermissionCheck" result-map="permResult">
                    <field-map field-name="mainAction" value="PAYMENT_EDIT"/>
                </service>
               	<set field="layoutSettings.javaScripts[]" value="/accounting/images/paymentMethodType.js" global="true"/>
                <set field="hasPaymentEditPermission" from-field="permResult.hasPermission"/>
            </actions>
            <widgets>
               <decorator-screen name="main-decorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">
                    <include-menu location="component://byproducts/widget/ByProductsMenus.xml" name="ByProductsTabBar"/>
                        <section>
                        	<condition>
                        		<if-compare operator="equals" value="true" field="hasPaymentEditPermission"/>
                        	</condition>
                            <widgets>
                                <screenlet title="${uiLabelMap.AccountingNewPaymentIncoming}">
                                    <include-form name="NewPaymentIn" location="component://byproducts/widget/ByProductsForms.xml"/>
                                </screenlet>
                            </widgets>
                            <fail-widgets>
                            	<label style="h3" text="${uiLabelMap.newPaymentScreenError}"/>
                            </fail-widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="AddItemsFromOrder">
        <section>
            <actions>
                <set field="titleProperty" value="PageTitleAddItemsFromOrder"/>
                <set field="headerItem" value="shipment"/>
                <set field="tabButtonItem" value="indentEntry"/>
                <set field="tabButtonItem2" value="OrderShipment"/>
                <script location="component://product/webapp/facility/WEB-INF/actions/shipment/AddItemsFromOrder.groovy"/>
                <set field="primaryOrderId" from-field="parameters.primaryOrderId"/>
                <set field="shipmentId" from-field="parameters.Id"/>
            </actions>
            <widgets>
                <decorator-screen name="ByProductsCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">
                    	<include-menu location="component://byproducts/widget/ByProductsMenus.xml" name="ByProductsOrderTabBar"/>
                        <platform-specific>
                            <html><html-template location="component://byproducts/webapp/byproducts/byproducts/AddItemsFromOrder.ftl"/></html>
                        </platform-specific>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="LookupByProduct">
        <section>
            <condition>
                <if-service-permission service-name="catalogPermissionCheck" main-action="VIEW"/>
            </condition>
            <actions>
                <property-map resource="ProductUiLabels" map-name="uiLabelMap" global="true"/>
                <set field="title" value="${uiLabelMap.PageTitleLookupProduct}"/>
                <set field="queryString" from-field="result.queryString"/>
                <set field="entityName" value="Product"/>
                <set field="searchFields" value="[productId, brandName, internalName]"/>
            </actions>
            <widgets>
                <decorator-screen name="LookupDecorator" location="component://common/widget/CommonScreens.xml">
                    <decorator-section name="search-options">
                        <include-form name="lookupByProduct" location="component://byproducts/widget/ByProductsForms.xml"/>
                    </decorator-section>
                    <decorator-section name="search-results">
                        <include-form name="listLookupByProduct" location="component://byproducts/widget/ByProductsForms.xml"/>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="FindInventoryDetails">
        <section>
            <actions>
           		<set field="titleProperty" value="Inventory Details"/>
                <set field="tabButtonItem" value="FindInventory"/>
 				<set field="tabButtonItem2" value="FindInventoryDetails" />                                           
                <set field="headerItem" value="byProductsOrderEntry"/>
                 <set field="productId" from-field="parameters.productId"/>
                <set field="viewSize" from-field="parameters.VIEW_SIZE"/>
                <set field="defaultEffectiveDateTime" value="${bsh:org.ofbiz.base.util.UtilDateTime.getDayStart(org.ofbiz.base.util.UtilDateTime.nowTimestamp())}"/>
                <!-- do not use the CountFacilityInventoryByProduct.groovy script unless the issues mentioned in it are correctly addressed -->
                <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/ViewInventory.groovy"/>
              <entity-one entity-name="Facility" value-field="facility"/>
              <property-map resource="ProductUiLabels" map-name="uiLabelMap"/>
                <set field="title" value="${uiLabelMap.PageTitleFindFacilityInventoryItems}"/>
             	<entity-condition entity-name="ProductStore" list="storesList">
                	<condition-list combine="and">
                        <condition-expr field-name="inventoryFacilityId" operator="not-equals" value=""/>
                        <!-- <condition-expr field-name="productStoreId" operator="equals" value="9003"/> -->
                    </condition-list>
                    <select-field field-name="inventoryFacilityId"/>
                    <order-by field-name="productStoreId"/>
                </entity-condition>
            </actions>
            <widgets>
                <decorator-screen name="ByProductsCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">
                    	<include-menu name="InventoryTabBar" location="component://byproducts/widget/ByProductsMenus.xml"/>
                        <link target="byProdReceiveInventory" text="Receive Inventory" style="buttontext h2">
                        	<parameter param-name="receiveInventory" value="true"/>
                        </link>
                        <decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
                            <decorator-section name="search-options">
                                <include-form name="FindFacilityInventoryByProduct" location="component://byproducts/widget/ByProductsForms.xml"/>
                            </decorator-section>
                            <decorator-section name="search-results">
                                <include-form name="ListFacilityInventoryByProduct" location="component://byproducts/widget/ByProductsForms.xml"/>
                            </decorator-section>
                        </decorator-screen>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
    <screen name="StockVariance">
        <section>
            <actions>
                <set field="titleProperty" value="Stock Variance"/>
                <set field="tabButtonItem" value="FindInventory"/>
                <set field="tabButtonItem2" value="StockVariance"/>
                <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/PhysicalInventoryVariance.groovy"/>
            </actions>
            <widgets>
                <decorator-screen name="ByProductsCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">
                    <include-menu location="component://byproducts/widget/ByProductsMenus.xml" name="InventoryTabBar"/>
                       <screenlet title="Stock Variance">
                            <section>
                                <widgets>
                                    <include-form name="createVariance" location="component://byproducts/widget/ByProductsForms.xml"/>
                                    <include-form name="ViewInventoryAndVariance" location="component://byproducts/widget/ByProductsForms.xml"/>
                                </widgets>
                            </section>
                        </screenlet>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
    <screen name="ViewReceivedInventory">
        <section>
            <actions>
                <set field="titleProperty" value="Stock Moves"/>
                <set field="headerItem" value="shipment"/>
                <set field="tabButtonItem" value="FindInventory"/>
                 <set field="tabButtonItem2" value="StockMoves"/>
                 <set field="subTabButtonItem6" value="StockMovedIn"/>
                <entity-one entity-name="Facility" value-field="facility"/>
                <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/FindFacilityTransferNew.groovy"/>
                <entity-condition entity-name="Facility" list="facilityList">
                    <condition-list combine="or">
                        <condition-expr field-name="facilityTypeId" operator="equals" value="GODOWN"/>
                        <condition-expr field-name="facilityTypeId" operator="equals" value="COLD_STORAGE"/>
                        <condition-expr field-name="facilityTypeId" operator="equals" value="WAREHOUSE"/>
                        <condition-expr field-name="facilityTypeId" operator="equals" value="PLANT"/>
                    </condition-list>
                    <select-field field-name="facilityId"/>
                    <order-by field-name="facilityId"/>
                </entity-condition>
            </actions>
            <widgets>
                <decorator-screen name="ByProductsCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">
                        <include-menu name="InventoryTabBar" location="component://byproducts/widget/ByProductsMenus.xml"/>
                       <!--  <include-menu name="StockMovesSubMenu" location="component://byproducts/widget/ByProductsMenus.xml"/>  -->
                        <container style="button-bar">
							<link target="StockXfer" text="Stock Transfer" style="buttontext h3"></link>
                    	</container>
                        <screenlet title="Find Stock Movement">
                            <include-form name="FindReceivedInventory" location="component://byproducts/widget/ByProductsForms.xml"/>
                        </screenlet>
                        <screenlet title="Stock Movement">
                            <section>
                            	<widgets>
                            		<include-form name="ToFacilityTransfers" location="component://byproducts/widget/ByProductsForms.xml"/>
                            	</widgets>
                            </section> 
                        </screenlet>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>

    <screen name="FindByProdFacility">
        <section>
            <actions>
                <set field="titleProperty" value="Facilities"/>
                <set field="tabButtonItem" value="Facility"/>
 				<set field="subTabButtonItem4" value="FindFacility" />                                           
                <set field="headerItem" value="byProductsOrderEntry"/>
                <script location="component://product/webapp/facility/WEB-INF/actions/facility/FindFacility.groovy"/>                                             
            </actions>
            <widgets>
                <decorator-screen name="ByProductsCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">
                    <include-menu name="FacilitySubTabBar" location="component://byproducts/widget/ByProductsMenus.xml"/>
                        <section>
                            <widgets>
                                <decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
                                    <decorator-section name="menu-bar">
                                    	<section>
                                    		<widgets>
                                               <container style="button-bar">
                                                  <link target="EditFacility" text="${uiLabelMap.ProductCreateNewFacility}" style="buttontext">
                                                  	 <parameter param-name="showEditFacility" value="true"/>
                                                  </link>
                                                  <!-- <link target="boothMaster.csv" text="Export As CSV" style="buttontext create" /> -->		
                                               </container>
                                            </widgets>
                                    	</section>
                                    </decorator-section>
                                    <decorator-section name="search-options">
                            			<include-form name="FindFacilityOptions" location="component://byproducts/widget/ByProductsForms.xml"/>
                      				</decorator-section>
                      				<decorator-section name="search-results">
                          				<include-screen name="FacilitySearchResults"/>
                      				</decorator-section>
                                </decorator-screen>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>            
        </section>
    </screen>
    <screen name="FacilitySearchResults">
        <section>
            <condition>
                <if-service-permission service-name="facilityGenericPermission" main-action="VIEW"/>
            </condition>
            <actions>
                <property-map resource="ProductUiLabels" map-name="uiLabelMap" global="true"/>
                <property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
            </actions>
            <widgets>
                <include-form name="FindFacility" location="component://byproducts/widget/ByProductsForms.xml"/>
            </widgets>
        </section>
    </screen>
    <screen name="ReceiveInventory">
        <section>
            <actions>
                <set field="titleProperty" value="Add Inventory"/>
                <set field="tabButtonItem" value="FindInventory"/>
 				<set field="tabButtonItem2" value="FindInventoryDetails" />    
 				<set field="subTabButtonItem5" value="EditInventory" />                                       
                <set field="headerItem" value="byProductsOrderEntry"/>
                <script location="component://product/webapp/facility/WEB-INF/actions/inventory/ReceiveInventory.groovy"/>
                <entity-condition entity-name="Facility" list="facilityList">
                    <condition-list combine="or">
                        <condition-expr field-name="facilityTypeId" operator="equals" value="GODOWN"/>
                        <condition-expr field-name="facilityTypeId" operator="equals" value="COLD_STORAGE"/>
                        <condition-expr field-name="facilityTypeId" operator="equals" value="WAREHOUSE"/>
                        <condition-expr field-name="facilityTypeId" operator="equals" value="PLANT"/>
                    </condition-list>
                    <select-field field-name="facilityId"/>
                    <order-by field-name="facilityId"/>
                </entity-condition>
                <entity-condition entity-name="ProductStore" list="storesList">
                	<condition-list combine="and">
                        <condition-expr field-name="inventoryFacilityId" operator="not-equals" value=""/>
                        <!-- <condition-expr field-name="productStoreId" operator="equals" value="9003"/> -->
                    </condition-list>
                    <select-field field-name="inventoryFacilityId"/>
                    <order-by field-name="productStoreId"/>
                </entity-condition>
                <property-map resource="ProductUiLabels" map-name="uiLabelMap"/>
                <set field="title" value="${uiLabelMap.ProductReceiveInventory}"/>
                <set field="layoutSettings.javaScripts[+0]" value="/ordermgr/images/js/ConvertUom.js" global="true"/>
            </actions>
            <widgets>
                <decorator-screen name="ByProductsCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">
	                    <include-menu name="InventoryTabBar" location="component://byproducts/widget/ByProductsMenus.xml"/>
	                    <include-menu name="InventoryDetailsSubTabBar" location="component://byproducts/widget/ByProductsMenus.xml"/>
	                    <screenlet title="Receive Inventory">
	                        <platform-specific>
	                            <html><html-template location="component://byproducts/webapp/byproducts/byproducts/receiveInventory.ftl"/></html>
	                        </platform-specific>
	                    </screenlet>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="EditFacility">
        <section>
            <actions>
                <set field="titleProperty" value="Edit Facility"/>
                <set field="tabButtonItem" value="Facility" />
				<set field="subTabButtonItem4" value="EditFacility" />
                 <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/EditFacility.groovy"/>
                <!--<script location="component://byproducts/webapp/byproducts/WEB-INF/actions/FacilityInventoryListing.groovy"/> -->
                <entity-condition list="zoneList" entity-name="Facility">
                	<condition-expr field-name="facilityTypeId" operator="equals" value="ZONE"/>
                	<order-by field-name="facilityId"/>
                </entity-condition>
            </actions>
            <widgets>
                <decorator-screen name="ByProductsCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">
                    <include-menu name="FacilitySubTabBar" location="component://byproducts/widget/ByProductsMenus.xml"/>
                        <platform-specific>
                            <html><html-template location="component://byproducts/webapp/byproducts/byproducts/EditFacility.ftl"/></html>
                        </platform-specific>
                        <!-- <screenlet title="Inventory">
                           <include-form location="component://byproducts/widget/ByProductsForms.xml" name="InventoryForm"/>
                        </screenlet> -->
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="DeliverySchedule">
		<section>
			<actions>
				<set field="titleProperty" value="Delivery Schedule"/> 
				<set field="tabButtonItem" value="DeliverySchedule" />
				<set field="layoutSettings.javaScripts[]" value="/facility/images/carryRouteId.js" global="true"/> 
				<set field="tabButtonItem2" value="DeliverySchedule" />				
                <set field="viewIndex" from-field="parameters.VIEW_INDEX" type="Integer" default-value="0"/>
                <set field="viewSize" from-field="parameters.VIEW_SIZE" type="Integer" default-value="20"/>   
                <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/shipmentList.groovy"/>             
                <set field="routeList" value="${groovy:in.vasista.vbiz.byproducts.ByProductServices.getByproductRoutes(delegator).get(&quot;routesList&quot;);}" type="List"/> 
                <!-- <entity-condition list="routeList" entity-name="Facility">
                	<condition-list combine="and">
                		<condition-expr field-name="facilityTypeId" operator="equals" value="ROUTE"/>
                		<condition-expr field-name="categoryTypeEnum" operator="equals" value="BYPRODUCTS"/>
                	</condition-list>
                	<select-field field-name="facilityId"/>
                	<order-by field-name="sequenceNum"/>
                </entity-condition>	 -->
                 <entity-condition list="lmsShipTypeList" entity-name="ShipmentType">
               		<condition-expr field-name="parentTypeId" operator="equals" value="LMS_SHIPMENT"/>
               </entity-condition>			
			</actions>
			<widgets>
				<decorator-screen name="ByProductsCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
					<decorator-section name="body">
						<!-- <include-menu location="component://byproducts/widget/ByProductsMenus.xml" name="DeliveryScheduleTabBar"/> -->
						<section>
							<!-- <condition>
								<or>
									<if-has-permission permission="TRUCKSHEET" action="_ADMIN"/>
									<if-has-permission permission="FACILITY" action="_ADMIN"/>	
								</or>
							</condition> -->
							<widgets>
								<container style="button-bar">
									<platform-specific><html><html-template location="component://byproducts/webapp/byproducts/byproducts/NewDeliverySchedule.ftl"/></html></platform-specific>							  	        					
									<link url-mode="plain" target="javascript:showTruckSheetGenerateForm();" text="Generate Delivery Schedule" style="buttontext create"  link-type="anchor"/>
								</container>	
								<screenlet title="Delivery Schedule">				
									<include-form name="DeliveryScheduleList" location="component://byproducts/widget/ByProductsForms.xml" />
								</screenlet>
							</widgets>
						</section>						
					</decorator-section>	
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="SupplDeliverySchedule">
        <section>
            <actions>
               <set field="titleProperty" value="Supplementry Delivery Schedule"/>              
				<set field="tabButtonItem" value="SupplDeliverySchedule" />	 
               <set field="changeFlag" value="supplDeliverySchedule"/>       
                <set field="defaultEffectiveDateTime" value="${bsh:org.ofbiz.base.util.UtilDateTime.nowTimestamp()}"/>
			    <set field="defaultEffectiveDate" 
					value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(defaultEffectiveDateTime, &quot;dd MMMMM, yyyy&quot;);}" />					  					  
            </actions>
            <widgets>
                <decorator-screen name="ByProductsCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                      <decorator-section name="body">                       
                      	<section>
                      		<widgets>
           						<include-screen name="IndentEntryInitInner"/>
                      		</widgets>
                      	</section>
                    </decorator-section>                                       
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="SupplDeliveryScheduleNew">
        <section>
            <actions>
               <set field="titleProperty" value="Indent Entry"/>	
               <set field="tabButtonItem" value="SupplDeliverySchedule"/>
               <set field="changeFlag" value="supplDeliverySchedule"/>  
               <set field="productSubscriptionTypeId" from-field="parameters.productSubscriptionTypeId"/>
               <set field="subscriptionTypeId" from-field="parameters.subscriptionTypeId"/>               
               <set field="boothId" from-field="parameters.boothId"/>
                <entity-condition entity-name="Enumeration" list="prodSubTypes" use-cache="true">
                    <condition-expr field-name="enumTypeId" value="SUB_BY_PROD_TYPE"/>
                    <order-by field-name="sequenceId"/>
                </entity-condition>
                <set field="checkListType" value="indentEntry"/>
                <set field="effectiveDate" value="${parameters.effectiveDate}"/>
                <!-- <set field="defaultEffectiveDateTime" value="${bsh:org.ofbiz.base.util.UtilDateTime.getNextDayStart(org.ofbiz.base.util.UtilDateTime.nowTimestamp())}"/>
			    <set field="defaultEffectiveDate" 
					value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(defaultEffectiveDateTime, &quot;dd MMMMM, yyyy&quot;);}" />  -->              
                <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/newIndentForm.groovy"/>
                <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/recentChangeIndents.groovy"/>                
                <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/indentCheckListReport.groovy"/>                
            </actions>
            <widgets>
                <decorator-screen name="ByProductsCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                      <decorator-section name="body">                     
                        <section>
                    		<condition>
                    			<and>                     		
	              					<if-has-permission permission="BYPRODUCTS" action="_INDENT"/>
                   					<not><if-empty field="booth"/></not>
                    			</and>
                        		
                    		</condition>
                            	<widgets>
	            							<platform-specific><html><html-template location="component://byproducts/webapp/byproducts/byproducts/indentEntryNew.ftl"/></html></platform-specific>
                                    </widgets>
                            <fail-widgets>
                                <include-screen name="IndentEntryInitInner"/>								                           
                            </fail-widgets>
                        </section>
                    </decorator-section>                                       
                </decorator-screen>
            </widgets>
        </section>
    </screen>  	
	<screen name="DeliveryScheduleReport">
		<section>
			<actions>
				<property-map resource="OrderUiLabels" map-name="uiLabelMap" global="true"/>
				<property-map resource="ProductUiLabels" map-name="uiLabelMap" global="true"/>
				<property-map resource="PartyUiLabels" map-name="uiLabelMap" global="true"/>
				<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
				<set field="reportTypeFlag" from-field="parameters.reportTypeFlag"/>
				<set field="logoImageUrl" value="/images/apddcf_logo.gif"/>
				<script	location="component://byproducts/webapp/byproducts/WEB-INF/actions/DeliveryScheduleReport.groovy" />
			</actions>
			<widgets>
				<section>
					<condition>
						<if-compare operator="equals" value="GATE_PASS_DAIRY" field="reportTypeFlag" />
					</condition>
					<widgets>
						<platform-specific>
							<xsl-fo>
								<html-template
									location="component://byproducts/webapp/byproducts/byproducts/AavinGatePass.fo.ftl" />
							</xsl-fo>
						</platform-specific>
					</widgets>
				</section>
				<section>
					<condition>
						<if-compare operator="equals" value="GATE_PASS_UNION" field="reportTypeFlag" />
					</condition>
					<widgets>
						<platform-specific>
							<xsl-fo>
								<html-template
									location="component://byproducts/webapp/byproducts/byproducts/AavinGatePass.fo.ftl" />
							</xsl-fo>
						</platform-specific>
					</widgets>
				</section>
				<section>
					<condition>
						<if-compare operator="equals" value="CD-15_UNION" field="reportTypeFlag" />
					</condition>
					<widgets>
						<platform-specific>
							<xsl-fo>
								<html-template
									location="component://byproducts/webapp/byproducts/byproducts/GatePass.fo.ftl" />
							</xsl-fo>
						</platform-specific>
					</widgets>
				</section>
				<section>
					<condition>
						<if-compare operator="equals" value="CD-15_DAIRY" field="reportTypeFlag" />
					</condition>
					<widgets>
						<platform-specific>
							<xsl-fo>
								<html-template
									location="component://byproducts/webapp/byproducts/byproducts/GatePass.fo.ftl" />
							</xsl-fo>
						</platform-specific>
					</widgets>
				</section>
			</widgets>
		</section>
	</screen>
	<screen name="AavinGatePassReport">
	    <section>
	    	<actions>
				<property-map resource="OrderUiLabels" map-name="uiLabelMap" global="true"/>
				<property-map resource="ProductUiLabels" map-name="uiLabelMap" global="true"/>
				<property-map resource="PartyUiLabels" map-name="uiLabelMap" global="true"/>
				<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
				<set field="reportTypeFlag" from-field="parameters.reportTypeFlag"/>				
				<script	location="component://byproducts/webapp/byproducts/WEB-INF/actions/AavinGatePass.groovy" />	
			
			</actions>
			<widgets>
				<platform-specific>
					<xsl-fo>
						<html-template
							location="component://byproducts/webapp/byproducts/byproducts/AavinGatePass.fo.ftl" />
					</xsl-fo>
				</platform-specific>
			</widgets>
		</section>
	</screen>
	<screen name="InvoiceDeliveryNote">
	    <section>
	    	<actions>
				<property-map resource="OrderUiLabels" map-name="uiLabelMap" global="true"/>
				<property-map resource="ProductUiLabels" map-name="uiLabelMap" global="true"/>
				<property-map resource="PartyUiLabels" map-name="uiLabelMap" global="true"/>
				<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
				<set field="reportTypeFlag" from-field="parameters.reportTypeFlag"/>				
				<script	location="component://byproducts/webapp/byproducts/WEB-INF/actions/DeliveryScheduleReport.groovy" />	
				<!-- <script location="component://order/webapp/ordermgr/WEB-INF/actions/order/CompanyHeader.groovy"/> -->
			
			</actions>
			<widgets>
				<platform-specific>
				 	<xsl-fo>
						<html-template	location="component://byproducts/webapp/byproducts/byproducts/InvoiceOrDeliveryNote.fo.ftl" />
					</xsl-fo>
				</platform-specific>
			</widgets>
		</section>
	</screen>
	<screen name="CD15Dairy">
	    <section>
	    	<actions>
				<property-map resource="OrderUiLabels" map-name="uiLabelMap" global="true"/>
				<property-map resource="ProductUiLabels" map-name="uiLabelMap" global="true"/>
				<property-map resource="PartyUiLabels" map-name="uiLabelMap" global="true"/>
				<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
				<set field="reportTypeFlag" from-field="parameters.reportTypeFlag"/>				
				<script	location="component://byproducts/webapp/byproducts/WEB-INF/actions/DeliveryScheduleReport.groovy" />	
			</actions>
			<widgets>
				<platform-specific>
				 	<xsl-fo>
						<html-template	location="component://byproducts/webapp/byproducts/byproducts/RoutewiseIndentReport.fo.ftl" />
					</xsl-fo>
				</platform-specific>
			</widgets>
		</section>
	</screen>
	<screen name="CD15Union">
	    <section>
	    	<actions>
				<property-map resource="OrderUiLabels" map-name="uiLabelMap" global="true"/>
				<property-map resource="ProductUiLabels" map-name="uiLabelMap" global="true"/>
				<property-map resource="PartyUiLabels" map-name="uiLabelMap" global="true"/>
				<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
				<set field="reportTypeFlag" from-field="parameters.reportTypeFlag"/>				
				<script	location="component://byproducts/webapp/byproducts/WEB-INF/actions/DeliveryScheduleReport.groovy" />	
			</actions>
			<widgets>
				<platform-specific>
				 	<xsl-fo>
						<html-template	location="component://byproducts/webapp/byproducts/byproducts/RoutewiseIndentReport.fo.ftl" />
					</xsl-fo>
				</platform-specific>
			</widgets>
		</section>
	</screen>
	<screen name="ExciseInvoiceReport">
	    <section>
	    	<actions>
				<property-map resource="OrderUiLabels" map-name="uiLabelMap" global="true"/>
				<property-map resource="ProductUiLabels" map-name="uiLabelMap" global="true"/>
				<property-map resource="PartyUiLabels" map-name="uiLabelMap" global="true"/>
				<property-map resource="CommonUiLabels" map-name="uiLabelMap" global="true"/>
				<set field="reportTypeFlag" from-field="parameters.reportTypeFlag"/>
				<script	location="component://byproducts/webapp/byproducts/WEB-INF/actions/ExciseInvoiceReport.groovy" />		
			</actions>
			<widgets>
				<platform-specific>
				 	<xsl-fo>
						<html-template	location="component://byproducts/webapp/byproducts/byproducts/ExciseInvoiceReport.fo.ftl" />
					</xsl-fo>
				</platform-specific>
			</widgets>
		</section>
	</screen>
	<screen name="FindFacilityQuotaListing">
		<section>
			<actions>
               <set field="titleProperty" value="Indent History"/>	            
               <set field="tabButtonItem" value="QuotaList"/>            
                 <set field="layoutSettings.javaScripts[]" value="/byproducts/images/date.js" global="true"/>         
               <property-map resource="ProductUiLabels" map-name="uiLabelMap" global="true"/>
               <property-map resource="AccountingUiLabels" map-name="uiLabelMap" global="true"/>
               <property-map resource="OrderUiLabels" map-name="uiLabelMap" global="true"/>
			   <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/byProdQuotaListing.groovy" />		
			</actions>
			<widgets>
            	<decorator-screen name="ByProductsCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">  							  	
						<screenlet title="Indent History">
							<include-form name="FindQuotaListing" location="component://byproducts/widget/ByProductsForms.xml" />
								<platform-specific>
	                            	<html><html-template location="component://byproducts/webapp/byproducts/byproducts/byProdQuotaList.ftl"/></html>
	                            </platform-specific>
						</screenlet>								
					</decorator-section>	
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="StockXfer">
		<section>
            <actions>
                <set field="titleProperty" value="Stock Transfers"/>
                <!-- <set field="tabButtonItem" value="StockXfer"/> -->
                <set field="tabButtonItem" value="FindInventory"/>
                 <set field="tabButtonItem2" value="StockMoves"/>
                 <set field="subTabButtonItem6" value="StockTransfer"/>
                <set field="headerItem" value="request"/>
                <set field="custRequestId" from-field="parameters.custRequestId"/>
                <entity-one entity-name="CustRequest" value-field="custRequest"/>
                <set field="statusId" from-field="custRequest.statusId"/>
                <set field="custRequestTypeId" value="STOCK_XFER_REQUEST" type="String"/>
                <entity-one entity-name="StatusItem" value-field="currentStatus"/>
                <entity-one entity-name="CommunicationEvent" value-field="communicationEvent"/>
                <set field="roleTypeId" default-value="STOCKIST"/>
            </actions>
            <widgets>
                <decorator-screen name="ByProductsCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">
                    <include-menu name="InventoryTabBar" location="component://byproducts/widget/ByProductsMenus.xml"/>
                        <include-menu name="StockMovesSubMenu" location="component://byproducts/widget/ByProductsMenus.xml"/>
                       <screenlet title="Stock Transfer">
                            <section>
                                <widgets>
                                    <include-form name="StockXferForm" location="component://byproducts/widget/ByProductsForms.xml"/>
                                </widgets>
                            </section>
                        </screenlet>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
	</screen>
    <screen name="ParlorSales">
        <section>
            <actions>
                <set field="headerItem" value="byProductsOrderEntry"/>
                <set field="titleProperty" value="Parlor Sales"/>               
                <set field="tabButtonItem" value="salesOrder"/>
				<set field="layoutSettings.javaScripts[]" value="/byproducts/images/ParlorIndent.js" global="true"/>
				<!-- <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/subscriptionIndent.groovy"/> -->
            </actions>
            <widgets>
                <decorator-screen name="ByProductsCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">
                    <section>
                    	<widgets>
                    		<container style="lefthalf">
                    			<screenlet title="Indent Entry">
                    				<include-form location="component://byproducts/widget/ByProductsForms.xml" name="parlorSalesIndent"/>
                    			</screenlet>
                    			<screenlet>
                    				<!-- <platform-specific>
                            			<html><html-template location="component://byproducts/webapp/byproducts/byproducts/ScreenletMenu.ftl"/></html>
                        			</platform-specific> -->
                    				<include-form location="component://byproducts/widget/ByProductsForms.xml" name="listParlorIndentProducts"/>
                    			</screenlet>
                    		</container>   
                    	</widgets>
                    </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="FindParlorSalesOrder">
        <section>
            <actions>
               <set field="titleProperty" value="Find Parlor Sales Order"/>
               <set field="tabButtonItem" value="parlorSales"/>        
               <set field="tabButtonItem2" value="findSalesOrder"/> 
               <set field="headerItem" value="byProductsOrderEntry"/>
               <set field="viewSize" from-field="parameters.VIEW_SIZE"/>
                <!-- <script location="component://product/webapp/facility/WEB-INF/actions/facility/FindFacility.groovy"/> -->                                             
            </actions>
            <widgets>
                <decorator-screen name="ByProductsCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                    <decorator-section name="body">
                    <include-menu location="component://byproducts/widget/ByProductsMenus.xml" name="ByProductsParlorTabBar"/>
                        <section>
                            <widgets>
                                <decorator-screen name="FindScreenDecorator" location="component://common/widget/CommonScreens.xml">
                                    <decorator-section name="search-options">
                            			<include-form name="FindParlorSalesOrder" location="component://byproducts/widget/ByProductsForms.xml"/>
                      				</decorator-section>
                      				<decorator-section name="search-results">
                      					<screenlet title="">
                      						<link target="parlourSalesOrders.csv" text="Export As CSV" style="buttontext create">
									  	 		<parameter param-name="orderId" from-field="parameters.orderId"/>
												<parameter param-name="hideSearch" from-field="parameters.hideSearch"/>
												<parameter param-name="orderDate" from-field="parameters.orderDate"/>
												<parameter param-name="orderType" from-field="parameters.orderType"/>
												<parameter param-name="salesChannelEnumId" from-field="parameters.salesChannelEnumId"/>
												<parameter param-name="statusId" from-field="parameters.statusId"/>
												<parameter param-name="productStoreId" from-field="parameters.productStoreId"/>
												<parameter param-name="noConditionFind" from-field="parameters.noConditionFind"/>
									  	 	</link>
                          					<include-form name="listParlorSalesOrders" location="component://byproducts/widget/ByProductsForms.xml"/>
                      					</screenlet>
                      				</decorator-section>
                                </decorator-screen>
                            </widgets>
                        </section>
                    </decorator-section>
                </decorator-screen>
            </widgets>            
        </section>
    </screen>
	
	<screen name="ParlourSalesOrdersCSV">
		<section>
			<widgets>						
	        	<container>	
			       <include-form name="ListParlourSalesCSV" location="component://byproducts/widget/ByProductsForms.xml" />
		    	</container>
		    </widgets>								
		</section>
	</screen>
	
    <screen name="OrderEntryInit">
        <section>
            <actions>
               <set field="titleProperty" value="Parlor Sale Entry"/>	
               <set field="tabButtonItem" value="parlorSales"/>        
               <set field="tabButtonItem2" value="newSalesOrder"/>
               <set field="supplyDate" from-field="parameters.supplyDate"/>
               <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/dateFormatter.groovy"/>        
               <set field="defaultEffectiveDateTime" value="${supDate}" default-value="${bsh:org.ofbiz.base.util.UtilDateTime.getDayStart(org.ofbiz.base.util.UtilDateTime.nowTimestamp(), -1)}"/>     
			   <set field="defaultEffectiveDate" value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(defaultEffectiveDateTime, &quot;dd MMMMM, yyyy&quot;);}" />
			   <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/recentParlorIndent.groovy"/>
            </actions>
            <widgets>
                <decorator-screen name="ByProductsCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                      <decorator-section name="body">
                      <include-menu location="component://byproducts/widget/ByProductsMenus.xml" name="ByProductsParlorTabBar"/>
                      	<section>
                      		<widgets>
           						<include-screen name="OrderEntryInitInner"/>
                      		</widgets>
                      	</section>
                    </decorator-section>                                       
                </decorator-screen>
            </widgets>
        </section>
    </screen>	
	<screen name="OrderEntryInitInner">
        <section>
            <actions>
               <set field="titleProperty" value="Parlor Sale Entry"/>	
               <set field="tabButtonItem" value="parlorSales"/>        
               <set field="tabButtonItem2" value="newSalesOrder"/> 
               <set field="orderOption" from-field="parameters.orderOption"/>
			   <set field="effectiveDate" value="${parameters.effectiveDate}"/>
			   <set field="checkListType" value="parlorEntry"/>
			   <set field="supplyDate" from-field="parameters.supplyDate"/>
               <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/indentCheckListReport.groovy"/>  
            </actions>
            <widgets>	            
               	<section>
               		<!-- <condition>
               			<or>
          					<if-has-permission permission="INDENT" action="_ADMIN"/>
          					<if-has-permission permission="FACILITY" action="_ADMIN"/>	
                   		</or>
               		</condition> -->
                 	<widgets>
          					<platform-specific><html><html-template location="component://byproducts/webapp/byproducts/byproducts/OrderEntryNew.ftl"/></html></platform-specific>
                     </widgets>
                     <fail-widgets>
						<label style="h3">${uiLabelMap.ProductFacilityViewPermissionError}
						</label>
					</fail-widgets>
             	</section>                  
            </widgets>
        </section>
    </screen>
    <screen name="OrderEntryNew">
        <section>
            <actions>
               <set field="titleProperty" value="Parlor Sale Entry"/>	
               <set field="tabButtonItem" value="parlorSales"/>        
               <set field="tabButtonItem2" value="newSalesOrder"/> 
               <set field="checkListType" value="parlorEntry"/>
               <set field="boothId" from-field="parameters.boothId"/>
               <set field="orderOption" from-field="parameters.orderOption"/>
               <set field="effectiveDate" value="${parameters.effectiveDate}"/>
               <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/ParlorSalesOrder.groovy"/>
               <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/recentParlorIndent.groovy"/> 
               <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/indentCheckListReport.groovy"/> 
            </actions>
            <widgets>
                <decorator-screen name="ByProductsCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                      <decorator-section name="body">
                      <include-menu location="component://byproducts/widget/ByProductsMenus.xml" name="ByProductsParlorTabBar"/>
                      <section>
                      
                    		<condition>
                    			<and>
                    				<!-- <or>
          								<if-has-permission permission="INDENT" action="_ADMIN"/>
          								<if-has-permission permission="FACILITY" action="_ADMIN"/>	
                   					</or> -->
                   					<not><if-empty field="booth"/></not>
                    			</and>
                        		
                    		</condition>
                            	<widgets>
	            							<platform-specific><html><html-template location="component://byproducts/webapp/byproducts/byproducts/OrderEntryNew.ftl"/></html></platform-specific>
                                    </widgets>
                            <fail-widgets>
                                <include-screen name="OrderEntryInitInner"/>								                           
                            </fail-widgets>
                        </section>
                    </decorator-section>                                       
                </decorator-screen>
            </widgets>
        </section>
    </screen> 
   <screen name="DSCorrectionEntryInit">
        <section>
            <actions>
               <set field="titleProperty" value="Delivery Schedule Correction"/>	
               <set field="tabButtonItem" value="DSCorrection"/>
               <set field="screenFlag" value="DSCorrection"/> 
               <set field="supplyDate" from-field="parameters.supplyDate"/>
               <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/dateFormatter.groovy"/>
               <set field="defaultEffectiveDateTime" value="${supDate}" default-value="${bsh:org.ofbiz.base.util.UtilDateTime.getDayStart(org.ofbiz.base.util.UtilDateTime.nowTimestamp())}"/>       
                <!-- <set field="defaultEffectiveDateTime" value="${bsh:org.ofbiz.base.util.UtilDateTime.nowTimestamp()}"/> -->
			    <set field="defaultEffectiveDate" 
					value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(defaultEffectiveDateTime, &quot;dd MMMMM, yyyy&quot;);}" />
					<script location="component://byproducts/webapp/byproducts/WEB-INF/actions/recentDSCorrection.groovy"/>
            </actions>
            <widgets>
                <decorator-screen name="ByProductsCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                      <decorator-section name="body">
                      	<section>
                      		<!-- <condition>
                      			<or>
	              					<if-has-permission permission="INDENT" action="_ADMIN"/>
	              					<if-has-permission permission="FACILITY" action="_ADMIN"/>	
                    			</or>
                      		</condition> -->
                        	<widgets>
                            	<include-screen name="DSCorrectionEntryInitInner"/>                        
                            </widgets>
                    	</section>
                    </decorator-section>                                       
                </decorator-screen>
            </widgets>
        </section>
    </screen>	
	<screen name="DSCorrectionEntryInitInner">
        <section>
            <actions>
               <set field="titleProperty" value="Delivery Schedule Correction"/>	
               <set field="tabButtonItem" value="DSCorrection"/>     
                <set field="effectiveDate" value="${parameters.effectiveDate}"/>   
			   <set field="productSubscriptionTypeId" value="${parameters.productSubscriptionTypeId}"/>
               <set field="subscriptionTypeId" from-field="parameters.subscriptionTypeId"/>
               <!-- <set field="effectiveDate" value="${parameters.effectiveDate}"/> -->
              <!--  <set field="defaultEffectiveDateTime" value="${bsh:org.ofbiz.base.util.UtilDateTime.nowTimestamp()}"/>
			    <set field="defaultEffectiveDate" 
					value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(defaultEffectiveDateTime, &quot;dd MMMMM, yyyy&quot;);}" />         -->       
                <entity-condition entity-name="Enumeration" list="prodSubTypes" use-cache="true">
                	<condition-list>
                    	<condition-expr field-name="enumTypeId" value="SUB_BY_PROD_TYPE"/>
                    </condition-list>
                    <order-by field-name="sequenceId"/>
                </entity-condition>
                <entity-condition entity-name="Product" list="productList" use-cache="true">
                </entity-condition>                
                <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/recentDSCorrection.groovy"/>
                <entity-condition entity-name="SubscriptionType" list="subscriptionTypeList" use-cache="true">
                	<condition-list>
                    	<condition-expr field-name="parentTypeId" value="LMS"/>                    	
                    </condition-list>                    
                </entity-condition>
            </actions>
            <widgets>	            
               	<section>
               		<!-- <condition>
               			<or>
          					<if-has-permission permission="INDENT" action="_ADMIN"/>
          					<if-has-permission permission="FACILITY" action="_ADMIN"/>	
                   		</or>
               		</condition> -->
                 	<widgets>
          					<platform-specific><html><html-template location="component://byproducts/webapp/byproducts/byproducts/DSCorrectionEntryNew.ftl"/></html></platform-specific>
                     </widgets>
                     <fail-widgets>
						<label style="h3">${uiLabelMap.ProductFacilityViewPermissionError}
						</label>
					</fail-widgets>
             	</section>                  
            </widgets>
        </section>
    </screen>
    <screen name="DSCorrectionEntryNew">
        <section>
            <actions>
               <set field="titleProperty" value="Delivery Schedule Correction"/>	
               <set field="tabButtonItem" value="DSCorrection"/>        
               <set field="productSubscriptionTypeId" from-field="parameters.productSubscriptionTypeId"/>
               <set field="subscriptionTypeId" from-field="parameters.subscriptionTypeId"/>               
               <set field="boothId" from-field="parameters.boothId"/>
                <entity-condition entity-name="Enumeration" list="prodSubTypes" use-cache="true">
                    <condition-expr field-name="enumTypeId" value="SUB_BY_PROD_TYPE"/>
                    <order-by field-name="sequenceId"/>
                </entity-condition>
                <set field="effectiveDate" value="${parameters.effectiveDate}"/>
                <!-- <set field="defaultEffectiveDateTime" value="${bsh:org.ofbiz.base.util.UtilDateTime.nowTimestamp()}"/>
			    <set field="defaultEffectiveDate" 
					value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(defaultEffectiveDateTime, &quot;dd MMMMM, yyyy&quot;);}" />   -->             
                <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/DSCorrectionOrder.groovy"/>
                <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/recentDSCorrection.groovy"/>  
            </actions>
            <widgets>
                <decorator-screen name="ByProductsCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                      <decorator-section name="body">
                        <section>
                    		<condition>
                    			<and>
                    				<!-- <or>
          								<if-has-permission permission="INDENT" action="_ADMIN"/>
          								<if-has-permission permission="FACILITY" action="_ADMIN"/>	
                   					</or> -->
                   					<not><if-empty field="booth"/></not>
                    			</and>
                        		
                    		</condition>
                            	<widgets>
	            						<platform-specific><html><html-template location="component://byproducts/webapp/byproducts/byproducts/DSCorrectionEntryNew.ftl"/></html></platform-specific>
                                </widgets>
                            <fail-widgets>
                                <include-screen name="DSCorrectionEntryInitInner"/>								                           
                            </fail-widgets>
                        </section>
                    </decorator-section>                                       
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="IndentAdjustmentEntryInit">
        <section>
            <actions>
               <set field="titleProperty" value="Product Change"/>	
               <set field="tabButtonItem" value="indentEntryInit"/>
               <set field="tabButtonItem2" value="IndentAdjustment"/>
               <set field="changeFlag" value="IndentAdjustment"/>
               <set field="supplyDate" from-field="parameters.supplyDate"/>
               <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/dateFormatter.groovy"/>  
               <set field="defaultEffectiveDateTime" value="${supDate}" default-value="${bsh:org.ofbiz.base.util.UtilDateTime.getDayStart(org.ofbiz.base.util.UtilDateTime.nowTimestamp())}"/>
    		   <set field="defaultEffectiveDate" 
					value="${groovy:org.ofbiz.base.util.UtilDateTime.toDateString(defaultEffectiveDateTime, &quot;dd MMMMM, yyyy&quot;);}" />
				<script location="component://byproducts/webapp/byproducts/WEB-INF/actions/recentProductChange.groovy"/>
            </actions>
            <widgets>
                <decorator-screen name="ByProductsCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                      <decorator-section name="body">
                      <include-menu location="component://byproducts/widget/ByProductsMenus.xml" name="ByProductsIndentTabBar"/>
                      	<section>
                        	<widgets>
                            	<include-screen name="IndentAdjustEntryInitInner"/>                        
                            </widgets>
                    	</section>
                    </decorator-section>                                       
                </decorator-screen>
            </widgets>
        </section>
    </screen>	
	<screen name="IndentAdjustEntryInitInner">
        <section>
            <actions>
               <set field="titleProperty" value="Product Change"/>	
               <set field="tabButtonItem" value="indentEntryInit"/> 
               <set field="tabButtonItem2" value="IndentAdjustment"/>       
                <set field="changeFlag" value="IndentAdjustment"/>         
			   <set field="productSubscriptionTypeId" from-field="parameters.productSubscriptionTypeId"/>
               <set field="subscriptionTypeId" from-field="parameters.subscriptionTypeId"/>
               <set field="effectiveDate" value="${parameters.effectiveDate}"/>
               <entity-condition entity-name="Enumeration" list="prodSubTypes" use-cache="true">
                	<condition-list>
                    	<condition-expr field-name="enumTypeId" value="SUB_BY_PROD_TYPE"/>                    	
                    </condition-list>
                    <order-by field-name="sequenceId"/>
                </entity-condition>
                <entity-condition entity-name="Product" list="productList" use-cache="true">
                </entity-condition>                
                <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/recentProductChange.groovy"/>
                <entity-condition entity-name="SubscriptionType" list="subscriptionTypeList" use-cache="true">
                	<condition-list>
                    	<condition-expr field-name="parentTypeId" value="LMS"/>                    	
                    </condition-list>                    
                </entity-condition>
            </actions>
            <widgets>	            
               	<section>
               		<!-- <condition>
               			<or>
          					<if-has-permission permission="INDENT" action="_ADMIN"/>
          					<if-has-permission permission="FACILITY" action="_ADMIN"/>	
                   		</or>
               		</condition> -->
                 	<widgets>
          					<platform-specific><html><html-template location="component://byproducts/webapp/byproducts/byproducts/IndentAdjustEntryNew.ftl"/></html></platform-specific>
                     </widgets>
                     <fail-widgets>
						<label style="h3">${uiLabelMap.ProductFacilityViewPermissionError}
						</label>
					</fail-widgets>
             	</section>                  
            </widgets>
        </section>
    </screen>
    <screen name="IndentAdjustEntryNew">
        <section>
            <actions>
               <set field="titleProperty" value="Product Change"/>
               <set field="tabButtonItem" value="indentEntryInit"/>	
               <set field="tabButtonItem2" value="IndentAdjustment"/>        
                <set field="changeFlag" value="IndentAdjustment"/>         
               <set field="productSubscriptionTypeId" from-field="parameters.productSubscriptionTypeId"/>
               <set field="subscriptionTypeId" from-field="parameters.subscriptionTypeId"/>  
               <set field="screenFlag" value="IndentAdjust"/> 
               <set field="productId" from-field="parameters.productId"/>
               <set field="routeId" from-field="parameters.routeId"/>
                <entity-condition entity-name="Enumeration" list="prodSubTypes" use-cache="true">
                    <condition-expr field-name="enumTypeId" value="SUB_BY_PROD_TYPE"/>
                    <order-by field-name="sequenceId"/>
                </entity-condition>
                 <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/IndentAdjustment.groovy"/>
                <!-- <script location="component://byproducts/webapp/byproducts/WEB-INF/actions/recentDSCorrection.groovy"/>   -->
            </actions>
            <widgets>
                <decorator-screen name="ByProductsCommonDecorator" location="component://byproducts/widget/CommonScreens.xml">
                      <decorator-section name="body">
                      <include-menu location="component://byproducts/widget/ByProductsMenus.xml" name="ByProductsIndentTabBar"/>
                        <section>
                    		<condition>
                    			<and>
                    				<!-- <or>
          								<if-has-permission permission="INDENT" action="_ADMIN"/>
          								<if-has-permission permission="FACILITY" action="_ADMIN"/>	
                   					</or> -->
                   					<not><if-empty field="booth"/></not>
                    			</and>
                        		
                    		</condition>
                            	<widgets>
	            						<platform-specific><html><html-template location="component://byproducts/webapp/byproducts/byproducts/IndentAdjustEntryNew.ftl"/></html></platform-specific>
                                </widgets>
                            <fail-widgets>
                                <include-screen name="IndentAdjustEntryInitInner"/>								                           
                            </fail-widgets>
                        </section>
                    </decorator-section>                                       
                </decorator-screen>
            </widgets>
        </section>
    </screen> 
    
</screens>