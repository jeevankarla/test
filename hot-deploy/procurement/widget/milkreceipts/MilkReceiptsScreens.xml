<?xml version="1.0" encoding="UTF-8"?>
<screens xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:noNamespaceSchemaLocation="http://ofbiz.apache.org/dtds/widget-screen.xsd">

    <screen name="main">
        <section>
            <actions>
                <set field="headerItem" value="main"/><!-- this highlights the selected menu-item with name "main" -->
            </actions>
            <widgets>
                <decorator-screen name="MilkReceiptsCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
    <!-- Tanker Receipts Search Screen -->
    <screen name="FindMilkReceiptsTankerEntry">
		<section>
			<actions>
				<set field="titleProperty" value="MILK RECEIPTS" />
				<set field="headerItem" value="MILK RECEIPTS" />
				<set field="tabButtonItem" value="FindMilkReceiptEntry" />
				<set field="tabButtonItem2" value="SearchMilkReceiptsTankerEntry" />
				<set field="displayScreen" value="FINDMILKRECEIPTS"/>
				<set field="productsList" type="List" value="${groovy: import org.ofbiz.base.util.*; return (in.vasista.vbiz.procurement.ProcurementNetworkServices.getMilkReceiptProducts(dispatcher.getDispatchContext(),context)); }"/>
				<script location="component://procurement/webapp/milkreceipts/WEB-INF/actions/reports/MilkReceiptEntry.groovy"/>
				<script location="component://procurement/webapp/milkreceipts/WEB-INF/actions/reports/MilkReceiptsEntrySerach.groovy"/>
				 <set field="layoutSettings.javaScripts[]" value="/milkreceipts/images/findTransfer.js" global="true"/>
			</actions>
			<widgets>
				<decorator-screen name="MilkReceiptsCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
					<include-menu name="FindMilkReceiptsTankerTabBar" location="component://procurement/widget/milkreceipts/MilkReceiptsMenus.xml"/>
						<container style="full">
							<platform-specific><html><html-template location="component://procurement/webapp/milkreceipts/reports/findTransfer.ftl"></html-template></html></platform-specific>														
							<screenlet title="Received Milk List">
								<include-form location="component://procurement/widget/milkreceipts/MilkReceiptsForms.xml"	name="ListMilkReceived" />
							</screenlet>
						</container>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
    
    
    
    <screen name="FinalizeMilkReceipts">
        <section>
            <actions>
            	<set field="titleProperty" value="Finalize Milk Receipts"/>	
        		 <set field="tabButtonItem" value="FinalizeMilkReceipts"/>
            </actions>
            <widgets>
                <decorator-screen name="MilkReceiptsCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    <include-form location="component://procurement/widget/milkreceipts/MilkReceiptsForms.xml" name="FinalizeMilkReceipts"/> 
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="MilkReceiptFacility">
        <section>
            <actions>
            	<set field="titleProperty" value="Milk Receipt Facility"/>	
        		 <set field="tabButtonItem" value="Facility"/>
        		 <set field="tabButtonItem2" value="Facility"/>
            </actions>
            <widgets>
                <decorator-screen name="MilkReceiptsCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
					<include-menu name="MilkreceiptFacilityTabBar" location="component://procurement/widget/milkreceipts/MilkReceiptsMenus.xml"/>                    
                    <include-form location="component://procurement/widget/milkreceipts/MilkReceiptsForms.xml" name="MilkReceiptFacility"/> 
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
<screen name="reports">
        <section>
        	<actions>
        		 <set field="titleProperty" value="Milk Receipt Reports"/>	
        		 <set field="tabButtonItem" value="reports"/>
        		 <script location="component://procurement/webapp/procurement/WEB-INF/actions/facility/getUserRelatedFacilies.groovy"/>
        		  <script location="component://procurement/webapp/procurement/WEB-INF/actions/facility/FacilityCustomTimePeriods.groovy"/>
        	</actions>
            <widgets>
                 <decorator-screen name="MilkReceiptsCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<platform-specific><html><html-template location="component://procurement/webapp/procurement/facility/MilkReceiptDependentDropDown.ftl"></html-template></html></platform-specific>
                    	<platform-specific><html><html-template location="component://procurement/webapp/procurement/facility/shedSelection.ftl"></html-template></html></platform-specific> 
                		<platform-specific><html><html-template location="component://procurement/webapp/milkreceipts/reports/MilkReceiptReport.ftl"></html-template></html></platform-specific> 
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="UnitMilkReceiptReports">
        <section>
        	<actions>
        		 <set field="titleProperty" value="Milk Receipt Reports"/>	
        		 <set field="tabButtonItem" value="reports"/> 
        		 <set field="tabButtonItem3" value="UnitMilkReceiptReports"/>
        		 <script location="component://procurement/webapp/procurement/WEB-INF/actions/facility/getUserRelatedFacilies.groovy"/>
        		 <script location="component://procurement/webapp/procurement/WEB-INF/actions/facility/FacilityCustomTimePeriods.groovy"/>
        		 <set field="reportFrequencyFlag" value="UnitMilkReceiptReports"/>
        	</actions>
            <widgets>
                 <decorator-screen name="MilkReceiptsCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<include-menu name="MilkreceiptReportTabBar" location="component://procurement/widget/milkreceipts/MilkReceiptsMenus.xml"/> 
                    	<platform-specific><html><html-template location="component://procurement/webapp/procurement/facility/MilkReceiptDependentDropDown.ftl"></html-template></html></platform-specific>
                    	<platform-specific><html><html-template location="component://procurement/webapp/procurement/facility/shedSelection.ftl"></html-template></html></platform-specific> 
                		<platform-specific><html><html-template location="component://procurement/webapp/milkreceipts/reports/MilkReceiptReport.ftl"></html-template></html></platform-specific> 
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="MilkReceiptsBillingReports">
        <section>
        	<actions>
        		 <set field="titleProperty" value="Milk Receipt Reports"/>	
        		 <set field="tabButtonItem" value="reports"/> 
        		 <set field="tabButtonItem3" value="MilkReceiptsBillingReports"/>
        		 <script location="component://procurement/webapp/procurement/WEB-INF/actions/facility/getUserRelatedFacilies.groovy"/>
        		 <script location="component://procurement/webapp/procurement/WEB-INF/actions/facility/FacilityCustomTimePeriods.groovy"/>
        		  <set field="milkReceiptProductList" type="List" value="${groovy: import org.ofbiz.base.util.*; return (in.vasista.vbiz.procurement.ProcurementNetworkServices.getMilkReceiptProducts(dispatcher.getDispatchContext(),context)); }"/>
        		<set field="reportFrequencyFlag" value="BillingReports"/>
        	</actions>
            <widgets>
                 <decorator-screen name="MilkReceiptsCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<include-menu name="MilkreceiptReportTabBar" location="component://procurement/widget/milkreceipts/MilkReceiptsMenus.xml"/> 
                    	<platform-specific><html><html-template location="component://procurement/webapp/procurement/facility/ProcurementDependentDropDown.ftl"></html-template></html></platform-specific>
                    	<platform-specific><html><html-template location="component://procurement/webapp/procurement/facility/shedSelection.ftl"></html-template></html></platform-specific> 
                		<platform-specific><html><html-template location="component://procurement/webapp/milkreceipts/reports/MilkReceiptReport.ftl"></html-template></html></platform-specific> 
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="MilkReceiptEntry">
        <section>
        	<actions>
        		 <set field="titleProperty" value="MILK RECEIPTS"/>	
        		 <set field="tabButtonItem" value="MilkReceiptEntry"/>
        		 <set field="tabButtonItem3" value="SendMilkReceipt"/>
        		 <set field="displayScreen" value="MILKRECEIPTENTRY"/> 
        		 <set field="layoutSettings.javaScripts[]" value="/milkreceipts/images/milkReceiptTabing.js" global="true"/>
        		 <script location="component://procurement/webapp/procurement/WEB-INF/actions/facility/getUserRelatedFacilies.groovy"/>
        		 <script location="component://procurement/webapp/procurement/WEB-INF/actions/facility/FacilityCustomTimePeriods.groovy"/>
        		 <set field="milkReceiptProductList" type="List" value="${groovy: import org.ofbiz.base.util.*; return (in.vasista.vbiz.procurement.ProcurementNetworkServices.getMilkReceiptProducts(dispatcher.getDispatchContext(),context)); }"/>
        		 <script location="component://procurement/webapp/milkreceipts/WEB-INF/actions/reports/MilkReceiptEntry.groovy"/>
        	</actions>
            <widgets>
                 <decorator-screen name="MilkReceiptsCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<include-menu name="MilkTransferReceiptTabBar" location="component://procurement/widget/milkreceipts/MilkReceiptsMenus.xml"/>
                    	<platform-specific><html><html-template location="component://procurement/webapp/milkreceipts/reports/milkReceiptEntry.ftl"></html-template></html></platform-specific> 
                    	<!-- <include-form location="component://procurement/widget/milkreceipts/MilkReceiptsForms.xml" name="MilkReceiptEntry"/> -->
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="UpdateMilkRecord">
        <section>
        	<actions>
        		 <set field="titleProperty" value="MILK RECEIPTS"/>	
        		 <set field="tabButtonItem" value="FindMilkReceiptEntry"/>
        		 <set field="tabButtonItem2" value="UpdateMilkReceipts"/> 
        		 <set field="milkTransferId" from-field="parameters.milkTransferId"/>
        		 <set field="displayScreen" value="UPDATEMILKRECORD"/>
        		 <set field="layoutSettings.javaScripts[]" value="/milkreceipts/images/milkReceiptTabing.js" global="true"/>
        		 <set field="milkReceiptProductList" type="List" value="${groovy: import org.ofbiz.base.util.*; return (in.vasista.vbiz.procurement.ProcurementNetworkServices.getMilkReceiptProducts(dispatcher.getDispatchContext(),context)); }"/>
        		<script location="component://procurement/webapp/milkreceipts/WEB-INF/actions/reports/MilkReceiptEntry.groovy"/>
				<script location="component://procurement/webapp/milkreceipts/WEB-INF/actions/reports/MilkReceiptsEntrySerach.groovy"/>
        		 <script location="component://procurement/webapp/milkreceipts/WEB-INF/actions/facility/PrepareMilkReceiptItems.groovy"/>
        	</actions>
            <widgets>
                 <decorator-screen name="MilkReceiptsCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<include-menu name="FindMilkReceiptsTankerTabBar" location="component://procurement/widget/milkreceipts/MilkReceiptsMenus.xml"/>
                    	<platform-specific><html><html-template location="component://procurement/webapp/milkreceipts/facility/updateMilkReceiptEntry.ftl"></html-template></html></platform-specific> 
                    	<!-- <include-form location="component://procurement/widget/milkreceipts/MilkReceiptsForms.xml" name="MilkReceiptEntry"/> -->
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="approveMilkReceipt">
        <section>
            <actions>
                <set field="titleProperty" value="MILK RECEIPTS"/>
                <set field="headerItem" value="MILK RECEIPTS"/>
                <set field="tabButtonItem" value="MilkReceiptEntry" />
                <set field="tabButtonItem3" value="RecdMilkReceipt" />
                <set field="milkTransferId" from-field="parameters.milkTransferId"/>
                <entity-one value-field="milkRecordList" entity-name="MilkTransfer">
                    <field-map field-name="milkTransferId" from-field="milkTransferId"/>
                </entity-one>
                <set field="receiveDate" value="${milkRecordList.sendDate}" />
                <set field="layoutSettings.javaScripts[]" value="/milkreceipts/images/milkTypeChange.js" global="true"/>
                <set field="milkReceiptProductList" type="List" value="${groovy: import org.ofbiz.base.util.*; return (in.vasista.vbiz.procurement.ProcurementNetworkServices.getMilkReceiptProducts(dispatcher.getDispatchContext(),context)); }"/>
                <script location="component://procurement/webapp/milkreceipts/WEB-INF/actions/facility/getSendMilkReceiptsDetails.groovy"/>
            </actions>
            <widgets>
                <decorator-screen name="MilkReceiptsCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                       <include-menu name="MilkTransferReceiptTabBar" location="component://procurement/widget/milkreceipts/MilkReceiptsMenus.xml"/>
                       		<platform-specific><html><html-template location="component://procurement/webapp/milkreceipts/reports/MilkReceiptEntryApprove.ftl"></html-template></html></platform-specific> 
                        <!-- <container style="lefthalf">
                           <screenlet title="Send Milk Receipts">
                                <include-form location="component://procurement/widget/milkreceipts/MilkReceiptsForms.xml" name="SendMilkReceiptsDisplay"/>
                           </screenlet>
                        </container>
                        <container style="righthalf">
                        	<screenlet title="Received Milk Receipts">
                                <include-form location="component://procurement/widget/milkreceipts/MilkReceiptsForms.xml" name="UpdateMilkReceiptEntry"/>                          
                           </screenlet>
                        </container>  -->
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>   
    <screen name="ReceiveMilkReceipts">
        <section>
            <actions>
                <set field="titleProperty" value="MILK RECEIPTS"/>
                <set field="headerItem" value="MilkReceiptEntry"/>
                <set field="tabButtonItem" value="MilkReceiptEntry" />
                <set field="tabButtonItem3" value="RecdMilkReceipt" />
                <entity-condition list="listReceivedMilk" entity-name="MilkTransfer">
                    <condition-expr field-name="statusId" value="MXF_INPROCESS"/>
                </entity-condition>
                <script location="component://procurement/webapp/procurement/WEB-INF/actions/facility/getUserRelatedFacilies.groovy"/>
                <!-- <set field="context.listReceivedMilk" from-field="listReceivedMilk"/> -->
                <script location="component://procurement/webapp/procurement/WEB-INF/actions/facility/filterMilkTransfersReceived.groovy"/>
                <set field="productsList" type="List" value="${groovy: import org.ofbiz.base.util.*; return (in.vasista.vbiz.procurement.ProcurementNetworkServices.getMilkReceiptProducts(dispatcher.getDispatchContext(),context)); }"/>
            </actions>
            <widgets>
                <decorator-screen name="MilkReceiptsCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                       <include-menu name="MilkTransferReceiptTabBar" location="component://procurement/widget/milkreceipts/MilkReceiptsMenus.xml"/>
                       <section>
                        <condition>
                            <not><if-empty field="listReceivedMilk"/></not>
                        </condition>
                           <widgets>
	                         <container style="full">
	                           <screenlet title="Received Milk List">
	                                <include-form location="component://procurement/widget/milkreceipts/MilkReceiptsForms.xml" name="ListReceivedMilkReceipt"/>                          
	                           </screenlet>
	                         </container>
	                       </widgets>
	                       <fail-widgets>
	                           <label text=" No Milk is sent yet"></label>
	                       </fail-widgets>   
                        </section>                       
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen> 
    <screen name="FindMilkReceipt">
		<section>
			<actions>
				<set field="titleProperty" value="MILK RECEIPTS" />
				<set field="headerItem" value="MILK RECEIPTS" />
				<set field="tabButtonItem" value="MilkReceiptEntry" />
				<set field="tabButtonItem3" value="FindMilkReceipt" />
				<set field="displayScreen" value=" "/>
				<set field="productsList" type="List" value="${groovy: import org.ofbiz.base.util.*; return (in.vasista.vbiz.procurement.ProcurementNetworkServices.getMilkReceiptProducts(dispatcher.getDispatchContext(),context)); }"/>
				<script location="component://procurement/webapp/milkreceipts/WEB-INF/actions/reports/MilkReceiptEntry.groovy"/>
				<script location="component://procurement/webapp/milkreceipts/WEB-INF/actions/reports/MilkReceiptsEntrySerach.groovy"/>
				 <set field="layoutSettings.javaScripts[]" value="/milkreceipts/images/findTransfer.js" global="true"/>
			</actions>
			<widgets>
				<decorator-screen name="MilkReceiptsCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
                       <include-menu name="MilkTransferReceiptTabBar" location="component://procurement/widget/milkreceipts/MilkReceiptsMenus.xml"/>
						<platform-specific><html><html-template location="component://procurement/webapp/milkreceipts/reports/facilityDetails.ftl"></html-template></html></platform-specific> 
                    	<container style="button-bar">
							<link url-mode="plain" target="javascript:showFacilityDetailsForm();" text="Facility Details" style="buttontext create"  link-type="anchor"/>
						</container>
						<container style="full">
							<platform-specific><html><html-template location="component://procurement/webapp/milkreceipts/reports/findTransfer.ftl"></html-template></html></platform-specific>														
							<screenlet title="Received Milk List">
								<include-form location="component://procurement/widget/milkreceipts/MilkReceiptsForms.xml"	name="ListMilkReceived" />
							</screenlet>
						</container>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
     <screen name="ShedMilkReceiptReports">
        <section>
        	<actions>
        		 <set field="titleProperty" value="Milk Receipt Reports"/>	
        		 <set field="tabButtonItem" value="reports"/> 
        		 <set field="tabButtonItem3" value="ShedMilkReceiptReports"/>
        		 <script location="component://procurement/webapp/procurement/WEB-INF/actions/facility/getUserRelatedFacilies.groovy"/>
        		 <script location="component://procurement/webapp/procurement/WEB-INF/actions/facility/FacilityCustomTimePeriods.groovy"/>
        		 <set field="milkReceiptProductList" type="List" value="${groovy: import org.ofbiz.base.util.*; return (in.vasista.vbiz.procurement.ProcurementNetworkServices.getMilkReceiptProducts(dispatcher.getDispatchContext(),context)); }"/>
        		<set field="reportFrequencyFlag" value="ShedMilkReceiptReports"/>
        	</actions>
            <widgets>
                 <decorator-screen name="MilkReceiptsCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<include-menu name="MilkreceiptReportTabBar" location="component://procurement/widget/milkreceipts/MilkReceiptsMenus.xml"/> 
                    	<platform-specific><html><html-template location="component://procurement/webapp/procurement/facility/MilkReceiptDependentDropDown.ftl"></html-template></html></platform-specific>
                    	<platform-specific><html><html-template location="component://procurement/webapp/procurement/facility/shedSelection.ftl"></html-template></html></platform-specific> 
                		<platform-specific><html><html-template location="component://procurement/webapp/milkreceipts/reports/MilkReceiptReport.ftl"></html-template></html></platform-specific> 
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="ShiftWiseReport">
        <section>
        	<actions>
        		 <set field="titleProperty" value="Shift Wise Report"/>	
        		 <set field="tabButtonItem" value="MilkReceiptReports"/> 
        		 <set field="tabButtonItem3" value="ShiftWiseReport"/>
        		 <set field="reportFrequencyFlag" value="ShiftWiseReport"/>
        	</actions>
            <widgets>
                 <decorator-screen name="MilkReceiptsCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<include-menu name="MilkreceiptReportsTabBar" location="component://procurement/widget/milkreceipts/MilkReceiptsMenus.xml"/> 
                		<platform-specific><html><html-template location="component://procurement/webapp/milkreceipts/reports/MilkReceiptReport.ftl"></html-template></html></platform-specific> 
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
     <screen name="PTCReports">
        <section>
        	<actions>
        		 <set field="titleProperty" value="PTC Reports"/>	
        		 <set field="tabButtonItem" value="MilkReceiptReports"/> 
        		 <set field="tabButtonItem3" value="PTCReports"/>
        		 <set field="reportFrequencyFlag" value="PTCReports"/>
        		 <set field="displayScreen" value=" "/>
        		 <entity-condition list="timePeriodList" entity-name="CustomTimePeriod">
                	<condition-expr field-name="periodTypeId" operator="equals" value="PTC_FORTNIGHT_BILL"/>
                	<order-by field-name="-fromDate"/>
                </entity-condition> 
            	 <script location="component://procurement/webapp/milkreceipts/WEB-INF/actions/reports/MilkReceiptEntry.groovy"/>
        	</actions>
            <widgets>
                 <decorator-screen name="MilkReceiptsCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<include-menu name="MilkreceiptReportsTabBar" location="component://procurement/widget/milkreceipts/MilkReceiptsMenus.xml"/> 
                		<platform-specific><html><html-template location="component://procurement/webapp/milkreceipts/reports/ptcReports.ftl"></html-template></html></platform-specific> 
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
     <screen name="FindMilkReceiptsBilling">
        <section>
        	<actions>
        		 <set field="tabButtonItem" value="MilkReceiptsBilling"/>
        	</actions>
            <widgets>
                 <decorator-screen name="MilkReceiptsCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<container style="button-bar">
							<link url-mode="plain" target="generateMlkReceiptsBilling" text="Generate Billing" style="buttontext create"  link-type="anchor"/>
						</container>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
     <screen name="AnnualMilkReceiptReports">
        <section>
        	<actions>
        		 <set field="titleProperty" value="Milk Receipt Reports"/>	
        		 <set field="tabButtonItem" value="reports"/> 
        		 <set field="tabButtonItem3" value="AnnualMilkReceiptReports"/>
        		 <script location="component://procurement/webapp/procurement/WEB-INF/actions/facility/getUserRelatedFacilies.groovy"/>
        		 <script location="component://procurement/webapp/procurement/WEB-INF/actions/facility/FacilityCustomTimePeriods.groovy"/>
        		<set field="reportFrequencyFlag" value="AnnualMilkReceiptReports"/>
        	</actions>
            <widgets>
                 <decorator-screen name="MilkReceiptsCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<include-menu name="MilkreceiptReportTabBar" location="component://procurement/widget/milkreceipts/MilkReceiptsMenus.xml"/> 
                    	<platform-specific><html><html-template location="component://procurement/webapp/procurement/facility/ProcurementDependentDropDown.ftl"></html-template></html></platform-specific>
                    	<platform-specific><html><html-template location="component://procurement/webapp/procurement/facility/shedSelection.ftl"></html-template></html></platform-specific> 
                		<platform-specific><html><html-template location="component://procurement/webapp/milkreceipts/reports/MilkReceiptReport.ftl"></html-template></html></platform-specific> 
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="GenerateMlkRecptsBilling">
        <section>
        	<actions>
        		 <set field="tabButtonItem" value="MilkReceiptsBilling"/>
        		 <entity-condition list="privateDairiesList" entity-name="FacilityGroupMemberAndFacility">        		 	
        		 	<condition-list combine="and">        		 	
        		 		<condition-expr field-name="facilityGroupId" operator="equals" value="UNION_DAIRIES"/>
        		 		<condition-expr field-name="facilityTypeId" operator="equals" value="UNIT"/>
        		 	</condition-list>
        		 </entity-condition>
        		 <entity-condition list="timePeriodList" entity-name="CustomTimePeriod" use-cache="true" filter-by-date="false" >
                	<condition-list combine="and">
                		<condition-expr field-name="periodTypeId" operator="equals" value="PROC_BILL_MONTH"/>                	   
                	</condition-list>             	
                	<order-by field-name="-thruDate"/>
               </entity-condition> 
        		 <set field="privateDairiesList"  value="${privateDairiesList}"/>
        	</actions>
            <widgets>
                 <decorator-screen name="MilkReceiptsCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	  <screenlet title="Milk Receipts Billing">
				       	  		<include-form name="GenerateMilkReceiptsBilling" location="component://procurement/widget/milkreceipts/MilkReceiptsForms.xml"/>
                  	      </screenlet>  
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="MilkReceiptsSalesEntry">
		<section>
			<actions>
				<set field="titleProperty" value="Income Expenditure"/>
				<set field="headerItem" value="Income Expenditure" />	
        		<set field="tabButtonItem" value="IncomeExpenditure"/> 
        		<set field="tabButtonItem3" value="MilkReceiptsSalesEntry"/>
				<script	location="component://procurement/webapp/procurement/WEB-INF/actions/facility/getUserRelatedFacilies.groovy" />
				<set field="shedId" from-field="context.shedId" />
				<set field="shedCode" from-field="context.shedCode" />
				<set field="parameters.shedCode" from-field="context.shedCode" />
				<entity-condition list="timePeriodList"
					entity-name="CustomTimePeriod" use-cache="true" filter-by-date="false">
					<condition-list combine="and">
						<condition-expr field-name="periodTypeId" operator="equals"
							value="PROC_BILL_MONTH" />
					</condition-list>
					<order-by field-name="-thruDate" />
				</entity-condition>				
				<entity-condition list="saleEntryList" entity-name="FacilityIncomeExpenditure"> 
					<condition-list combine="and">
						<condition-list combine="or">
                        	<condition-expr field-name="facilityId" from-field="parameters.shedId" operator="equals"/>
                        	<condition-expr field-name="customTimePeriodId" from-field="parameters.customTimePeriodId" operator="equals"/>                                                           
                       </condition-list>  
                       <condition-expr field-name="amountTypeId" value="SALES" operator="equals"/>  
					</condition-list>                                     
               </entity-condition>
               <set field="saleEntryList" value="${saleEntryList}" global="true" />
			</actions>
			<widgets>
				<decorator-screen name="MilkReceiptsCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                       <include-menu name="IncomeExpenditureTabBar" location="component://procurement/widget/milkreceipts/MilkReceiptsMenus.xml"/>
						<container style="lefthalf">
							<link url-mode="plain" target="createNewSalesEntry" text="Create New"
								style="buttontext create" link-type="anchor" />
							<screenlet title="Find Sales Entries">
								<include-form location="component://procurement/widget/milkreceipts/MilkReceiptsForms.xml" name="FindSalesEntries" />					
							</screenlet>
							<screenlet title="List Sales Entries">
								<include-form name="ListSalesEntries" location="component://procurement/widget/milkreceipts/MilkReceiptsForms.xml" />
							</screenlet>
						</container>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="MilkReceiptsSalariesEntry">
		<section>
			<actions>
				<set field="titleProperty" value="Income Expenditure"/>	
				<set field="headerItem" value="Income Expenditure" />
        		<set field="tabButtonItem" value="IncomeExpenditure"/> 
        		<set field="tabButtonItem3" value="MilkReceiptsSalariesEntry"/>
				<script	location="component://procurement/webapp/procurement/WEB-INF/actions/facility/getUserRelatedFacilies.groovy" />
				<set field="shedId" from-field="context.shedId" />
				<set field="shedCode" from-field="context.shedCode" />
				<set field="parameters.shedCode" from-field="context.shedCode" />
				<entity-condition list="timePeriodList" entity-name="CustomTimePeriod" use-cache="true" filter-by-date="false" >
                	<condition-list combine="and">
                		<condition-expr field-name="periodTypeId" operator="equals" value="HR_MONTH"/>                	   
                	</condition-list>             	
                	<order-by field-name="-thruDate"/>
               	</entity-condition> 
               	<entity-condition list="amountTypeList" entity-name="Enumeration">
               		<condition-expr field-name="enumTypeId" operator="equals" value="FAC_EXP"/>
               	</entity-condition>
			   	<entity-condition list="salaryEntryList" entity-name="FacilityIncomeExpenditure"> 
               		<condition-list combine="and">
                    	<condition-list combine="or">
                        	<condition-expr field-name="facilityId" from-field="parameters.shedId" operator="equals"/>
                            <condition-expr field-name="customTimePeriodId" from-field="parameters.customTimePeriodId" operator="equals"/>
                        </condition-list>   
                        <condition-expr field-name="amountTypeId" value="${parameters.amountTypeId}" operator="equals"/>
                   	</condition-list>   
               	</entity-condition>
               <set field="salaryEntryList" value="salaryEntryList" global="true" />
			</actions>
			<widgets>
				<decorator-screen name="MilkReceiptsCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                       <include-menu name="IncomeExpenditureTabBar" location="component://procurement/widget/milkreceipts/MilkReceiptsMenus.xml"/>
						<container style="lefthalf">
							<link url-mode="plain" target="newSalaryEntry" text="Create New"
								style="buttontext create" link-type="anchor" />
							<screenlet title="Find Salary Entries">
								<include-form location="component://procurement/widget/milkreceipts/MilkReceiptsForms.xml" name="FindSalaryEntries" />
								<platform-specific>
									<html>
										<html-template	location="component://procurement/webapp/procurement/facility/FindFacilityOutputEntry.ftl"></html-template>
									</html>
								</platform-specific>
							</screenlet>
							<screenlet title="List Salary Entries">
								<include-form name="ListSalaryEntries" location="component://procurement/widget/milkreceipts/MilkReceiptsForms.xml" />
							</screenlet>
						</container>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="createNewSalesEntry">
		<section>
			<actions>
				 <set field="titleProperty" value="Income Expenditure"/>	
        		 <set field="tabButtonItem" value="IncomeExpenditure"/> 
        		 <set field="tabButtonItem3" value="MilkReceiptsSalesEntry"/>
				<script	location="component://procurement/webapp/procurement/WEB-INF/actions/facility/getUserRelatedFacilies.groovy" />
				<set field="shedId" from-field="context.shedId" />
				<set field="shedCode" from-field="context.shedCode" />
				<set field="parameters.shedCode" from-field="context.shedCode" />
				<entity-condition list="timePeriodList"
					entity-name="CustomTimePeriod" use-cache="true" filter-by-date="false">
					<condition-list combine="and">
						<condition-expr field-name="periodTypeId" operator="equals"
							value="PROC_BILL_MONTH" />
					</condition-list>
					<order-by field-name="-thruDate" />
				</entity-condition>
			</actions>
			<widgets>
				<decorator-screen name="MilkReceiptsCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                       <include-menu name="IncomeExpenditureTabBar" location="component://procurement/widget/milkreceipts/MilkReceiptsMenus.xml"/>
						<platform-specific>
							<html>
								<html-template location="component://procurement/webapp/procurement/facility/ProcurementDependentDropDown.ftl"></html-template>
							</html>
						</platform-specific>
						<screenlet title="Create New Sales Entry">
							<include-form name="createNewSalesEntry"
								location="component://procurement/widget/milkreceipts/MilkReceiptsForms.xml" />
						</screenlet>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<screen name="newSalaryEntry">
		<section>
			<actions>
				 <set field="titleProperty" value="Income Expenditure"/>	
        		 <set field="tabButtonItem" value="IncomeExpenditure"/> 
        		 <set field="tabButtonItem3" value="MilkReceiptsSalariesEntry"/>
				<script	location="component://procurement/webapp/procurement/WEB-INF/actions/facility/ProcurementEntrySearch.groovy" />
				<set field="milkReceiptProductList" type="List" value="${groovy: import org.ofbiz.base.util.*; return (in.vasista.vbiz.procurement.ProcurementNetworkServices.getMilkReceiptProducts(dispatcher.getDispatchContext(),context)); }"/>
				<script	location="component://procurement/webapp/procurement/WEB-INF/actions/facility/getUserRelatedFacilies.groovy" />
				<set field="shedId" from-field="context.shedId" />
				<script	location="component://procurement/webapp/procurement/WEB-INF/actions/facility/FacilityCustomTimePeriods.groovy" />
				<set field="layoutSettings.javaScripts[]" value="/milkreceipts/images/productChange.js" global="true"/>				
				<entity-condition list="timePeriodList" entity-name="CustomTimePeriod" use-cache="true" filter-by-date="false" >
                	<condition-list combine="and">
                		<condition-expr field-name="periodTypeId" operator="equals" value="HR_MONTH"/>                	   
                	</condition-list>             	
                	<order-by field-name="-thruDate"/>
               </entity-condition> 
			</actions>
			<widgets>
				<decorator-screen name="MilkReceiptsCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                       <include-menu name="IncomeExpenditureTabBar" location="component://procurement/widget/milkreceipts/MilkReceiptsMenus.xml"/>
						<container style="lefthalf">
							<screenlet title="SalariesEntry">
								<include-form location="component://procurement/widget/milkreceipts/MilkReceiptsForms.xml"	name="SalariesEntry" />
							</screenlet>
						</container>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
	<!-- Screens for KMF -->
	
	<screen name="MilkReceiptsTankerEntry">
        <section>
        	<actions>
        		 <set field="titleProperty" value="MILK RECEIPTS"/>	
        		 <set field="displayScreen" from-field="parameters.displayScreen" default-value="VEHICLE_IN"/>
        		 <set field="tabButtonItem" value="MilkReceiptEntry"/>
        		 <set field="tabButtonItem3" from-field="parameters.tabButtonItem3" default-value="MilkReceiptsVehicleInEntry"/> 
        		 <set field="layoutSettings.javaScripts[]" value="/milkreceipts/images/milkReciptEntryTab.js" global="true"/>
        		 <script location="component://procurement/webapp/procurement/WEB-INF/actions/facility/getUserRelatedFacilies.groovy"/>
        		 <script location="component://procurement/webapp/procurement/WEB-INF/actions/facility/FacilityCustomTimePeriods.groovy"/>
        		 <set field="milkReceiptProductList" type="List" value="${groovy: import org.ofbiz.base.util.*; return (in.vasista.vbiz.procurement.ProcurementNetworkServices.getMilkReceiptProducts(dispatcher.getDispatchContext(),context)); }"/>
        		 <script location="component://procurement/webapp/milkreceipts/WEB-INF/actions/reports/MilkReceiptEntry.groovy"/>
        	</actions>
            <widgets>
                 <decorator-screen name="MilkReceiptsCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    <include-menu name="MilkTransferReceiptTabBar" location="component://procurement/widget/milkreceipts/MilkReceiptsMenus.xml"/>
                    <section>
                    	<condition>
                    		<if-has-permission permission="MR" action="_TANKER_INOUT"/>
                    	</condition>
                    	<widgets>
                    	<platform-specific><html><html-template location="component://procurement/webapp/milkreceipts/facility/milkReceiptTankerEntry.ftl"></html-template></html></platform-specific> 
                    	<!-- <include-form location="component://procurement/widget/milkreceipts/MilkReceiptsForms.xml" name="MilkReceiptEntry"/> -->
                    	</widgets>
                    	</section>
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="MilkReceiptsTankerOutEntry">
        <section>
        	<actions>
        		 <set field="titleProperty" value="MILK RECEIPTS"/>	
        		 <set field="displayScreen" value="VEHICLE_OUT"/>
        		 <set field="tabButtonItem" value="MilkReceiptEntry"/>
        		 <set field="tabButtonItem3"  value="MilkReceiptsVehicleOutEntry"/> 
        		 <set field="layoutSettings.javaScripts[]" value="/milkreceipts/images/milkReciptEntryTab.js" global="true"/>
        		 <script location="component://procurement/webapp/procurement/WEB-INF/actions/facility/getUserRelatedFacilies.groovy"/>
        		 <script location="component://procurement/webapp/procurement/WEB-INF/actions/facility/FacilityCustomTimePeriods.groovy"/>
        		 <set field="milkReceiptProductList" type="List" value="${groovy: import org.ofbiz.base.util.*; return (in.vasista.vbiz.procurement.ProcurementNetworkServices.getMilkReceiptProducts(dispatcher.getDispatchContext(),context)); }"/>
        		 <script location="component://procurement/webapp/milkreceipts/WEB-INF/actions/reports/MilkReceiptEntry.groovy"/>
        	</actions>
            <widgets>
                 <decorator-screen name="MilkReceiptsCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<include-menu name="MilkTransferReceiptTabBar" location="component://procurement/widget/milkreceipts/MilkReceiptsMenus.xml"/>
                    	<platform-specific><html><html-template location="component://procurement/webapp/milkreceipts/facility/milkReceiptTankerEntry.ftl"></html-template></html></platform-specific> 
                    	<!-- <include-form location="component://procurement/widget/milkreceipts/MilkReceiptsForms.xml" name="MilkReceiptEntry"/> -->
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="MilkReceiptsTankerCip">
        <section>
        	<actions>
        		 <set field="titleProperty" value="MILK RECEIPTS"/>	
        		 <set field="displayScreen" value="VEHICLE_CIP"/>
        		 <set field="tabButtonItem" value="MilkReceiptEntry"/>
        		 <set field="tabButtonItem3"  value="MilkReceiptsVehicleCip"/> 
        		 <set field="layoutSettings.javaScripts[]" value="/milkreceipts/images/milkReciptEntryTab.js" global="true"/>
        		 <script location="component://procurement/webapp/procurement/WEB-INF/actions/facility/getUserRelatedFacilies.groovy"/>
        		 <script location="component://procurement/webapp/procurement/WEB-INF/actions/facility/FacilityCustomTimePeriods.groovy"/>
        		 <set field="milkReceiptProductList" type="List" value="${groovy: import org.ofbiz.base.util.*; return (in.vasista.vbiz.procurement.ProcurementNetworkServices.getMilkReceiptProducts(dispatcher.getDispatchContext(),context)); }"/>
        		 <script location="component://procurement/webapp/milkreceipts/WEB-INF/actions/reports/MilkReceiptEntry.groovy"/>
        	</actions>
            <widgets>
                 <decorator-screen name="MilkReceiptsCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<include-menu name="MilkTransferReceiptTabBar" location="component://procurement/widget/milkreceipts/MilkReceiptsMenus.xml"/>
                    	<platform-specific><html><html-template location="component://procurement/webapp/milkreceipts/facility/milkReceiptTankerEntry.ftl"></html-template></html></platform-specific> 
                    	<!-- <include-form location="component://procurement/widget/milkreceipts/MilkReceiptsForms.xml" name="MilkReceiptEntry"/> -->
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="MilkReceiptsVehicleCipNew">
        <section>
        	<actions>
        		 <set field="titleProperty" value="MILK RECEIPTS"/>	
        		 <set field="displayScreen" value="VEHICLE_CIPNEW"/>
        		 <set field="tabButtonItem" value="MilkReceiptEntry"/>
        		 <set field="tabButtonItem3"  value="MilkReceiptsVehicleCipNew"/> 
        		 <set field="layoutSettings.javaScripts[]" value="/milkreceipts/images/milkReciptEntryTab.js" global="true"/>
        		 <script location="component://procurement/webapp/procurement/WEB-INF/actions/facility/getUserRelatedFacilies.groovy"/>
        		 <script location="component://procurement/webapp/procurement/WEB-INF/actions/facility/FacilityCustomTimePeriods.groovy"/>
        		 <set field="milkReceiptProductList" type="List" value="${groovy: import org.ofbiz.base.util.*; return (in.vasista.vbiz.procurement.ProcurementNetworkServices.getMilkReceiptProducts(dispatcher.getDispatchContext(),context)); }"/>
        		 <script location="component://procurement/webapp/milkreceipts/WEB-INF/actions/reports/MilkReceiptEntry.groovy"/>
        	</actions>
            <widgets>
                 <decorator-screen name="MilkReceiptsCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<include-menu name="MilkTransferReceiptTabBar" location="component://procurement/widget/milkreceipts/MilkReceiptsMenus.xml"/>
                    	<platform-specific><html><html-template location="component://procurement/webapp/milkreceipts/facility/milkReceiptTankerEntry.ftl"></html-template></html></platform-specific> 
                    	<!-- <include-form location="component://procurement/widget/milkreceipts/MilkReceiptsForms.xml" name="MilkReceiptEntry"/> -->
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="MilkReceiptsTankerWeightEntry">
        <section>
        	<actions>
        		 <set field="titleProperty" value="MILK RECEIPTS"/>	
        		 <set field="displayScreen" from-field="parameters.displayScreen" default-value="VEHICLE_GRSWEIGHT"/>
        		 <set field="tabButtonItem" value="MilkReceiptEntry"/>
        		 <set field="tabButtonItem3"  from-field="parameters.tabButtonItem3" default-value="MilkReceiptsGrossWeightEntry"/> 
        		 <set field="layoutSettings.javaScripts[]" value="/milkreceipts/images/milkReciptEntryTab.js" global="true"/>
        		 <script location="component://procurement/webapp/procurement/WEB-INF/actions/facility/getUserRelatedFacilies.groovy"/>
        		 <script location="component://procurement/webapp/procurement/WEB-INF/actions/facility/FacilityCustomTimePeriods.groovy"/>
        		 <set field="milkReceiptProductList" type="List" value="${groovy: import org.ofbiz.base.util.*; return (in.vasista.vbiz.procurement.ProcurementNetworkServices.getMilkReceiptProducts(dispatcher.getDispatchContext(),context)); }"/>
        		 <script location="component://procurement/webapp/milkreceipts/WEB-INF/actions/reports/MilkReceiptEntry.groovy"/>
        	</actions>
            <widgets>
                 <decorator-screen name="MilkReceiptsCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<include-menu name="MilkTransferReceiptTabBar" location="component://procurement/widget/milkreceipts/MilkReceiptsMenus.xml"/>
                    	<platform-specific><html><html-template location="component://procurement/webapp/milkreceipts/facility/milkReceiptTankerEntry.ftl"></html-template></html></platform-specific> 
                    	<!-- <include-form location="component://procurement/widget/milkreceipts/MilkReceiptsForms.xml" name="MilkReceiptEntry"/> -->
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="MilkReceiptsTankerTareWeightEntry">
        <section>
        	<actions>
        		 <set field="titleProperty" value="MILK RECEIPTS"/>	
        		 <set field="displayScreen" value="VEHICLE_TAREWEIGHT"/>
        		 <set field="tabButtonItem" value="MilkReceiptEntry"/>
        		 <set field="tabButtonItem3"  value="MilkReceiptsTareWeightEntry"/> 
        		 <set field="layoutSettings.javaScripts[]" value="/milkreceipts/images/milkReciptEntryTab.js" global="true"/>
        		 <script location="component://procurement/webapp/procurement/WEB-INF/actions/facility/getUserRelatedFacilies.groovy"/>
        		 <script location="component://procurement/webapp/procurement/WEB-INF/actions/facility/FacilityCustomTimePeriods.groovy"/>
        		 <set field="milkReceiptProductList" type="List" value="${groovy: import org.ofbiz.base.util.*; return (in.vasista.vbiz.procurement.ProcurementNetworkServices.getMilkReceiptProducts(dispatcher.getDispatchContext(),context)); }"/>
        		 <script location="component://procurement/webapp/milkreceipts/WEB-INF/actions/reports/MilkReceiptEntry.groovy"/>
        	</actions>
            <widgets>
                 <decorator-screen name="MilkReceiptsCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<include-menu name="MilkTransferReceiptTabBar" location="component://procurement/widget/milkreceipts/MilkReceiptsMenus.xml"/>
                    	<platform-specific><html><html-template location="component://procurement/webapp/milkreceipts/facility/milkReceiptTankerEntry.ftl"></html-template></html></platform-specific> 
                    	<!-- <include-form location="component://procurement/widget/milkreceipts/MilkReceiptsForms.xml" name="MilkReceiptEntry"/> -->
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="MilkReceiptsQCEntry">
        <section>
        	<actions>
        		 <set field="titleProperty" value="MILK RECEIPTS"/>	
        		 <set field="displayScreen" from-field="displayScreen" default-value="VEHICLE_QC"/>
        		 <set field="tabButtonItem" value="MilkReceiptEntry"/>
        		 <set field="tabButtonItem3"  from-field="tabButtonItem3" default-value="MilkReceiptsQCEntry"/> 
        		 <set field="layoutSettings.javaScripts[]" value="/milkreceipts/images/milkReciptEntryTab.js" global="true"/>
        		 <script location="component://procurement/webapp/procurement/WEB-INF/actions/facility/getUserRelatedFacilies.groovy"/>
        		 <script location="component://procurement/webapp/procurement/WEB-INF/actions/facility/FacilityCustomTimePeriods.groovy"/>
        		 <set field="milkReceiptProductList" type="List" value="${groovy: import org.ofbiz.base.util.*; return (in.vasista.vbiz.procurement.ProcurementNetworkServices.getMilkReceiptProducts(dispatcher.getDispatchContext(),context)); }"/>
        		 <script location="component://procurement/webapp/milkreceipts/WEB-INF/actions/reports/MilkReceiptEntry.groovy"/>
        	</actions>
            <widgets>
                 <decorator-screen name="MilkReceiptsCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<include-menu name="MilkTransferReceiptTabBar" location="component://procurement/widget/milkreceipts/MilkReceiptsMenus.xml"/>
                    	<platform-specific><html><html-template location="component://procurement/webapp/milkreceipts/facility/milkReceiptTankerEntry.ftl"></html-template></html></platform-specific> 
                    	<!-- <include-form location="component://procurement/widget/milkreceipts/MilkReceiptsForms.xml" name="MilkReceiptEntry"/> -->
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="ApproveMilkReceipts">
    	<section>
    		<actions>
    			<set field="titleProperty" value="APPROVE MILK RECEIPTS" />
				<set field="tabButtonItem" value="FindMilkReceiptEntry" />
				<set field="tabButtonItem2"  value="MilkReceiptsToApprove" />
				<set field="productsList" type="List" value="${groovy: import org.ofbiz.base.util.*; return (in.vasista.vbiz.procurement.ProcurementNetworkServices.getMilkReceiptProducts(dispatcher.getDispatchContext(),context)); }"/>
				<set field="parameters.flag" value="APPROVE_RECEIPTS"/>
				<set field="displayScreen" value=" "/>
				<script location="component://procurement/webapp/milkreceipts/WEB-INF/actions/reports/MilkReceiptEntry.groovy"/>
				<script location="component://procurement/webapp/milkreceipts/WEB-INF/actions/reports/MilkReceiptsEntrySerach.groovy"/>
				 <set field="layoutSettings.javaScripts[]" value="/milkreceipts/images/findTransfer.js" global="true"/>
			</actions>
			<widgets>
				<decorator-screen name="MilkReceiptsCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
					<include-menu name="FindMilkReceiptsTankerTabBar" location="component://procurement/widget/milkreceipts/MilkReceiptsMenus.xml"/>
						<container style="full">
							<platform-specific><html><html-template location="component://procurement/webapp/milkreceipts/reports/findTransfer.ftl"></html-template></html></platform-specific>														
							<screenlet title="Approve Milk Receipts">
								<platform-specific><html><html-template location="component://procurement/webapp/milkreceipts/facility/MilkReceiptsToApprove.ftl"></html-template></html></platform-specific>
							</screenlet>
						</container>
					</decorator-section>
				</decorator-screen>
			</widgets>
    	</section>
    </screen>
    
    <screen name="PtcAdjustmentDeductions">
    <section>
    	<actions>
    		 <set field="titleProperty" value="DEDUCTIONS"/>	
      		 <set field="tabButtonItem" value="MRTransporterMargins"/>
      		 <set field="tabButtonItem2"  value="TransporterAdjustments"/>
      		 <set field="tabButtonItem3"  value="PtcAdjustmentDeductions"/>
      		 <set field="flag" value="DEDUCTIONS"/>
      		 <set field="displayScreen" value=" "/>
      		 <script location="component://procurement/webapp/milkreceipts/WEB-INF/actions/reports/MilkReceiptEntry.groovy"/>
      		 <entity-condition list="AdjustmentTypeList" entity-name="Enumeration">
      		  <condition-expr field-name="enumTypeId" operator="equals" value="PTC_DED"/>
      		 </entity-condition>
      		 <set field="nowTimeStamp" value="${groovy: return org.ofbiz.base.util.UtilDateTime.nowTimestamp()}"/>
      		 <entity-condition entity-name="CustomTimePeriod" list="customTimeList" >
		  		<condition-list combine="and">
		  		<condition-expr field-name="fromDate" operator="less-equals" from-field="nowTimeStamp"/>
		  		<condition-expr field-name="periodTypeId" operator="equals" value="PTC_FORTNIGHT_BILL"/>
		  		</condition-list>
		  		<order-by field-name="-fromDate"/>
		  		<order-by field-name="periodNum"/>
			</entity-condition>
			<set field="recoveryTypeIdsList" value="${groovy:org.ofbiz.entity.util.EntityUtil.getFieldListFromEntityList(AdjustmentTypeList, 'enumId', true);}" type="List"/>
			<entity-condition list="DeductionsList" entity-name="FineRecovery">
      		  <condition-expr field-name="recoveryTypeId" operator="in" from-field="recoveryTypeIdsList"/>
      		  <order-by field-name="-lastUpdatedStamp"/>
      		 </entity-condition>
    	</actions>
    	<widgets>
    		<decorator-screen name="MilkReceiptsCommonDecorator" location="${parameters.mainDecoratorLocation}">
    			<decorator-section name="body">
    				<include-menu name="MilkReceiptTransporterTabBar" location="component://procurement/widget/milkreceipts/MilkReceiptsMenus.xml"/>
    				<include-menu name="TransporterAdjustmentsTabBar" location="component://procurement/widget/milkreceipts/MilkReceiptsMenus.xml"/>
    				<container style="lefthalf">
    				<screenlet title="Add Deduction">
    				<platform-specific><html><html-template location="component://procurement/webapp/milkreceipts/facility/PtcAdjustmentDeductions.ftl"></html-template></html></platform-specific>
    				</screenlet>
    				</container>
    				<container style="righthalf">
    					<screenlet title="Deduction List">
    						<include-form location="component://procurement/widget/milkreceipts/MilkReceiptsForms.xml" name="ListDeductions"/>
    					</screenlet>
    				</container>
    			</decorator-section>
    		</decorator-screen>
    	</widgets>
    </section>
    </screen>
    <screen name="PtcAdjustmentAdditions">
    <section>
    	<actions>
    		 <set field="titleProperty" value="ADDITIONS"/>	
      		 <set field="tabButtonItem" value="MRTransporterMargins"/>
      		 <set field="tabButtonItem2"  value="TransporterAdjustments"/>
      		 <set field="tabButtonItem3"  value="PtcAdjustmentAdditions"/>
      		 <set field="flag" value="ADDITIONS"/>
      		 <set field="displayScreen" value=" "/>
      		 <script location="component://procurement/webapp/milkreceipts/WEB-INF/actions/reports/MilkReceiptEntry.groovy"/>
      		 <entity-condition list="AdjustmentTypeList" entity-name="Enumeration">
      		  <condition-expr field-name="enumTypeId" operator="equals" value="PTC_ADDN"/>
      		 </entity-condition>
      		 <set field="nowTimeStamp" value="${groovy: return org.ofbiz.base.util.UtilDateTime.nowTimestamp()}"/>
      		 <entity-condition entity-name="CustomTimePeriod" list="customTimeList" >
		  		<condition-list combine="and">
		  		<condition-expr field-name="fromDate" operator="less-equals" from-field="nowTimeStamp"/>
		  		<condition-expr field-name="periodTypeId" operator="equals" value="PTC_FORTNIGHT_BILL"/>
		  		</condition-list>
		  		<order-by field-name="-fromDate"/>
		  		<order-by field-name="periodNum"/>
			</entity-condition>
			<set field="recoveryTypeIdsList" value="${groovy:org.ofbiz.entity.util.EntityUtil.getFieldListFromEntityList(AdjustmentTypeList, 'enumId', true);}" type="List"/>
			<entity-condition list="AdditionsList" entity-name="FineRecovery">
      		  <condition-expr field-name="recoveryTypeId" operator="in" from-field="recoveryTypeIdsList"/>
      		  <order-by field-name="-lastUpdatedStamp"/>
      		 </entity-condition>
			
    	</actions>
    	<widgets>
    		<decorator-screen name="MilkReceiptsCommonDecorator" location="${parameters.mainDecoratorLocation}">
    			<decorator-section name="body">
    				<include-menu name="MilkReceiptTransporterTabBar" location="component://procurement/widget/milkreceipts/MilkReceiptsMenus.xml"/>
    				<include-menu name="TransporterAdjustmentsTabBar" location="component://procurement/widget/milkreceipts/MilkReceiptsMenus.xml"/>
    				<container style="lefthalf">
    				<screenlet title="Add Addition">
    				<platform-specific><html><html-template location="component://procurement/webapp/milkreceipts/facility/PtcAdjustmentDeductions.ftl"></html-template></html></platform-specific>
    				</screenlet>
    				</container>
    				<container style="righthalf">
    					<screenlet title="Addition List">
    						<include-form location="component://procurement/widget/milkreceipts/MilkReceiptsForms.xml" name="ListAdditions"/>
    					</screenlet>
    				</container>
    			</decorator-section>
    		</decorator-screen>
    	</widgets>
    </section>
    </screen>
 	<screen name="FindPtcAdjustment">
    <section>
    	<actions>
    		 <set field="titleProperty" value="FIND ADJUSTMENTS"/>	
      		 <set field="tabButtonItem" value="MRTransporterMargins"/>
      		 <set field="tabButtonItem2"  value="TransporterAdjustments"/>
      		 <set field="tabButtonItem3"  value="FindPtcAdjustment"/>
      		 <set field="flag" value="Find"/>
      		 <set field="displayScreen" value=" "/>
      		 <script location="component://procurement/webapp/milkreceipts/WEB-INF/actions/reports/MilkReceiptEntry.groovy"/>
      		 <entity-condition list="AdjustmentTypeList" entity-name="Enumeration">
      		   <condition-list combine="or">
      		  <condition-expr field-name="enumTypeId" operator="equals" value="PTC_ADDN"/>
      		  <condition-expr field-name="enumTypeId" operator="equals" value="PTC_DED"/>
      		  </condition-list>
      		 </entity-condition>
      		 <set field="nowTimeStamp" value="${groovy: return org.ofbiz.base.util.UtilDateTime.nowTimestamp()}"/>
      		 <entity-condition entity-name="CustomTimePeriod" list="customTimeList" >
		  		<condition-list combine="and">
		  		<condition-expr field-name="fromDate" operator="less-equals" from-field="nowTimeStamp"/>
		  		<condition-expr field-name="periodTypeId" operator="equals" value="PTC_FORTNIGHT_BILL"/>
		  		</condition-list>
		  		<order-by field-name="-fromDate"/>
		  		<order-by field-name="periodNum"/>
			</entity-condition>
			<script location="component://procurement/webapp/procurement/WEB-INF/actions/facility/PtcRecoveryAdjustmentSearch.groovy"/>
			<set field="recoveryTypeIdsList" value="${groovy:org.ofbiz.entity.util.EntityUtil.getFieldListFromEntityList(AdjustmentTypeList, 'enumId', true);}" type="List"/>
			<entity-condition entity-name="FineRecovery" list="fineRecoveryList">
                <condition-list combine="and">
                <condition-expr field-name="recoveryTypeId" operator="in" from-field="recoveryTypeIdsList" />
                	<condition-list>
                    <condition-expr field-name="recoveryId" operator="equals" from-field="parameters.recoveryId" ignore-if-empty="true"/>
                    <condition-expr field-name="recoveryTypeId" operator="equals" from-field="parameters.adjustmentTypeId" ignore-if-empty="true"/>
                    <condition-expr field-name="vehicleId" operator="equals" from-field="parameters.tankerName" ignore-if-empty="true"/>
                    <condition-expr field-name="customTimePeriodId" operator="equals" from-field="parameters.customTimePeriodId" ignore-if-empty="true"/>
                    <condition-expr field-name="incidentDate" operator="equals" from-field="fromDateTime" ignore-if-empty="true"/>
                    </condition-list>
                </condition-list>
                <order-by field-name="-lastUpdatedStamp"/>
            </entity-condition>
    	</actions>
    	<widgets>
    		<decorator-screen name="MilkReceiptsCommonDecorator" location="${parameters.mainDecoratorLocation}">
    			<decorator-section name="body">
    				<include-menu name="MilkReceiptTransporterTabBar" location="component://procurement/widget/milkreceipts/MilkReceiptsMenus.xml"/>
    				<include-menu name="TransporterAdjustmentsTabBar" location="component://procurement/widget/milkreceipts/MilkReceiptsMenus.xml"/>
    				<screenlet title="Find Adjustment">
    				<platform-specific><html><html-template location="component://procurement/webapp/milkreceipts/facility/PtcAdjustmentDeductions.ftl"></html-template></html></platform-specific>
    				</screenlet>
    					<screenlet title="Adjustments List">
    					<include-form location="component://procurement/widget/milkreceipts/MilkReceiptsForms.xml" name="ListAdjustments"/>
    					</screenlet>
    			</decorator-section>
    		</decorator-screen>
    	</widgets>
    </section>
    </screen>
    
    <screen name="MilkFinalization">
    	<section>
    		<actions>
    			<set field="titleProperty" value="MILK FINALIZATION" />
				<set field="tabButtonItem" value="FindMilkReceiptEntry" />
				<set field="tabButtonItem2"  value="MilkFinalization" />
				<set field="productsList" type="List" value="${groovy: import org.ofbiz.base.util.*; return (in.vasista.vbiz.procurement.ProcurementNetworkServices.getMilkReceiptProducts(dispatcher.getDispatchContext(),context)); }"/>
				<set field="parameters.flag" value="FINALIZATION"/>
				<set field="displayScreen" value=" "/>
				<script location="component://procurement/webapp/milkreceipts/WEB-INF/actions/reports/MilkReceiptEntry.groovy"/>
				<script location="component://procurement/webapp/milkreceipts/WEB-INF/actions/reports/MilkReceiptsEntrySerach.groovy"/>
				 <set field="layoutSettings.javaScripts[]" value="/milkreceipts/images/findTransfer.js" global="true"/>
			</actions>
			<widgets>
				<decorator-screen name="MilkReceiptsCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
					<include-menu name="FindMilkReceiptsTankerTabBar" location="component://procurement/widget/milkreceipts/MilkReceiptsMenus.xml"/>
						<container style="full">
							<platform-specific><html><html-template location="component://procurement/webapp/milkreceipts/reports/findTransfer.ftl"></html-template></html></platform-specific>														
							<screenlet title="Finalize Milk">
								<platform-specific><html><html-template location="component://procurement/webapp/milkreceipts/facility/MilkReceiptsToApprove.ftl"></html-template></html></platform-specific>
							</screenlet>
						</container>
					</decorator-section>
				</decorator-screen>
			</widgets>
    	</section>
    </screen>
    
    <!-- DashBoard for TankerReceipts -->
    
    
    <screen name="MilkReceiptDashboard">
		<section>
			<actions>
				<set field="titleProperty" value="MILK RECEIPTS" />
				<set field="headerItem" value="MILK RECEIPTS" />
				<set field="tabButtonItem" value="MilkReceiptsDashboard"/>
				<script location="component://procurement/webapp/milkreceipts/WEB-INF/actions/facility/ListVehicleTripStatus.groovy"/>
				 <set field="layoutSettings.javaScripts[]" value="/milkreceipts/images/vehicleTripStatus.js" global="true"/>
				 <set field="parameters.shiftDate" value="${parameters.shiftDate}" default-value="${groovy: return org.ofbiz.base.util.UtilDateTime.toDateString(org.ofbiz.base.util.UtilDateTime.nowTimestamp(),&quot;dd-MM-yyyy&quot;)}"/>
			</actions>
			<widgets>
				<decorator-screen name="MilkReceiptsCommonDecorator"
					location="${parameters.mainDecoratorLocation}">
					<decorator-section name="body">
						<container style="full">
						   	<platform-specific><html><html-template location="component://procurement/webapp/milkreceipts/reports/vehicleDetailsDashboardQtip.ftl"/></html></platform-specific>
							<platform-specific><html><html-template location="component://procurement/webapp/milkreceipts/facility/findVehicleTripStatus.ftl"></html-template></html></platform-specific>
							<screenlet title="Tanker Status List">
								<include-form location="component://procurement/widget/milkreceipts/MilkReceiptsForms.xml"	name="ListVehicleTripStatus" />
							</screenlet>
						</container>
					</decorator-section>
				</decorator-screen>
			</widgets>
		</section>
	</screen>
    
		<!--  Screens for Tanker issues -->    
    <screen name="MilkTankerIssuesCIP">
        <section>
        	<actions>
        		 <set field="titleProperty" value="MILK ISSUES"/>	
        		 <set field="displayScreen" from-field="parameters.displayScreen" default-value="ISSUE_CIP"/>
        		 <set field="tabButtonItem" value="MilkTankerIssues"/>
        		 <set field="tabButtonItem2" from-field="parameters.tabButtonItem2" default-value="MilkIssues"/> 
        		 <set field="layoutSettings.javaScripts[]" value="/milkreceipts/images/milkReciptTankerIssues.js" global="true"/>
        		 <script location="component://procurement/webapp/milkreceipts/WEB-INF/actions/reports/MilkReceiptTankerIssues.groovy"/>
        	</actions>
            <widgets>
                 <decorator-screen name="MilkReceiptsCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<include-menu name="MilkTransferIssuesTabBar" location="component://procurement/widget/milkreceipts/MilkReceiptsMenus.xml"/>
                    	<platform-specific><html><html-template location="component://procurement/webapp/milkreceipts/facility/milkReceiptTankerIssues.ftl"></html-template></html></platform-specific> 
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="MilkTankerIssuesTareWeight">
        <section>
        	<actions>
        		 <set field="titleProperty" value="MILK ISSUES"/>	
        		 <set field="displayScreen" value="ISSUE_TARWEIGHT"/>
        		 <set field="tabButtonItem" value="MilkTankerIssues"/>
        		 <set field="tabButtonItem2" from-field="parameters.tabButtonItem2" default-value="MilkTankerIssuesTareWeight"/> 
        		 <set field="layoutSettings.javaScripts[]" value="/milkreceipts/images/milkReciptTankerIssues.js" global="true"/>
        		 <script location="component://procurement/webapp/milkreceipts/WEB-INF/actions/reports/MilkReceiptTankerIssues.groovy"/>
        	</actions>
            <widgets>
                 <decorator-screen name="MilkReceiptsCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<include-menu name="MilkTransferIssuesTabBar" location="component://procurement/widget/milkreceipts/MilkReceiptsMenus.xml"/>
                    	<platform-specific><html><html-template location="component://procurement/webapp/milkreceipts/facility/milkReceiptTankerIssues.ftl"></html-template></html></platform-specific> 
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="MilkTankerIssuesQC">
        <section>
        	<actions>
        		 <set field="titleProperty" value="MILK ISSUES"/>	
        		 <set field="displayScreen" value="ISSUE_QC"/>
        		 <set field="tabButtonItem" value="MilkTankerIssues"/>
        		 <set field="tabButtonItem2" from-field="parameters.tabButtonItem2" default-value="MilkTankerIssuesQC"/> 
        		 <set field="layoutSettings.javaScripts[]" value="/milkreceipts/images/milkReciptTankerIssues.js" global="true"/>
        		 <script location="component://procurement/webapp/milkreceipts/WEB-INF/actions/reports/MilkReceiptTankerIssues.groovy"/>
        	</actions>
            <widgets>
                 <decorator-screen name="MilkReceiptsCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<include-menu name="MilkTransferIssuesTabBar" location="component://procurement/widget/milkreceipts/MilkReceiptsMenus.xml"/>
                    	<platform-specific><html><html-template location="component://procurement/webapp/milkreceipts/facility/milkReceiptTankerIssues.ftl"></html-template></html></platform-specific> 
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="MilkTankerIssuesGrossWeight">
        <section>
        	<actions>
        		 <set field="titleProperty" value="MILK ISSUES"/>	
        		 <set field="displayScreen" value="ISSUE_GRSWEIGHT"/>
        		 <set field="tabButtonItem" value="MilkTankerIssues"/>
        		 <set field="tabButtonItem2" from-field="parameters.tabButtonItem2" default-value="MilkTankerIssuesGrossWeight"/> 
        		 <set field="layoutSettings.javaScripts[]" value="/milkreceipts/images/milkReciptTankerIssues.js" global="true"/>
        		 <script location="component://procurement/webapp/milkreceipts/WEB-INF/actions/reports/MilkReceiptTankerIssues.groovy"/>
        	</actions>
            <widgets>
                 <decorator-screen name="MilkReceiptsCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<include-menu name="MilkTransferIssuesTabBar" location="component://procurement/widget/milkreceipts/MilkReceiptsMenus.xml"/>
                    	<platform-specific><html><html-template location="component://procurement/webapp/milkreceipts/facility/milkReceiptTankerIssues.ftl"></html-template></html></platform-specific> 
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="MilkTankerIssuesAQC">
        <section>
        	<actions>
        		 <set field="titleProperty" value="MILK ISSUES"/>	
        		 <set field="displayScreen" value="ISSUE_AQC"/>
        		 <set field="tabButtonItem" value="MilkTankerIssues"/>
        		 <set field="tabButtonItem2" from-field="parameters.tabButtonItem2" default-value="MilkTankerIssuesAQC"/> 
        		 <set field="layoutSettings.javaScripts[]" value="/milkreceipts/images/milkReciptTankerIssues.js" global="true"/>
        		 <script location="component://procurement/webapp/milkreceipts/WEB-INF/actions/reports/MilkReceiptTankerIssues.groovy"/>
        	</actions>
            <widgets>
                 <decorator-screen name="MilkReceiptsCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<include-menu name="MilkTransferIssuesTabBar" location="component://procurement/widget/milkreceipts/MilkReceiptsMenus.xml"/>
                    	<platform-specific><html><html-template location="component://procurement/webapp/milkreceipts/facility/milkReceiptTankerIssues.ftl"></html-template></html></platform-specific> 
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    
    <screen name="MilkTankerRetunrQC">
        <section>
        	<actions>
        		 <set field="titleProperty" value="MILK RETURNS"/>	
        		 <set field="displayScreen" value="RETURN_QC"/>
        		 <set field="tabButtonItem" value="MilkTankerReturns"/>
        		 <set field="tabButtonItem2" from-field="parameters.tabButtonItem2" default-value="MilkTankerReturnQC"/> 
        		 <set field="layoutSettings.javaScripts[]" value="/milkreceipts/images/milkReciptTankerIssues.js" global="true"/>
        		 <script location="component://procurement/webapp/milkreceipts/WEB-INF/actions/reports/MilkReceiptTankerIssues.groovy"/>
        	</actions>
            <widgets>
                 <decorator-screen name="MilkReceiptsCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<include-menu name="MilkTransferReturnsTabBar" location="component://procurement/widget/milkreceipts/MilkReceiptsMenus.xml"/>
                    	<platform-specific><html><html-template location="component://procurement/webapp/milkreceipts/facility/milkReceiptTankerReturns.ftl"></html-template></html></platform-specific> 
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="MilkTankerReturnGrossWeight">
        <section>
        	<actions>
        		 <set field="titleProperty" value="MILK_RETURNS"/>	
        		 <set field="displayScreen" value="RETURN_GRSWEIGHT"/>
        		 <set field="tabButtonItem" value="MilkTankerReturns"/>
        		 <set field="tabButtonItem2" from-field="parameters.tabButtonItem2" default-value="MilkTankerReturnGrossWeight"/> 
        		 <set field="layoutSettings.javaScripts[]" value="/milkreceipts/images/milkReciptTankerIssues.js" global="true"/>
        		 <script location="component://procurement/webapp/milkreceipts/WEB-INF/actions/reports/MilkReceiptTankerIssues.groovy"/>
        	</actions>
            <widgets>
                 <decorator-screen name="MilkReceiptsCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<include-menu name="MilkTransferReturnsTabBar" location="component://procurement/widget/milkreceipts/MilkReceiptsMenus.xml"/>
                    	<platform-specific><html><html-template location="component://procurement/webapp/milkreceipts/facility/milkReceiptTankerReturns.ftl"></html-template></html></platform-specific> 
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="MilkTankerRetunrAQC">
        <section>
        	<actions>
        		 <set field="titleProperty" value="MILK_RETURNS"/>	
        		 <set field="displayScreen" value="RETURN_AQC"/>
        		 <set field="tabButtonItem" value="MilkTankerReturns"/>
        		 <set field="tabButtonItem2" from-field="parameters.tabButtonItem2" default-value="MilkTankerReturnAQC"/> 
        		 <set field="layoutSettings.javaScripts[]" value="/milkreceipts/images/milkReciptTankerIssues.js" global="true"/>
        		 <script location="component://procurement/webapp/milkreceipts/WEB-INF/actions/reports/MilkReceiptTankerIssues.groovy"/>
        	</actions>
            <widgets>
                 <decorator-screen name="MilkReceiptsCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<include-menu name="MilkTransferReturnsTabBar" location="component://procurement/widget/milkreceipts/MilkReceiptsMenus.xml"/>
                    	<platform-specific><html><html-template location="component://procurement/webapp/milkreceipts/facility/milkReceiptTankerReturns.ftl"></html-template></html></platform-specific> 
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="MilkReturnUnloading">
        <section>
        	<actions>
        		 <set field="titleProperty" value="MILK_RETURNS"/>	
        		 <set field="displayScreen" value="RETURN_UNLOAD"/>
        		 <set field="tabButtonItem" value="MilkTankerReturns"/>
        		 <set field="tabButtonItem2" from-field="parameters.tabButtonItem2" default-value="MilkReturnUnloading"/> 
        		 <set field="layoutSettings.javaScripts[]" value="/milkreceipts/images/milkReciptTankerIssues.js" global="true"/>
        		 <script location="component://procurement/webapp/milkreceipts/WEB-INF/actions/reports/MilkReceiptTankerIssues.groovy"/>
        	</actions>
            <widgets>
                 <decorator-screen name="MilkReceiptsCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<include-menu name="MilkTransferReturnsTabBar" location="component://procurement/widget/milkreceipts/MilkReceiptsMenus.xml"/>
                    	<platform-specific><html><html-template location="component://procurement/webapp/milkreceipts/facility/milkReceiptTankerReturns.ftl"></html-template></html></platform-specific> 
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="MilkReturnCIP">
        <section>
        	<actions>
        		 <set field="titleProperty" value="MILK_RETURNS"/>	
        		 <set field="displayScreen" value="RETURN_CIP"/>
        		 <set field="tabButtonItem" value="MilkTankerReturns"/>
        		 <set field="tabButtonItem2" from-field="parameters.tabButtonItem2" default-value="MilkReturnCIP"/> 
        		 <set field="layoutSettings.javaScripts[]" value="/milkreceipts/images/milkReciptTankerIssues.js" global="true"/>
        		 <script location="component://procurement/webapp/milkreceipts/WEB-INF/actions/reports/MilkReceiptTankerIssues.groovy"/>
        	</actions>
            <widgets>
                 <decorator-screen name="MilkReceiptsCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<include-menu name="MilkTransferReturnsTabBar" location="component://procurement/widget/milkreceipts/MilkReceiptsMenus.xml"/>
                    	<platform-specific><html><html-template location="component://procurement/webapp/milkreceipts/facility/milkReceiptTankerReturns.ftl"></html-template></html></platform-specific> 
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="MilkTankerReturnTareWeight">
        <section>
        	<actions>
        		 <set field="titleProperty" value="MILK_RETURNS"/>	
        		 <set field="displayScreen" value="RETURN_TARWEIGHT"/>
        		 <set field="tabButtonItem" value="MilkTankerReturns"/>
        		 <set field="tabButtonItem2" from-field="parameters.tabButtonItem2" default-value="MilkTankerReturnTareWeight"/> 
        		 <set field="layoutSettings.javaScripts[]" value="/milkreceipts/images/milkReciptTankerIssues.js" global="true"/>
        		 <script location="component://procurement/webapp/milkreceipts/WEB-INF/actions/reports/MilkReceiptTankerIssues.groovy"/>
        	</actions>
            <widgets>
                 <decorator-screen name="MilkReceiptsCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    	<include-menu name="MilkTransferReturnsTabBar" location="component://procurement/widget/milkreceipts/MilkReceiptsMenus.xml"/>
                    	<platform-specific><html><html-template location="component://procurement/webapp/milkreceipts/facility/milkReceiptTankerReturns.ftl"></html-template></html></platform-specific> 
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>
    <screen name="CreateNewTanker">
    	<section>
    		<actions>
    			<set field="titleProperty" value="CREATE NEW TANKER"/>	
        		 <set field="tabButtonItem" value="findTanker"/>
        		 <set field="tabButtonItem2" value="CreateNewTanker"/>
        		 <script location="component://procurement/webapp/milkreceipts/WEB-INF/actions/facility/CreateNewTanker.groovy"/>
    		</actions>
    		<widgets>
    			<decorator-screen name="MilkReceiptsCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    <include-menu name="findTankerTabBar" location="component://procurement/widget/milkreceipts/MilkReceiptsMenus.xml"/>
                  	 <platform-specific><html><html-template location="component://procurement/webapp/milkreceipts/facility/CreateNewTanker.ftl"></html-template></html></platform-specific>
                    </decorator-section>
                </decorator-screen>
    		</widgets>
    	</section>
    </screen>
    <screen name="findTanker">
    	<section>
    		<actions>
    			<set field="titleProperty" value="FIND TANKER"/>	
        		 <set field="tabButtonItem" value="findTanker"/>
        		 <set field="tabButtonItem2" value="findTanker"/>
        		 <set field="displayScreen" value="FINDTANKER"/>
        		 <script location="component://procurement/webapp/milkreceipts/WEB-INF/actions/reports/MilkReceiptEntry.groovy"/>
        		 <script location="component://procurement/webapp/milkreceipts/WEB-INF/actions/reports/FindVehicleRate.groovy"/>
        		  <script location="component://procurement/webapp/milkreceipts/WEB-INF/actions/facility/CreateNewTanker.groovy"/>
    		</actions>
    		<widgets>
    			<decorator-screen name="MilkReceiptsCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    <include-menu name="findTankerTabBar" location="component://procurement/widget/milkreceipts/MilkReceiptsMenus.xml"/>
                  		 <platform-specific><html><html-template location="component://procurement/webapp/milkreceipts/facility/FindVehicleRate.ftl"></html-template></html></platform-specific>
                  	<screenlet title="Search Results">
						<include-form location="component://procurement/widget/milkreceipts/MilkReceiptsForms.xml" name="FindVehicleRate"/>                  	
                  	</screenlet>
                    </decorator-section>
                </decorator-screen>
    		</widgets>
    	</section>
    </screen>
  </screens>
  
  
  
 